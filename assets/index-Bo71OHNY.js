(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function Ad(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var tu={exports:{}},so={},nu={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var es=Symbol.for("react.element"),Md=Symbol.for("react.portal"),Ld=Symbol.for("react.fragment"),Dd=Symbol.for("react.strict_mode"),_d=Symbol.for("react.profiler"),Od=Symbol.for("react.provider"),Wd=Symbol.for("react.context"),Bd=Symbol.for("react.forward_ref"),Fd=Symbol.for("react.suspense"),$d=Symbol.for("react.memo"),Hd=Symbol.for("react.lazy"),Ua=Symbol.iterator;function Ud(e){return e===null||typeof e!="object"?null:(e=Ua&&e[Ua]||e["@@iterator"],typeof e=="function"?e:null)}var ru={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},su=Object.assign,ou={};function fr(e,t,n){this.props=e,this.context=t,this.refs=ou,this.updater=n||ru}fr.prototype.isReactComponent={};fr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};fr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function iu(){}iu.prototype=fr.prototype;function Vi(e,t,n){this.props=e,this.context=t,this.refs=ou,this.updater=n||ru}var Ki=Vi.prototype=new iu;Ki.constructor=Vi;su(Ki,fr.prototype);Ki.isPureReactComponent=!0;var Ga=Array.isArray,au=Object.prototype.hasOwnProperty,Qi={current:null},lu={key:!0,ref:!0,__self:!0,__source:!0};function uu(e,t,n){var r,s={},o=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(o=""+t.key),t)au.call(t,r)&&!lu.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:es,type:e,key:o,ref:a,props:s,_owner:Qi.current}}function Gd(e,t){return{$$typeof:es,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function qi(e){return typeof e=="object"&&e!==null&&e.$$typeof===es}function Yd(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ya=/\/+/g;function wo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Yd(""+e.key):t.toString(36)}function Ss(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case es:case Md:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+wo(a,0):r,Ga(s)?(n="",e!=null&&(n=e.replace(Ya,"$&/")+"/"),Ss(s,t,n,"",function(d){return d})):s!=null&&(qi(s)&&(s=Gd(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Ya,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",Ga(e))for(var l=0;l<e.length;l++){o=e[l];var c=r+wo(o,l);a+=Ss(o,t,n,c,s)}else if(c=Ud(e),typeof c=="function")for(e=c.call(e),l=0;!(o=e.next()).done;)o=o.value,c=r+wo(o,l++),a+=Ss(o,t,n,c,s);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function os(e,t,n){if(e==null)return e;var r=[],s=0;return Ss(e,r,"","",function(o){return t.call(n,o,s++)}),r}function Vd(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var at={current:null},ws={transition:null},Kd={ReactCurrentDispatcher:at,ReactCurrentBatchConfig:ws,ReactCurrentOwner:Qi};function cu(){throw Error("act(...) is not supported in production builds of React.")}ke.Children={map:os,forEach:function(e,t,n){os(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return os(e,function(){t++}),t},toArray:function(e){return os(e,function(t){return t})||[]},only:function(e){if(!qi(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ke.Component=fr;ke.Fragment=Ld;ke.Profiler=_d;ke.PureComponent=Vi;ke.StrictMode=Dd;ke.Suspense=Fd;ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kd;ke.act=cu;ke.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=su({},e.props),s=e.key,o=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,a=Qi.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)au.call(t,c)&&!lu.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:es,type:e.type,key:s,ref:o,props:r,_owner:a}};ke.createContext=function(e){return e={$$typeof:Wd,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Od,_context:e},e.Consumer=e};ke.createElement=uu;ke.createFactory=function(e){var t=uu.bind(null,e);return t.type=e,t};ke.createRef=function(){return{current:null}};ke.forwardRef=function(e){return{$$typeof:Bd,render:e}};ke.isValidElement=qi;ke.lazy=function(e){return{$$typeof:Hd,_payload:{_status:-1,_result:e},_init:Vd}};ke.memo=function(e,t){return{$$typeof:$d,type:e,compare:t===void 0?null:t}};ke.startTransition=function(e){var t=ws.transition;ws.transition={};try{e()}finally{ws.transition=t}};ke.unstable_act=cu;ke.useCallback=function(e,t){return at.current.useCallback(e,t)};ke.useContext=function(e){return at.current.useContext(e)};ke.useDebugValue=function(){};ke.useDeferredValue=function(e){return at.current.useDeferredValue(e)};ke.useEffect=function(e,t){return at.current.useEffect(e,t)};ke.useId=function(){return at.current.useId()};ke.useImperativeHandle=function(e,t,n){return at.current.useImperativeHandle(e,t,n)};ke.useInsertionEffect=function(e,t){return at.current.useInsertionEffect(e,t)};ke.useLayoutEffect=function(e,t){return at.current.useLayoutEffect(e,t)};ke.useMemo=function(e,t){return at.current.useMemo(e,t)};ke.useReducer=function(e,t,n){return at.current.useReducer(e,t,n)};ke.useRef=function(e){return at.current.useRef(e)};ke.useState=function(e){return at.current.useState(e)};ke.useSyncExternalStore=function(e,t,n){return at.current.useSyncExternalStore(e,t,n)};ke.useTransition=function(){return at.current.useTransition()};ke.version="18.3.1";nu.exports=ke;var T=nu.exports;const du=Ad(T);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qd=T,qd=Symbol.for("react.element"),Jd=Symbol.for("react.fragment"),Xd=Object.prototype.hasOwnProperty,Zd=Qd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ef={key:!0,ref:!0,__self:!0,__source:!0};function fu(e,t,n){var r,s={},o=null,a=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)Xd.call(t,r)&&!ef.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:qd,type:e,key:o,ref:a,props:s,_owner:Zd.current}}so.Fragment=Jd;so.jsx=fu;so.jsxs=fu;tu.exports=so;var i=tu.exports,Qo={},pu={exports:{}},xt={},mu={exports:{}},gu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,$){var V=A.length;A.push($);e:for(;0<V;){var ye=V-1>>>1,fe=A[ye];if(0<s(fe,$))A[ye]=$,A[V]=fe,V=ye;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var $=A[0],V=A.pop();if(V!==$){A[0]=V;e:for(var ye=0,fe=A.length,Pe=fe>>>1;ye<Pe;){var $e=2*(ye+1)-1,re=A[$e],Ie=$e+1,Ne=A[Ie];if(0>s(re,V))Ie<fe&&0>s(Ne,re)?(A[ye]=Ne,A[Ie]=V,ye=Ie):(A[ye]=re,A[$e]=V,ye=$e);else if(Ie<fe&&0>s(Ne,V))A[ye]=Ne,A[Ie]=V,ye=Ie;else break e}}return $}function s(A,$){var V=A.sortIndex-$.sortIndex;return V!==0?V:A.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],d=[],x=1,v=null,p=3,b=!1,g=!1,w=!1,K=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,u=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f(A){for(var $=n(d);$!==null;){if($.callback===null)r(d);else if($.startTime<=A)r(d),$.sortIndex=$.expirationTime,t(c,$);else break;$=n(d)}}function y(A){if(w=!1,f(A),!g)if(n(c)!==null)g=!0,xe(z);else{var $=n(d);$!==null&&de(y,$.startTime-A)}}function z(A,$){g=!1,w&&(w=!1,m(L),L=-1),b=!0;var V=p;try{for(f($),v=n(c);v!==null&&(!(v.expirationTime>$)||A&&!ee());){var ye=v.callback;if(typeof ye=="function"){v.callback=null,p=v.priorityLevel;var fe=ye(v.expirationTime<=$);$=e.unstable_now(),typeof fe=="function"?v.callback=fe:v===n(c)&&r(c),f($)}else r(c);v=n(c)}if(v!==null)var Pe=!0;else{var $e=n(d);$e!==null&&de(y,$e.startTime-$),Pe=!1}return Pe}finally{v=null,p=V,b=!1}}var C=!1,R=null,L=-1,Z=5,Y=-1;function ee(){return!(e.unstable_now()-Y<Z)}function _(){if(R!==null){var A=e.unstable_now();Y=A;var $=!0;try{$=R(!0,A)}finally{$?O():(C=!1,R=null)}}else C=!1}var O;if(typeof u=="function")O=function(){u(_)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,te=J.port2;J.port1.onmessage=_,O=function(){te.postMessage(null)}}else O=function(){K(_,0)};function xe(A){R=A,C||(C=!0,O())}function de(A,$){L=K(function(){A(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){g||b||(g=!0,xe(z))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Z=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(A){switch(p){case 1:case 2:case 3:var $=3;break;default:$=p}var V=p;p=$;try{return A()}finally{p=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,$){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var V=p;p=A;try{return $()}finally{p=V}},e.unstable_scheduleCallback=function(A,$,V){var ye=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?ye+V:ye):V=ye,A){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=V+fe,A={id:x++,callback:$,priorityLevel:A,startTime:V,expirationTime:fe,sortIndex:-1},V>ye?(A.sortIndex=V,t(d,A),n(c)===null&&A===n(d)&&(w?(m(L),L=-1):w=!0,de(y,V-ye))):(A.sortIndex=fe,t(c,A),g||b||(g=!0,xe(z))),A},e.unstable_shouldYield=ee,e.unstable_wrapCallback=function(A){var $=p;return function(){var V=p;p=$;try{return A.apply(this,arguments)}finally{p=V}}}})(gu);mu.exports=gu;var tf=mu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nf=T,vt=tf;function B(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hu=new Set,_r={};function Dn(e,t){or(e,t),or(e+"Capture",t)}function or(e,t){for(_r[e]=t,e=0;e<t.length;e++)hu.add(t[e])}var Qt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qo=Object.prototype.hasOwnProperty,rf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Va={},Ka={};function sf(e){return qo.call(Ka,e)?!0:qo.call(Va,e)?!1:rf.test(e)?Ka[e]=!0:(Va[e]=!0,!1)}function of(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function af(e,t,n,r){if(t===null||typeof t>"u"||of(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function lt(e,t,n,r,s,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var Xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Xe[e]=new lt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Xe[t]=new lt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Xe[e]=new lt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Xe[e]=new lt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Xe[e]=new lt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Xe[e]=new lt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Xe[e]=new lt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Xe[e]=new lt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Xe[e]=new lt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ji=/[\-:]([a-z])/g;function Xi(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ji,Xi);Xe[t]=new lt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ji,Xi);Xe[t]=new lt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ji,Xi);Xe[t]=new lt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Xe[e]=new lt(e,1,!1,e.toLowerCase(),null,!1,!1)});Xe.xlinkHref=new lt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Xe[e]=new lt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Zi(e,t,n,r){var s=Xe.hasOwnProperty(t)?Xe[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(af(t,n,s,r)&&(n=null),r||s===null?sf(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Zt=nf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,is=Symbol.for("react.element"),Bn=Symbol.for("react.portal"),Fn=Symbol.for("react.fragment"),ea=Symbol.for("react.strict_mode"),Jo=Symbol.for("react.profiler"),yu=Symbol.for("react.provider"),vu=Symbol.for("react.context"),ta=Symbol.for("react.forward_ref"),Xo=Symbol.for("react.suspense"),Zo=Symbol.for("react.suspense_list"),na=Symbol.for("react.memo"),nn=Symbol.for("react.lazy"),xu=Symbol.for("react.offscreen"),Qa=Symbol.iterator;function hr(e){return e===null||typeof e!="object"?null:(e=Qa&&e[Qa]||e["@@iterator"],typeof e=="function"?e:null)}var _e=Object.assign,Co;function Cr(e){if(Co===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Co=t&&t[1]||""}return`
`+Co+e}var To=!1;function jo(e,t){if(!e||To)return"";To=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),o=r.stack.split(`
`),a=s.length-1,l=o.length-1;1<=a&&0<=l&&s[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==o[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{To=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Cr(e):""}function lf(e){switch(e.tag){case 5:return Cr(e.type);case 16:return Cr("Lazy");case 13:return Cr("Suspense");case 19:return Cr("SuspenseList");case 0:case 2:case 15:return e=jo(e.type,!1),e;case 11:return e=jo(e.type.render,!1),e;case 1:return e=jo(e.type,!0),e;default:return""}}function ei(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Fn:return"Fragment";case Bn:return"Portal";case Jo:return"Profiler";case ea:return"StrictMode";case Xo:return"Suspense";case Zo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case vu:return(e.displayName||"Context")+".Consumer";case yu:return(e._context.displayName||"Context")+".Provider";case ta:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case na:return t=e.displayName||null,t!==null?t:ei(e.type)||"Memo";case nn:t=e._payload,e=e._init;try{return ei(e(t))}catch{}}return null}function uf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ei(t);case 8:return t===ea?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function yn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ku(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function cf(e){var t=ku(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function as(e){e._valueTracker||(e._valueTracker=cf(e))}function bu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ku(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ms(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ti(e,t){var n=t.checked;return _e({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function qa(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=yn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Su(e,t){t=t.checked,t!=null&&Zi(e,"checked",t,!1)}function ni(e,t){Su(e,t);var n=yn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ri(e,t.type,n):t.hasOwnProperty("defaultValue")&&ri(e,t.type,yn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ja(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ri(e,t,n){(t!=="number"||Ms(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Tr=Array.isArray;function Zn(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+yn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function si(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(B(91));return _e({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Xa(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(B(92));if(Tr(n)){if(1<n.length)throw Error(B(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:yn(n)}}function wu(e,t){var n=yn(t.value),r=yn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Za(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Cu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oi(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Cu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ls,Tu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ls=ls||document.createElement("div"),ls.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ls.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Or(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Nr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},df=["Webkit","ms","Moz","O"];Object.keys(Nr).forEach(function(e){df.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Nr[t]=Nr[e]})});function ju(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Nr.hasOwnProperty(e)&&Nr[e]?(""+t).trim():t+"px"}function Iu(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=ju(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var ff=_e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ii(e,t){if(t){if(ff[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(B(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(B(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(B(61))}if(t.style!=null&&typeof t.style!="object")throw Error(B(62))}}function ai(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var li=null;function ra(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ui=null,er=null,tr=null;function el(e){if(e=rs(e)){if(typeof ui!="function")throw Error(B(280));var t=e.stateNode;t&&(t=uo(t),ui(e.stateNode,e.type,t))}}function Nu(e){er?tr?tr.push(e):tr=[e]:er=e}function Eu(){if(er){var e=er,t=tr;if(tr=er=null,el(e),t)for(e=0;e<t.length;e++)el(t[e])}}function Ru(e,t){return e(t)}function zu(){}var Io=!1;function Pu(e,t,n){if(Io)return e(t,n);Io=!0;try{return Ru(e,t,n)}finally{Io=!1,(er!==null||tr!==null)&&(zu(),Eu())}}function Wr(e,t){var n=e.stateNode;if(n===null)return null;var r=uo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(B(231,t,typeof n));return n}var ci=!1;if(Qt)try{var yr={};Object.defineProperty(yr,"passive",{get:function(){ci=!0}}),window.addEventListener("test",yr,yr),window.removeEventListener("test",yr,yr)}catch{ci=!1}function pf(e,t,n,r,s,o,a,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(x){this.onError(x)}}var Er=!1,Ls=null,Ds=!1,di=null,mf={onError:function(e){Er=!0,Ls=e}};function gf(e,t,n,r,s,o,a,l,c){Er=!1,Ls=null,pf.apply(mf,arguments)}function hf(e,t,n,r,s,o,a,l,c){if(gf.apply(this,arguments),Er){if(Er){var d=Ls;Er=!1,Ls=null}else throw Error(B(198));Ds||(Ds=!0,di=d)}}function _n(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Au(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function tl(e){if(_n(e)!==e)throw Error(B(188))}function yf(e){var t=e.alternate;if(!t){if(t=_n(e),t===null)throw Error(B(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return tl(s),e;if(o===r)return tl(s),t;o=o.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=o;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=o;break}if(l===r){a=!0,r=s,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=s;break}if(l===r){a=!0,r=o,n=s;break}l=l.sibling}if(!a)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?e:t}function Mu(e){return e=yf(e),e!==null?Lu(e):null}function Lu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Lu(e);if(t!==null)return t;e=e.sibling}return null}var Du=vt.unstable_scheduleCallback,nl=vt.unstable_cancelCallback,vf=vt.unstable_shouldYield,xf=vt.unstable_requestPaint,We=vt.unstable_now,kf=vt.unstable_getCurrentPriorityLevel,sa=vt.unstable_ImmediatePriority,_u=vt.unstable_UserBlockingPriority,_s=vt.unstable_NormalPriority,bf=vt.unstable_LowPriority,Ou=vt.unstable_IdlePriority,oo=null,Ft=null;function Sf(e){if(Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(oo,e,void 0,(e.current.flags&128)===128)}catch{}}var Lt=Math.clz32?Math.clz32:Tf,wf=Math.log,Cf=Math.LN2;function Tf(e){return e>>>=0,e===0?32:31-(wf(e)/Cf|0)|0}var us=64,cs=4194304;function jr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Os(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,o=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=jr(l):(o&=a,o!==0&&(r=jr(o)))}else a=n&~s,a!==0?r=jr(a):o!==0&&(r=jr(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,o=t&-t,s>=o||s===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Lt(t),s=1<<n,r|=e[n],t&=~s;return r}function jf(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function If(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-Lt(o),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=jf(l,t)):c<=t&&(e.expiredLanes|=l),o&=~l}}function fi(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Wu(){var e=us;return us<<=1,!(us&4194240)&&(us=64),e}function No(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ts(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Lt(t),e[t]=n}function Nf(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Lt(n),o=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~o}}function oa(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Lt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Te=0;function Bu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Fu,ia,$u,Hu,Uu,pi=!1,ds=[],un=null,cn=null,dn=null,Br=new Map,Fr=new Map,sn=[],Ef="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rl(e,t){switch(e){case"focusin":case"focusout":un=null;break;case"dragenter":case"dragleave":cn=null;break;case"mouseover":case"mouseout":dn=null;break;case"pointerover":case"pointerout":Br.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fr.delete(t.pointerId)}}function vr(e,t,n,r,s,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},t!==null&&(t=rs(t),t!==null&&ia(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Rf(e,t,n,r,s){switch(t){case"focusin":return un=vr(un,e,t,n,r,s),!0;case"dragenter":return cn=vr(cn,e,t,n,r,s),!0;case"mouseover":return dn=vr(dn,e,t,n,r,s),!0;case"pointerover":var o=s.pointerId;return Br.set(o,vr(Br.get(o)||null,e,t,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,Fr.set(o,vr(Fr.get(o)||null,e,t,n,r,s)),!0}return!1}function Gu(e){var t=jn(e.target);if(t!==null){var n=_n(t);if(n!==null){if(t=n.tag,t===13){if(t=Au(n),t!==null){e.blockedOn=t,Uu(e.priority,function(){$u(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Cs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=mi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);li=r,n.target.dispatchEvent(r),li=null}else return t=rs(n),t!==null&&ia(t),e.blockedOn=n,!1;t.shift()}return!0}function sl(e,t,n){Cs(e)&&n.delete(t)}function zf(){pi=!1,un!==null&&Cs(un)&&(un=null),cn!==null&&Cs(cn)&&(cn=null),dn!==null&&Cs(dn)&&(dn=null),Br.forEach(sl),Fr.forEach(sl)}function xr(e,t){e.blockedOn===t&&(e.blockedOn=null,pi||(pi=!0,vt.unstable_scheduleCallback(vt.unstable_NormalPriority,zf)))}function $r(e){function t(s){return xr(s,e)}if(0<ds.length){xr(ds[0],e);for(var n=1;n<ds.length;n++){var r=ds[n];r.blockedOn===e&&(r.blockedOn=null)}}for(un!==null&&xr(un,e),cn!==null&&xr(cn,e),dn!==null&&xr(dn,e),Br.forEach(t),Fr.forEach(t),n=0;n<sn.length;n++)r=sn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<sn.length&&(n=sn[0],n.blockedOn===null);)Gu(n),n.blockedOn===null&&sn.shift()}var nr=Zt.ReactCurrentBatchConfig,Ws=!0;function Pf(e,t,n,r){var s=Te,o=nr.transition;nr.transition=null;try{Te=1,aa(e,t,n,r)}finally{Te=s,nr.transition=o}}function Af(e,t,n,r){var s=Te,o=nr.transition;nr.transition=null;try{Te=4,aa(e,t,n,r)}finally{Te=s,nr.transition=o}}function aa(e,t,n,r){if(Ws){var s=mi(e,t,n,r);if(s===null)Oo(e,t,r,Bs,n),rl(e,r);else if(Rf(s,e,t,n,r))r.stopPropagation();else if(rl(e,r),t&4&&-1<Ef.indexOf(e)){for(;s!==null;){var o=rs(s);if(o!==null&&Fu(o),o=mi(e,t,n,r),o===null&&Oo(e,t,r,Bs,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else Oo(e,t,r,null,n)}}var Bs=null;function mi(e,t,n,r){if(Bs=null,e=ra(r),e=jn(e),e!==null)if(t=_n(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Au(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Bs=e,null}function Yu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kf()){case sa:return 1;case _u:return 4;case _s:case bf:return 16;case Ou:return 536870912;default:return 16}default:return 16}}var an=null,la=null,Ts=null;function Vu(){if(Ts)return Ts;var e,t=la,n=t.length,r,s="value"in an?an.value:an.textContent,o=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[o-r];r++);return Ts=s.slice(e,1<r?1-r:void 0)}function js(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function fs(){return!0}function ol(){return!1}function kt(e){function t(n,r,s,o,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?fs:ol,this.isPropagationStopped=ol,this}return _e(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fs)},persist:function(){},isPersistent:fs}),t}var pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ua=kt(pr),ns=_e({},pr,{view:0,detail:0}),Mf=kt(ns),Eo,Ro,kr,io=_e({},ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ca,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==kr&&(kr&&e.type==="mousemove"?(Eo=e.screenX-kr.screenX,Ro=e.screenY-kr.screenY):Ro=Eo=0,kr=e),Eo)},movementY:function(e){return"movementY"in e?e.movementY:Ro}}),il=kt(io),Lf=_e({},io,{dataTransfer:0}),Df=kt(Lf),_f=_e({},ns,{relatedTarget:0}),zo=kt(_f),Of=_e({},pr,{animationName:0,elapsedTime:0,pseudoElement:0}),Wf=kt(Of),Bf=_e({},pr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ff=kt(Bf),$f=_e({},pr,{data:0}),al=kt($f),Hf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Uf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Gf[e])?!!t[e]:!1}function ca(){return Yf}var Vf=_e({},ns,{key:function(e){if(e.key){var t=Hf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=js(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Uf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ca,charCode:function(e){return e.type==="keypress"?js(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?js(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Kf=kt(Vf),Qf=_e({},io,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ll=kt(Qf),qf=_e({},ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ca}),Jf=kt(qf),Xf=_e({},pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zf=kt(Xf),ep=_e({},io,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),tp=kt(ep),np=[9,13,27,32],da=Qt&&"CompositionEvent"in window,Rr=null;Qt&&"documentMode"in document&&(Rr=document.documentMode);var rp=Qt&&"TextEvent"in window&&!Rr,Ku=Qt&&(!da||Rr&&8<Rr&&11>=Rr),ul=" ",cl=!1;function Qu(e,t){switch(e){case"keyup":return np.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $n=!1;function sp(e,t){switch(e){case"compositionend":return qu(t);case"keypress":return t.which!==32?null:(cl=!0,ul);case"textInput":return e=t.data,e===ul&&cl?null:e;default:return null}}function op(e,t){if($n)return e==="compositionend"||!da&&Qu(e,t)?(e=Vu(),Ts=la=an=null,$n=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ku&&t.locale!=="ko"?null:t.data;default:return null}}var ip={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ip[e.type]:t==="textarea"}function Ju(e,t,n,r){Nu(r),t=Fs(t,"onChange"),0<t.length&&(n=new ua("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var zr=null,Hr=null;function ap(e){lc(e,0)}function ao(e){var t=Gn(e);if(bu(t))return e}function lp(e,t){if(e==="change")return t}var Xu=!1;if(Qt){var Po;if(Qt){var Ao="oninput"in document;if(!Ao){var fl=document.createElement("div");fl.setAttribute("oninput","return;"),Ao=typeof fl.oninput=="function"}Po=Ao}else Po=!1;Xu=Po&&(!document.documentMode||9<document.documentMode)}function pl(){zr&&(zr.detachEvent("onpropertychange",Zu),Hr=zr=null)}function Zu(e){if(e.propertyName==="value"&&ao(Hr)){var t=[];Ju(t,Hr,e,ra(e)),Pu(ap,t)}}function up(e,t,n){e==="focusin"?(pl(),zr=t,Hr=n,zr.attachEvent("onpropertychange",Zu)):e==="focusout"&&pl()}function cp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ao(Hr)}function dp(e,t){if(e==="click")return ao(t)}function fp(e,t){if(e==="input"||e==="change")return ao(t)}function pp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _t=typeof Object.is=="function"?Object.is:pp;function Ur(e,t){if(_t(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!qo.call(t,s)||!_t(e[s],t[s]))return!1}return!0}function ml(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gl(e,t){var n=ml(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ml(n)}}function ec(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ec(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function tc(){for(var e=window,t=Ms();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ms(e.document)}return t}function fa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function mp(e){var t=tc(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ec(n.ownerDocument.documentElement,n)){if(r!==null&&fa(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!e.extend&&o>r&&(s=r,r=o,o=s),s=gl(n,o);var a=gl(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gp=Qt&&"documentMode"in document&&11>=document.documentMode,Hn=null,gi=null,Pr=null,hi=!1;function hl(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;hi||Hn==null||Hn!==Ms(r)||(r=Hn,"selectionStart"in r&&fa(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Pr&&Ur(Pr,r)||(Pr=r,r=Fs(gi,"onSelect"),0<r.length&&(t=new ua("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Hn)))}function ps(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Un={animationend:ps("Animation","AnimationEnd"),animationiteration:ps("Animation","AnimationIteration"),animationstart:ps("Animation","AnimationStart"),transitionend:ps("Transition","TransitionEnd")},Mo={},nc={};Qt&&(nc=document.createElement("div").style,"AnimationEvent"in window||(delete Un.animationend.animation,delete Un.animationiteration.animation,delete Un.animationstart.animation),"TransitionEvent"in window||delete Un.transitionend.transition);function lo(e){if(Mo[e])return Mo[e];if(!Un[e])return e;var t=Un[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in nc)return Mo[e]=t[n];return e}var rc=lo("animationend"),sc=lo("animationiteration"),oc=lo("animationstart"),ic=lo("transitionend"),ac=new Map,yl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xn(e,t){ac.set(e,t),Dn(t,[e])}for(var Lo=0;Lo<yl.length;Lo++){var Do=yl[Lo],hp=Do.toLowerCase(),yp=Do[0].toUpperCase()+Do.slice(1);xn(hp,"on"+yp)}xn(rc,"onAnimationEnd");xn(sc,"onAnimationIteration");xn(oc,"onAnimationStart");xn("dblclick","onDoubleClick");xn("focusin","onFocus");xn("focusout","onBlur");xn(ic,"onTransitionEnd");or("onMouseEnter",["mouseout","mouseover"]);or("onMouseLeave",["mouseout","mouseover"]);or("onPointerEnter",["pointerout","pointerover"]);or("onPointerLeave",["pointerout","pointerover"]);Dn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ir="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vp=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ir));function vl(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,hf(r,t,void 0,e),e.currentTarget=null}function lc(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==o&&s.isPropagationStopped())break e;vl(s,l,d),o=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,d=l.currentTarget,l=l.listener,c!==o&&s.isPropagationStopped())break e;vl(s,l,d),o=c}}}if(Ds)throw e=di,Ds=!1,di=null,e}function Re(e,t){var n=t[bi];n===void 0&&(n=t[bi]=new Set);var r=e+"__bubble";n.has(r)||(uc(t,e,2,!1),n.add(r))}function _o(e,t,n){var r=0;t&&(r|=4),uc(n,e,r,t)}var ms="_reactListening"+Math.random().toString(36).slice(2);function Gr(e){if(!e[ms]){e[ms]=!0,hu.forEach(function(n){n!=="selectionchange"&&(vp.has(n)||_o(n,!1,e),_o(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ms]||(t[ms]=!0,_o("selectionchange",!1,t))}}function uc(e,t,n,r){switch(Yu(t)){case 1:var s=Pf;break;case 4:s=Af;break;default:s=aa}n=s.bind(null,t,n,e),s=void 0,!ci||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Oo(e,t,n,r,s){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=jn(l),a===null)return;if(c=a.tag,c===5||c===6){r=o=a;continue e}l=l.parentNode}}r=r.return}Pu(function(){var d=o,x=ra(n),v=[];e:{var p=ac.get(e);if(p!==void 0){var b=ua,g=e;switch(e){case"keypress":if(js(n)===0)break e;case"keydown":case"keyup":b=Kf;break;case"focusin":g="focus",b=zo;break;case"focusout":g="blur",b=zo;break;case"beforeblur":case"afterblur":b=zo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=il;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=Df;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=Jf;break;case rc:case sc:case oc:b=Wf;break;case ic:b=Zf;break;case"scroll":b=Mf;break;case"wheel":b=tp;break;case"copy":case"cut":case"paste":b=Ff;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=ll}var w=(t&4)!==0,K=!w&&e==="scroll",m=w?p!==null?p+"Capture":null:p;w=[];for(var u=d,f;u!==null;){f=u;var y=f.stateNode;if(f.tag===5&&y!==null&&(f=y,m!==null&&(y=Wr(u,m),y!=null&&w.push(Yr(u,y,f)))),K)break;u=u.return}0<w.length&&(p=new b(p,g,null,n,x),v.push({event:p,listeners:w}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",b=e==="mouseout"||e==="pointerout",p&&n!==li&&(g=n.relatedTarget||n.fromElement)&&(jn(g)||g[qt]))break e;if((b||p)&&(p=x.window===x?x:(p=x.ownerDocument)?p.defaultView||p.parentWindow:window,b?(g=n.relatedTarget||n.toElement,b=d,g=g?jn(g):null,g!==null&&(K=_n(g),g!==K||g.tag!==5&&g.tag!==6)&&(g=null)):(b=null,g=d),b!==g)){if(w=il,y="onMouseLeave",m="onMouseEnter",u="mouse",(e==="pointerout"||e==="pointerover")&&(w=ll,y="onPointerLeave",m="onPointerEnter",u="pointer"),K=b==null?p:Gn(b),f=g==null?p:Gn(g),p=new w(y,u+"leave",b,n,x),p.target=K,p.relatedTarget=f,y=null,jn(x)===d&&(w=new w(m,u+"enter",g,n,x),w.target=f,w.relatedTarget=K,y=w),K=y,b&&g)t:{for(w=b,m=g,u=0,f=w;f;f=Wn(f))u++;for(f=0,y=m;y;y=Wn(y))f++;for(;0<u-f;)w=Wn(w),u--;for(;0<f-u;)m=Wn(m),f--;for(;u--;){if(w===m||m!==null&&w===m.alternate)break t;w=Wn(w),m=Wn(m)}w=null}else w=null;b!==null&&xl(v,p,b,w,!1),g!==null&&K!==null&&xl(v,K,g,w,!0)}}e:{if(p=d?Gn(d):window,b=p.nodeName&&p.nodeName.toLowerCase(),b==="select"||b==="input"&&p.type==="file")var z=lp;else if(dl(p))if(Xu)z=fp;else{z=cp;var C=up}else(b=p.nodeName)&&b.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(z=dp);if(z&&(z=z(e,d))){Ju(v,z,n,x);break e}C&&C(e,p,d),e==="focusout"&&(C=p._wrapperState)&&C.controlled&&p.type==="number"&&ri(p,"number",p.value)}switch(C=d?Gn(d):window,e){case"focusin":(dl(C)||C.contentEditable==="true")&&(Hn=C,gi=d,Pr=null);break;case"focusout":Pr=gi=Hn=null;break;case"mousedown":hi=!0;break;case"contextmenu":case"mouseup":case"dragend":hi=!1,hl(v,n,x);break;case"selectionchange":if(gp)break;case"keydown":case"keyup":hl(v,n,x)}var R;if(da)e:{switch(e){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else $n?Qu(e,n)&&(L="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(L="onCompositionStart");L&&(Ku&&n.locale!=="ko"&&($n||L!=="onCompositionStart"?L==="onCompositionEnd"&&$n&&(R=Vu()):(an=x,la="value"in an?an.value:an.textContent,$n=!0)),C=Fs(d,L),0<C.length&&(L=new al(L,e,null,n,x),v.push({event:L,listeners:C}),R?L.data=R:(R=qu(n),R!==null&&(L.data=R)))),(R=rp?sp(e,n):op(e,n))&&(d=Fs(d,"onBeforeInput"),0<d.length&&(x=new al("onBeforeInput","beforeinput",null,n,x),v.push({event:x,listeners:d}),x.data=R))}lc(v,t)})}function Yr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fs(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=Wr(e,n),o!=null&&r.unshift(Yr(e,o,s)),o=Wr(e,t),o!=null&&r.push(Yr(e,o,s))),e=e.return}return r}function Wn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function xl(e,t,n,r,s){for(var o=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=Wr(n,o),c!=null&&a.unshift(Yr(n,c,l))):s||(c=Wr(n,o),c!=null&&a.push(Yr(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var xp=/\r\n?/g,kp=/\u0000|\uFFFD/g;function kl(e){return(typeof e=="string"?e:""+e).replace(xp,`
`).replace(kp,"")}function gs(e,t,n){if(t=kl(t),kl(e)!==t&&n)throw Error(B(425))}function $s(){}var yi=null,vi=null;function xi(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ki=typeof setTimeout=="function"?setTimeout:void 0,bp=typeof clearTimeout=="function"?clearTimeout:void 0,bl=typeof Promise=="function"?Promise:void 0,Sp=typeof queueMicrotask=="function"?queueMicrotask:typeof bl<"u"?function(e){return bl.resolve(null).then(e).catch(wp)}:ki;function wp(e){setTimeout(function(){throw e})}function Wo(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),$r(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);$r(t)}function fn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Sl(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var mr=Math.random().toString(36).slice(2),Bt="__reactFiber$"+mr,Vr="__reactProps$"+mr,qt="__reactContainer$"+mr,bi="__reactEvents$"+mr,Cp="__reactListeners$"+mr,Tp="__reactHandles$"+mr;function jn(e){var t=e[Bt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[qt]||n[Bt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Sl(e);e!==null;){if(n=e[Bt])return n;e=Sl(e)}return t}e=n,n=e.parentNode}return null}function rs(e){return e=e[Bt]||e[qt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Gn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(B(33))}function uo(e){return e[Vr]||null}var Si=[],Yn=-1;function kn(e){return{current:e}}function ze(e){0>Yn||(e.current=Si[Yn],Si[Yn]=null,Yn--)}function Ee(e,t){Yn++,Si[Yn]=e.current,e.current=t}var vn={},rt=kn(vn),ft=kn(!1),zn=vn;function ir(e,t){var n=e.type.contextTypes;if(!n)return vn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function pt(e){return e=e.childContextTypes,e!=null}function Hs(){ze(ft),ze(rt)}function wl(e,t,n){if(rt.current!==vn)throw Error(B(168));Ee(rt,t),Ee(ft,n)}function cc(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(B(108,uf(e)||"Unknown",s));return _e({},n,r)}function Us(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||vn,zn=rt.current,Ee(rt,e),Ee(ft,ft.current),!0}function Cl(e,t,n){var r=e.stateNode;if(!r)throw Error(B(169));n?(e=cc(e,t,zn),r.__reactInternalMemoizedMergedChildContext=e,ze(ft),ze(rt),Ee(rt,e)):ze(ft),Ee(ft,n)}var Gt=null,co=!1,Bo=!1;function dc(e){Gt===null?Gt=[e]:Gt.push(e)}function jp(e){co=!0,dc(e)}function bn(){if(!Bo&&Gt!==null){Bo=!0;var e=0,t=Te;try{var n=Gt;for(Te=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Gt=null,co=!1}catch(s){throw Gt!==null&&(Gt=Gt.slice(e+1)),Du(sa,bn),s}finally{Te=t,Bo=!1}}return null}var Vn=[],Kn=0,Gs=null,Ys=0,St=[],wt=0,Pn=null,Yt=1,Vt="";function Cn(e,t){Vn[Kn++]=Ys,Vn[Kn++]=Gs,Gs=e,Ys=t}function fc(e,t,n){St[wt++]=Yt,St[wt++]=Vt,St[wt++]=Pn,Pn=e;var r=Yt;e=Vt;var s=32-Lt(r)-1;r&=~(1<<s),n+=1;var o=32-Lt(t)+s;if(30<o){var a=s-s%5;o=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Yt=1<<32-Lt(t)+s|n<<s|r,Vt=o+e}else Yt=1<<o|n<<s|r,Vt=e}function pa(e){e.return!==null&&(Cn(e,1),fc(e,1,0))}function ma(e){for(;e===Gs;)Gs=Vn[--Kn],Vn[Kn]=null,Ys=Vn[--Kn],Vn[Kn]=null;for(;e===Pn;)Pn=St[--wt],St[wt]=null,Vt=St[--wt],St[wt]=null,Yt=St[--wt],St[wt]=null}var yt=null,ht=null,Me=!1,Mt=null;function pc(e,t){var n=Ct(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Tl(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,yt=e,ht=fn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,yt=e,ht=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Pn!==null?{id:Yt,overflow:Vt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ct(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,yt=e,ht=null,!0):!1;default:return!1}}function wi(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ci(e){if(Me){var t=ht;if(t){var n=t;if(!Tl(e,t)){if(wi(e))throw Error(B(418));t=fn(n.nextSibling);var r=yt;t&&Tl(e,t)?pc(r,n):(e.flags=e.flags&-4097|2,Me=!1,yt=e)}}else{if(wi(e))throw Error(B(418));e.flags=e.flags&-4097|2,Me=!1,yt=e}}}function jl(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;yt=e}function hs(e){if(e!==yt)return!1;if(!Me)return jl(e),Me=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!xi(e.type,e.memoizedProps)),t&&(t=ht)){if(wi(e))throw mc(),Error(B(418));for(;t;)pc(e,t),t=fn(t.nextSibling)}if(jl(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(B(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){ht=fn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}ht=null}}else ht=yt?fn(e.stateNode.nextSibling):null;return!0}function mc(){for(var e=ht;e;)e=fn(e.nextSibling)}function ar(){ht=yt=null,Me=!1}function ga(e){Mt===null?Mt=[e]:Mt.push(e)}var Ip=Zt.ReactCurrentBatchConfig;function br(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,e));var s=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var l=s.refs;a===null?delete l[o]:l[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,e))}return e}function ys(e,t){throw e=Object.prototype.toString.call(t),Error(B(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Il(e){var t=e._init;return t(e._payload)}function gc(e){function t(m,u){if(e){var f=m.deletions;f===null?(m.deletions=[u],m.flags|=16):f.push(u)}}function n(m,u){if(!e)return null;for(;u!==null;)t(m,u),u=u.sibling;return null}function r(m,u){for(m=new Map;u!==null;)u.key!==null?m.set(u.key,u):m.set(u.index,u),u=u.sibling;return m}function s(m,u){return m=hn(m,u),m.index=0,m.sibling=null,m}function o(m,u,f){return m.index=f,e?(f=m.alternate,f!==null?(f=f.index,f<u?(m.flags|=2,u):f):(m.flags|=2,u)):(m.flags|=1048576,u)}function a(m){return e&&m.alternate===null&&(m.flags|=2),m}function l(m,u,f,y){return u===null||u.tag!==6?(u=Vo(f,m.mode,y),u.return=m,u):(u=s(u,f),u.return=m,u)}function c(m,u,f,y){var z=f.type;return z===Fn?x(m,u,f.props.children,y,f.key):u!==null&&(u.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===nn&&Il(z)===u.type)?(y=s(u,f.props),y.ref=br(m,u,f),y.return=m,y):(y=As(f.type,f.key,f.props,null,m.mode,y),y.ref=br(m,u,f),y.return=m,y)}function d(m,u,f,y){return u===null||u.tag!==4||u.stateNode.containerInfo!==f.containerInfo||u.stateNode.implementation!==f.implementation?(u=Ko(f,m.mode,y),u.return=m,u):(u=s(u,f.children||[]),u.return=m,u)}function x(m,u,f,y,z){return u===null||u.tag!==7?(u=Rn(f,m.mode,y,z),u.return=m,u):(u=s(u,f),u.return=m,u)}function v(m,u,f){if(typeof u=="string"&&u!==""||typeof u=="number")return u=Vo(""+u,m.mode,f),u.return=m,u;if(typeof u=="object"&&u!==null){switch(u.$$typeof){case is:return f=As(u.type,u.key,u.props,null,m.mode,f),f.ref=br(m,null,u),f.return=m,f;case Bn:return u=Ko(u,m.mode,f),u.return=m,u;case nn:var y=u._init;return v(m,y(u._payload),f)}if(Tr(u)||hr(u))return u=Rn(u,m.mode,f,null),u.return=m,u;ys(m,u)}return null}function p(m,u,f,y){var z=u!==null?u.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return z!==null?null:l(m,u,""+f,y);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case is:return f.key===z?c(m,u,f,y):null;case Bn:return f.key===z?d(m,u,f,y):null;case nn:return z=f._init,p(m,u,z(f._payload),y)}if(Tr(f)||hr(f))return z!==null?null:x(m,u,f,y,null);ys(m,f)}return null}function b(m,u,f,y,z){if(typeof y=="string"&&y!==""||typeof y=="number")return m=m.get(f)||null,l(u,m,""+y,z);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case is:return m=m.get(y.key===null?f:y.key)||null,c(u,m,y,z);case Bn:return m=m.get(y.key===null?f:y.key)||null,d(u,m,y,z);case nn:var C=y._init;return b(m,u,f,C(y._payload),z)}if(Tr(y)||hr(y))return m=m.get(f)||null,x(u,m,y,z,null);ys(u,y)}return null}function g(m,u,f,y){for(var z=null,C=null,R=u,L=u=0,Z=null;R!==null&&L<f.length;L++){R.index>L?(Z=R,R=null):Z=R.sibling;var Y=p(m,R,f[L],y);if(Y===null){R===null&&(R=Z);break}e&&R&&Y.alternate===null&&t(m,R),u=o(Y,u,L),C===null?z=Y:C.sibling=Y,C=Y,R=Z}if(L===f.length)return n(m,R),Me&&Cn(m,L),z;if(R===null){for(;L<f.length;L++)R=v(m,f[L],y),R!==null&&(u=o(R,u,L),C===null?z=R:C.sibling=R,C=R);return Me&&Cn(m,L),z}for(R=r(m,R);L<f.length;L++)Z=b(R,m,L,f[L],y),Z!==null&&(e&&Z.alternate!==null&&R.delete(Z.key===null?L:Z.key),u=o(Z,u,L),C===null?z=Z:C.sibling=Z,C=Z);return e&&R.forEach(function(ee){return t(m,ee)}),Me&&Cn(m,L),z}function w(m,u,f,y){var z=hr(f);if(typeof z!="function")throw Error(B(150));if(f=z.call(f),f==null)throw Error(B(151));for(var C=z=null,R=u,L=u=0,Z=null,Y=f.next();R!==null&&!Y.done;L++,Y=f.next()){R.index>L?(Z=R,R=null):Z=R.sibling;var ee=p(m,R,Y.value,y);if(ee===null){R===null&&(R=Z);break}e&&R&&ee.alternate===null&&t(m,R),u=o(ee,u,L),C===null?z=ee:C.sibling=ee,C=ee,R=Z}if(Y.done)return n(m,R),Me&&Cn(m,L),z;if(R===null){for(;!Y.done;L++,Y=f.next())Y=v(m,Y.value,y),Y!==null&&(u=o(Y,u,L),C===null?z=Y:C.sibling=Y,C=Y);return Me&&Cn(m,L),z}for(R=r(m,R);!Y.done;L++,Y=f.next())Y=b(R,m,L,Y.value,y),Y!==null&&(e&&Y.alternate!==null&&R.delete(Y.key===null?L:Y.key),u=o(Y,u,L),C===null?z=Y:C.sibling=Y,C=Y);return e&&R.forEach(function(_){return t(m,_)}),Me&&Cn(m,L),z}function K(m,u,f,y){if(typeof f=="object"&&f!==null&&f.type===Fn&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case is:e:{for(var z=f.key,C=u;C!==null;){if(C.key===z){if(z=f.type,z===Fn){if(C.tag===7){n(m,C.sibling),u=s(C,f.props.children),u.return=m,m=u;break e}}else if(C.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===nn&&Il(z)===C.type){n(m,C.sibling),u=s(C,f.props),u.ref=br(m,C,f),u.return=m,m=u;break e}n(m,C);break}else t(m,C);C=C.sibling}f.type===Fn?(u=Rn(f.props.children,m.mode,y,f.key),u.return=m,m=u):(y=As(f.type,f.key,f.props,null,m.mode,y),y.ref=br(m,u,f),y.return=m,m=y)}return a(m);case Bn:e:{for(C=f.key;u!==null;){if(u.key===C)if(u.tag===4&&u.stateNode.containerInfo===f.containerInfo&&u.stateNode.implementation===f.implementation){n(m,u.sibling),u=s(u,f.children||[]),u.return=m,m=u;break e}else{n(m,u);break}else t(m,u);u=u.sibling}u=Ko(f,m.mode,y),u.return=m,m=u}return a(m);case nn:return C=f._init,K(m,u,C(f._payload),y)}if(Tr(f))return g(m,u,f,y);if(hr(f))return w(m,u,f,y);ys(m,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,u!==null&&u.tag===6?(n(m,u.sibling),u=s(u,f),u.return=m,m=u):(n(m,u),u=Vo(f,m.mode,y),u.return=m,m=u),a(m)):n(m,u)}return K}var lr=gc(!0),hc=gc(!1),Vs=kn(null),Ks=null,Qn=null,ha=null;function ya(){ha=Qn=Ks=null}function va(e){var t=Vs.current;ze(Vs),e._currentValue=t}function Ti(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function rr(e,t){Ks=e,ha=Qn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(dt=!0),e.firstContext=null)}function jt(e){var t=e._currentValue;if(ha!==e)if(e={context:e,memoizedValue:t,next:null},Qn===null){if(Ks===null)throw Error(B(308));Qn=e,Ks.dependencies={lanes:0,firstContext:e}}else Qn=Qn.next=e;return t}var In=null;function xa(e){In===null?In=[e]:In.push(e)}function yc(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,xa(t)):(n.next=s.next,s.next=n),t.interleaved=n,Jt(e,r)}function Jt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var rn=!1;function ka(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Kt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function pn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Se&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Jt(e,n)}return s=r.interleaved,s===null?(t.next=t,xa(r)):(t.next=s.next,s.next=t),r.interleaved=t,Jt(e,n)}function Is(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,oa(e,n)}}function Nl(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?s=o=t:o=o.next=t}else s=o=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Qs(e,t,n,r){var s=e.updateQueue;rn=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,a===null?o=d:a.next=d,a=c;var x=e.alternate;x!==null&&(x=x.updateQueue,l=x.lastBaseUpdate,l!==a&&(l===null?x.firstBaseUpdate=d:l.next=d,x.lastBaseUpdate=c))}if(o!==null){var v=s.baseState;a=0,x=d=c=null,l=o;do{var p=l.lane,b=l.eventTime;if((r&p)===p){x!==null&&(x=x.next={eventTime:b,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,w=l;switch(p=t,b=n,w.tag){case 1:if(g=w.payload,typeof g=="function"){v=g.call(b,v,p);break e}v=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=w.payload,p=typeof g=="function"?g.call(b,v,p):g,p==null)break e;v=_e({},v,p);break e;case 2:rn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else b={eventTime:b,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},x===null?(d=x=b,c=v):x=x.next=b,a|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(x===null&&(c=v),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=x,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else o===null&&(s.shared.lanes=0);Mn|=a,e.lanes=a,e.memoizedState=v}}function El(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var ss={},$t=kn(ss),Kr=kn(ss),Qr=kn(ss);function Nn(e){if(e===ss)throw Error(B(174));return e}function ba(e,t){switch(Ee(Qr,t),Ee(Kr,e),Ee($t,ss),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:oi(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=oi(t,e)}ze($t),Ee($t,t)}function ur(){ze($t),ze(Kr),ze(Qr)}function xc(e){Nn(Qr.current);var t=Nn($t.current),n=oi(t,e.type);t!==n&&(Ee(Kr,e),Ee($t,n))}function Sa(e){Kr.current===e&&(ze($t),ze(Kr))}var Le=kn(0);function qs(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fo=[];function wa(){for(var e=0;e<Fo.length;e++)Fo[e]._workInProgressVersionPrimary=null;Fo.length=0}var Ns=Zt.ReactCurrentDispatcher,$o=Zt.ReactCurrentBatchConfig,An=0,De=null,Ue=null,Ve=null,Js=!1,Ar=!1,qr=0,Np=0;function et(){throw Error(B(321))}function Ca(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!_t(e[n],t[n]))return!1;return!0}function Ta(e,t,n,r,s,o){if(An=o,De=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ns.current=e===null||e.memoizedState===null?Pp:Ap,e=n(r,s),Ar){o=0;do{if(Ar=!1,qr=0,25<=o)throw Error(B(301));o+=1,Ve=Ue=null,t.updateQueue=null,Ns.current=Mp,e=n(r,s)}while(Ar)}if(Ns.current=Xs,t=Ue!==null&&Ue.next!==null,An=0,Ve=Ue=De=null,Js=!1,t)throw Error(B(300));return e}function ja(){var e=qr!==0;return qr=0,e}function Wt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ve===null?De.memoizedState=Ve=e:Ve=Ve.next=e,Ve}function It(){if(Ue===null){var e=De.alternate;e=e!==null?e.memoizedState:null}else e=Ue.next;var t=Ve===null?De.memoizedState:Ve.next;if(t!==null)Ve=t,Ue=e;else{if(e===null)throw Error(B(310));Ue=e,e={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},Ve===null?De.memoizedState=Ve=e:Ve=Ve.next=e}return Ve}function Jr(e,t){return typeof t=="function"?t(e):t}function Ho(e){var t=It(),n=t.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=e;var r=Ue,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var l=a=null,c=null,d=o;do{var x=d.lane;if((An&x)===x)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var v={lane:x,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=v,a=r):c=c.next=v,De.lanes|=x,Mn|=x}d=d.next}while(d!==null&&d!==o);c===null?a=r:c.next=l,_t(r,t.memoizedState)||(dt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do o=s.lane,De.lanes|=o,Mn|=o,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Uo(e){var t=It(),n=t.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do o=e(o,a.action),a=a.next;while(a!==s);_t(o,t.memoizedState)||(dt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function kc(){}function bc(e,t){var n=De,r=It(),s=t(),o=!_t(r.memoizedState,s);if(o&&(r.memoizedState=s,dt=!0),r=r.queue,Ia(Cc.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Ve!==null&&Ve.memoizedState.tag&1){if(n.flags|=2048,Xr(9,wc.bind(null,n,r,s,t),void 0,null),Ke===null)throw Error(B(349));An&30||Sc(n,t,s)}return s}function Sc(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function wc(e,t,n,r){t.value=n,t.getSnapshot=r,Tc(t)&&jc(e)}function Cc(e,t,n){return n(function(){Tc(t)&&jc(e)})}function Tc(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!_t(e,n)}catch{return!0}}function jc(e){var t=Jt(e,1);t!==null&&Dt(t,e,1,-1)}function Rl(e){var t=Wt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jr,lastRenderedState:e},t.queue=e,e=e.dispatch=zp.bind(null,De,e),[t.memoizedState,e]}function Xr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=De.updateQueue,t===null?(t={lastEffect:null,stores:null},De.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Ic(){return It().memoizedState}function Es(e,t,n,r){var s=Wt();De.flags|=e,s.memoizedState=Xr(1|t,n,void 0,r===void 0?null:r)}function fo(e,t,n,r){var s=It();r=r===void 0?null:r;var o=void 0;if(Ue!==null){var a=Ue.memoizedState;if(o=a.destroy,r!==null&&Ca(r,a.deps)){s.memoizedState=Xr(t,n,o,r);return}}De.flags|=e,s.memoizedState=Xr(1|t,n,o,r)}function zl(e,t){return Es(8390656,8,e,t)}function Ia(e,t){return fo(2048,8,e,t)}function Nc(e,t){return fo(4,2,e,t)}function Ec(e,t){return fo(4,4,e,t)}function Rc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function zc(e,t,n){return n=n!=null?n.concat([e]):null,fo(4,4,Rc.bind(null,t,e),n)}function Na(){}function Pc(e,t){var n=It();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ca(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ac(e,t){var n=It();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ca(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Mc(e,t,n){return An&21?(_t(n,t)||(n=Wu(),De.lanes|=n,Mn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,dt=!0),e.memoizedState=n)}function Ep(e,t){var n=Te;Te=n!==0&&4>n?n:4,e(!0);var r=$o.transition;$o.transition={};try{e(!1),t()}finally{Te=n,$o.transition=r}}function Lc(){return It().memoizedState}function Rp(e,t,n){var r=gn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Dc(e))_c(t,n);else if(n=yc(e,t,n,r),n!==null){var s=it();Dt(n,e,r,s),Oc(n,t,r)}}function zp(e,t,n){var r=gn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Dc(e))_c(t,s);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var a=t.lastRenderedState,l=o(a,n);if(s.hasEagerState=!0,s.eagerState=l,_t(l,a)){var c=t.interleaved;c===null?(s.next=s,xa(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=yc(e,t,s,r),n!==null&&(s=it(),Dt(n,e,r,s),Oc(n,t,r))}}function Dc(e){var t=e.alternate;return e===De||t!==null&&t===De}function _c(e,t){Ar=Js=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Oc(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,oa(e,n)}}var Xs={readContext:jt,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useInsertionEffect:et,useLayoutEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useMutableSource:et,useSyncExternalStore:et,useId:et,unstable_isNewReconciler:!1},Pp={readContext:jt,useCallback:function(e,t){return Wt().memoizedState=[e,t===void 0?null:t],e},useContext:jt,useEffect:zl,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Es(4194308,4,Rc.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Es(4194308,4,e,t)},useInsertionEffect:function(e,t){return Es(4,2,e,t)},useMemo:function(e,t){var n=Wt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Wt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Rp.bind(null,De,e),[r.memoizedState,e]},useRef:function(e){var t=Wt();return e={current:e},t.memoizedState=e},useState:Rl,useDebugValue:Na,useDeferredValue:function(e){return Wt().memoizedState=e},useTransition:function(){var e=Rl(!1),t=e[0];return e=Ep.bind(null,e[1]),Wt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=De,s=Wt();if(Me){if(n===void 0)throw Error(B(407));n=n()}else{if(n=t(),Ke===null)throw Error(B(349));An&30||Sc(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,zl(Cc.bind(null,r,o,e),[e]),r.flags|=2048,Xr(9,wc.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Wt(),t=Ke.identifierPrefix;if(Me){var n=Vt,r=Yt;n=(r&~(1<<32-Lt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=qr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Np++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ap={readContext:jt,useCallback:Pc,useContext:jt,useEffect:Ia,useImperativeHandle:zc,useInsertionEffect:Nc,useLayoutEffect:Ec,useMemo:Ac,useReducer:Ho,useRef:Ic,useState:function(){return Ho(Jr)},useDebugValue:Na,useDeferredValue:function(e){var t=It();return Mc(t,Ue.memoizedState,e)},useTransition:function(){var e=Ho(Jr)[0],t=It().memoizedState;return[e,t]},useMutableSource:kc,useSyncExternalStore:bc,useId:Lc,unstable_isNewReconciler:!1},Mp={readContext:jt,useCallback:Pc,useContext:jt,useEffect:Ia,useImperativeHandle:zc,useInsertionEffect:Nc,useLayoutEffect:Ec,useMemo:Ac,useReducer:Uo,useRef:Ic,useState:function(){return Uo(Jr)},useDebugValue:Na,useDeferredValue:function(e){var t=It();return Ue===null?t.memoizedState=e:Mc(t,Ue.memoizedState,e)},useTransition:function(){var e=Uo(Jr)[0],t=It().memoizedState;return[e,t]},useMutableSource:kc,useSyncExternalStore:bc,useId:Lc,unstable_isNewReconciler:!1};function Pt(e,t){if(e&&e.defaultProps){t=_e({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ji(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:_e({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var po={isMounted:function(e){return(e=e._reactInternals)?_n(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=it(),s=gn(e),o=Kt(r,s);o.payload=t,n!=null&&(o.callback=n),t=pn(e,o,s),t!==null&&(Dt(t,e,s,r),Is(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=it(),s=gn(e),o=Kt(r,s);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=pn(e,o,s),t!==null&&(Dt(t,e,s,r),Is(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=it(),r=gn(e),s=Kt(n,r);s.tag=2,t!=null&&(s.callback=t),t=pn(e,s,r),t!==null&&(Dt(t,e,r,n),Is(t,e,r))}};function Pl(e,t,n,r,s,o,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,a):t.prototype&&t.prototype.isPureReactComponent?!Ur(n,r)||!Ur(s,o):!0}function Wc(e,t,n){var r=!1,s=vn,o=t.contextType;return typeof o=="object"&&o!==null?o=jt(o):(s=pt(t)?zn:rt.current,r=t.contextTypes,o=(r=r!=null)?ir(e,s):vn),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=po,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=o),t}function Al(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&po.enqueueReplaceState(t,t.state,null)}function Ii(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},ka(e);var o=t.contextType;typeof o=="object"&&o!==null?s.context=jt(o):(o=pt(t)?zn:rt.current,s.context=ir(e,o)),s.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(ji(e,t,o,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&po.enqueueReplaceState(s,s.state,null),Qs(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function cr(e,t){try{var n="",r=t;do n+=lf(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:s,digest:null}}function Go(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ni(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Lp=typeof WeakMap=="function"?WeakMap:Map;function Bc(e,t,n){n=Kt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){eo||(eo=!0,Oi=r),Ni(e,t)},n}function Fc(e,t,n){n=Kt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Ni(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Ni(e,t),typeof r!="function"&&(mn===null?mn=new Set([this]):mn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Ml(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Lp;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Qp.bind(null,e,t,n),t.then(e,e))}function Ll(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Dl(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Kt(-1,1),t.tag=2,pn(n,t,1))),n.lanes|=1),e)}var Dp=Zt.ReactCurrentOwner,dt=!1;function ot(e,t,n,r){t.child=e===null?hc(t,null,n,r):lr(t,e.child,n,r)}function _l(e,t,n,r,s){n=n.render;var o=t.ref;return rr(t,s),r=Ta(e,t,n,r,o,s),n=ja(),e!==null&&!dt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Xt(e,t,s)):(Me&&n&&pa(t),t.flags|=1,ot(e,t,r,s),t.child)}function Ol(e,t,n,r,s){if(e===null){var o=n.type;return typeof o=="function"&&!Da(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,$c(e,t,o,r,s)):(e=As(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&s)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ur,n(a,r)&&e.ref===t.ref)return Xt(e,t,s)}return t.flags|=1,e=hn(o,r),e.ref=t.ref,e.return=t,t.child=e}function $c(e,t,n,r,s){if(e!==null){var o=e.memoizedProps;if(Ur(o,r)&&e.ref===t.ref)if(dt=!1,t.pendingProps=r=o,(e.lanes&s)!==0)e.flags&131072&&(dt=!0);else return t.lanes=e.lanes,Xt(e,t,s)}return Ei(e,t,n,r,s)}function Hc(e,t,n){var r=t.pendingProps,s=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ee(Jn,gt),gt|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ee(Jn,gt),gt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ee(Jn,gt),gt|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ee(Jn,gt),gt|=r;return ot(e,t,s,n),t.child}function Uc(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ei(e,t,n,r,s){var o=pt(n)?zn:rt.current;return o=ir(t,o),rr(t,s),n=Ta(e,t,n,r,o,s),r=ja(),e!==null&&!dt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Xt(e,t,s)):(Me&&r&&pa(t),t.flags|=1,ot(e,t,n,s),t.child)}function Wl(e,t,n,r,s){if(pt(n)){var o=!0;Us(t)}else o=!1;if(rr(t,s),t.stateNode===null)Rs(e,t),Wc(t,n,r),Ii(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=jt(d):(d=pt(n)?zn:rt.current,d=ir(t,d));var x=n.getDerivedStateFromProps,v=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function";v||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==d)&&Al(t,a,r,d),rn=!1;var p=t.memoizedState;a.state=p,Qs(t,r,a,s),c=t.memoizedState,l!==r||p!==c||ft.current||rn?(typeof x=="function"&&(ji(t,n,x,r),c=t.memoizedState),(l=rn||Pl(t,n,l,r,p,c,d))?(v||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=d,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,vc(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Pt(t.type,l),a.props=d,v=t.pendingProps,p=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=jt(c):(c=pt(n)?zn:rt.current,c=ir(t,c));var b=n.getDerivedStateFromProps;(x=typeof b=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==v||p!==c)&&Al(t,a,r,c),rn=!1,p=t.memoizedState,a.state=p,Qs(t,r,a,s);var g=t.memoizedState;l!==v||p!==g||ft.current||rn?(typeof b=="function"&&(ji(t,n,b,r),g=t.memoizedState),(d=rn||Pl(t,n,d,r,p,g,c)||!1)?(x||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,g,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,g,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=g),a.props=r,a.state=g,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return Ri(e,t,n,r,o,s)}function Ri(e,t,n,r,s,o){Uc(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&Cl(t,n,!1),Xt(e,t,o);r=t.stateNode,Dp.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=lr(t,e.child,null,o),t.child=lr(t,null,l,o)):ot(e,t,l,o),t.memoizedState=r.state,s&&Cl(t,n,!0),t.child}function Gc(e){var t=e.stateNode;t.pendingContext?wl(e,t.pendingContext,t.pendingContext!==t.context):t.context&&wl(e,t.context,!1),ba(e,t.containerInfo)}function Bl(e,t,n,r,s){return ar(),ga(s),t.flags|=256,ot(e,t,n,r),t.child}var zi={dehydrated:null,treeContext:null,retryLane:0};function Pi(e){return{baseLanes:e,cachePool:null,transitions:null}}function Yc(e,t,n){var r=t.pendingProps,s=Le.current,o=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Ee(Le,s&1),e===null)return Ci(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,o?(r=t.mode,o=t.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=ho(a,r,0,null),e=Rn(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Pi(n),t.memoizedState=zi,e):Ea(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return _p(e,t,a,r,l,s,n);if(o){o=r.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=hn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=hn(l,o):(o=Rn(o,a,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,a=e.child.memoizedState,a=a===null?Pi(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=e.childLanes&~n,t.memoizedState=zi,r}return o=e.child,e=o.sibling,r=hn(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ea(e,t){return t=ho({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function vs(e,t,n,r){return r!==null&&ga(r),lr(t,e.child,null,n),e=Ea(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function _p(e,t,n,r,s,o,a){if(n)return t.flags&256?(t.flags&=-257,r=Go(Error(B(422))),vs(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=ho({mode:"visible",children:r.children},s,0,null),o=Rn(o,s,a,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&lr(t,e.child,null,a),t.child.memoizedState=Pi(a),t.memoizedState=zi,o);if(!(t.mode&1))return vs(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(B(419)),r=Go(o,r,void 0),vs(e,t,a,r)}if(l=(a&e.childLanes)!==0,dt||l){if(r=Ke,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Jt(e,s),Dt(r,e,s,-1))}return La(),r=Go(Error(B(421))),vs(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=qp.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,ht=fn(s.nextSibling),yt=t,Me=!0,Mt=null,e!==null&&(St[wt++]=Yt,St[wt++]=Vt,St[wt++]=Pn,Yt=e.id,Vt=e.overflow,Pn=t),t=Ea(t,r.children),t.flags|=4096,t)}function Fl(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ti(e.return,t,n)}function Yo(e,t,n,r,s){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function Vc(e,t,n){var r=t.pendingProps,s=r.revealOrder,o=r.tail;if(ot(e,t,r.children,n),r=Le.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Fl(e,n,t);else if(e.tag===19)Fl(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ee(Le,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&qs(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Yo(t,!1,s,n,o);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&qs(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Yo(t,!0,n,null,o);break;case"together":Yo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Rs(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Xt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Mn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(B(153));if(t.child!==null){for(e=t.child,n=hn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=hn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Op(e,t,n){switch(t.tag){case 3:Gc(t),ar();break;case 5:xc(t);break;case 1:pt(t.type)&&Us(t);break;case 4:ba(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Ee(Vs,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ee(Le,Le.current&1),t.flags|=128,null):n&t.child.childLanes?Yc(e,t,n):(Ee(Le,Le.current&1),e=Xt(e,t,n),e!==null?e.sibling:null);Ee(Le,Le.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Vc(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ee(Le,Le.current),r)break;return null;case 22:case 23:return t.lanes=0,Hc(e,t,n)}return Xt(e,t,n)}var Kc,Ai,Qc,qc;Kc=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ai=function(){};Qc=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Nn($t.current);var o=null;switch(n){case"input":s=ti(e,s),r=ti(e,r),o=[];break;case"select":s=_e({},s,{value:void 0}),r=_e({},r,{value:void 0}),o=[];break;case"textarea":s=si(e,s),r=si(e,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=$s)}ii(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(_r.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(_r.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Re("scroll",e),o||l===c||(o=[])):(o=o||[]).push(d,c))}n&&(o=o||[]).push("style",n);var d=o;(t.updateQueue=d)&&(t.flags|=4)}};qc=function(e,t,n,r){n!==r&&(t.flags|=4)};function Sr(e,t){if(!Me)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function tt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wp(e,t,n){var r=t.pendingProps;switch(ma(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(t),null;case 1:return pt(t.type)&&Hs(),tt(t),null;case 3:return r=t.stateNode,ur(),ze(ft),ze(rt),wa(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(hs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Mt!==null&&(Fi(Mt),Mt=null))),Ai(e,t),tt(t),null;case 5:Sa(t);var s=Nn(Qr.current);if(n=t.type,e!==null&&t.stateNode!=null)Qc(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(B(166));return tt(t),null}if(e=Nn($t.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Bt]=t,r[Vr]=o,e=(t.mode&1)!==0,n){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(s=0;s<Ir.length;s++)Re(Ir[s],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":qa(r,o),Re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Re("invalid",r);break;case"textarea":Xa(r,o),Re("invalid",r)}ii(n,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&gs(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&gs(r.textContent,l,e),s=["children",""+l]):_r.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Re("scroll",r)}switch(n){case"input":as(r),Ja(r,o,!0);break;case"textarea":as(r),Za(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=$s)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Cu(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Bt]=t,e[Vr]=r,Kc(e,t,!1,!1),t.stateNode=e;e:{switch(a=ai(n,r),n){case"dialog":Re("cancel",e),Re("close",e),s=r;break;case"iframe":case"object":case"embed":Re("load",e),s=r;break;case"video":case"audio":for(s=0;s<Ir.length;s++)Re(Ir[s],e);s=r;break;case"source":Re("error",e),s=r;break;case"img":case"image":case"link":Re("error",e),Re("load",e),s=r;break;case"details":Re("toggle",e),s=r;break;case"input":qa(e,r),s=ti(e,r),Re("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=_e({},r,{value:void 0}),Re("invalid",e);break;case"textarea":Xa(e,r),s=si(e,r),Re("invalid",e);break;default:s=r}ii(n,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?Iu(e,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Tu(e,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Or(e,c):typeof c=="number"&&Or(e,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(_r.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Re("scroll",e):c!=null&&Zi(e,o,c,a))}switch(n){case"input":as(e),Ja(e,r,!1);break;case"textarea":as(e),Za(e);break;case"option":r.value!=null&&e.setAttribute("value",""+yn(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Zn(e,!!r.multiple,o,!1):r.defaultValue!=null&&Zn(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=$s)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return tt(t),null;case 6:if(e&&t.stateNode!=null)qc(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(B(166));if(n=Nn(Qr.current),Nn($t.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[Bt]=t,(o=r.nodeValue!==n)&&(e=yt,e!==null))switch(e.tag){case 3:gs(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&gs(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bt]=t,t.stateNode=r}return tt(t),null;case 13:if(ze(Le),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Me&&ht!==null&&t.mode&1&&!(t.flags&128))mc(),ar(),t.flags|=98560,o=!1;else if(o=hs(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(B(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(B(317));o[Bt]=t}else ar(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;tt(t),o=!1}else Mt!==null&&(Fi(Mt),Mt=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Le.current&1?Ge===0&&(Ge=3):La())),t.updateQueue!==null&&(t.flags|=4),tt(t),null);case 4:return ur(),Ai(e,t),e===null&&Gr(t.stateNode.containerInfo),tt(t),null;case 10:return va(t.type._context),tt(t),null;case 17:return pt(t.type)&&Hs(),tt(t),null;case 19:if(ze(Le),o=t.memoizedState,o===null)return tt(t),null;if(r=(t.flags&128)!==0,a=o.rendering,a===null)if(r)Sr(o,!1);else{if(Ge!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=qs(e),a!==null){for(t.flags|=128,Sr(o,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ee(Le,Le.current&1|2),t.child}e=e.sibling}o.tail!==null&&We()>dr&&(t.flags|=128,r=!0,Sr(o,!1),t.lanes=4194304)}else{if(!r)if(e=qs(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Sr(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Me)return tt(t),null}else 2*We()-o.renderingStartTime>dr&&n!==1073741824&&(t.flags|=128,r=!0,Sr(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(n=o.last,n!==null?n.sibling=a:t.child=a,o.last=a)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=We(),t.sibling=null,n=Le.current,Ee(Le,r?n&1|2:n&1),t):(tt(t),null);case 22:case 23:return Ma(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?gt&1073741824&&(tt(t),t.subtreeFlags&6&&(t.flags|=8192)):tt(t),null;case 24:return null;case 25:return null}throw Error(B(156,t.tag))}function Bp(e,t){switch(ma(t),t.tag){case 1:return pt(t.type)&&Hs(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ur(),ze(ft),ze(rt),wa(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Sa(t),null;case 13:if(ze(Le),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(B(340));ar()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ze(Le),null;case 4:return ur(),null;case 10:return va(t.type._context),null;case 22:case 23:return Ma(),null;case 24:return null;default:return null}}var xs=!1,nt=!1,Fp=typeof WeakSet=="function"?WeakSet:Set,X=null;function qn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Oe(e,t,r)}else n.current=null}function Mi(e,t,n){try{n()}catch(r){Oe(e,t,r)}}var $l=!1;function $p(e,t){if(yi=Ws,e=tc(),fa(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,d=0,x=0,v=e,p=null;t:for(;;){for(var b;v!==n||s!==0&&v.nodeType!==3||(l=a+s),v!==o||r!==0&&v.nodeType!==3||(c=a+r),v.nodeType===3&&(a+=v.nodeValue.length),(b=v.firstChild)!==null;)p=v,v=b;for(;;){if(v===e)break t;if(p===n&&++d===s&&(l=a),p===o&&++x===r&&(c=a),(b=v.nextSibling)!==null)break;v=p,p=v.parentNode}v=b}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(vi={focusedElem:e,selectionRange:n},Ws=!1,X=t;X!==null;)if(t=X,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,X=e;else for(;X!==null;){t=X;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var w=g.memoizedProps,K=g.memoizedState,m=t.stateNode,u=m.getSnapshotBeforeUpdate(t.elementType===t.type?w:Pt(t.type,w),K);m.__reactInternalSnapshotBeforeUpdate=u}break;case 3:var f=t.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(y){Oe(t,t.return,y)}if(e=t.sibling,e!==null){e.return=t.return,X=e;break}X=t.return}return g=$l,$l=!1,g}function Mr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var o=s.destroy;s.destroy=void 0,o!==void 0&&Mi(t,n,o)}s=s.next}while(s!==r)}}function mo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Li(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Jc(e){var t=e.alternate;t!==null&&(e.alternate=null,Jc(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Bt],delete t[Vr],delete t[bi],delete t[Cp],delete t[Tp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Xc(e){return e.tag===5||e.tag===3||e.tag===4}function Hl(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Xc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Di(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=$s));else if(r!==4&&(e=e.child,e!==null))for(Di(e,t,n),e=e.sibling;e!==null;)Di(e,t,n),e=e.sibling}function _i(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(_i(e,t,n),e=e.sibling;e!==null;)_i(e,t,n),e=e.sibling}var qe=null,At=!1;function tn(e,t,n){for(n=n.child;n!==null;)Zc(e,t,n),n=n.sibling}function Zc(e,t,n){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(oo,n)}catch{}switch(n.tag){case 5:nt||qn(n,t);case 6:var r=qe,s=At;qe=null,tn(e,t,n),qe=r,At=s,qe!==null&&(At?(e=qe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):qe.removeChild(n.stateNode));break;case 18:qe!==null&&(At?(e=qe,n=n.stateNode,e.nodeType===8?Wo(e.parentNode,n):e.nodeType===1&&Wo(e,n),$r(e)):Wo(qe,n.stateNode));break;case 4:r=qe,s=At,qe=n.stateNode.containerInfo,At=!0,tn(e,t,n),qe=r,At=s;break;case 0:case 11:case 14:case 15:if(!nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Mi(n,t,a),s=s.next}while(s!==r)}tn(e,t,n);break;case 1:if(!nt&&(qn(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Oe(n,t,l)}tn(e,t,n);break;case 21:tn(e,t,n);break;case 22:n.mode&1?(nt=(r=nt)||n.memoizedState!==null,tn(e,t,n),nt=r):tn(e,t,n);break;default:tn(e,t,n)}}function Ul(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Fp),t.forEach(function(r){var s=Jp.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function zt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:qe=l.stateNode,At=!1;break e;case 3:qe=l.stateNode.containerInfo,At=!0;break e;case 4:qe=l.stateNode.containerInfo,At=!0;break e}l=l.return}if(qe===null)throw Error(B(160));Zc(o,a,s),qe=null,At=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Oe(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)ed(t,e),t=t.sibling}function ed(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(zt(t,e),Ot(e),r&4){try{Mr(3,e,e.return),mo(3,e)}catch(w){Oe(e,e.return,w)}try{Mr(5,e,e.return)}catch(w){Oe(e,e.return,w)}}break;case 1:zt(t,e),Ot(e),r&512&&n!==null&&qn(n,n.return);break;case 5:if(zt(t,e),Ot(e),r&512&&n!==null&&qn(n,n.return),e.flags&32){var s=e.stateNode;try{Or(s,"")}catch(w){Oe(e,e.return,w)}}if(r&4&&(s=e.stateNode,s!=null)){var o=e.memoizedProps,a=n!==null?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&Su(s,o),ai(l,a);var d=ai(l,o);for(a=0;a<c.length;a+=2){var x=c[a],v=c[a+1];x==="style"?Iu(s,v):x==="dangerouslySetInnerHTML"?Tu(s,v):x==="children"?Or(s,v):Zi(s,x,v,d)}switch(l){case"input":ni(s,o);break;case"textarea":wu(s,o);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var b=o.value;b!=null?Zn(s,!!o.multiple,b,!1):p!==!!o.multiple&&(o.defaultValue!=null?Zn(s,!!o.multiple,o.defaultValue,!0):Zn(s,!!o.multiple,o.multiple?[]:"",!1))}s[Vr]=o}catch(w){Oe(e,e.return,w)}}break;case 6:if(zt(t,e),Ot(e),r&4){if(e.stateNode===null)throw Error(B(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(w){Oe(e,e.return,w)}}break;case 3:if(zt(t,e),Ot(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{$r(t.containerInfo)}catch(w){Oe(e,e.return,w)}break;case 4:zt(t,e),Ot(e);break;case 13:zt(t,e),Ot(e),s=e.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Pa=We())),r&4&&Ul(e);break;case 22:if(x=n!==null&&n.memoizedState!==null,e.mode&1?(nt=(d=nt)||x,zt(t,e),nt=d):zt(t,e),Ot(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!x&&e.mode&1)for(X=e,x=e.child;x!==null;){for(v=X=x;X!==null;){switch(p=X,b=p.child,p.tag){case 0:case 11:case 14:case 15:Mr(4,p,p.return);break;case 1:qn(p,p.return);var g=p.stateNode;if(typeof g.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(w){Oe(r,n,w)}}break;case 5:qn(p,p.return);break;case 22:if(p.memoizedState!==null){Yl(v);continue}}b!==null?(b.return=p,X=b):Yl(v)}x=x.sibling}e:for(x=null,v=e;;){if(v.tag===5){if(x===null){x=v;try{s=v.stateNode,d?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=v.stateNode,c=v.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=ju("display",a))}catch(w){Oe(e,e.return,w)}}}else if(v.tag===6){if(x===null)try{v.stateNode.nodeValue=d?"":v.memoizedProps}catch(w){Oe(e,e.return,w)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===e)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===e)break e;for(;v.sibling===null;){if(v.return===null||v.return===e)break e;x===v&&(x=null),v=v.return}x===v&&(x=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:zt(t,e),Ot(e),r&4&&Ul(e);break;case 21:break;default:zt(t,e),Ot(e)}}function Ot(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Xc(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Or(s,""),r.flags&=-33);var o=Hl(e);_i(e,o,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Hl(e);Di(e,l,a);break;default:throw Error(B(161))}}catch(c){Oe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Hp(e,t,n){X=e,td(e)}function td(e,t,n){for(var r=(e.mode&1)!==0;X!==null;){var s=X,o=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||xs;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||nt;l=xs;var d=nt;if(xs=a,(nt=c)&&!d)for(X=s;X!==null;)a=X,c=a.child,a.tag===22&&a.memoizedState!==null?Vl(s):c!==null?(c.return=a,X=c):Vl(s);for(;o!==null;)X=o,td(o),o=o.sibling;X=s,xs=l,nt=d}Gl(e)}else s.subtreeFlags&8772&&o!==null?(o.return=s,X=o):Gl(e)}}function Gl(e){for(;X!==null;){var t=X;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:nt||mo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!nt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Pt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&El(t,o,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}El(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var x=d.memoizedState;if(x!==null){var v=x.dehydrated;v!==null&&$r(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}nt||t.flags&512&&Li(t)}catch(p){Oe(t,t.return,p)}}if(t===e){X=null;break}if(n=t.sibling,n!==null){n.return=t.return,X=n;break}X=t.return}}function Yl(e){for(;X!==null;){var t=X;if(t===e){X=null;break}var n=t.sibling;if(n!==null){n.return=t.return,X=n;break}X=t.return}}function Vl(e){for(;X!==null;){var t=X;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{mo(4,t)}catch(c){Oe(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){Oe(t,s,c)}}var o=t.return;try{Li(t)}catch(c){Oe(t,o,c)}break;case 5:var a=t.return;try{Li(t)}catch(c){Oe(t,a,c)}}}catch(c){Oe(t,t.return,c)}if(t===e){X=null;break}var l=t.sibling;if(l!==null){l.return=t.return,X=l;break}X=t.return}}var Up=Math.ceil,Zs=Zt.ReactCurrentDispatcher,Ra=Zt.ReactCurrentOwner,Tt=Zt.ReactCurrentBatchConfig,Se=0,Ke=null,Fe=null,Je=0,gt=0,Jn=kn(0),Ge=0,Zr=null,Mn=0,go=0,za=0,Lr=null,ct=null,Pa=0,dr=1/0,Ut=null,eo=!1,Oi=null,mn=null,ks=!1,ln=null,to=0,Dr=0,Wi=null,zs=-1,Ps=0;function it(){return Se&6?We():zs!==-1?zs:zs=We()}function gn(e){return e.mode&1?Se&2&&Je!==0?Je&-Je:Ip.transition!==null?(Ps===0&&(Ps=Wu()),Ps):(e=Te,e!==0||(e=window.event,e=e===void 0?16:Yu(e.type)),e):1}function Dt(e,t,n,r){if(50<Dr)throw Dr=0,Wi=null,Error(B(185));ts(e,n,r),(!(Se&2)||e!==Ke)&&(e===Ke&&(!(Se&2)&&(go|=n),Ge===4&&on(e,Je)),mt(e,r),n===1&&Se===0&&!(t.mode&1)&&(dr=We()+500,co&&bn()))}function mt(e,t){var n=e.callbackNode;If(e,t);var r=Os(e,e===Ke?Je:0);if(r===0)n!==null&&nl(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&nl(n),t===1)e.tag===0?jp(Kl.bind(null,e)):dc(Kl.bind(null,e)),Sp(function(){!(Se&6)&&bn()}),n=null;else{switch(Bu(r)){case 1:n=sa;break;case 4:n=_u;break;case 16:n=_s;break;case 536870912:n=Ou;break;default:n=_s}n=ud(n,nd.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function nd(e,t){if(zs=-1,Ps=0,Se&6)throw Error(B(327));var n=e.callbackNode;if(sr()&&e.callbackNode!==n)return null;var r=Os(e,e===Ke?Je:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=no(e,r);else{t=r;var s=Se;Se|=2;var o=sd();(Ke!==e||Je!==t)&&(Ut=null,dr=We()+500,En(e,t));do try{Vp();break}catch(l){rd(e,l)}while(!0);ya(),Zs.current=o,Se=s,Fe!==null?t=0:(Ke=null,Je=0,t=Ge)}if(t!==0){if(t===2&&(s=fi(e),s!==0&&(r=s,t=Bi(e,s))),t===1)throw n=Zr,En(e,0),on(e,r),mt(e,We()),n;if(t===6)on(e,r);else{if(s=e.current.alternate,!(r&30)&&!Gp(s)&&(t=no(e,r),t===2&&(o=fi(e),o!==0&&(r=o,t=Bi(e,o))),t===1))throw n=Zr,En(e,0),on(e,r),mt(e,We()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(B(345));case 2:Tn(e,ct,Ut);break;case 3:if(on(e,r),(r&130023424)===r&&(t=Pa+500-We(),10<t)){if(Os(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){it(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ki(Tn.bind(null,e,ct,Ut),t);break}Tn(e,ct,Ut);break;case 4:if(on(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-Lt(r);o=1<<a,a=t[a],a>s&&(s=a),r&=~o}if(r=s,r=We()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Up(r/1960))-r,10<r){e.timeoutHandle=ki(Tn.bind(null,e,ct,Ut),r);break}Tn(e,ct,Ut);break;case 5:Tn(e,ct,Ut);break;default:throw Error(B(329))}}}return mt(e,We()),e.callbackNode===n?nd.bind(null,e):null}function Bi(e,t){var n=Lr;return e.current.memoizedState.isDehydrated&&(En(e,t).flags|=256),e=no(e,t),e!==2&&(t=ct,ct=n,t!==null&&Fi(t)),e}function Fi(e){ct===null?ct=e:ct.push.apply(ct,e)}function Gp(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!_t(o(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function on(e,t){for(t&=~za,t&=~go,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Lt(t),r=1<<n;e[n]=-1,t&=~r}}function Kl(e){if(Se&6)throw Error(B(327));sr();var t=Os(e,0);if(!(t&1))return mt(e,We()),null;var n=no(e,t);if(e.tag!==0&&n===2){var r=fi(e);r!==0&&(t=r,n=Bi(e,r))}if(n===1)throw n=Zr,En(e,0),on(e,t),mt(e,We()),n;if(n===6)throw Error(B(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Tn(e,ct,Ut),mt(e,We()),null}function Aa(e,t){var n=Se;Se|=1;try{return e(t)}finally{Se=n,Se===0&&(dr=We()+500,co&&bn())}}function Ln(e){ln!==null&&ln.tag===0&&!(Se&6)&&sr();var t=Se;Se|=1;var n=Tt.transition,r=Te;try{if(Tt.transition=null,Te=1,e)return e()}finally{Te=r,Tt.transition=n,Se=t,!(Se&6)&&bn()}}function Ma(){gt=Jn.current,ze(Jn)}function En(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,bp(n)),Fe!==null)for(n=Fe.return;n!==null;){var r=n;switch(ma(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Hs();break;case 3:ur(),ze(ft),ze(rt),wa();break;case 5:Sa(r);break;case 4:ur();break;case 13:ze(Le);break;case 19:ze(Le);break;case 10:va(r.type._context);break;case 22:case 23:Ma()}n=n.return}if(Ke=e,Fe=e=hn(e.current,null),Je=gt=t,Ge=0,Zr=null,za=go=Mn=0,ct=Lr=null,In!==null){for(t=0;t<In.length;t++)if(n=In[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=s,r.next=a}n.pending=r}In=null}return e}function rd(e,t){do{var n=Fe;try{if(ya(),Ns.current=Xs,Js){for(var r=De.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Js=!1}if(An=0,Ve=Ue=De=null,Ar=!1,qr=0,Ra.current=null,n===null||n.return===null){Ge=1,Zr=t,Fe=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Je,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,x=l,v=x.tag;if(!(x.mode&1)&&(v===0||v===11||v===15)){var p=x.alternate;p?(x.updateQueue=p.updateQueue,x.memoizedState=p.memoizedState,x.lanes=p.lanes):(x.updateQueue=null,x.memoizedState=null)}var b=Ll(a);if(b!==null){b.flags&=-257,Dl(b,a,l,o,t),b.mode&1&&Ml(o,d,t),t=b,c=d;var g=t.updateQueue;if(g===null){var w=new Set;w.add(c),t.updateQueue=w}else g.add(c);break e}else{if(!(t&1)){Ml(o,d,t),La();break e}c=Error(B(426))}}else if(Me&&l.mode&1){var K=Ll(a);if(K!==null){!(K.flags&65536)&&(K.flags|=256),Dl(K,a,l,o,t),ga(cr(c,l));break e}}o=c=cr(c,l),Ge!==4&&(Ge=2),Lr===null?Lr=[o]:Lr.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var m=Bc(o,c,t);Nl(o,m);break e;case 1:l=c;var u=o.type,f=o.stateNode;if(!(o.flags&128)&&(typeof u.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(mn===null||!mn.has(f)))){o.flags|=65536,t&=-t,o.lanes|=t;var y=Fc(o,l,t);Nl(o,y);break e}}o=o.return}while(o!==null)}id(n)}catch(z){t=z,Fe===n&&n!==null&&(Fe=n=n.return);continue}break}while(!0)}function sd(){var e=Zs.current;return Zs.current=Xs,e===null?Xs:e}function La(){(Ge===0||Ge===3||Ge===2)&&(Ge=4),Ke===null||!(Mn&268435455)&&!(go&268435455)||on(Ke,Je)}function no(e,t){var n=Se;Se|=2;var r=sd();(Ke!==e||Je!==t)&&(Ut=null,En(e,t));do try{Yp();break}catch(s){rd(e,s)}while(!0);if(ya(),Se=n,Zs.current=r,Fe!==null)throw Error(B(261));return Ke=null,Je=0,Ge}function Yp(){for(;Fe!==null;)od(Fe)}function Vp(){for(;Fe!==null&&!vf();)od(Fe)}function od(e){var t=ld(e.alternate,e,gt);e.memoizedProps=e.pendingProps,t===null?id(e):Fe=t,Ra.current=null}function id(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Bp(n,t),n!==null){n.flags&=32767,Fe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ge=6,Fe=null;return}}else if(n=Wp(n,t,gt),n!==null){Fe=n;return}if(t=t.sibling,t!==null){Fe=t;return}Fe=t=e}while(t!==null);Ge===0&&(Ge=5)}function Tn(e,t,n){var r=Te,s=Tt.transition;try{Tt.transition=null,Te=1,Kp(e,t,n,r)}finally{Tt.transition=s,Te=r}return null}function Kp(e,t,n,r){do sr();while(ln!==null);if(Se&6)throw Error(B(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(B(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(Nf(e,o),e===Ke&&(Fe=Ke=null,Je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ks||(ks=!0,ud(_s,function(){return sr(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Tt.transition,Tt.transition=null;var a=Te;Te=1;var l=Se;Se|=4,Ra.current=null,$p(e,n),ed(n,e),mp(vi),Ws=!!yi,vi=yi=null,e.current=n,Hp(n),xf(),Se=l,Te=a,Tt.transition=o}else e.current=n;if(ks&&(ks=!1,ln=e,to=s),o=e.pendingLanes,o===0&&(mn=null),Sf(n.stateNode),mt(e,We()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(eo)throw eo=!1,e=Oi,Oi=null,e;return to&1&&e.tag!==0&&sr(),o=e.pendingLanes,o&1?e===Wi?Dr++:(Dr=0,Wi=e):Dr=0,bn(),null}function sr(){if(ln!==null){var e=Bu(to),t=Tt.transition,n=Te;try{if(Tt.transition=null,Te=16>e?16:e,ln===null)var r=!1;else{if(e=ln,ln=null,to=0,Se&6)throw Error(B(331));var s=Se;for(Se|=4,X=e.current;X!==null;){var o=X,a=o.child;if(X.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(X=d;X!==null;){var x=X;switch(x.tag){case 0:case 11:case 15:Mr(8,x,o)}var v=x.child;if(v!==null)v.return=x,X=v;else for(;X!==null;){x=X;var p=x.sibling,b=x.return;if(Jc(x),x===d){X=null;break}if(p!==null){p.return=b,X=p;break}X=b}}}var g=o.alternate;if(g!==null){var w=g.child;if(w!==null){g.child=null;do{var K=w.sibling;w.sibling=null,w=K}while(w!==null)}}X=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,X=a;else e:for(;X!==null;){if(o=X,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Mr(9,o,o.return)}var m=o.sibling;if(m!==null){m.return=o.return,X=m;break e}X=o.return}}var u=e.current;for(X=u;X!==null;){a=X;var f=a.child;if(a.subtreeFlags&2064&&f!==null)f.return=a,X=f;else e:for(a=u;X!==null;){if(l=X,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:mo(9,l)}}catch(z){Oe(l,l.return,z)}if(l===a){X=null;break e}var y=l.sibling;if(y!==null){y.return=l.return,X=y;break e}X=l.return}}if(Se=s,bn(),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(oo,e)}catch{}r=!0}return r}finally{Te=n,Tt.transition=t}}return!1}function Ql(e,t,n){t=cr(n,t),t=Bc(e,t,1),e=pn(e,t,1),t=it(),e!==null&&(ts(e,1,t),mt(e,t))}function Oe(e,t,n){if(e.tag===3)Ql(e,e,n);else for(;t!==null;){if(t.tag===3){Ql(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mn===null||!mn.has(r))){e=cr(n,e),e=Fc(t,e,1),t=pn(t,e,1),e=it(),t!==null&&(ts(t,1,e),mt(t,e));break}}t=t.return}}function Qp(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=it(),e.pingedLanes|=e.suspendedLanes&n,Ke===e&&(Je&n)===n&&(Ge===4||Ge===3&&(Je&130023424)===Je&&500>We()-Pa?En(e,0):za|=n),mt(e,t)}function ad(e,t){t===0&&(e.mode&1?(t=cs,cs<<=1,!(cs&130023424)&&(cs=4194304)):t=1);var n=it();e=Jt(e,t),e!==null&&(ts(e,t,n),mt(e,n))}function qp(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ad(e,n)}function Jp(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(t),ad(e,n)}var ld;ld=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ft.current)dt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return dt=!1,Op(e,t,n);dt=!!(e.flags&131072)}else dt=!1,Me&&t.flags&1048576&&fc(t,Ys,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Rs(e,t),e=t.pendingProps;var s=ir(t,rt.current);rr(t,n),s=Ta(null,t,r,e,s,n);var o=ja();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,pt(r)?(o=!0,Us(t)):o=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ka(t),s.updater=po,t.stateNode=s,s._reactInternals=t,Ii(t,r,e,n),t=Ri(null,t,r,!0,o,n)):(t.tag=0,Me&&o&&pa(t),ot(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Rs(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=Zp(r),e=Pt(r,e),s){case 0:t=Ei(null,t,r,e,n);break e;case 1:t=Wl(null,t,r,e,n);break e;case 11:t=_l(null,t,r,e,n);break e;case 14:t=Ol(null,t,r,Pt(r.type,e),n);break e}throw Error(B(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Pt(r,s),Ei(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Pt(r,s),Wl(e,t,r,s,n);case 3:e:{if(Gc(t),e===null)throw Error(B(387));r=t.pendingProps,o=t.memoizedState,s=o.element,vc(e,t),Qs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){s=cr(Error(B(423)),t),t=Bl(e,t,r,n,s);break e}else if(r!==s){s=cr(Error(B(424)),t),t=Bl(e,t,r,n,s);break e}else for(ht=fn(t.stateNode.containerInfo.firstChild),yt=t,Me=!0,Mt=null,n=hc(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ar(),r===s){t=Xt(e,t,n);break e}ot(e,t,r,n)}t=t.child}return t;case 5:return xc(t),e===null&&Ci(t),r=t.type,s=t.pendingProps,o=e!==null?e.memoizedProps:null,a=s.children,xi(r,s)?a=null:o!==null&&xi(r,o)&&(t.flags|=32),Uc(e,t),ot(e,t,a,n),t.child;case 6:return e===null&&Ci(t),null;case 13:return Yc(e,t,n);case 4:return ba(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=lr(t,null,r,n):ot(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Pt(r,s),_l(e,t,r,s,n);case 7:return ot(e,t,t.pendingProps,n),t.child;case 8:return ot(e,t,t.pendingProps.children,n),t.child;case 12:return ot(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,a=s.value,Ee(Vs,r._currentValue),r._currentValue=a,o!==null)if(_t(o.value,a)){if(o.children===s.children&&!ft.current){t=Xt(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=Kt(-1,n&-n),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var x=d.pending;x===null?c.next=c:(c.next=x.next,x.next=c),d.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Ti(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===t.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(B(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Ti(a,n,t),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===t){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}ot(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,rr(t,n),s=jt(s),r=r(s),t.flags|=1,ot(e,t,r,n),t.child;case 14:return r=t.type,s=Pt(r,t.pendingProps),s=Pt(r.type,s),Ol(e,t,r,s,n);case 15:return $c(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Pt(r,s),Rs(e,t),t.tag=1,pt(r)?(e=!0,Us(t)):e=!1,rr(t,n),Wc(t,r,s),Ii(t,r,s,n),Ri(null,t,r,!0,e,n);case 19:return Vc(e,t,n);case 22:return Hc(e,t,n)}throw Error(B(156,t.tag))};function ud(e,t){return Du(e,t)}function Xp(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ct(e,t,n,r){return new Xp(e,t,n,r)}function Da(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Zp(e){if(typeof e=="function")return Da(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ta)return 11;if(e===na)return 14}return 2}function hn(e,t){var n=e.alternate;return n===null?(n=Ct(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function As(e,t,n,r,s,o){var a=2;if(r=e,typeof e=="function")Da(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Fn:return Rn(n.children,s,o,t);case ea:a=8,s|=8;break;case Jo:return e=Ct(12,n,t,s|2),e.elementType=Jo,e.lanes=o,e;case Xo:return e=Ct(13,n,t,s),e.elementType=Xo,e.lanes=o,e;case Zo:return e=Ct(19,n,t,s),e.elementType=Zo,e.lanes=o,e;case xu:return ho(n,s,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case yu:a=10;break e;case vu:a=9;break e;case ta:a=11;break e;case na:a=14;break e;case nn:a=16,r=null;break e}throw Error(B(130,e==null?e:typeof e,""))}return t=Ct(a,n,t,s),t.elementType=e,t.type=r,t.lanes=o,t}function Rn(e,t,n,r){return e=Ct(7,e,r,t),e.lanes=n,e}function ho(e,t,n,r){return e=Ct(22,e,r,t),e.elementType=xu,e.lanes=n,e.stateNode={isHidden:!1},e}function Vo(e,t,n){return e=Ct(6,e,null,t),e.lanes=n,e}function Ko(e,t,n){return t=Ct(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function em(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=No(0),this.expirationTimes=No(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=No(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function _a(e,t,n,r,s,o,a,l,c){return e=new em(e,t,n,l,c),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Ct(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ka(o),e}function tm(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function cd(e){if(!e)return vn;e=e._reactInternals;e:{if(_n(e)!==e||e.tag!==1)throw Error(B(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(pt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(B(171))}if(e.tag===1){var n=e.type;if(pt(n))return cc(e,n,t)}return t}function dd(e,t,n,r,s,o,a,l,c){return e=_a(n,r,!0,e,s,o,a,l,c),e.context=cd(null),n=e.current,r=it(),s=gn(n),o=Kt(r,s),o.callback=t??null,pn(n,o,s),e.current.lanes=s,ts(e,s,r),mt(e,r),e}function yo(e,t,n,r){var s=t.current,o=it(),a=gn(s);return n=cd(n),t.context===null?t.context=n:t.pendingContext=n,t=Kt(o,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=pn(s,t,a),e!==null&&(Dt(e,s,a,o),Is(e,s,a)),a}function ro(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ql(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Oa(e,t){ql(e,t),(e=e.alternate)&&ql(e,t)}function nm(){return null}var fd=typeof reportError=="function"?reportError:function(e){console.error(e)};function Wa(e){this._internalRoot=e}vo.prototype.render=Wa.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(B(409));yo(e,t,null,null)};vo.prototype.unmount=Wa.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ln(function(){yo(null,e,null,null)}),t[qt]=null}};function vo(e){this._internalRoot=e}vo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Hu();e={blockedOn:null,target:e,priority:t};for(var n=0;n<sn.length&&t!==0&&t<sn[n].priority;n++);sn.splice(n,0,e),n===0&&Gu(e)}};function Ba(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function xo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Jl(){}function rm(e,t,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var d=ro(a);o.call(d)}}var a=dd(t,r,e,0,null,!1,!1,"",Jl);return e._reactRootContainer=a,e[qt]=a.current,Gr(e.nodeType===8?e.parentNode:e),Ln(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=ro(c);l.call(d)}}var c=_a(e,0,!1,null,null,!1,!1,"",Jl);return e._reactRootContainer=c,e[qt]=c.current,Gr(e.nodeType===8?e.parentNode:e),Ln(function(){yo(t,c,n,r)}),c}function ko(e,t,n,r,s){var o=n._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var l=s;s=function(){var c=ro(a);l.call(c)}}yo(t,a,e,s)}else a=rm(n,t,e,s,r);return ro(a)}Fu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=jr(t.pendingLanes);n!==0&&(oa(t,n|1),mt(t,We()),!(Se&6)&&(dr=We()+500,bn()))}break;case 13:Ln(function(){var r=Jt(e,1);if(r!==null){var s=it();Dt(r,e,1,s)}}),Oa(e,1)}};ia=function(e){if(e.tag===13){var t=Jt(e,134217728);if(t!==null){var n=it();Dt(t,e,134217728,n)}Oa(e,134217728)}};$u=function(e){if(e.tag===13){var t=gn(e),n=Jt(e,t);if(n!==null){var r=it();Dt(n,e,t,r)}Oa(e,t)}};Hu=function(){return Te};Uu=function(e,t){var n=Te;try{return Te=e,t()}finally{Te=n}};ui=function(e,t,n){switch(t){case"input":if(ni(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=uo(r);if(!s)throw Error(B(90));bu(r),ni(r,s)}}}break;case"textarea":wu(e,n);break;case"select":t=n.value,t!=null&&Zn(e,!!n.multiple,t,!1)}};Ru=Aa;zu=Ln;var sm={usingClientEntryPoint:!1,Events:[rs,Gn,uo,Nu,Eu,Aa]},wr={findFiberByHostInstance:jn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},om={bundleType:wr.bundleType,version:wr.version,rendererPackageName:wr.rendererPackageName,rendererConfig:wr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Mu(e),e===null?null:e.stateNode},findFiberByHostInstance:wr.findFiberByHostInstance||nm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bs.isDisabled&&bs.supportsFiber)try{oo=bs.inject(om),Ft=bs}catch{}}xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sm;xt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ba(t))throw Error(B(200));return tm(e,t,null,n)};xt.createRoot=function(e,t){if(!Ba(e))throw Error(B(299));var n=!1,r="",s=fd;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=_a(e,1,!1,null,null,n,!1,r,s),e[qt]=t.current,Gr(e.nodeType===8?e.parentNode:e),new Wa(t)};xt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(B(188)):(e=Object.keys(e).join(","),Error(B(268,e)));return e=Mu(t),e=e===null?null:e.stateNode,e};xt.flushSync=function(e){return Ln(e)};xt.hydrate=function(e,t,n){if(!xo(t))throw Error(B(200));return ko(null,e,t,!0,n)};xt.hydrateRoot=function(e,t,n){if(!Ba(e))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",a=fd;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=dd(t,null,e,1,n??null,s,!1,o,a),e[qt]=t.current,Gr(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new vo(t)};xt.render=function(e,t,n){if(!xo(t))throw Error(B(200));return ko(null,e,t,!1,n)};xt.unmountComponentAtNode=function(e){if(!xo(e))throw Error(B(40));return e._reactRootContainer?(Ln(function(){ko(null,null,e,!1,function(){e._reactRootContainer=null,e[qt]=null})}),!0):!1};xt.unstable_batchedUpdates=Aa;xt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!xo(n))throw Error(B(200));if(e==null||e._reactInternals===void 0)throw Error(B(38));return ko(e,t,n,!1,r)};xt.version="18.3.1-next-f1338f8080-20240426";function pd(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pd)}catch(e){console.error(e)}}pd(),pu.exports=xt;var im=pu.exports,Xl=im;Qo.createRoot=Xl.createRoot,Qo.hydrateRoot=Xl.hydrateRoot;function am({feedItems:e,activeFilter:t,onFilterChange:n,starredIds:r=new Set,config:s}){const o=e.filter(g=>g.type==="guest"&&g.threadId).length,a=e.filter(g=>g.type==="task"&&g.status!=="completed").length;e.filter(g=>g.type==="task").length;const l=a;let c=0;r&&r instanceof Set&&r.size>0&&(c=Array.from(r).filter(w=>e.some(K=>K.id===w)).length);const d=c>0?c:null,x=[{key:"guests",filterKey:"guests",label:"Threads",value:"",icon:"bi-chat-dots",badge:o>0?o:null},{key:"service",filterKey:"service",label:"Tasks",value:"",icon:"bi-check-square",badge:l>0?l:null},{key:"system",filterKey:"system",label:"AI",value:"",icon:"bi-stars",badge:null},{key:"starred",filterKey:"starred",label:"Starred",value:"",icon:"bi-star",badge:d}],v=Array.isArray(s==null?void 0:s.visibleFilters)?s.visibleFilters:null,p=v?x.filter(g=>v.includes(g.filterKey)):x,b=g=>{t===g.filterKey?n("all"):n(g.filterKey)};return i.jsxs("div",{className:"today-bar",style:{position:"relative",padding:"0.375rem 1rem",display:"flex",gap:"0.75rem",alignItems:"center",flexWrap:"nowrap",overflowX:"auto",overflowY:"hidden",WebkitOverflowScrolling:"touch",scrollbarWidth:"none",msOverflowStyle:"none",zIndex:10},children:[i.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(to bottom, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 0.8) 40%, rgba(0, 0, 0, 0) 100%)",pointerEvents:"none",zIndex:-1}}),i.jsx("div",{style:{position:"absolute",bottom:"-2rem",left:0,right:0,height:"2rem",background:"linear-gradient(to bottom, rgba(0, 0, 0, 0.8) 0%, rgba(0, 0, 0, 0) 100%)",pointerEvents:"none",zIndex:-1}}),p.map(g=>{const w=t===g.filterKey;return i.jsxs("div",{className:"metric-item rounded-pill d-flex align-items-center",style:{cursor:"pointer",padding:"0.5rem 0.875rem",transition:"all 0.2s",position:"relative",zIndex:1,flexShrink:0,whiteSpace:"nowrap",backgroundColor:w?"rgba(13, 110, 253, 0.25)":"rgba(255, 255, 255, 0.05)",border:w?"1px solid rgba(13, 110, 253, 0.3)":"1px solid rgba(255, 255, 255, 0.1)",boxShadow:w?"0 0 8px rgba(13, 110, 253, 0.3), 0 0 4px rgba(13, 110, 253, 0.2)":"none",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",height:"40px",borderRadius:"20px"},onClick:()=>b(g),onMouseEnter:K=>{w||(K.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)",K.currentTarget.style.borderColor="rgba(255, 255, 255, 0.15)")},onMouseLeave:K=>{w||(K.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)",K.currentTarget.style.borderColor="rgba(255, 255, 255, 0.1)")},children:[i.jsx("i",{className:`bi ${g.icon}`,style:{fontSize:"1.25rem",color:w?"rgba(255, 255, 255, 0.95)":"rgba(255, 255, 255, 0.5)",fontWeight:"bold"}}),i.jsx("span",{style:{fontSize:"0.875rem",color:w?"rgba(255, 255, 255, 0.95)":"rgba(255, 255, 255, 0.5)",fontWeight:"500"},children:g.label}),g.badge&&i.jsx("span",{className:`badge rounded-pill ${g.key==="starred"||g.key==="guests"?"bg-secondary":"bg-danger"}`,style:{position:"absolute",top:"-6px",right:"-6px",fontSize:"0.75rem",fontWeight:"600",minWidth:"22px",height:"22px",display:"flex",alignItems:"center",justifyContent:"center",padding:"0 6px",fontFamily:"inherit",lineHeight:"1",backgroundColor:g.key==="starred"||g.key==="guests"?"rgba(255, 255, 255, 0.25)":"#dc3545",color:"#ffffff",border:"2px solid #000000",boxSizing:"border-box"},children:g.badge})]},g.key)})]})}function Zl({event:e}){const[t,n]=T.useState(null),[r,s]=T.useState(null),o=e.title==="Pulse",a=e.title==="Centers";return T.useEffect(()=>{if(o)return;const l=e.startsAt||e.performanceStartTime;if(l)if(a){const c=()=>{const x=new Date(l),v=x.getHours().toString().padStart(2,"0"),p=x.getMinutes().toString().padStart(2,"0");s(`${v}:${p}`)};c();const d=setInterval(c,6e4);return()=>clearInterval(d)}else{const c=()=>{const x=Date.now(),v=l-x;if(v<=0){n("0:00");return}const p=Math.floor(v/1e3),b=Math.floor(p/60),g=p%60;n(`${b}:${g.toString().padStart(2,"0")}`)};c();const d=setInterval(c,1e3);return()=>clearInterval(d)}},[e.startsAt,e.performanceStartTime,o,a]),i.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"flex-start"},children:[e.image&&i.jsx("img",{src:e.image,alt:e.title,style:{width:"80px",height:"80px",borderRadius:"0.5rem",objectFit:"cover",flexShrink:0}}),i.jsxs("div",{style:{flex:1,minWidth:0},children:[i.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500",color:"rgba(255, 255, 255, 0.9)",marginBottom:"0.125rem"},children:e.title}),i.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",marginBottom:"0.125rem"},children:e.artist}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:[e.location&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[i.jsx("i",{className:"bi bi-geo-alt-fill",style:{fontSize:"0.625rem",color:"rgba(255, 255, 255, 0.5)"}}),i.jsx("span",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)"},children:e.location})]}),e.startTime&&i.jsx("span",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)"},children:e.startTime}),a&&r&&i.jsxs("span",{className:"badge rounded-pill",style:{fontSize:"0.65rem",padding:"0.2rem 0.5rem",fontWeight:"600",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"rgba(255, 255, 255, 0.9)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:["LOOPS ",r]}),!o&&!a&&t&&i.jsxs("span",{className:"badge bg-danger rounded-pill",style:{fontSize:"0.65rem",padding:"0.2rem 0.5rem",fontWeight:"600"},children:["STARTS ",t]})]})]})]})}function lm({item:e,allItems:t,isEmphasized:n,isSelected:r,isHighlighted:s=!1,onClick:o,onOpenThread:a,onToggleMoment:l,isStarred:c=!1,onToggleStar:d,onUpdateTaskLocation:x,onCompleteTask:v,itemRef:p,collapseVariant:b="staff",expandedCards:g,onCardExpandChange:w}){const[K,m]=T.useState(!1),u=T.useRef(null),[f,y]=T.useState(null),[z,C]=T.useState(!1),R=T.useRef(null),[L,Z]=T.useState(!1),Y=d===void 0,ee=b==="visitor",[_,O]=T.useState(null),J=g&&g[e.id]!==void 0,te=e.type==="concierge"&&e.sender&&e.sender.type==="ai",xe=e.type==="guest",A=te||xe?!1:J?!g[e.id]:ee?_!==null?_:!0:_!==null?_:!n,$=T.useRef(null);T.useEffect(()=>{const W=()=>{Z(document.body.hasAttribute("data-bottom-sheet-open"))};W();const q=new MutationObserver(W);return q.observe(document.body,{attributes:!0,attributeFilter:["data-bottom-sheet-open"]}),()=>q.disconnect()},[]);const V=W=>{const q=new Date(W),be=new Date-q,H=Math.floor(be/6e4);if(H<1)return"Just now";if(H<60)return`${H}m ago`;const k=Math.floor(H/60);return k<24?`${k}h ago`:q.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},ye=()=>{const W=e.assignedTo,q=W?fe(W.avatar):null,pe=(W==null?void 0:W.type)==="staff"?"Staff":(W==null?void 0:W.type)==="ai"?"AI":"Guest",be=e.forGuest,H=e.posPayload&&e.posPayload.cart&&e.posPayload.cart.length>0,k=H?e.posPayload.cart.reduce((h,N)=>h+N.quantity*N.price,0):0;return i.jsx("div",{className:"d-flex justify-content-between align-items-start",children:i.jsxs("div",{className:"flex-grow-1",children:[W&&i.jsxs("div",{className:"d-flex align-items-center gap-2 mb-2",children:[i.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"40px",height:"40px",backgroundColor:W.type==="ai"?"#3B31FF":q,color:"#ffffff",fontSize:"0.875rem",fontWeight:"600",flexShrink:0},children:W.avatar}),i.jsxs("div",{children:[i.jsx("strong",{style:{color:"#ffffff",display:"block",marginBottom:"0",lineHeight:"1.2"},children:W.name}),i.jsx("small",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem",marginTop:"0",lineHeight:"1.2"},children:pe})]})]}),i.jsx("div",{className:"d-flex align-items-center gap-2 mb-1",style:{marginLeft:W?"52px":"0"},children:i.jsx("strong",{style:{color:"#ffffff"},children:H?"Complete purchase":e.title})}),i.jsx("div",{style:{display:"grid",gridTemplateRows:A?"0fr":"1fr",transition:"grid-template-rows 0.2s ease-in-out"},children:i.jsxs("div",{style:{overflow:"hidden",minHeight:0},children:[be&&i.jsx("div",{className:"d-flex align-items-center gap-2 mb-2",style:{marginLeft:W?"52px":"0"},children:i.jsxs("small",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"},children:["for ",be.name]})}),i.jsx("div",{className:"d-flex align-items-center gap-2 mb-2",style:{marginLeft:W?"52px":"0"},children:i.jsxs("div",{className:"position-relative",ref:R,children:[i.jsxs("button",{type:"button",className:"btn btn-link p-0 text-decoration-none",onClick:h=>{h.stopPropagation(),C(!z)},style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem",padding:"0",border:"none",background:"none",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[i.jsxs("span",{children:["Location: ",(()=>{const h=e.location;return h==="lobby"?"Lobby":h==="bar"?"Bar":h==="bathroom"?"Bathroom":h==="gallery-1"?"Gallery 1":h==="gallery-2"?"Gallery 2":h==="gallery-3"?"Gallery 3":h==="gallery-4"?"Gallery 4":h==="gift-shop"?"Gift Shop":h==="cinemateque"?"Cinemateque":"Not specified"})()]}),i.jsx("i",{className:"bi bi-chevron-down",style:{fontSize:"0.625rem",fontWeight:"bold"}})]}),z&&i.jsx("div",{className:"dropdown-menu show",style:{position:"absolute",top:"100%",left:0,marginTop:"0.25rem",backgroundColor:"#0a0a0a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"0.375rem",minWidth:"150px",zIndex:1001,boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",padding:"0.25rem"},onClick:h=>h.stopPropagation(),children:["","lobby","bar","bathroom","gallery-1","gallery-2","gallery-3","gallery-4","gift-shop","cinemateque"].map(h=>{const N=h===""?"Not specified":h==="lobby"?"Lobby":h==="bar"?"Bar":h==="bathroom"?"Bathroom":h==="gallery-1"?"Gallery 1":h==="gallery-2"?"Gallery 2":h==="gallery-3"?"Gallery 3":h==="gallery-4"?"Gallery 4":h==="gift-shop"?"Gift Shop":h==="cinemateque"?"Cinemateque":h,M=(e.location||"")===h;return i.jsx("button",{className:"dropdown-item",style:{color:M?"#0d6efd":"rgba(255, 255, 255, 0.8)",backgroundColor:M?"rgba(13, 110, 253, 0.1)":"transparent",fontSize:"0.75rem",padding:"0.375rem 0.75rem",border:"none",width:"100%",textAlign:"left",cursor:"pointer"},onClick:Q=>{Q.stopPropagation(),Q.preventDefault(),x&&x(e.id,h||null),C(!1)},onMouseEnter:Q=>{M||(Q.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)")},onMouseLeave:Q=>{M||(Q.currentTarget.style.backgroundColor="transparent")},children:N},h)})})]})}),H&&i.jsxs("div",{style:{marginLeft:W?"52px":"0",marginBottom:"0.5rem"},children:[i.jsxs("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",marginBottom:"0.25rem"},children:["Complete purchase: ",e.posPayload.cart.map(h=>`${h.quantity} ${h.name}`).join(", ")]}),k>0&&e.posPayload.paymentMethod&&i.jsxs("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",fontWeight:"600"},children:["Settlement: $",k.toFixed(2),"  ",e.posPayload.paymentMethod==="cash"?"Cash":e.posPayload.paymentMethod==="card"?"Card":"Card on File"]})]}),e.description&&e.description.trim()&&(!H||H&&e.description!=="Complete purchase")&&i.jsxs("div",{style:{marginLeft:W?"52px":"0",marginTop:H?"0.5rem":"0",marginBottom:"1.5rem"},children:[i.jsx("span",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",fontWeight:"500"},children:"Note: "}),i.jsx("span",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)"},children:e.description})]}),H&&i.jsxs("div",{style:{marginLeft:W?"52px":"0",marginTop:"0.75rem",display:"flex",gap:"0.5rem"},children:[i.jsx("button",{className:"btn btn-primary btn-sm",onClick:h=>{h.stopPropagation(),alert("Complete in Square (stub)")},style:{fontSize:"0.75rem",padding:"0.25rem 0.75rem"},children:"Complete in Square"}),i.jsx("button",{className:"btn btn-outline-secondary btn-sm",onClick:h=>{h.stopPropagation(),o()},style:{fontSize:"0.75rem",padding:"0.25rem 0.75rem"},children:"Mark done"})]})]})})]})})},fe=W=>{const q=["#0d6efd","#6f42c1","#d63384","#dc3545","#fd7e14","#ffc107","#20c997","#198754"],pe=W.charCodeAt(0)%q.length;return q[pe]};T.useEffect(()=>{const W=q=>{u.current&&!u.current.contains(q.target)&&m(!1),R.current&&!R.current.contains(q.target)&&C(!1)};if(K||z)return document.addEventListener("mousedown",W),()=>{document.removeEventListener("mousedown",W)}},[K,z]),T.useEffect(()=>{const W=e.type==="system"&&e.performanceStartTime?e.performanceStartTime:e.type==="moment"&&e.momentType==="ticket"&&e.startsAt?e.startsAt:null;if(!W){y(null);return}const q=()=>{const be=Date.now(),H=W-be;if(H<=0){y("0:00");return}const k=Math.floor(H/1e3),h=Math.floor(k/60),N=k%60;y(`${h}:${N.toString().padStart(2,"0")}`)};q();const pe=setInterval(q,1e3);return()=>clearInterval(pe)},[e.type,e.performanceStartTime,e.momentType,e.startsAt]);const Pe=()=>{const W=e.name||"Guest",q=e.avatar||W.split(" ").map(h=>h[0]).join("").toUpperCase().slice(0,2),pe=fe(q),be=e.threadId?t.filter(h=>h.threadId===e.threadId&&h.type==="concierge").sort((h,N)=>N.timestamp-h.timestamp):[],H=be.length,k=H>0?be[0]:null;return i.jsxs("div",{children:[i.jsxs("div",{className:"d-flex align-items-start gap-3 mb-2",children:[i.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"48px",height:"48px",backgroundColor:pe,color:"#ffffff",fontSize:"1rem",fontWeight:"600"},children:q}),i.jsxs("div",{className:"flex-grow-1",style:{minWidth:0},children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 mb-1",children:[i.jsx("strong",{style:{color:"#ffffff",fontSize:"0.875rem"},children:W}),i.jsx("small",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"},children:"Guest"})]}),i.jsx("p",{className:"mb-0",style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)"},children:e.message})]})]}),i.jsx("div",{style:{display:"grid",gridTemplateRows:A?"0fr":"1fr",transition:"grid-template-rows 0.2s ease-in-out"},children:i.jsxs("div",{style:{overflow:"hidden",minHeight:0},children:[k&&i.jsxs("div",{className:"d-flex align-items-start",style:{marginLeft:"64px",marginTop:"0.5rem",cursor:"pointer",padding:"8px",marginBottom:"1.5rem"},onClick:h=>{h.stopPropagation(),a(e)},onMouseEnter:h=>{h.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)",h.currentTarget.style.borderRadius="0.25rem"},onMouseLeave:h=>{h.currentTarget.style.backgroundColor="transparent"},children:[i.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"32px",height:"32px",backgroundColor:"#3B31FF",color:"#ffffff",fontSize:"0.75rem",fontWeight:"600",marginRight:"0.75rem"},children:"AI"}),i.jsxs("div",{className:"flex-grow-1",style:{minWidth:0,padding:"0.25rem 0"},children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 mb-1",children:[i.jsx("strong",{style:{color:"rgba(130, 170, 210, 1)",fontSize:"0.875rem"},children:"Canyon Concierge"}),H>1&&i.jsxs("span",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"},children:["+",H-1," more"]})]}),i.jsx("p",{className:"mb-0",style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)"},children:k.message})]})]}),!k&&e.threadId&&i.jsxs("div",{className:"thread-indicator d-flex align-items-center gap-2",style:{marginLeft:"60px",cursor:"pointer",padding:"0.25rem 0.5rem",borderRadius:"0.25rem",transition:"background-color 0.2s"},onClick:h=>{h.stopPropagation(),a(e)},onMouseEnter:h=>h.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)",onMouseLeave:h=>h.currentTarget.style.backgroundColor="transparent",children:[i.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"24px",height:"24px",backgroundColor:"#3B31FF",color:"#ffffff",fontSize:"0.625rem",fontWeight:"600"},children:"AI"}),i.jsx("span",{style:{color:"rgba(255, 255, 255, 0.8)",fontSize:"0.875rem"},children:"View thread"})]})]})})]})},$e=()=>{const W=e.recipients||[],q=e.sender&&e.sender.type==="staff",pe=q?e.sender:{name:"Canyon Concierge",avatar:"AI"},be=q?fe(pe.avatar):"#3B31FF";return i.jsxs("div",{className:"d-flex align-items-start gap-2",children:[i.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"48px",height:"48px",backgroundColor:be,color:"#ffffff",fontSize:"1rem",fontWeight:"600"},children:pe.avatar}),i.jsxs("div",{className:"flex-grow-1",style:{minWidth:0},children:[i.jsx("div",{className:"mb-1",children:i.jsx("strong",{style:{color:"#ffffff",fontSize:"0.875rem"},children:pe.name})}),i.jsx("div",{style:{display:"grid",gridTemplateRows:A?"0fr":"1fr",transition:"grid-template-rows 0.2s ease-in-out"},children:i.jsxs("div",{style:{overflow:"hidden",minHeight:0},children:[W.length>0&&i.jsxs("div",{className:"mb-1 d-flex align-items-center gap-1 flex-wrap",children:[i.jsx("i",{className:"bi bi-arrow-right",style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem",fontWeight:"bold"}}),W.map((H,k)=>{const h=H.isSpecial&&H.type==="ai"?"#3B31FF":fe(H.name),N=H.name.split(" ").map(M=>M[0]).join("").toUpperCase().slice(0,2);return i.jsxs("div",{className:"d-flex align-items-center gap-1",children:[i.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"16px",height:"16px",backgroundColor:h,color:"#ffffff",fontSize:"0.5rem",fontWeight:"600",flexShrink:0},children:H.isSpecial?H.type==="ai"?"AI":"S":N}),i.jsx("small",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"},children:H.name}),k<W.length-1&&i.jsx("span",{style:{color:"rgba(255, 255, 255, 0.4)",fontSize:"0.75rem"},children:","})]},H.id)})]}),i.jsx("p",{className:"mb-0",style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)"},children:e.message}),e.posReceipt&&i.jsxs("div",{style:{marginTop:"0.5rem",padding:"0.5rem",backgroundColor:"rgba(255, 193, 7, 0.1)",borderRadius:"0.25rem",border:"1px solid rgba(255, 193, 7, 0.2)"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.7)",marginBottom:"0.25rem",fontWeight:"500"},children:"Receipt"}),e.posReceipt.cart.map(H=>i.jsxs("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",display:"flex",justifyContent:"space-between"},children:[i.jsxs("span",{children:[H.quantity," ",H.name]}),i.jsxs("span",{children:["$",(H.quantity*H.price).toFixed(2)]})]},H.id)),i.jsxs("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",display:"flex",justifyContent:"space-between",marginTop:"0.25rem",paddingTop:"0.25rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)",fontWeight:"600"},children:[i.jsx("span",{children:"Settlement"}),i.jsxs("span",{children:["$",e.posReceipt.total.toFixed(2),"  ",e.posReceipt.paymentMethod==="cash"?"Cash":e.posReceipt.paymentMethod==="card"?"Card":"Card on File"]})]})]})]})})]})]})},re=()=>{const W=e.type==="system"&&e.title==="Performance starting soon";return i.jsxs("div",{children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 mb-2",children:[i.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"40px",height:"40px",backgroundColor:"#3B31FF",color:"#ffffff",fontSize:"0.875rem",fontWeight:"600",flexShrink:0},children:"AI"}),i.jsxs("div",{children:[i.jsx("strong",{style:{color:"rgba(130, 170, 210, 1)",display:"block",marginBottom:"0",lineHeight:"1.2"},children:"Canyon Concierge"}),i.jsx("small",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem",marginTop:"0",lineHeight:"1.2"},children:"System"})]})]}),i.jsx("div",{className:"d-flex align-items-center gap-2 mb-1",style:{marginLeft:"52px"},children:i.jsx("strong",{style:{color:e.title==="Shift briefing"||e.title==="Post-shift summary"?"rgba(255, 255, 255, 1)":"rgba(130, 170, 210, 1)",fontSize:e.title==="Shift briefing"||e.title==="Post-shift summary"?"24px":"inherit"},children:e.title})}),i.jsx("div",{style:{display:"grid",gridTemplateRows:A?"0fr":"1fr",transition:"grid-template-rows 0.2s ease-in-out"},children:i.jsxs("div",{style:{overflow:"hidden",minHeight:0},children:[W&&i.jsxs("div",{style:{marginLeft:"52px",marginTop:"0.5rem",display:"flex",gap:"0.75rem",alignItems:"flex-start"},children:[i.jsx("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ6crUzfZ7ak2LjN_qjOsgrKkkNbrJ8q2G1hA&s",alt:"DOKU by Lu Yang",style:{width:"80px",height:"80px",borderRadius:"0.5rem",objectFit:"cover",flexShrink:0}}),i.jsxs("div",{style:{flex:1,minWidth:0},children:[i.jsx("div",{style:{marginBottom:"0.25rem"},children:i.jsx("small",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.875rem",fontWeight:"500"},children:"DOKU by Lu Yang"})}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[i.jsx("small",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"},children:"8:00pm"}),f&&i.jsx("span",{className:"badge bg-danger rounded-pill",style:{fontSize:"0.65rem",padding:"0.2rem 0.5rem",fontWeight:"600"},children:f})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[i.jsx("i",{className:"bi bi-geo-alt-fill",style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)"}}),i.jsx("small",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"},children:"Cinemateque"})]})]})]}),!W&&f&&i.jsx("div",{style:{marginLeft:"52px",marginTop:"0.25rem"},children:i.jsx("span",{className:"badge bg-danger rounded-pill",style:{fontSize:"0.65rem",padding:"0.2rem 0.5rem",fontWeight:"600"},children:f})}),e.type==="system"&&e.note&&i.jsxs("p",{className:"mb-0",style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.6)",fontStyle:"italic",marginLeft:"52px",marginTop:"0.25rem"},children:["Note: ",e.note]}),e.type==="system"&&e.title==="Shift briefing"&&e.briefingData&&i.jsxs("div",{style:{marginLeft:"52px",marginTop:"0.75rem"},children:[i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"rgba(255, 255, 255, 0.9)",marginBottom:"0.5rem"},children:"Schedule"}),e.briefingData.schedule&&e.briefingData.schedule.map((q,pe)=>i.jsx(Zl,{event:q},pe))]}),e.briefingData.visitors&&i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"rgba(255, 255, 255, 0.9)",marginBottom:"0.5rem"},children:"Visitors"}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.jsx("div",{style:{display:"flex",alignItems:"center",gap:"-0.25rem"},children:e.briefingData.visitors&&e.briefingData.visitors.avatars&&e.briefingData.visitors.avatars.slice(0,4).map((q,pe)=>i.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:fe(q.avatar||q.name),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"500",color:"#ffffff",marginLeft:pe>0?"-0.5rem":"0",border:"2px solid rgba(20, 20, 20, 1)",zIndex:4-pe},children:q.avatar||(q.name?q.name.charAt(0):"?")},pe))}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)"},children:[e.briefingData.visitors.current,"/",e.briefingData.visitors.expected," Expected"]})]}),e.briefingData.visitors.trend&&e.briefingData.visitors.trend.length>0&&i.jsxs("div",{style:{marginTop:"0.5rem"},children:[i.jsxs("svg",{width:"100%",height:"50",viewBox:"0 0 100 50",preserveAspectRatio:"none",style:{marginBottom:"0.25rem"},children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:`visitorGradient-${e.id}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[i.jsx("stop",{offset:"0%",stopColor:"rgba(59, 49, 255, 0.4)"}),i.jsx("stop",{offset:"100%",stopColor:"rgba(59, 49, 255, 0.05)"})]})}),(()=>{const q=e.briefingData.visitors.trend.map(F=>typeof F=="object"?F.value:F),pe=Math.max(...q),be=Math.min(...q),H=pe-be||1,k=50,h=100,M=e.briefingData.visitors.trend.map((F,se)=>{const we=typeof F=="object"?F.value:F,me=se/(e.briefingData.visitors.trend.length-1)*h,he=k-(we-be)/H*k;return{x:me,y:he}}).map((F,se)=>se===0?`M${F.x},${F.y}`:`L${F.x},${F.y}`).join(" "),Q=`${M}L${h},${k}L0,${k}Z`;return i.jsxs(i.Fragment,{children:[i.jsx("path",{d:Q,fill:`url(#visitorGradient-${e.id})`,fillOpacity:"1"}),i.jsx("path",{d:M,stroke:"rgba(59, 49, 255, 0.8)",strokeWidth:"1.5",fill:"none"})]})})()]}),i.jsx("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.625rem",color:"rgba(255, 255, 255, 0.5)"},children:e.briefingData.visitors.trend.map((q,pe)=>typeof q=="object"&&q.time?i.jsx("span",{children:q.time},pe):null)})]})]}),e.briefingData.staff&&i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"rgba(255, 255, 255, 0.9)",marginBottom:"0.5rem"},children:"Staff"}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.jsx("div",{style:{display:"flex",alignItems:"center",gap:"-0.25rem"},children:e.briefingData.staff.avatars&&e.briefingData.staff.avatars.slice(0,4).map((q,pe)=>i.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:fe(q.avatar),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"500",color:"#ffffff",marginLeft:pe>0?"-0.5rem":"0",border:"2px solid rgba(20, 20, 20, 1)",zIndex:4-pe},children:q.avatar},pe))}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)"},children:[e.briefingData.staff.current,"/",e.briefingData.staff.expected," Expected"]})]})]}),e.briefingData.tasks&&i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"rgba(255, 255, 255, 0.9)",marginBottom:"0.5rem"},children:"Tasks"}),i.jsxs("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)"},children:[e.briefingData.tasks.incomplete," incomplete"]})]})]}),e.type==="system"&&e.title==="Post-shift summary"&&e.summaryData&&i.jsxs("div",{style:{marginLeft:"52px",marginTop:"0.75rem"},children:[i.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.25rem",flexWrap:"wrap"},children:[i.jsxs("div",{style:{flex:"1 1 200px",padding:"0.875rem",backgroundColor:"rgba(255, 255, 255, 0.03)",borderRadius:"0.5rem",border:"1px solid rgba(255, 255, 255, 0.08)"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",marginBottom:"0.25rem",fontWeight:"500"},children:"Attendance"}),i.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"0.5rem"},children:[i.jsx("span",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#ffffff"},children:e.summaryData.attendance.actual}),i.jsxs("span",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.5)"},children:["/ ",e.summaryData.attendance.expected]})]}),i.jsx("div",{style:{marginTop:"0.5rem",height:"4px",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"2px",overflow:"hidden"},children:i.jsx("div",{style:{height:"100%",width:`${e.summaryData.attendance.percentage}%`,backgroundColor:"rgba(59, 49, 255, 0.8)",borderRadius:"2px",transition:"width 0.3s ease"}})})]}),i.jsxs("div",{style:{flex:"1 1 200px",padding:"0.875rem",backgroundColor:"rgba(255, 255, 255, 0.03)",borderRadius:"0.5rem",border:"1px solid rgba(255, 255, 255, 0.08)"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",marginBottom:"0.25rem",fontWeight:"500"},children:"Peak Pressure"}),i.jsxs("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#ffffff"},children:[e.summaryData.peakPressure.start,"  ",e.summaryData.peakPressure.end]})]})]}),i.jsxs("div",{style:{marginBottom:"1.25rem"},children:[i.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"rgba(255, 255, 255, 0.9)",marginBottom:"0.75rem"},children:"Top Request Themes"}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.625rem"},children:e.summaryData.requestThemes.map((q,pe)=>{const be=Math.max(...e.summaryData.requestThemes.map(k=>k.count)),H=q.count/be*100;return i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.7)",minWidth:"100px",fontWeight:"500"},children:q.label}),i.jsx("div",{style:{flex:1,height:"20px",backgroundColor:"rgba(255, 255, 255, 0.08)",borderRadius:"10px",overflow:"hidden",position:"relative"},children:i.jsx("div",{style:{height:"100%",width:`${H}%`,backgroundColor:q.color,borderRadius:"10px",transition:"width 0.4s ease",display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:"0.5rem"},children:i.jsx("span",{style:{fontSize:"0.625rem",fontWeight:"600",color:"#ffffff",textShadow:"0 1px 2px rgba(0, 0, 0, 0.3)"},children:q.count})})})]},pe)})})]}),i.jsxs("div",{style:{marginBottom:"1.25rem"},children:[i.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"rgba(255, 255, 255, 0.9)",marginBottom:"0.75rem"},children:"Friction Signals"}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.625rem"},children:e.summaryData.frictionSignals.map((q,pe)=>{const be=Math.max(...e.summaryData.frictionSignals.map(k=>k.count)),H=q.count/be*100;return i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.7)",minWidth:"140px",fontWeight:"500"},children:q.label}),i.jsx("div",{style:{flex:1,height:"20px",backgroundColor:"rgba(255, 255, 255, 0.08)",borderRadius:"10px",overflow:"hidden",position:"relative"},children:i.jsx("div",{style:{height:"100%",width:`${H}%`,backgroundColor:q.color,borderRadius:"10px",transition:"width 0.4s ease",display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:"0.5rem"},children:i.jsx("span",{style:{fontSize:"0.625rem",fontWeight:"600",color:"#ffffff",textShadow:"0 1px 2px rgba(0, 0, 0, 0.3)"},children:q.count})})})]},pe)})})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.875rem",marginBottom:"1.25rem"},children:[i.jsxs("div",{style:{padding:"0.875rem",backgroundColor:"rgba(98, 200, 163, 0.1)",borderRadius:"0.5rem",border:"1px solid rgba(98, 200, 163, 0.2)"},children:[i.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",color:"rgba(98, 200, 163, 1)",marginBottom:"0.375rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Win"}),i.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.9)",lineHeight:"1.4"},children:e.summaryData.win})]}),i.jsxs("div",{style:{padding:"0.875rem",backgroundColor:"rgba(255, 200, 87, 0.1)",borderRadius:"0.5rem",border:"1px solid rgba(255, 200, 87, 0.2)"},children:[i.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",color:"rgba(255, 200, 87, 1)",marginBottom:"0.375rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Opportunity"}),i.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.9)",lineHeight:"1.4"},children:e.summaryData.opportunity})]}),i.jsxs("div",{style:{padding:"0.875rem",backgroundColor:"rgba(130, 170, 210, 0.1)",borderRadius:"0.5rem",border:"1px solid rgba(130, 170, 210, 0.2)"},children:[i.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",color:"rgba(130, 170, 210, 1)",marginBottom:"0.375rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:e.summaryData.nextTimeLabel||"Next Time"}),i.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.9)",lineHeight:"1.4"},children:e.summaryData.nextTime})]})]}),e.message&&i.jsx("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:i.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.7)",whiteSpace:"pre-line",lineHeight:"1.6",fontStyle:"italic"},children:e.message})})]}),e.type==="system"&&e.message&&!W&&e.title!=="Shift briefing"&&e.title!=="Post-shift summary"&&i.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",marginLeft:"52px",marginTop:"0.25rem",whiteSpace:"pre-line",lineHeight:"1.5"},children:e.message}),e.type!=="system"&&e.message&&i.jsx("p",{className:"mb-0",style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",marginLeft:"52px"},children:e.message})]})})]})},Ie=()=>{const W=e.momentType==="arrival",q=!W||e.state!=="collapsed",pe=()=>{if(!e.startsAt)return e.subtitle||"";const H=e.startsAt-Date.now();if(H<=0)return`${e.subtitlePrefix||""}Starts now`.trim();const k=Math.floor(H/1e3),h=Math.floor(k/60),N=k%60;return`${e.locationLabel||""}${e.locationLabel?"  ":""}Starts in ${h}:${N.toString().padStart(2,"0")}`},be=H=>{switch(H){case"washroom":return"bi-badge-wc";case"locker":return"bi-file-lock";case"cinema":return"bi-person-video";default:return"bi-info-circle"}};return i.jsxs("div",{children:[e.momentType==="arrival"?i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer"},onClick:H=>{H.stopPropagation(),l==null||l(e.id)},children:[i.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"0.75rem",backgroundColor:"rgba(255, 255, 255, 0.06)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:i.jsx("i",{className:`bi ${q?"bi-chevron-down":"bi-chevron-right"}`,style:{fontSize:"1.125rem",color:"rgba(255,255,255,0.75)"}})}),i.jsxs("div",{style:{flex:1,minWidth:0},children:[i.jsx("div",{style:{fontSize:"0.95rem",fontWeight:600,color:"rgba(255,255,255,0.95)"},children:e.title}),i.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.6)"},children:pe()})]})]}):i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:e.momentType==="ticket"?"1rem":"0",paddingBottom:e.momentType==="ticket"?"0.5rem":"0"},children:[i.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"0.75rem",backgroundColor:"rgba(255, 255, 255, 0.06)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:i.jsx("i",{className:`bi ${e.momentType==="ticket"?"bi-qr-code":e.momentType==="amenities"?"bi-signpost-split":e.momentType==="schedule"?"bi-calendar-event":e.momentType==="bar-menu"?"bi-cup-straw":e.momentType==="gift-shop"?"bi-bag":e.momentType==="feedback"?"bi-chat-left-text":"bi-info-circle"}`,style:{fontSize:"1.125rem",color:"rgba(255,255,255,0.75)"}})}),i.jsxs("div",{style:{flex:1,minWidth:0},children:[i.jsx("div",{style:{fontSize:"0.95rem",fontWeight:600,color:"rgba(255,255,255,0.95)"},children:e.title}),e.momentType==="amenities"&&e.subtitle&&i.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",marginTop:"0.25rem"},children:e.subtitle}),e.momentType==="ticket"&&(e.locationLabel||e.startsAt)&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap",marginTop:"0.25rem"},children:[e.locationLabel&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[i.jsx("i",{className:"bi bi-geo-alt-fill",style:{fontSize:"0.625rem",color:"rgba(255, 255, 255, 0.5)"}}),i.jsx("span",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)"},children:e.locationLabel})]}),e.startsAt&&(()=>{const H=new Date(e.startsAt),k=H.getHours(),h=k>=12?"pm":"am",N=k%12||12,M=H.getMinutes(),Q=M===0?`${N}:00${h}`:`${N}:${M.toString().padStart(2,"0")}${h}`;return i.jsx("span",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)"},children:Q})})(),f&&i.jsx("span",{className:"badge bg-danger rounded-pill",style:{fontSize:"0.65rem",padding:"0.2rem 0.5rem",fontWeight:"600"},children:f})]})]})]}),W&&!q&&e.collapsedSummary&&i.jsx("div",{style:{marginTop:"0.75rem",color:"rgba(255,255,255,0.75)",fontSize:"0.875rem"},children:e.collapsedSummary}),i.jsx("div",{style:{display:"grid",gridTemplateRows:A?"0fr":"1fr",transition:"grid-template-rows 0.2s ease-in-out"},children:i.jsx("div",{style:{overflow:"hidden",minHeight:0},children:i.jsxs("div",{style:{marginTop:e.momentType==="ticket"?"4rem":"0.75rem"},children:[e.momentType==="arrival"&&i.jsxs("div",{style:{position:"relative",width:"100%",height:"220px",borderRadius:"1.25rem",overflow:"hidden",backgroundColor:"rgba(255, 255, 255, 0.06)",border:"1px solid rgba(255, 255, 255, 0.08)"},children:[e.heroImage?i.jsx("img",{src:e.heroImage,alt:e.title,style:{width:"100%",height:"100%",objectFit:"cover",display:"block"},onError:H=>{const k=e.heroImageFallback;if(k&&H.currentTarget.src!==k){H.currentTarget.src=k;return}H.currentTarget.style.display="none"}}):null,e.startsAt&&i.jsx("div",{style:{position:"absolute",top:"12px",left:"12px",backgroundColor:"rgba(0, 0, 0, 0.55)",color:"rgba(255, 255, 255, 0.95)",padding:"0.4rem 0.6rem",borderRadius:"999px",fontSize:"0.8rem",fontWeight:700,letterSpacing:"0.02em",backdropFilter:"blur(6px)"},children:(()=>{const k=pe().match(/Starts in\\s+(\\d+:\\d{2})/i);return k?`STARTS ${k[1]}`:"STARTS SOON"})()})]}),e.momentType==="ticket"&&i.jsxs("div",{style:{position:"relative",width:"100%",minHeight:"350px",overflow:"hidden",zIndex:2,display:"flex",flexDirection:"column"},children:[i.jsx("div",{style:{flex:1,position:"relative"},children:e.qrCode&&i.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:2,width:"180px",height:"180px",backgroundColor:"#ffffff",borderRadius:"24px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 10px 30px rgba(0,0,0,0.5)"},children:i.jsx("img",{src:"https://www.dropbox.com/scl/fi/hank1pclxq3ja4pq2pe1e/qr.gif?rlkey=35r2hoj687fo0nhri4aipt51k&dl=1&raw=1",alt:"Ticket QR code",style:{width:"150px",height:"150px",borderRadius:"18px",objectFit:"contain"}})})}),e.description&&i.jsx("div",{style:{padding:"1.25rem",fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.95)",lineHeight:1.6},children:e.description})]}),e.momentType==="amenities"&&Array.isArray(e.items)&&i.jsx("div",{style:{marginTop:"25px",marginBottom:"25px",textAlign:"left"},children:i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:e.items.map((H,k)=>i.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"flex-start"},children:[i.jsx("i",{className:`bi ${be(H.icon)}`,style:{color:"rgba(255,255,255,0.7)",marginTop:"0.1rem",fontSize:"19px"}}),i.jsxs("div",{style:{flex:1,minWidth:0},children:[i.jsx("div",{style:{fontSize:"19px",color:"rgba(255,255,255,0.85)"},children:H.label}),H.hint&&i.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.6)"},children:H.hint})]})]},`amenity-${k}`))})}),e.momentType==="schedule"&&Array.isArray(e.events)&&i.jsx("div",{style:{marginTop:"25px",marginBottom:"25px"},children:i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:e.events.map((H,k)=>i.jsx(Zl,{event:H},k))})}),e.momentType==="bar-menu"&&i.jsxs("div",{style:{marginTop:"25px",marginBottom:"25px"},children:[e.mostPopular&&e.mostPopular.length>0&&i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.6)",marginBottom:"0.75rem"},children:"Most Popular"}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:e.mostPopular.map((H,k)=>i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"1rem"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flex:1,minWidth:0},children:[i.jsx("button",{style:{width:"32px",height:"32px",borderRadius:"50%",border:"1px solid rgba(255, 255, 255, 0.3)",backgroundColor:"transparent",color:"rgba(255, 255, 255, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",flexShrink:0},children:i.jsx("i",{className:"bi bi-plus",style:{fontSize:"0.875rem"}})}),i.jsxs("div",{style:{flex:1,minWidth:0},children:[i.jsx("div",{style:{fontSize:"0.875rem",fontWeight:600,color:"rgba(255, 255, 255, 0.95)"},children:H.name}),H.description&&i.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)"},children:H.description})]})]}),i.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:600,color:"rgba(255, 255, 255, 0.95)",flexShrink:0},children:["$",H.price]})]},`drink-${k}`))})]}),e.deliveryLocation&&i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{height:"1px",backgroundColor:"rgba(255, 255, 255, 0.1)",marginBottom:"1rem"}}),i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem",cursor:"pointer"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flex:1},children:[i.jsx("i",{className:"bi bi-geo-alt",style:{fontSize:"1rem",color:"rgba(255, 255, 255, 0.6)"}}),i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"0.625rem",color:"rgba(255, 255, 255, 0.6)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"DELIVERY LOCATION"}),i.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.95)",marginTop:"0.125rem"},children:e.deliveryLocation})]})]}),i.jsx("i",{className:"bi bi-chevron-right",style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)"}})]})]}),e.paymentMethod&&i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{height:"1px",backgroundColor:"rgba(255, 255, 255, 0.1)",marginBottom:"1rem"}}),i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem",cursor:"pointer"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flex:1},children:[i.jsx("i",{className:"bi bi-credit-card",style:{fontSize:"1rem",color:"rgba(255, 255, 255, 0.6)"}}),i.jsxs("div",{children:[i.jsx("div",{style:{fontSize:"0.625rem",color:"rgba(255, 255, 255, 0.6)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"PAYMENT METHOD"}),i.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.95)",marginTop:"0.125rem"},children:e.paymentMethod})]})]}),i.jsx("i",{className:"bi bi-chevron-right",style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)"}})]})]}),e.total!==void 0&&i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{height:"1px",backgroundColor:"rgba(255, 255, 255, 0.1)",marginBottom:"1rem"}}),i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem"},children:[i.jsx("div",{style:{fontSize:"0.875rem",fontWeight:600,color:"rgba(255, 255, 255, 0.95)"},children:"TOTAL"}),i.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:600,color:"rgba(255, 255, 255, 0.95)"},children:["$",e.total.toFixed(2)]})]})]}),e.showActions&&i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[i.jsx("button",{style:{width:"100%",padding:"0.75rem",borderRadius:"0.5rem",backgroundColor:"#0d6efd",color:"#ffffff",border:"none",fontSize:"0.875rem",fontWeight:600,cursor:"pointer"},children:"Confirm Order"}),i.jsx("div",{style:{textAlign:"center"},children:i.jsx("span",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.6)",cursor:"pointer"},children:"Full Menu"})})]})]}),e.momentType==="gift-shop"&&Array.isArray(e.products)&&i.jsxs("div",{style:{marginTop:"25px",marginBottom:"25px"},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.6)",marginBottom:"0.75rem"},children:"Featured"}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:e.products.map((H,k)=>i.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"flex-start"},children:[H.image&&i.jsx("img",{src:H.image,alt:H.title,style:{width:"80px",height:"80px",borderRadius:"0.5rem",objectFit:"cover",flexShrink:0}}),i.jsxs("div",{style:{flex:1,minWidth:0},children:[i.jsx("div",{style:{fontSize:"0.875rem",fontWeight:500,color:"rgba(255, 255, 255, 0.95)",marginBottom:"0.25rem"},children:H.title}),H.author&&i.jsxs("div",{style:{fontSize:"0.75rem",fontStyle:"italic",color:"rgba(255, 255, 255, 0.6)",textDecoration:"underline",marginBottom:"0.125rem"},children:["by ",H.author]}),H.contributors&&i.jsxs("div",{style:{fontSize:"0.75rem",fontStyle:"italic",color:"rgba(255, 255, 255, 0.6)"},children:["and ",H.contributors," more"]})]}),H.price&&i.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:500,color:"rgba(255, 255, 255, 0.95)",flexShrink:0},children:["$",H.price]})]},`product-${k}`))})]}),e.momentType==="feedback"&&i.jsxs("div",{style:{marginTop:"25px",marginBottom:"25px"},children:[e.question&&i.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.95)",marginBottom:"1rem",lineHeight:1.5},children:e.question}),e.showScale&&i.jsx("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"space-between",flexWrap:"wrap"},children:Array.from({length:10},(H,k)=>k+1).map(H=>i.jsx("button",{style:{width:"40px",height:"40px",borderRadius:"0.5rem",backgroundColor:"rgba(255, 255, 255, 0.08)",color:"rgba(255, 255, 255, 0.95)",border:"none",fontSize:"0.875rem",fontWeight:500,cursor:"pointer",transition:"background-color 0.2s"},onMouseEnter:k=>{k.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.15)"},onMouseLeave:k=>{k.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},children:H},H))})]})]})})}),!ee&&i.jsx("div",{style:{display:"grid",gridTemplateRows:A?"1fr":"0fr",transition:"grid-template-rows 0.2s ease-in-out"},children:i.jsx("div",{style:{overflow:"hidden",minHeight:0},children:i.jsx("div",{style:{padding:He?"1rem":"0.75rem",marginTop:He?"25px":"0",marginBottom:He?"25px":"0",backgroundColor:He?"rgba(0, 0, 0, 0.6)":"transparent",backdropFilter:He?"blur(8px)":"none",fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.75)"},children:Nt()})})})]})},Ne=()=>{switch(e.type){case"task":return ye();case"guest":return Pe();case"concierge":return $e();case"system":return re();case"moment":return Ie();default:return i.jsx("div",{children:e.message||e.title})}},Nt=()=>{var W,q,pe;if(!ee)switch(e.type){case"task":const be=e.description?`${e.description.substring(0,60)}...`:"";return i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:600,marginBottom:"0.25rem"},children:e.title}),be&&i.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.7)"},children:be})]});case"guest":const H=e.name||"Guest";return i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:600,marginBottom:"0.25rem"},children:H}),i.jsxs("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.7)"},children:[(W=e.message)==null?void 0:W.substring(0,50),"..."]})]});case"concierge":return i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:600,marginBottom:"0.25rem"},children:"Canyon Concierge"}),i.jsxs("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.7)"},children:[(q=e.message)==null?void 0:q.substring(0,50),"..."]})]});case"system":const k=e.message?`${e.message.substring(0,60)}...`:"";return i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:600,marginBottom:"0.25rem"},children:e.title}),k&&i.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.7)"},children:k})]});case"moment":return i.jsxs("div",{children:[i.jsx("div",{style:{fontWeight:600,marginBottom:"0.25rem"},children:e.title||"Moment"}),(e.collapsedSummary||e.description)&&i.jsxs("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.7)"},children:[e.collapsedSummary||((pe=e.description)==null?void 0:pe.substring(0,50)),"..."]})]});default:return i.jsx("div",{children:i.jsx("div",{style:{fontWeight:600},children:e.title||"Item"})})}return null},bt=(()=>{if(e.type==="task"){if(e.status==="completed"||e.completed)return"#198754";if(e.assignedTo)return"#dc3545"}else if(e.type==="system")return"#3B31FF";return null})(),Qe=e.type==="guest",Et=e.type==="concierge"&&e.sender&&e.sender.type==="staff",Ze=e.type==="concierge"&&e.sender&&e.sender.type==="ai",Rt=Qe||Et||Ze,On=Rt?r?"rgba(13, 110, 253, 0.15)":"transparent":r?"rgba(13, 110, 253, 0.15)":"rgba(20, 20, 20, 1)",He=!A&&(e.type==="moment"&&e.momentType==="ticket"&&e.heroImage||e.type==="system"&&e.title==="Performance starting soon"),en=()=>{const W=A;J&&w?w(e.id,W,{reason:"manual"}):O(!A)};return i.jsxs("div",{id:`feed-item-${e.id}`,ref:p,className:"feed-item position-relative",style:{position:"relative",backgroundColor:s?"rgba(13, 110, 253, 0.2)":On,border:"none",borderLeft:bt?`4px solid ${bt}`:"none",opacity:n?1:.4,cursor:"pointer",transition:s?"background-color 0.3s ease-out":"all 0.2s",padding:e.type==="moment"&&e.momentType==="ticket"?"0":n?"1rem":"0.5rem 1rem",borderRadius:"0.5rem",boxShadow:s?"0 0 0 2px rgba(13, 110, 253, 0.3)":"none",marginBottom:"1rem",overflow:"hidden"},onClick:W=>{e.threadId&&a?(W.stopPropagation(),a({threadId:e.threadId,thread:e.thread||null})):o()},onMouseEnter:W=>{n&&(W.currentTarget.style.backgroundColor=r?"rgba(13, 110, 253, 0.2)":"rgba(255, 255, 255, 0.05)")},onMouseLeave:W=>{Rt?W.currentTarget.style.backgroundColor=r?"rgba(13, 110, 253, 0.15)":"transparent":W.currentTarget.style.backgroundColor=r?"rgba(13, 110, 253, 0.15)":"rgba(20, 20, 20, 1)"},children:[e.heroImage&&i.jsxs(i.Fragment,{children:[i.jsx("img",{src:e.heroImage,alt:"",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",objectPosition:"top center",zIndex:0},onError:W=>{const q=e.heroImageFallback;q&&W.currentTarget.src!==q&&(W.currentTarget.src=q)}}),i.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:A?"linear-gradient(to bottom, rgba(0, 0, 0, 0.3) 0%, rgba(0, 0, 0, 0.7) 100%)":"linear-gradient(to bottom, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.85) 100%)",zIndex:1}})]}),!Y&&!ee&&n&&!A&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"position-absolute",style:{top:"0.5rem",right:"2.75rem",zIndex:K?1003:1001,display:L?"none":"block"},ref:u,onClick:W=>W.stopPropagation(),children:[i.jsx("button",{className:"btn btn-link p-0",style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"1.25rem",zIndex:K?1:"auto",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",width:"26px",height:"26px",padding:"0",border:"none",background:"none",cursor:"pointer",transition:"all 0.2s"},onClick:W=>{W.stopPropagation(),m(!K)},title:"Actions",children:i.jsx("i",{className:"bi bi-three-dots-vertical"})}),K&&i.jsxs("div",{className:"actions-popover",style:{position:"absolute",top:"100%",right:"0",marginTop:"0.25rem",backgroundColor:"#0a0a0a",border:"none",borderRadius:"0.5rem",padding:"0.5rem",minWidth:"150px",zIndex:1003,boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)"},onClick:W=>W.stopPropagation(),children:[i.jsxs("button",{className:"btn btn-link text-start w-100 p-2",style:{color:e.status==="completed"||e.completed?"rgba(255, 255, 255, 0.4)":"#ffffff",fontSize:"0.875rem",textDecoration:"none",cursor:e.status==="completed"||e.completed?"not-allowed":"pointer"},disabled:e.status==="completed"||e.completed,onClick:()=>{m(!1),!(e.status==="completed"||e.completed)&&v&&v(e.id)},children:[i.jsx("i",{className:"bi bi-check-circle me-2",style:{fontWeight:"bold"}})," Complete"]}),i.jsxs("button",{className:"btn btn-link text-start w-100 p-2",style:{color:"#ffffff",fontSize:"0.875rem",textDecoration:"none"},onClick:()=>{m(!1),o()},children:[i.jsx("i",{className:"bi bi-chat me-2",style:{fontWeight:"bold"}})," Reply"]}),i.jsxs("button",{className:"btn btn-link text-start w-100 p-2",style:{color:"#ffffff",fontSize:"0.875rem",textDecoration:"none"},onClick:()=>{m(!1),o()},children:[i.jsx("i",{className:"bi bi-arrow-repeat me-2",style:{fontWeight:"bold"}})," Reassign"]})]})]}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:W=>{W.stopPropagation(),d&&d()},"aria-pressed":c,"aria-label":c?"Unstar item":"Star item",style:{position:"absolute",top:"0.5rem",right:"5.5rem",zIndex:9,color:c?"#ffc107":"rgba(255, 255, 255, 0.4)",fontSize:"1.1rem",padding:"0",border:"none",background:"none",borderRadius:"50%",cursor:"pointer",transition:"all 0.2s",display:Y||ee?"none":"flex",alignItems:"center",justifyContent:"center",width:"26px",height:"26px"},onMouseEnter:W=>{W.currentTarget.style.color=c?"#ffd700":"rgba(255, 255, 255, 0.7)",W.currentTarget.style.transform="scale(1.1)",W.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)"},onMouseLeave:W=>{W.currentTarget.style.color=c?"#ffc107":"rgba(255, 255, 255, 0.4)",W.currentTarget.style.transform="scale(1)",W.currentTarget.style.backgroundColor="none"},children:c?i.jsx("i",{className:"bi bi-star-fill",style:{fontSize:"1.1rem",fontWeight:"bold"}}):i.jsx("i",{className:"bi bi-star",style:{fontSize:"1.1rem",fontWeight:"bold"}})})]}),!te&&!xe&&i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:W=>{W.stopPropagation(),en()},"aria-label":A?"Expand card":"Collapse card",style:{position:"absolute",top:(()=>{const W=e.type==="moment"&&e.momentType==="ticket"?0:n?16:8,q=e.type==="moment"&&e.momentType==="ticket"?16:0;return`${W+q+20-14}px`})(),right:"1rem",zIndex:10,color:"rgba(255, 255, 255, 0.75)",fontSize:"1rem",padding:"0",border:"none",background:"rgba(255, 255, 255, 0.06)",borderRadius:"50%",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",width:"28px",height:"28px"},onMouseEnter:W=>{W.currentTarget.style.color="rgba(255, 255, 255, 1)",W.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)"},onMouseLeave:W=>{W.currentTarget.style.color="rgba(255, 255, 255, 0.75)",W.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.06)"},children:i.jsx("i",{className:"bi bi-chevron-down",style:{fontSize:"1rem",transform:A?"rotate(0deg)":"rotate(180deg)",transition:"transform 0.2s ease-in-out"}})}),i.jsx("div",{ref:$,style:{minWidth:0,position:"relative",zIndex:2},children:i.jsx("div",{style:{padding:"0",position:"relative"},children:Ne()})}),!A&&!(e.type==="moment"&&e.momentType==="ticket")&&i.jsx("div",{className:"position-absolute",style:{bottom:He?"1.25rem":"0.5rem",right:He?"1.25rem":"0.5rem",fontSize:"0.75rem",color:He?"rgba(255, 255, 255, 0.9)":"rgba(255, 255, 255, 0.7)",backgroundColor:"transparent",padding:"0",borderRadius:He?"999px":"0",backdropFilter:"none",zIndex:He?2:"auto"},children:V(e.timestamp)})]})}function um(e){const t=new Map,n=new Map;return e.forEach(r=>{if(r.type==="guest"){let s=r.threadId;if(!s){for(const[c,d]of t.entries())if(d.participants.some(v=>v.type==="guest"&&v.name===r.name)){s=c;break}s||(s=`thread-${r.id}`)}if(n.set(r.id,s),t.has(s)){const c=t.get(s);c.participants.some(x=>x.type==="guest"&&x.name===r.name)||c.participants.find(v=>v.type==="guest"&&v.name===r.name)||c.participants.push({type:"guest",name:r.name,avatar:r.avatar,id:r.id})}else{const c=[];c.push({type:"guest",name:r.name,avatar:r.avatar,id:r.id}),c.push({type:"ai",name:"Canyon Concierge",avatar:"AI",id:"ai"}),t.set(s,{id:s,participants:c,messages:[],lastActivity:r.timestamp,unreadCount:0,unread:!1})}const o=t.get(s),a=o.participants.find(c=>c.type==="guest"&&c.name===r.name),l=a?a.id:r.id;o.messages.push({id:r.id,type:r.type,sender:{type:"guest",name:r.name,avatar:r.avatar,id:l},message:r.message,timestamp:r.timestamp}),r.timestamp>o.lastActivity&&(o.lastActivity=r.timestamp)}}),e.forEach(r=>{if(r.type==="concierge"){let s=null;if(r.sender&&r.sender.type==="staff"){if(s=`thread-staff-${r.sender.id}`,!t.has(s)){const o=new Set;o.add({type:"staff",name:r.sender.name,avatar:r.sender.avatar,id:r.sender.id}),o.add({type:"ai",name:"Canyon Concierge",avatar:"AI"}),t.set(s,{id:s,participants:Array.from(o),messages:[],lastActivity:r.timestamp,unreadCount:0,unread:!1})}}else if(r.parentId&&n.has(r.parentId)?s=n.get(r.parentId):r.threadId&&(s=r.threadId),s&&t.has(s)){const o=t.get(s);o.messages.push({id:r.id,type:r.type,sender:{type:"ai",name:"Canyon Concierge",avatar:"AI",id:"ai"},message:r.message,timestamp:r.timestamp}),r.timestamp>o.lastActivity&&(o.lastActivity=r.timestamp)}if(r.sender&&r.sender.type==="staff"&&s){const o=t.get(s);o.messages.push({id:r.id,type:r.type,sender:{type:"staff",name:r.sender.name,avatar:r.sender.avatar,id:r.sender.id||"staff"},message:r.message,timestamp:r.timestamp}),r.timestamp>o.lastActivity&&(o.lastActivity=r.timestamp)}}}),t.forEach(r=>{r.messages.sort((s,o)=>s.timestamp-o.timestamp)}),Array.from(t.values()).sort((r,s)=>s.lastActivity-r.lastActivity)}function cm(e){var x,v;if(!e.messages||e.messages.length===0)return{preview:null,hasReply:!1};const t=[...e.messages].sort((p,b)=>{const g=p.timestamp||p.createdAt||0;return(b.timestamp||b.createdAt||0)-g}),n=t[0],r=p=>p.senderId?p.senderId==="ai"?"ai":p.senderId.includes("jeremy")||p.senderId.includes("staff")||p.senderId==="jeremy-bailey"?"staff":"guest":p.sender&&p.sender.type||"unknown",s=p=>p.text||p.message||"",o=(x=e.participants)==null?void 0:x.find(p=>p.type==="guest"),a=t.length>0?t[t.length-1]:null,l=a&&r(a)==="staff";if(o&&!l){const p=t.filter(f=>r(f)==="guest"),b=t.filter(f=>r(f)==="ai"),g=t.filter(f=>r(f)==="staff"||f.senderId&&(f.senderId.includes("jeremy")||f.senderId.includes("staff")||f.senderId==="jeremy-bailey")||f.sender&&f.sender.type==="staff"),w=p[0]?{message:s(p[0]),timestamp:p[0].timestamp||p[0].createdAt}:null,K=b[0]?{message:s(b[0]),timestamp:b[0].timestamp||b[0].createdAt,senderType:"ai"}:null,m=g[0]?{message:s(g[0]),timestamp:g[0].timestamp||g[0].createdAt,senderType:"staff",sender:g[0].sender||(g[0].senderId?{id:g[0].senderId,type:"staff"}:null)}:null;let u=null;return K&&m?u=K.timestamp>m.timestamp?K:m:u=K||m,{guestMessage:w,aiReply:K,staffReply:m,reply:u,hasReply:u!==null}}const d=((v=e.participants)==null?void 0:v.find(p=>p.type==="staff"))!==void 0;return d&&!o?{latestMessage:{message:s(n),timestamp:n.timestamp||n.createdAt},hasReply:!1}:d&&o?{latestMessage:{message:s(n),timestamp:n.timestamp||n.createdAt},hasReply:!1}:{latestMessage:{message:s(n),timestamp:n.timestamp||n.createdAt},hasReply:!1}}function dm({thread:e,isEmphasized:t=!0,isSelected:n,onClick:r,isInteractive:s=!0,formatTime:o,getAvatarColor:a,itemRef:l,currentUserId:c}){var z,C,R,L,Z,Y,ee,_;const d=cm(e),[x,v]=du.useState(!1),p=e.participants.find(O=>O.id!==c&&O.type==="guest")||e.participants.find(O=>O.id!==c&&O.type==="staff")||e.participants.find(O=>O.type==="ai")||e.participants.find(O=>O.id!==c)||e.participants[0],b=e.messages&&e.messages.length>0?e.messages[e.messages.length-1]:null,g=b&&(b.senderId===c||b.sender&&b.sender.id===c||b.sender&&b.sender.type==="staff"&&b.sender.name==="Jeremy Bailey"||b.senderId&&(b.senderId.includes("jeremy")||b.senderId.includes("staff")||b.senderId==="jeremy-bailey")),w=e.messages&&e.messages.length>0?e.messages[0]:null,K=w&&(w.senderId===c||w.sender&&w.sender.id===c||w.sender&&w.sender.type==="staff"&&w.sender.name==="Jeremy Bailey"||w.senderId&&(w.senderId.includes("jeremy")||w.senderId.includes("staff")||w.senderId==="jeremy-bailey")),u=(p==null?void 0:p.type)==="guest"?"Guest":(p==null?void 0:p.type)==="staff"?"Staff":(p==null?void 0:p.type)==="ai"?"AI":"",y=((z=e.participants)==null?void 0:z.some(O=>O.type==="guest"))&&!K;return i.jsxs("div",{ref:l,className:"thread-row",onClick:r,onMouseEnter:()=>s&&v(!0),onMouseLeave:()=>s&&v(!1),style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",padding:t?"0.75rem":"0.5rem 1rem",paddingLeft:"1rem",paddingRight:"1rem",paddingBottom:t?"2rem":"0.5rem",marginTop:"0.75rem",marginBottom:"1.25rem",minHeight:t?"80px":"auto",borderRadius:"0.5rem",backgroundColor:n?"rgba(13, 110, 253, 0.15)":s&&x?"rgba(255, 255, 255, 0.05)":"transparent",borderLeft:n?"3px solid #0d6efd":"3px solid transparent",cursor:s?"pointer":"default",transition:"background-color 0.2s, border-color 0.2s, border-radius 0.2s, opacity 0.2s",position:"relative",opacity:t?1:.4},children:[t&&i.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"40px",height:"40px",backgroundColor:(p==null?void 0:p.type)==="ai"?"#3B31FF":(p==null?void 0:p.type)==="guest"||(p==null?void 0:p.type)==="staff"?a(p.avatar||p.name):"#3B31FF",color:"#ffffff",fontSize:"0.875rem",fontWeight:"600"},children:(p==null?void 0:p.type)==="ai"?"AI":(p==null?void 0:p.avatar)||(p!=null&&p.name?p.name.charAt(0):"?")}),i.jsx("div",{style:{flex:1,minWidth:0,paddingRight:t?0:"4rem"},children:t?i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[i.jsx("strong",{style:{color:"#ffffff",fontSize:"0.875rem"},children:(p==null?void 0:p.name)||"Unknown"}),u&&i.jsx("small",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"},children:u})]}),d.guestMessage&&(d.aiReply||d.staffReply||d.reply)?i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{marginBottom:"0.25rem"},children:i.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:d.guestMessage.message})}),i.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:(()=>{const O=d.reply||d.aiReply||d.staffReply;if(!O)return null;const J=O.senderType==="staff"||d.staffReply&&(O===d.staffReply||O.message===d.staffReply.message)||O.sender&&O.sender.type==="staff"||O.senderId&&O.senderId!=="ai"&&O.senderId!==void 0&&(O.senderId===c||O.senderId.includes("jeremy")||O.senderId.includes("staff")),te=O.senderType==="ai"||d.aiReply&&(O===d.aiReply||O.message===d.aiReply.message)||O.sender&&O.sender.type==="ai"||O.senderId==="ai";return J?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"20px",height:"20px",backgroundColor:a("JB"),color:"#ffffff",fontSize:"0.625rem",fontWeight:"600"},children:"JB"}),i.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.6)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:O.message})]}):te?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"20px",height:"20px",backgroundColor:"#3B31FF",color:"#ffffff",fontSize:"0.625rem",fontWeight:"600"},children:"AI"}),i.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.6)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:O.message})]}):null})()})]}):d.guestMessage?g?i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"20px",height:"20px",backgroundColor:a("JB"),color:"#ffffff",fontSize:"0.625rem",fontWeight:"600"},children:"JB"}),i.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.6)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(b==null?void 0:b.text)||(b==null?void 0:b.message)||d.guestMessage.message})]}):i.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:d.guestMessage.message}):d.latestMessage?g&&!y?i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"20px",height:"20px",backgroundColor:a("JB"),color:"#ffffff",fontSize:"0.625rem",fontWeight:"600"},children:"JB"}),i.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.6)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:d.latestMessage.message})]}):i.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:d.latestMessage.message}):e.messages&&e.messages.length>0&&i.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:((C=e.messages[e.messages.length-1])==null?void 0:C.text)||((R=e.messages[e.messages.length-1])==null?void 0:R.message)||""})]}):i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",minWidth:0,overflow:"hidden"},children:[i.jsxs("strong",{style:{color:"rgba(255, 255, 255, 0.75)",fontSize:"0.875rem",whiteSpace:"nowrap",flexShrink:0},children:[(p==null?void 0:p.name)||"Unknown",":"]}),i.jsx("span",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.875rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",minWidth:0,flex:1},children:((L=d.guestMessage)==null?void 0:L.message)||((Z=d.latestMessage)==null?void 0:Z.message)||((Y=d.reply)==null?void 0:Y.message)||e.messages&&e.messages.length>0&&(((ee=e.messages[e.messages.length-1])==null?void 0:ee.text)||((_=e.messages[e.messages.length-1])==null?void 0:_.message))||""})]})}),e.unread&&e.unreadCount>0&&i.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"#0d6efd",flexShrink:0,marginTop:"0.5rem"}}),i.jsx("div",{className:"position-absolute",style:{bottom:"0.5rem",right:"0.5rem",fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.7)"},children:o(e.lastActivity)})]})}function md({items:e,allItems:t,activeFilter:n,onItemClick:r,onOpenThread:s,onToggleMoment:o,selectedContext:a,starredIds:l=new Set,onToggleStar:c,itemRefs:d,onUpdateTaskLocation:x,onCompleteTask:v,currentUserId:p,highlightedItemId:b,collapseVariant:g="staff",expandedCards:w,onCardExpandChange:K}){const m=ee=>{switch(ee.type){case"task":return"service";case"thread":return"guests";case"system":return"system";default:return"all"}},u=e,f=ee=>n==="all"?!0:n==="starred"?l&&l instanceof Set&&l.has(ee.id):m(ee)===n,y=ee=>{if(ee.type==="thread"){const _=ee.thread;return n==="all"?!0:n==="starred"?l&&l instanceof Set&&_.messages.some(O=>l.has(O.id)):n==="guests"}else return f(ee)},C=u.filter(ee=>y(ee)).length>0,L=n!=="all"&&!C,Y=(()=>{switch(n){case"guests":return{message:"No active conversations",icon:"bi-chat-dots"};case"service":return{message:"No open tasks",icon:"bi-check-square"};case"system":return{message:"No system alerts",icon:"bi-lightning"};case"starred":return{message:"Nothing starred yet",icon:"bi-star"};default:return null}})();return i.jsx("div",{className:"feed-container",style:{padding:"0.75rem 1rem",paddingTop:"2rem",paddingBottom:"6rem",overflow:L?"hidden":"visible",height:L?"100%":"auto",minHeight:L?"calc(100vh - 200px)":"auto",display:"flex",flexDirection:"column",position:"relative"},children:L&&Y?i.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem 1rem",color:"rgba(255, 255, 255, 0.4)",textAlign:"center",width:"100%",maxWidth:"100%"},children:[i.jsx("i",{className:`bi ${Y.icon}`,style:{fontSize:"1.75rem",marginBottom:"0.75rem",color:"rgba(255, 255, 255, 0.3)",fontWeight:"normal"}}),i.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"400",color:"rgba(255, 255, 255, 0.4)",lineHeight:"1.4"},children:Y.message})]}):i.jsx("div",{className:"feed-items",children:u.map(ee=>{const _=y(ee);if(ee.type==="thread"){const J=ee.thread,te=(a==null?void 0:a.type)==="thread"&&(a==null?void 0:a.id)===J.id;return i.jsx(dm,{thread:J,isEmphasized:_,isSelected:te,isInteractive:!!s,onClick:s?()=>{s({threadId:J.id,thread:J})}:void 0,formatTime:xe=>{const de=new Date(xe),$=new Date-de,V=Math.floor($/6e4);if(V<1)return"Just now";if(V<60)return`${V}m ago`;const ye=Math.floor(V/60);return ye<24?`${ye}h ago`:de.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},getAvatarColor:xe=>{const de=["#0d6efd","#6f42c1","#d63384","#dc3545","#fd7e14","#ffc107","#20c997","#198754"],A=xe.charCodeAt(0)%de.length;return de[A]},currentUserId:p,itemRef:xe=>{xe?d.current.set(J.id,xe):d.current.delete(J.id)}},J.id)}const O=(a==null?void 0:a.id)===ee.id;return i.jsx(lm,{item:ee,allItems:t,isEmphasized:_,isSelected:O,isHighlighted:b===ee.id,onClick:()=>r(ee),onOpenThread:s,onToggleMoment:o,isStarred:l&&l instanceof Set?l.has(ee.id):!1,onToggleStar:()=>c&&c(ee.id),onUpdateTaskLocation:x,onCompleteTask:v,collapseVariant:g,expandedCards:w,onCardExpandChange:K,itemRef:J=>{J?d.current.set(ee.id,J):d.current.delete(ee.id)}},ee.id)})})})}function gd({selectedContext:e,toolMode:t,onToolModeChange:n,onToolAction:r,onCompleteTask:s,onReassignTask:o,isThreadMode:a=!1,feedItems:l=[],onSendMessage:c,onInputFocus:d,config:x,readOnly:v=!1,placeholderOverride:p}){const b=(x==null?void 0:x.mode)==="visitor",[g,w]=T.useState([]),[K,m]=T.useState(null),[u,f]=T.useState(null),[y,z]=T.useState(!1),[C,R]=T.useState([]),[L,Z]=T.useState(null),[Y,ee]=T.useState(null),[_,O]=T.useState(""),[J,te]=T.useState(!1),[xe,de]=T.useState(""),[A,$]=T.useState(!1),[V,ye]=T.useState(!1),[fe,Pe]=T.useState(!1),[$e,re]=T.useState(!0),[Ie,Ne]=T.useState(!1),[Nt,ut]=T.useState(!1),[bt,Qe]=T.useState(!1),[Et,Ze]=T.useState(!1),[Rt,On]=T.useState(!1),[He,en]=T.useState(!1),[W,q]=T.useState(!1),[pe,be]=T.useState(!1),H=T.useRef(null),k=T.useRef(null),h=T.useRef(null),N=T.useRef(null),M=T.useRef(null),Q=T.useRef(null),F=T.useRef(null),se=T.useRef(null);T.useRef(null);const[we,me]=T.useState(0),[he,Ae]=T.useState(!1),je=()=>!_||typeof _!="string"?"":_.trim(),Sn=S=>{if(!S||typeof S!="string"||S.length===0)return"#0d6efd";const I=["#0d6efd","#6f42c1","#d63384","#dc3545","#fd7e14","#ffc107","#20c997","#198754"],D=S.charCodeAt(0)%I.length;return I[D]},Ce=()=>{const S=new Map;S.set("ai",{id:"ai",name:"Canyon Concierge",avatar:"AI",type:"ai",isSpecial:!0}),S.set("staff",{id:"staff",name:"Staff",avatar:"",type:"staff",isSpecial:!0}),l.forEach(ne=>{if(ne.type==="thread"&&ne.thread&&ne.thread.participants){const oe=new Set;ne.thread.participants.forEach(ae=>{if(ae.type==="guest"&&ae.id&&ae.name){const ie=String(ae.id);if(oe.has(ie))return;oe.add(ie),S.set(ie,{id:ae.id,name:ae.name,avatar:ae.avatar||ae.name.charAt(0),type:"guest",isSpecial:!1})}})}if(ne.type==="task"&&ne.assignedTo&&ne.assignedTo.type==="staff"){const oe=`staff-${ne.assignedTo.name}`;S.has(oe)||S.set(oe,{id:oe,name:ne.assignedTo.name,avatar:ne.assignedTo.avatar||ne.assignedTo.name.charAt(0),type:"staff",isSpecial:!1})}});const I=Array.from(S.values()),D=I.filter(ne=>ne.type==="guest").map(ne=>ne.name),G=new Set(D);return D.length!==G.size&&console.warn("Duplicate guest names detected in people list:",{total:D.length,unique:G.size,allNames:D,allPeople:I.filter(ne=>ne.type==="guest")}),I},Ht=()=>{const S=new Map;return l.forEach(I=>{if(I.type==="task"&&I.assignedTo&&I.assignedTo.type==="staff"){const D=`staff-${I.assignedTo.name}`;S.has(D)||S.set(D,{id:D,name:I.assignedTo.name,avatar:I.assignedTo.avatar||I.assignedTo.name.charAt(0),type:"staff",isSpecial:!1})}if(I.type==="concierge"&&I.sender&&I.sender.type==="staff"){const D=`staff-${I.sender.name}`;S.has(D)||S.set(D,{id:D,name:I.sender.name,avatar:I.sender.avatar||I.sender.name.charAt(0),type:"staff",isSpecial:!1})}}),Array.from(S.values())},st=()=>{const S=Ce();if(!xe.trim())return S;const I=xe.toLowerCase();return S.filter(D=>D.name.toLowerCase().includes(I))};T.useEffect(()=>{J&&k.current&&setTimeout(()=>{var S;(S=k.current)==null||S.focus()},100)},[J]),T.useEffect(()=>{const S=I=>{H.current&&!H.current.contains(I.target)&&(te(!1),de(""),$(!1)),h.current&&!h.current.contains(I.target)&&ye(!1),N.current&&!N.current.contains(I.target)&&Pe(!1)};return(J||V||fe)&&document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[J,V,fe]),T.useEffect(()=>{u!=="pos"&&(R([]),Z(null),ye(!1))},[u]),T.useEffect(()=>{u!=="check-in"&&Pe(!1)},[u]),T.useEffect(()=>{if(Y){const S=setTimeout(()=>{ee(null)},2e3);return()=>clearTimeout(S)}},[Y]),T.useEffect(()=>{const S=Ie||Nt||bt||Et,I=()=>{S||(document.body.removeAttribute("data-bottom-sheet-open"),document.body.style.overscrollBehaviorY="",document.documentElement.style.overscrollBehaviorY="",document.body.style.overflow="",document.documentElement.style.overflow="")};if(S){document.body.setAttribute("data-bottom-sheet-open","true");const D=G=>{const oe=G.target.closest("[data-bottom-sheet]")!==null;(window.scrollY===0||window.scrollY<=10)&&!oe&&G.preventDefault()};return document.addEventListener("touchmove",D,{passive:!1,capture:!0}),document.body.style.overscrollBehaviorY="none",document.documentElement.style.overscrollBehaviorY="none",()=>{document.body.removeAttribute("data-bottom-sheet-open"),document.removeEventListener("touchmove",D,{capture:!0}),document.body.style.overscrollBehaviorY="",document.documentElement.style.overscrollBehaviorY="",document.body.style.overflow="",document.documentElement.style.overflow=""}}else I();return()=>{I()}},[Ie,Nt,bt,Et]),T.useEffect(()=>{if(!(Ie||Nt||bt||Et)){const I=setTimeout(()=>{document.body.removeAttribute("data-bottom-sheet-open"),document.body.style.overscrollBehaviorY="",document.documentElement.style.overscrollBehaviorY="",document.body.style.overflow="",document.documentElement.style.overflow=""},100);return()=>clearTimeout(I)}},[Ie,Nt,bt,Et]),T.useEffect(()=>{const S=setTimeout(()=>{Ie||Nt||bt||Et||(document.body.removeAttribute("data-bottom-sheet-open"),document.body.style.overscrollBehaviorY="",document.documentElement.style.overscrollBehaviorY="",document.body.style.overflow="",document.documentElement.style.overflow="")},0);return()=>clearTimeout(S)},[]),T.useEffect(()=>{if(!he)return;const S=D=>{if(he&&se.current){D.preventDefault();const ne=D.clientY-we;ne>0&&(se.current.style.transform=`translateX(-50%) translateY(${ne}px)`)}},I=()=>{var D;if(he&&se.current){const G=se.current.style.transform;parseInt(((D=G.match(/translateY\((\d+)px\)/))==null?void 0:D[1])||"0")>100&&Ne(!1),se.current.style.transform="translateX(-50%)"}Ae(!1),me(0)};return document.addEventListener("mousemove",S,{passive:!1}),document.addEventListener("mouseup",I),()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",I)}},[he,we]),T.useEffect(()=>{const I=je().length>0,D=!u&&!y,G=g.length===0,ne=g.some(oe=>oe.id==="ai");I&&D&&G&&!ne&&w([{id:"ai",name:"Canyon Concierge",avatar:"AI",type:"ai",isSpecial:!0}])},[_,u,y,g]),T.useEffect(()=>{if(!F.current||!Q.current)return;if(!(g.length>0||u!==null||y||C.length>0)){F.current&&(F.current.style.paddingTop="0.5rem");return}const I=()=>{if(Q.current&&F.current){const G=Q.current.scrollHeight,ne=12,oe=8;F.current.style.paddingTop=`${ne+G+oe}px`}};I();const D=new ResizeObserver(I);return D.observe(Q.current),()=>{D.disconnect()}},[g,u,y,C]);const bo=S=>{w(I=>I.filter(D=>D.id!==S))},wn=S=>{if(!S||!S.id){console.error("addRecipient: Invalid person object",S);return}w(I=>{if(I.some(oe=>oe.id===S.id))return I;if(!u&&!y&&I.length>=1)return[S];const G=I.filter(oe=>oe.type==="staff"||oe.type==="ai"),ne=I.filter(oe=>oe.type==="guest");return S.type==="staff"||S.type==="ai"?[...G,S,...ne]:S.type==="guest"?[...G,...ne,S]:[...I,S]}),te(!1),$(!1),de(""),setTimeout(()=>{M.current&&M.current.focus()},100)},So=S=>{w(I=>{if(I.some(oe=>oe.id===S.id))return I.filter(oe=>oe.id!==S.id);if(!u&&!y&&I.length>=1)return[S];const G=I.filter(oe=>oe.type==="staff"||oe.type==="ai"),ne=I.filter(oe=>oe.type==="guest");return S.type==="staff"||S.type==="ai"?[...G,S,...ne]:S.type==="guest"?[...G,...ne,S]:[...I,S]})},gr=S=>{let I;return S.type==="ai"||S.type==="staff"?I="rgba(13, 110, 253, 0.3)":S.type==="guest"?I="rgba(216, 51, 132, 0.3)":I="rgba(13, 110, 253, 0.3)",i.jsxs("span",{className:"badge",style:{backgroundColor:I,color:"#ffffff",padding:"0.5rem 0.75rem",fontSize:"0.875rem",display:"inline-flex",alignItems:"center",gap:"0.5rem",borderRadius:"20px",border:"none",whiteSpace:"nowrap",height:"32px",lineHeight:"1",flexShrink:0},children:[i.jsx("span",{style:{fontSize:"1rem"},children:S.avatar}),i.jsx("span",{style:{fontWeight:"500"},children:S.name}),i.jsx("button",{type:"button",className:"btn-close btn-close-white",style:{fontSize:"0.75rem",marginLeft:"0.25rem",padding:"0",width:"1rem",height:"1rem",opacity:.8,flexShrink:0},onClick:D=>{D.stopPropagation(),D.preventDefault(),bo(S.id)},onMouseEnter:D=>{D.currentTarget.style.opacity="1"},onMouseLeave:D=>{D.currentTarget.style.opacity="0.8"},"aria-label":"Remove"})]},S.id)},yd=()=>y?i.jsxs("span",{className:"badge",style:{backgroundColor:"rgba(255, 255, 255, 0.08)",color:"rgba(255, 255, 255, 0.7)",padding:"0.5rem 0.75rem",fontSize:"0.875rem",display:"inline-flex",alignItems:"center",gap:"0.5rem",borderRadius:"20px",border:"none",whiteSpace:"nowrap",height:"32px",lineHeight:"1",flexShrink:0},children:[i.jsx("i",{className:"bi bi-check-square",style:{fontSize:"0.875rem",fontWeight:"bold"}}),i.jsx("span",{style:{fontWeight:"500"},children:"Assign"}),i.jsx("button",{type:"button",className:"btn-close btn-close-white",style:{fontSize:"0.75rem",marginLeft:"0.25rem",padding:"0",width:"1rem",height:"1rem",opacity:.8,flexShrink:0},onClick:S=>{S.stopPropagation(),S.preventDefault(),z(!1)},onMouseEnter:S=>{S.currentTarget.style.opacity="1"},onMouseLeave:S=>{S.currentTarget.style.opacity="0.8"},"aria-label":"Remove Task"})]}):null,vd=()=>u!=="pos"?null:i.jsxs("span",{className:"badge",style:{backgroundColor:"rgba(255, 193, 7, 0.3)",color:"#ffffff",padding:"0.5rem 0.75rem",fontSize:"0.875rem",display:"inline-flex",alignItems:"center",gap:"0.5rem",borderRadius:"20px",border:"none",whiteSpace:"nowrap",height:"32px",lineHeight:"1",flexShrink:0},children:[i.jsx("i",{className:"bi bi-cart",style:{fontSize:"0.875rem",fontWeight:"bold"}}),i.jsx("span",{style:{fontWeight:"500"},children:"POS"}),i.jsx("button",{type:"button",className:"btn-close btn-close-white",style:{fontSize:"0.75rem",marginLeft:"0.25rem",padding:"0",width:"1rem",height:"1rem",opacity:.8,flexShrink:0},onClick:S=>{S.stopPropagation(),S.preventDefault(),f(null),R([]),Z(null)},onMouseEnter:S=>{S.currentTarget.style.opacity="1"},onMouseLeave:S=>{S.currentTarget.style.opacity="0.8"},"aria-label":"Remove POS"})]}),xd=()=>u!=="check-in"?null:i.jsxs("span",{className:"badge",style:{backgroundColor:"rgba(25, 135, 84, 0.3)",color:"#ffffff",padding:"0.5rem 0.75rem",fontSize:"0.875rem",display:"inline-flex",alignItems:"center",gap:"0.5rem",borderRadius:"20px",border:"none",whiteSpace:"nowrap",height:"32px",lineHeight:"1",flexShrink:0},children:[i.jsx("i",{className:"bi bi-person-check",style:{fontSize:"0.875rem",fontWeight:"bold"}}),i.jsx("span",{style:{fontWeight:"500"},children:"Check-in"}),i.jsx("button",{type:"button",className:"btn-close btn-close-white",style:{fontSize:"0.75rem",marginLeft:"0.25rem",padding:"0",width:"1rem",height:"1rem",opacity:.8,flexShrink:0},onClick:S=>{S.stopPropagation(),S.preventDefault(),f(null),Pe(!1)},onMouseEnter:S=>{S.currentTarget.style.opacity="1"},onMouseLeave:S=>{S.currentTarget.style.opacity="0.8"},"aria-label":"Remove Check-in"})]}),$a=(S,I,D,G=!1)=>{const ne=g.filter(E=>E.type==="guest").length,oe=u==="check-in"&&ne>=1,ae=!u&&!y,ie=!b&&ae&&g.length>1,le=!b&&ae&&g.length===0,ce=y&&g.some(E=>E.type==="staff"||E.type==="ai"),U=y?ce:!0,ge=b?!v&&!!je():!v&&(je()||g.length>0||u==="pos"||y&&U||oe),ve=()=>{if(!v){if(!ge){console.log("handleSubmit: Cannot submit, canSubmit is false");return}if(b){const E=je();if(!E)return;const P=c==null?void 0:c(E,[],null);P&&P.success&&O("");return}if(ae){if(ie){console.log("handleSubmit: Multiple recipients in CHAT mode, cannot submit");return}if(le){console.log("handleSubmit: No recipients in CHAT mode, cannot submit");return}if(!je()){console.log("handleSubmit: No message text in CHAT mode, cannot submit");return}}if(console.log("handleSubmit: canSubmit is true, checking handlers...",{hasOnSend:!!D,hasOnSendMessage:!!c,hasOnKeyPress:!!I,inputValue:_,selectedRecipients:g.length,primaryAction:u,isChatMode:ae}),D)console.log("handleSubmit: Calling onSend callback"),D();else if(c){console.log("handleSubmit: Calling onSendMessage with:",{inputValue:_,selectedRecipients:g,primaryAction:u});const E=c(_,g,u);E&&E.success?(O(""),ae||(w([]),f(null),z(!1))):E&&E.error&&console.error("handleSubmit: Send failed:",E.error)}else if(I){console.log("handleSubmit: Simulating Enter key press");const E=new KeyboardEvent("keypress",{key:"Enter",bubbles:!0});I(E)}else console.log("handleSubmit: No handler available")}};return i.jsxs("div",{style:{display:"flex",alignItems:"flex-end",gap:"0.5rem"},children:[G&&!v&&!b&&i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:E=>{E.stopPropagation(),Ne(!0)},"data-plus-button":!0,style:{width:"45px",height:"45px",borderRadius:"50%",backgroundColor:"rgba(20, 20, 20, 1)",border:"none",display:"flex",alignItems:"center",justifyContent:"center",color:"#ffffff",cursor:"pointer",transition:"all 0.2s",flexShrink:0},onMouseEnter:E=>{E.currentTarget.style.backgroundColor="#2a2a2a",E.currentTarget.style.transform="scale(1.05)"},onMouseLeave:E=>{E.currentTarget.style.backgroundColor="rgba(20, 20, 20, 1)",E.currentTarget.style.transform="scale(1)"},title:"Add action",children:i.jsx("i",{className:"bi bi-plus-lg",style:{fontSize:"1.25rem",fontWeight:"900",textShadow:"0.5px 0.5px 0px currentColor"}})}),i.jsxs("div",{ref:F,style:{flex:1,backgroundColor:"rgba(20, 20, 20, 1)",border:"none",borderRadius:"20px",borderTopLeftRadius:"20px",borderTopRightRadius:"20px",borderBottomLeftRadius:"20px",borderBottomRightRadius:"20px",padding:"0.5rem 0.75rem",paddingRight:"2.75rem",paddingTop:g.length>0||u!==null||y||C.length>0?"calc(0.75rem + 32px + 0.5rem)":"0.5rem",paddingBottom:"0.5rem",minHeight:"45px",display:"flex",flexDirection:"row",alignItems:g.length>0||u!==null||y||C.length>0||je()?"flex-end":"center",cursor:"text",position:"relative",overflow:"visible"},onClick:()=>{var E;(E=M.current)==null||E.focus(),d&&d()},children:[(g.length>0||u!==null||y||C.length>0)&&i.jsxs("div",{ref:Q,style:{position:"absolute",top:"0.75rem",left:"0.75rem",right:"2.75rem",display:"flex",flexWrap:"wrap",alignItems:"flex-start",gap:"0.375rem",minHeight:"32px",zIndex:1},children:[yd(),y&&(()=>{const E=g.filter(P=>P.type==="staff"||P.type==="ai");return E.length>0?E.map(P=>gr(P)):i.jsx("span",{className:"badge",style:{backgroundColor:"rgba(255, 255, 255, 0.08)",color:"rgba(255, 255, 255, 0.7)",padding:"0.5rem 0.75rem",fontSize:"0.875rem",display:"inline-flex",alignItems:"center",gap:"0.5rem",borderRadius:"20px",border:"none",whiteSpace:"nowrap",height:"32px",lineHeight:"1",flexShrink:0,cursor:"pointer",transition:"all 0.2s"},onClick:P=>{P.stopPropagation(),ut(!0)},onMouseEnter:P=>{P.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.12)"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},onTouchStart:P=>{P.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.15)"},onTouchEnd:P=>{setTimeout(()=>{P.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},150)},onTouchCancel:P=>{P.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},children:i.jsx("span",{style:{fontWeight:"400"},children:"No staff"})},"no-staff")})(),!y&&g.filter(E=>E.type==="staff"||E.type==="ai").map(E=>gr(E)),xd(),vd(),!u&&g.filter(E=>E.type==="guest").map(E=>gr(E)),u==="check-in"&&(()=>{const E=g.filter(P=>P.type==="guest");return E[0],E.length>0?E.map(P=>gr(P)):i.jsx("span",{className:"badge",style:{backgroundColor:"rgba(255, 255, 255, 0.08)",color:"rgba(255, 255, 255, 0.7)",padding:"0.5rem 0.75rem",fontSize:"0.875rem",display:"inline-flex",alignItems:"center",gap:"0.5rem",borderRadius:"20px",border:"none",whiteSpace:"nowrap",height:"32px",lineHeight:"1",flexShrink:0,cursor:"pointer",transition:"all 0.2s"},onClick:P=>{P.stopPropagation(),ut(!0)},onMouseEnter:P=>{P.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.12)"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},onTouchStart:P=>{P.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.15)"},onTouchEnd:P=>{setTimeout(()=>{P.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},150)},onTouchCancel:P=>{P.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},children:i.jsx("span",{style:{fontWeight:"400"},children:"Guest optional"})},"guest-optional")})(),u==="pos"&&C.map(E=>i.jsxs("span",{className:"badge",style:{backgroundColor:"rgba(255, 193, 7, 0.25)",color:"#ffffff",padding:"0.5rem 0.75rem",fontSize:"0.875rem",display:"inline-flex",alignItems:"center",gap:"0.5rem",borderRadius:"20px",border:"none",whiteSpace:"nowrap",height:"32px",lineHeight:"1",flexShrink:0},children:[E.emoji&&i.jsx("span",{style:{fontSize:"0.875rem"},children:E.emoji}),i.jsxs("span",{style:{fontWeight:"500"},children:[E.name," ",E.quantity]}),i.jsx("button",{type:"button",className:"btn-close btn-close-white",style:{fontSize:"0.75rem",marginLeft:"0.25rem",padding:"0",width:"1rem",height:"1rem",opacity:.8,flexShrink:0},onClick:P=>{P.stopPropagation(),P.preventDefault(),R(Be=>Be.filter(Ye=>Ye.id!==E.id))},onMouseEnter:P=>{P.currentTarget.style.opacity="1"},onMouseLeave:P=>{P.currentTarget.style.opacity="0.8"},"aria-label":"Remove item"})]},E.id)),u==="pos"&&(()=>{const E=g.filter(P=>P.type==="guest");return E.length>0?E.map(P=>gr(P)):i.jsx("span",{className:"badge",style:{backgroundColor:"rgba(255, 255, 255, 0.08)",color:"rgba(255, 255, 255, 0.7)",padding:"0.5rem 0.75rem",fontSize:"0.875rem",display:"inline-flex",alignItems:"center",gap:"0.5rem",borderRadius:"20px",border:"none",whiteSpace:"nowrap",height:"32px",lineHeight:"1",flexShrink:0,cursor:"pointer",transition:"all 0.2s"},onClick:P=>{P.stopPropagation(),ut(!0)},onMouseEnter:P=>{P.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.12)"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},onTouchStart:P=>{P.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.15)"},onTouchEnd:P=>{setTimeout(()=>{P.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},150)},onTouchCancel:P=>{P.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},children:i.jsx("span",{style:{fontWeight:"400"},children:"No guest"})},"no-guest")})(),u==="pos"&&C.length>0&&L&&(()=>{const E=C.reduce((P,Be)=>P+Be.quantity*Be.price,0);return E>0?i.jsxs("span",{className:"badge",style:{backgroundColor:"rgba(255, 193, 7, 0.3)",color:"#ffffff",padding:"0.5rem 0.75rem",fontSize:"0.875rem",display:"inline-flex",alignItems:"center",gap:"0.5rem",borderRadius:"20px",border:"none",whiteSpace:"nowrap",height:"32px",lineHeight:"1",flexShrink:0,fontWeight:"600",cursor:"pointer"},onClick:P=>{P.stopPropagation(),ye(!V)},children:[i.jsxs("span",{children:["$",E.toFixed(2),"  ",L==="cash"?"Cash":L==="card"?"Card":"Card on File"]}),i.jsx("button",{type:"button",className:"btn-close btn-close-white",style:{fontSize:"0.75rem",marginLeft:"0.25rem",padding:"0",width:"1rem",height:"1rem",opacity:.8,flexShrink:0},onClick:P=>{P.stopPropagation(),P.preventDefault(),Z(null)},onMouseEnter:P=>{P.currentTarget.style.opacity="1"},onMouseLeave:P=>{P.currentTarget.style.opacity="0.8"},"aria-label":"Remove settlement"})]}):null})()]}),ie&&i.jsx("div",{style:{position:"absolute",top:"calc(0.75rem + 32px + 0.5rem)",left:"0.75rem",right:"2.75rem",fontSize:"0.75rem",color:"rgba(255, 193, 7, 0.9)",padding:"0.25rem 0.5rem",backgroundColor:"rgba(255, 193, 7, 0.1)",borderRadius:"0.25rem",marginTop:"0.25rem",zIndex:2},children:"Only one recipient allowed"}),g.length===0&&u===null&&!y&&C.length===0?i.jsx("textarea",{ref:M,className:"form-control bg-transparent text-white border-0 p-0",placeholder:S,value:_,readOnly:v,onChange:E=>{if(!v)try{if(O(E.target.value),E.target&&E.target.scrollHeight!==void 0){E.target.style.height="auto";const P=Math.min(E.target.scrollHeight,200);E.target.style.height=`${P}px`}}catch(P){console.error("Error in input onChange:",P),O(E.target.value)}},onFocus:()=>{d&&d()},onKeyPress:E=>{try{if(v)return;E.key==="Enter"&&!E.shiftKey&&ge?(E.preventDefault(),ve&&ve()):I&&I(E)}catch(P){console.error("Error in onKeyPress:",P)}},rows:1,style:{flex:1,width:"100%",border:"none",outline:"none",boxShadow:"none",fontSize:"16px",background:"transparent",padding:"0",paddingTop:"calc((45px - 1.5 * 16px) / 2)",lineHeight:"1.5",resize:"none",overflow:"hidden",maxHeight:"200px",fontFamily:"inherit",margin:0,height:je()?"auto":"calc(1.5 * 16px)",minHeight:"calc(1.5 * 16px)",display:"block",boxSizing:"border-box",verticalAlign:"top"}}):i.jsx("textarea",{ref:M,className:"form-control bg-transparent text-white border-0 p-0",placeholder:g.length===0?S:"Add a message...",value:_,readOnly:v,onChange:E=>{if(!v)try{if(O(E.target.value),E.target&&E.target.scrollHeight!==void 0){E.target.style.height="auto";const P=Math.min(E.target.scrollHeight,200);E.target.style.height=`${P}px`}}catch(P){console.error("Error in textarea onChange:",P),O(E.target.value)}},onFocus:()=>{d&&d()},onKeyPress:E=>{try{if(v)return;E.key==="Enter"&&!E.shiftKey&&ge?(E.preventDefault(),ve&&ve()):I&&I(E)}catch(P){console.error("Error in onKeyPress:",P)}},rows:1,style:{flex:1,width:"100%",border:"none",outline:"none",boxShadow:"none",fontSize:"16px",background:"transparent",padding:"0",paddingTop:"calc((45px - 1.5 * 16px) / 2)",lineHeight:"1.5",resize:"none",overflow:"hidden",maxHeight:"200px",fontFamily:"inherit",margin:0,height:je()?"auto":"calc(1.5 * 16px)",minHeight:"calc(1.5 * 16px)",display:"block",boxSizing:"border-box",verticalAlign:"top",alignSelf:"flex-end"}}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:E=>{E.stopPropagation(),E.preventDefault(),v||ve()},disabled:v||!ge,style:{position:"absolute",right:"0.5rem",top:g.length===0&&u===null&&!y&&C.length===0?"50%":"auto",bottom:g.length===0&&u===null&&!y&&C.length===0?"auto":"0.5rem",transform:g.length===0&&u===null&&!y&&C.length===0?"translateY(-50%)":"none",width:"32px",height:"32px",borderRadius:"50%",backgroundColor:ge?"#ffffff":"rgba(255, 255, 255, 0.06)",border:"none",display:"flex",alignItems:"center",justifyContent:"center",color:ge?"#000000":"rgba(255, 255, 255, 0.5)",cursor:v?"not-allowed":ge?"pointer":"not-allowed",flexShrink:0,zIndex:10},title:"Send",children:i.jsx("i",{className:"bi bi-arrow-up-short",style:{fontSize:"1.125rem",fontWeight:"bold",transform:"scale(1.3)"}})})]})]})},Ha=()=>{const S=g.find(ae=>ae.type==="staff"||ae.type==="ai"),I=S?{name:S.name,avatar:S.avatar,type:S.type}:{name:"Jeremy Bailey",avatar:"JB",type:"staff"},D=g.find(ae=>ae.type==="guest"),G=D?{id:D.id,name:D.name,avatar:D.avatar}:null,ne=()=>{const ae=g.filter(ge=>ge.type==="guest").length,ie=u==="check-in"&&ae>=1,le=y&&g.some(ge=>ge.type==="staff"||ge.type==="ai"),ce=y?le:!0;if(je()||g.length>0||u==="pos"||y&&ce||ie){if(u==="check-in"&&ie){if(r){const ge=g.filter(ve=>ve.type==="guest");if(y){const ve=je()||null;ge.forEach(E=>{const P=ve?`Check-in ${E.name}${ve?` - ${ve}`:""}`:`Check-in ${E.name}`;r("create-task",{description:P,assignee:I,forGuest:{id:E.id,name:E.name,avatar:E.avatar},location:null})})}else{const ve=je()||null;ge.forEach(E=>{r("check-in",{guest:{id:E.id,name:E.name,avatar:E.avatar},note:ve})})}}O(""),w([]),f(null),z(!1);return}if(u==="pos"){if(y)r&&r("create-task",{description:je()||"Complete purchase",assignee:I,forGuest:G,location:null,posPayload:{cart:C,paymentMethod:L}}),O(""),w([]),f(null),z(!1),R([]),Z(null);else{if(r){const ge=je()||null;r("execute-pos",{cart:C,paymentMethod:L,forGuest:G,note:ge})}O(""),w([]),f(null),R([]),Z(null)}return}if(y){r&&r("create-task",{description:je(),assignee:I,forGuest:G,location:null}),O(""),w([]),z(!1);return}if(!u&&!y){if(g.length===0){console.log("Select someone to message");return}if(g.length>1){console.log("Only one recipient allowed");return}if(!je()){console.log("Message cannot be empty");return}if(c){const ge=c(_,g,u);ge&&ge.success?O(""):ge&&ge.error&&console.log("Error:",ge.error)}return}c&&(je()||g.length>0)&&(c(_,g,u),O(""),w([]))}};return(()=>{if(u==="check-in"){const ae=g.find(ce=>ce.type==="guest"),ie=g.find(ce=>ce.type==="staff"||ce.type==="ai"),le=ie||{name:"Jeremy Bailey"};return y?`Assign  ${le.name}  Check-in ${ae?ae.name:"guest"}`:ae?`Check-in ${ae.name}`:null}if(u==="pos"){const ae=g.find(U=>U.type==="guest"),ie=g.find(U=>U.type==="staff"||U.type==="ai"),le=ie||{name:"Jeremy Bailey"},ce=ae||null;return y?`Assign  ${le.name}  POS for ${ce?ce.name:"no guest"}`:`POS for ${ce?ce.name:"no guest"}`}if(y){const ae=g.find(U=>U.type==="guest"),ie=g.find(U=>U.type==="staff"||U.type==="ai"),le=ie||{name:"Jeremy Bailey"},ce=ae||null;return`Assign  ${le.name}  ${ce?`for ${ce.name}`:"task"}`}return null})(),i.jsxs("div",{style:{flex:1,position:"relative"},children:[Y&&i.jsx("div",{style:{position:"absolute",top:"-2rem",left:"50%",transform:"translateX(-50%)",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"#ffffff",padding:"0.375rem 0.75rem",borderRadius:"20px",fontSize:"0.75rem",zIndex:1001,whiteSpace:"nowrap"},children:Y}),$a(p||(y?"Task description":u==="pos"?"Add note (optional)":"Ask or act"),ae=>{ae.key==="Enter"&&(ae.preventDefault(),ne())},ne,!b)]})},kd=()=>i.jsx("div",{className:"tool-composer",children:i.jsxs("div",{className:"d-flex gap-2",children:[i.jsxs("button",{className:"btn btn-primary flex-grow-1",onClick:()=>r("scan-ticket",{method:"scanner"}),children:[i.jsx("i",{className:"bi bi-qr-code-scan"})," Open Scanner"]}),i.jsxs("button",{className:"btn btn-outline-primary flex-grow-1",onClick:()=>r("scan-ticket",{method:"manual"}),children:[i.jsx("i",{className:"bi bi-keyboard"})," Manual Entry"]}),i.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>n(null),children:i.jsx("i",{className:"bi bi-x"})})]})}),bd=()=>{const[S,I]=T.useState(1),[D,G]=T.useState(25);return i.jsxs("div",{className:"tool-composer",children:[i.jsxs("div",{className:"d-flex gap-2 mb-2",children:[i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.8)"},children:"Quantity"}),i.jsx("input",{type:"number",className:"form-control bg-dark text-white border-secondary",min:"1",value:S,onChange:ne=>I(parseInt(ne.target.value)||1)})]}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.8)"},children:"Price"}),i.jsx("input",{type:"number",className:"form-control bg-dark text-white border-secondary",min:"0",step:"0.01",value:D,onChange:ne=>G(parseFloat(ne.target.value)||0)})]})]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsxs("button",{className:"btn btn-success flex-grow-1",onClick:()=>r("sell-ticket",{quantity:S,price:D,method:"charge"}),children:[i.jsx("i",{className:"bi bi-credit-card"})," Charge $",(S*D).toFixed(2)]}),i.jsxs("button",{className:"btn btn-outline-warning flex-grow-1",onClick:()=>r("sell-ticket",{quantity:S,price:D,method:"comp"}),children:[i.jsx("i",{className:"bi bi-gift"})," Comp"]}),i.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>n(null),children:i.jsx("i",{className:"bi bi-x"})})]})]})},Sd=()=>{const S=["Wine","Beer","Cocktail","Soft Drink"],[I,D]=T.useState("");return i.jsxs("div",{className:"tool-composer",children:[i.jsxs("div",{className:"mb-2",children:[i.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.8)"},children:"Select Drink"}),i.jsxs("select",{className:"form-select bg-dark text-white border-secondary",value:I,onChange:G=>D(G.target.value),children:[i.jsx("option",{value:"",children:"Choose..."}),S.map(G=>i.jsx("option",{value:G,children:G},G))]})]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsxs("button",{className:"btn btn-primary flex-grow-1",disabled:!I,onClick:()=>r("order-drink",{drink:I}),children:[i.jsx("i",{className:"bi bi-send"})," Send Order"]}),i.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>n(null),children:i.jsx("i",{className:"bi bi-x"})})]})]})},wd=()=>i.jsx("div",{className:"tool-composer",children:i.jsxs("div",{className:"d-flex gap-2 align-items-center",children:[i.jsx("div",{style:{flex:1},children:$a("Type message to guest",S=>{S.key==="Enter"&&(je()||g.length>0)&&(r("message-guest",{message:_,recipients:g}),O(""),w([]))})}),i.jsxs("button",{className:"btn btn-primary",disabled:!je()&&g.length===0,onClick:()=>{r("message-guest",{message:_,recipients:g}),O(""),w([])},children:[i.jsx("i",{className:"bi bi-send"})," Send"]}),i.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>n(null),children:i.jsx("i",{className:"bi bi-x"})})]})}),Cd=()=>i.jsxs("div",{className:"tools-palette",children:[i.jsxs("div",{className:"d-flex gap-2 mb-2 flex-wrap",children:[i.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>n("ticket-scan"),children:[i.jsx("i",{className:"bi bi-qr-code-scan"})," Ticket Scan"]}),i.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>n("sell-ticket"),children:[i.jsx("i",{className:"bi bi-ticket"})," Sell Ticket"]}),i.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>n("order-drink"),children:[i.jsx("i",{className:"bi bi-cup-straw"})," Order Drink"]}),i.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>n("message-guest"),children:[i.jsx("i",{className:"bi bi-chat"})," Message Guest"]})]}),i.jsx("button",{className:"btn btn-outline-secondary btn-sm w-100",onClick:()=>n(null),children:"Close Tools"})]}),Td=()=>a?Ha():null,jd=()=>{const[S,I]=T.useState("fob"),[D,G]=T.useState("");return i.jsxs("div",{className:"tool-composer",children:[i.jsxs("div",{className:"mb-2",children:[i.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.8)"},children:"Purchase Type"}),i.jsxs("div",{className:"btn-group w-100",role:"group",children:[i.jsx("button",{type:"button",className:`btn ${S==="fob"?"btn-primary":"btn-outline-primary"}`,onClick:()=>I("fob"),children:"FOB"}),i.jsx("button",{type:"button",className:`btn ${S==="retail"?"btn-primary":"btn-outline-primary"}`,onClick:()=>I("retail"),children:"Retail"})]})]}),i.jsxs("div",{className:"mb-2",children:[i.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.8)"},children:"Amount"}),i.jsx("input",{type:"number",className:"form-control bg-dark text-white border-secondary",min:"0",step:"0.01",placeholder:"0.00",value:D,onChange:ne=>G(ne.target.value)})]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsxs("button",{className:"btn btn-success flex-grow-1",disabled:!D||parseFloat(D)<=0,onClick:()=>{r("fob-retail",{type:S,amount:parseFloat(D)}),G(""),n(null)},children:[i.jsx("i",{className:"bi bi-credit-card"})," Process Payment"]}),i.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>n(null),children:i.jsx("i",{className:"bi bi-x"})})]})]})},Id=()=>t==="ticket-scan"?kd():t==="sell-ticket"?bd():t==="fob-retail"?jd():t==="order-drink"?Sd():t==="message-guest"?wd():t==="checkin"?i.jsx("div",{className:"tool-composer",children:i.jsxs("div",{className:"d-flex gap-2",children:[i.jsxs("button",{className:"btn btn-primary flex-grow-1",onClick:()=>r("checkin",{guestId:e==null?void 0:e.id}),children:[i.jsx("i",{className:"bi bi-person-check"})," Check-in Guest"]}),i.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>n(null),children:i.jsx("i",{className:"bi bi-x"})})]})}):t==="tools"?Cd():a?Td():Ha(),Nd=()=>{if(!Et)return null;const S=[{id:"ticket",name:"Ticket",price:25,emoji:""},{id:"wine",name:"Wine",price:12,emoji:""},{id:"beer",name:"Beer",price:8,emoji:""},{id:"cocktail",name:"Cocktail",price:15,emoji:""},{id:"soft-drink",name:"Soft Drink",price:5,emoji:""},{id:"gift-shop",name:"Gift Shop Item",price:20,emoji:""}],I=C.reduce((G,ne)=>G+ne.quantity,0),D=I>0?`Add ${I} ${I===1?"item":"items"}`:null;return i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:99999,animation:pe?"fadeOut 0.3s ease-out":"fadeIn 0.2s ease-out",pointerEvents:"auto"},onClick:()=>{be(!0),setTimeout(()=>{Ze(!1),Ne(!1),be(!1),document.body.removeAttribute("data-bottom-sheet-open"),document.body.style.overscrollBehaviorY="",document.documentElement.style.overscrollBehaviorY="",document.body.style.overflow="",document.documentElement.style.overflow=""},300)}}),i.jsxs("div",{"data-bottom-sheet":!0,style:{position:"fixed",bottom:0,left:"50%",transform:"translateX(-50%)",width:"100%",maxWidth:"600px",backgroundColor:"#0a0a0a",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem",padding:"1rem",paddingBottom:D?"calc(5.5rem + env(safe-area-inset-bottom, 0))":"calc(1rem + env(safe-area-inset-bottom, 0))",zIndex:1e5,pointerEvents:"auto",boxShadow:"0 -4px 20px rgba(0, 0, 0, 0.3)",animation:pe?"slideDown 0.3s ease-out":"slideUp 0.3s ease-out",maxHeight:"80vh",display:"flex",flexDirection:"column"},onClick:G=>G.stopPropagation(),children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[i.jsx("h6",{style:{margin:0,color:"#ffffff",fontWeight:"600"},children:"Add Items"}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:()=>{Ze(!1),Ne(!0)},style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"1.25rem",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx("i",{className:"bi bi-x-lg"})})]}),i.jsx("div",{style:{flex:1,overflowY:"auto",minHeight:0,marginBottom:D||u==="pos"&&C.length>0?"1rem":"0"},children:i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:S.map(G=>{const ne=C.find(ae=>ae.id===G.id),oe=ne?ne.quantity:0;return i.jsxs("button",{className:"btn w-100",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem",backgroundColor:oe>0?"rgba(255, 193, 7, 0.2)":"rgba(255, 255, 255, 0.05)",border:"none",borderRadius:"0.5rem",color:"#ffffff",textAlign:"left"},onClick:ae=>{ae.stopPropagation(),u!=="pos"&&(u==="check-in"||y?(u==="check-in"&&Pe(!1),z(!1),f("pos"),ee("Switched to POS")):f("pos")),R(ie=>ie.find(ce=>ce.id===G.id)?ie.map(ce=>ce.id===G.id?{...ce,quantity:ce.quantity+1}:ce):[...ie,{...G,quantity:1}])},onTouchStart:ae=>{ae.currentTarget.style.backgroundColor=oe>0?"rgba(255, 193, 7, 0.3)":"rgba(255, 255, 255, 0.15)"},onTouchEnd:ae=>{setTimeout(()=>{ae.currentTarget.style.backgroundColor=oe>0?"rgba(255, 193, 7, 0.2)":"rgba(255, 255, 255, 0.05)"},150)},onTouchCancel:ae=>{ae.currentTarget.style.backgroundColor=oe>0?"rgba(255, 193, 7, 0.2)":"rgba(255, 255, 255, 0.05)"},children:[i.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[G.emoji&&i.jsx("span",{style:{fontSize:"1.25rem"},children:G.emoji}),i.jsx("span",{style:{fontWeight:"500"},children:G.name})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[oe>0&&i.jsxs("span",{style:{color:"rgba(255, 193, 7, 0.9)",fontSize:"0.875rem",fontWeight:"600"},children:["",oe]}),i.jsxs("span",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.875rem"},children:["$",G.price]})]})]},G.id)})})}),u==="pos"&&C.length>0&&i.jsxs("div",{style:{paddingTop:"1rem",marginTop:"auto",marginBottom:D?"1rem":"0",borderTop:"1px solid rgba(255, 255, 255, 0.1)",flexShrink:0},children:[i.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",marginBottom:"0.75rem",fontWeight:"500"},children:"Payment"}),i.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:["cash","card","card-on-file"].map(G=>{const ne=L===G;return i.jsx("button",{className:"btn flex-grow-1",style:{fontSize:"0.875rem",padding:"0.5rem",backgroundColor:ne?"rgba(255, 193, 7, 0.2)":"rgba(255, 255, 255, 0.05)",border:"none",borderRadius:"0.5rem",color:"#ffffff",fontWeight:"500"},onClick:oe=>{oe.stopPropagation(),Z(G)},onTouchStart:oe=>{oe.currentTarget.style.backgroundColor=ne?"rgba(255, 193, 7, 0.3)":"rgba(255, 255, 255, 0.15)"},onTouchEnd:oe=>{setTimeout(()=>{oe.currentTarget.style.backgroundColor=ne?"rgba(255, 193, 7, 0.2)":"rgba(255, 255, 255, 0.05)"},150)},onTouchCancel:oe=>{oe.currentTarget.style.backgroundColor=ne?"rgba(255, 193, 7, 0.2)":"rgba(255, 255, 255, 0.05)"},children:G==="cash"?"Cash":G==="card"?"Card":"Card on File"},G)})})]}),D&&i.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,padding:"1rem",paddingBottom:"calc(1rem + env(safe-area-inset-bottom, 0))",borderTop:"1px solid rgba(255, 255, 255, 0.1)",backgroundColor:"#0a0a0a",zIndex:10},children:i.jsx("button",{className:"btn btn-primary w-100",style:{padding:"0.875rem",fontSize:"0.875rem",fontWeight:"500",borderRadius:"0.5rem"},onClick:G=>{G.stopPropagation(),u!=="pos"&&(u==="check-in"||y?(u==="check-in"&&Pe(!1),z(!1),f("pos"),ee("Switched to POS")):f("pos")),Ze(!1),Ne(!1)},onTouchStart:G=>{G.currentTarget.style.opacity="0.8",G.currentTarget.style.transform="scale(0.98)"},onTouchEnd:G=>{setTimeout(()=>{G.currentTarget.style.opacity="1",G.currentTarget.style.transform="scale(1)"},150)},onTouchCancel:G=>{G.currentTarget.style.opacity="1",G.currentTarget.style.transform="scale(1)"},children:D})})]})]})},Ed=()=>bt?i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:99999,animation:W?"fadeOut 0.3s ease-out":"fadeIn 0.2s ease-out",pointerEvents:"auto"},onClick:()=>{q(!0),setTimeout(()=>{Qe(!1),Ne(!1),q(!1),document.body.removeAttribute("data-bottom-sheet-open"),document.body.style.overscrollBehaviorY="",document.documentElement.style.overscrollBehaviorY="",document.body.style.overflow="",document.documentElement.style.overflow=""},300)}}),i.jsxs("div",{"data-bottom-sheet":!0,style:{position:"fixed",bottom:0,left:"50%",transform:"translateX(-50%)",width:"100%",maxWidth:"600px",backgroundColor:"#0a0a0a",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem",padding:"1rem",paddingBottom:"calc(1rem + env(safe-area-inset-bottom, 0))",zIndex:1e5,pointerEvents:"auto",boxShadow:"0 -4px 20px rgba(0, 0, 0, 0.3)",animation:W?"slideDown 0.3s ease-out":"slideUp 0.3s ease-out",maxHeight:"80vh",overflowY:"auto"},onClick:S=>S.stopPropagation(),children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[i.jsx("h6",{style:{margin:0,color:"#ffffff",fontWeight:"600"},children:"Check-in Guest"}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:()=>{Qe(!1),Ne(!0)},style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"1.25rem",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx("i",{className:"bi bi-x-lg"})})]}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[i.jsxs("button",{type:"button",className:"btn btn-primary w-100",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",padding:"1rem",fontSize:"1rem",fontWeight:"500"},onClick:S=>{S.stopPropagation(),u!=="check-in"&&(y||u==="pos"?(z(!1),u==="pos"&&(R([]),Z(null),ye(!1)),f("check-in"),ee("Switched to Check-in")):f("check-in"));const I={id:`scanned-${Date.now()}`,name:"Scanned Guest",avatar:"SG",type:"guest",isSpecial:!1};w(D=>D.find(oe=>oe.type==="guest"&&oe.id===I.id)?D:[...D.filter(oe=>oe.type!=="guest"),I]),Qe(!1),Ne(!1)},onTouchStart:S=>{S.currentTarget.style.opacity="0.8",S.currentTarget.style.transform="scale(0.98)"},onTouchEnd:S=>{setTimeout(()=>{S.currentTarget.style.opacity="1",S.currentTarget.style.transform="scale(1)"},150)},onTouchCancel:S=>{S.currentTarget.style.opacity="1",S.currentTarget.style.transform="scale(1)"},children:[i.jsx("i",{className:"bi bi-qr-code-scan",style:{fontSize:"1.25rem"}}),i.jsx("span",{children:"Scan QR"})]}),i.jsxs("button",{type:"button",className:"btn w-100",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",padding:"1rem",fontSize:"1rem",fontWeight:"500",backgroundColor:"rgba(255, 255, 255, 0.05)",border:"none",borderRadius:"0.5rem",color:"#ffffff"},onClick:S=>{S.stopPropagation(),u!=="check-in"&&(y||u==="pos"?(z(!1),u==="pos"&&(R([]),Z(null),ye(!1)),f("check-in"),ee("Switched to Check-in")):f("check-in")),Qe(!1),Ne(!1)},onTouchStart:S=>{S.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.15)"},onTouchEnd:S=>{setTimeout(()=>{S.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)"},150)},onTouchCancel:S=>{S.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)"},children:[i.jsx("i",{className:"bi bi-keyboard",style:{fontSize:"1.25rem"}}),i.jsx("span",{children:"Manual"})]})]})]})]}):null,Rd=()=>{if(!Nt)return null;const S=st(),I=y?S.filter(U=>U.type==="staff"||U.type==="ai"||U.isSpecial):S,D=I.filter(U=>U.isSpecial),G=y?[]:I.filter(U=>!U.isSpecial&&U.type==="guest"),ne=g.filter(U=>S.find(ve=>ve.id===U.id)!==void 0),oe=ne.filter(U=>U.type==="guest").length,ae=ne.filter(U=>U.type==="staff").length,ie=ne.filter(U=>U.type==="ai").length,ce=(()=>{const U=[];return oe>0&&U.push(`${oe} ${oe===1?"guest":"guests"}`),ae>0&&U.push(`${ae} staff`),ie>0&&U.push(`${ie} AI`),U.length===0?null:U.length===1?`Add ${U[0]}`:U.length===2?`Add ${U[0]} and ${U[1]}`:`Add ${U.slice(0,-1).join(", ")}, and ${U[U.length-1]}`})();return i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:99999,animation:He?"fadeOut 0.3s ease-out":"fadeIn 0.2s ease-out",pointerEvents:"auto"},onClick:()=>{en(!0),setTimeout(()=>{ut(!1),Ne(!1),en(!1),document.body.removeAttribute("data-bottom-sheet-open"),document.body.style.overscrollBehaviorY="",document.documentElement.style.overscrollBehaviorY="",document.body.style.overflow="",document.documentElement.style.overflow=""},300)}}),i.jsxs("div",{"data-bottom-sheet":!0,style:{position:"fixed",bottom:0,left:"50%",transform:"translateX(-50%)",width:"100%",maxWidth:"600px",backgroundColor:"#0a0a0a",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem",padding:"1rem",paddingBottom:ce?"calc(5.5rem + env(safe-area-inset-bottom, 0))":"calc(1rem + env(safe-area-inset-bottom, 0))",zIndex:1e5,pointerEvents:"auto",boxShadow:"0 -4px 20px rgba(0, 0, 0, 0.3)",animation:He?"slideDown 0.3s ease-out":"slideUp 0.3s ease-out",maxHeight:"80vh",display:"flex",flexDirection:"column"},onClick:U=>U.stopPropagation(),children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[i.jsx("h6",{style:{margin:0,color:"#ffffff",fontWeight:"600"},children:"Select People"}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:()=>{ut(!1),Ne(!0)},style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"1.25rem",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx("i",{className:"bi bi-x-lg"})})]}),i.jsx("div",{style:{marginBottom:"1rem"},children:i.jsx("input",{ref:k,type:"text",className:"form-control bg-dark text-white",placeholder:"Search people...",value:xe,onChange:U=>de(U.target.value),style:{fontSize:"0.875rem",border:"none"},onClick:U=>U.stopPropagation()})}),i.jsxs("div",{style:{flex:1,overflowY:"auto",minHeight:0,marginBottom:ce?"1rem":"0"},children:[D.length>0&&i.jsx("div",{style:{marginBottom:"1rem"},children:D.map(U=>{const ge=U.id==="staff",ve=ge?Ht():[],E=g.some(P=>P.id===U.id);return i.jsxs("div",{style:{marginBottom:"0.5rem"},children:[i.jsxs("button",{className:"btn w-100",style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",backgroundColor:E?"rgba(13, 110, 253, 0.2)":"rgba(255, 255, 255, 0.05)",border:"none",borderRadius:"0.5rem",color:"#ffffff",textAlign:"left",width:"100%"},onClick:P=>{P.stopPropagation(),ge&&ve.length>0?$(!A):So(U)},onMouseEnter:P=>{E||(P.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)")},onMouseLeave:P=>{E||(P.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)")},onTouchStart:P=>{P.currentTarget.style.backgroundColor=E?"rgba(13, 110, 253, 0.3)":"rgba(255, 255, 255, 0.15)"},onTouchEnd:P=>{setTimeout(()=>{P.currentTarget.style.backgroundColor=E?"rgba(13, 110, 253, 0.2)":"rgba(255, 255, 255, 0.05)"},150)},onTouchCancel:P=>{P.currentTarget.style.backgroundColor=E?"rgba(13, 110, 253, 0.2)":"rgba(255, 255, 255, 0.05)"},children:[i.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",backgroundColor:U.type==="ai"?"#3B31FF":Sn(U.avatar||U.name),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.875rem",fontWeight:"500",color:"#ffffff",flexShrink:0},children:U.avatar}),i.jsx("span",{style:{flex:1,fontWeight:"500",fontSize:"0.875rem"},children:U.name}),ge&&ve.length>0&&i.jsx("i",{className:`bi bi-chevron-${A?"up":"down"}`,style:{fontSize:"1rem",color:"rgba(255, 255, 255, 0.8)",flexShrink:0,fontWeight:"bold"}}),!ge&&E&&i.jsx("i",{className:"bi bi-check-circle-fill",style:{color:"#0d6efd",fontSize:"1.25rem",flexShrink:0,fontWeight:"bold"}})]}),ge&&A&&ve.length>0&&i.jsx("div",{style:{marginTop:"0.5rem",marginLeft:"0.75rem",paddingLeft:"0.75rem",borderLeft:"1px solid rgba(255, 255, 255, 0.1)"},children:ve.map(P=>{const Be=g.some(Ye=>Ye.id===P.id);return i.jsxs("button",{className:"btn w-100",style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.625rem",backgroundColor:Be?"rgba(13, 110, 253, 0.2)":"rgba(255, 255, 255, 0.05)",border:"none",borderRadius:"0.5rem",color:"#ffffff",textAlign:"left",width:"100%",marginBottom:"0.5rem"},onClick:Ye=>{Ye.stopPropagation(),So(P)},onMouseEnter:Ye=>{Be||(Ye.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)")},onMouseLeave:Ye=>{Be||(Ye.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)")},onTouchStart:Ye=>{Ye.currentTarget.style.backgroundColor=Be?"rgba(13, 110, 253, 0.3)":"rgba(255, 255, 255, 0.15)"},onTouchEnd:Ye=>{setTimeout(()=>{Ye.currentTarget.style.backgroundColor=Be?"rgba(13, 110, 253, 0.2)":"rgba(255, 255, 255, 0.05)"},150)},onTouchCancel:Ye=>{Ye.currentTarget.style.backgroundColor=Be?"rgba(13, 110, 253, 0.2)":"rgba(255, 255, 255, 0.05)"},children:[i.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:Sn(P.avatar||P.name),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"500",color:"#ffffff",flexShrink:0},children:P.avatar}),i.jsx("span",{style:{flex:1,fontSize:"0.875rem"},children:P.name}),Be&&i.jsx("i",{className:"bi bi-check-circle-fill",style:{color:"#0d6efd",fontSize:"1.25rem",flexShrink:0,fontWeight:"bold"}}),!Be&&i.jsx("div",{style:{width:"1.25rem",flexShrink:0}})]},P.id)})})]},U.id)})}),G.length>0&&i.jsx("div",{children:G.map(U=>{const ge=g.some(ve=>ve.id===U.id);return i.jsxs("button",{className:"btn w-100",style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",backgroundColor:ge?"rgba(13, 110, 253, 0.2)":"rgba(255, 255, 255, 0.05)",border:"none",borderRadius:"0.5rem",color:"#ffffff",textAlign:"left",width:"100%",marginBottom:"0.5rem"},onClick:ve=>{ve.stopPropagation(),So(U)},onMouseEnter:ve=>{ge||(ve.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)")},onMouseLeave:ve=>{ge||(ve.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)")},children:[i.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",backgroundColor:Sn(U.avatar||U.name),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.875rem",fontWeight:"500",color:"#ffffff",flexShrink:0},children:U.avatar||(U.name?U.name.charAt(0):"?")}),i.jsx("span",{style:{flex:1,fontWeight:"500",fontSize:"0.875rem"},children:U.name}),ge&&i.jsx("i",{className:"bi bi-check-circle-fill",style:{color:"#0d6efd",fontSize:"1.25rem",flexShrink:0}})]},U.id)})}),S.length===0&&i.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"rgba(255, 255, 255, 0.5)",fontSize:"0.875rem"},children:"No people found"})]}),ce&&i.jsx("div",{style:{position:"absolute",bottom:"env(safe-area-inset-bottom, 0)",left:"1rem",right:"1rem",paddingTop:"1rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)",backgroundColor:"#0a0a0a",paddingBottom:"1rem"},children:i.jsx("button",{className:"btn btn-primary w-100",style:{padding:"0.875rem",fontSize:"0.875rem",fontWeight:"500",borderRadius:"0.5rem"},onClick:U=>{U.stopPropagation(),ut(!1),Ne(!1)},onTouchStart:U=>{U.currentTarget.style.opacity="0.8",U.currentTarget.style.transform="scale(0.98)"},onTouchEnd:U=>{setTimeout(()=>{U.currentTarget.style.opacity="1",U.currentTarget.style.transform="scale(1)"},150)},onTouchCancel:U=>{U.currentTarget.style.opacity="1",U.currentTarget.style.transform="scale(1)"},children:ce})})]})]})},zd=()=>{const S=[],I=x==null?void 0:x.enabledTools,D=ie=>I?I.includes(ie):!0;if((x==null?void 0:x.mode)==="visitor"){const ie=Array.isArray(x==null?void 0:x.suggestedPrompts)?x.suggestedPrompts:[],le=Array.isArray(x==null?void 0:x.pillIds)?x.pillIds:[];if(ie.length===0)return null;ie.forEach((E,P)=>{const Be=le[P]||`prompt-${P}`;S.push({id:Be,label:E,icon:null,action:()=>{var Ye;O(E),(Ye=M.current)==null||Ye.focus()}})});const ce=T.useRef(null),U=T.useRef(new Set);T.useEffect(()=>{ce.current&&ie.length>0&&setTimeout(()=>{ce.current&&ce.current.scrollTo({left:ce.current.scrollWidth,behavior:"smooth"})},100)},[ie.length]);const ge=new Set(S.map(E=>E.id)),ve=new Set;return S.forEach(E=>{U.current.has(E.id)||ve.add(E.id)}),U.current=ge,i.jsxs("div",{ref:ce,style:{display:"flex",gap:"0.5rem",padding:"0.5rem 1rem",paddingBottom:"0.75rem",overflowX:"auto",overflowY:"hidden",scrollbarWidth:"thin",scrollbarColor:"rgba(255, 255, 255, 0.2) transparent",msOverflowStyle:"auto",WebkitOverflowScrolling:"touch",scrollBehavior:"smooth"},className:"suggested-pills-rail",children:[i.jsx("style",{children:`
            .suggested-pills-rail::-webkit-scrollbar {
              height: 4px;
            }
            .suggested-pills-rail::-webkit-scrollbar-track {
              background: transparent;
            }
            .suggested-pills-rail::-webkit-scrollbar-thumb {
              background: rgba(255, 255, 255, 0.2);
              border-radius: 2px;
            }
            .suggested-pills-rail::-webkit-scrollbar-thumb:hover {
              background: rgba(255, 255, 255, 0.3);
            }
            @keyframes slideInFromRight {
              from {
                transform: translateX(100%);
                opacity: 0;
              }
              to {
                transform: translateX(0);
                opacity: 1;
              }
            }
            .pill-enter {
              animation: slideInFromRight 0.3s ease-out forwards;
            }
          `}),S.map(E=>{const P=ve.has(E.id);return i.jsx("button",{type:"button",onClick:Be=>{Be.stopPropagation(),E.action()},className:P?"pill-enter":"",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.875rem",backgroundColor:"rgba(255, 255, 255, 0.08)",border:"none",borderRadius:"20px",color:"rgba(255, 255, 255, 0.5)",fontSize:"0.875rem",fontWeight:"500",whiteSpace:"nowrap",flexShrink:0,cursor:"pointer",transition:"all 0.2s"},children:i.jsx("span",{children:E.label})},E.id)})]})}const G=g.some(ie=>ie.type==="guest"),ne=je().length>0,oe=!ne&&!u&&!y&&g.length===0,ae=g.some(ie=>ie.type==="staff"||ie.type==="ai");if(y&&!ae)return S.push({id:"ai-concierge",label:"Canyon Concierge",icon:"AI",action:()=>{wn({id:"ai",name:"Canyon Concierge",avatar:"AI",type:"ai",isSpecial:!0})}}),Ht().forEach(le=>{S.push({id:`staff-${le.id}`,label:le.name,icon:le.avatar||le.name.charAt(0),action:()=>{wn(le)}})}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",padding:"0.5rem 1rem",paddingBottom:"0.75rem",overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},className:"suggested-pills-rail",onWheel:le=>{le.deltaY!==0&&(le.currentTarget.scrollLeft+=le.deltaY,le.preventDefault())},children:[i.jsx("style",{children:`
            .suggested-pills-rail::-webkit-scrollbar {
              display: none;
            }
          `}),S.map(le=>i.jsxs("button",{type:"button",onClick:ce=>{ce.stopPropagation(),le.action()},style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.875rem",backgroundColor:"rgba(255, 255, 255, 0.08)",border:"none",borderRadius:"20px",color:"rgba(255, 255, 255, 0.5)",fontSize:"0.875rem",fontWeight:"500",whiteSpace:"nowrap",flexShrink:0,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:ce=>{ce.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.12)"},onMouseLeave:ce=>{ce.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},onTouchStart:ce=>{ce.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.15)"},onTouchEnd:ce=>{setTimeout(()=>{ce.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},150)},onTouchCancel:ce=>{ce.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},children:[le.icon&&(typeof le.icon=="string"&&le.icon.startsWith("bi-")?i.jsx("i",{className:`bi ${le.icon}`,style:{fontSize:"0.875rem",fontWeight:"bold"}}):i.jsx("span",{style:{fontSize:"0.875rem"},children:le.icon})),i.jsx("span",{children:le.label})]},le.id))]});if(y&&ae)return null;if(oe){const le=new URLSearchParams(typeof window<"u"?window.location.search:"").get("scenario")||"anticipation",ce=[{id:"scan-qr",label:"Scan QR",icon:"bi-qr-code-scan",action:()=>{if(v&&D("scan-qr")&&!D("check-in")){r==null||r("scan-qr",{source:"suggested-pill"});return}u!=="check-in"&&f("check-in"),Qe(!0)}},{id:"check-in",label:"Check-in",icon:"bi-person-check",action:()=>{u!=="check-in"&&(u==="pos"&&(R([]),Z(null)),f("check-in")),Qe(!0)}},{id:"pos",label:"POS",icon:"bi-cash-stack",action:()=>{u!=="pos"&&(u==="check-in"&&Pe(!1),f("pos")),Ze(!0)}},{id:"assign",label:"Assign",icon:"bi-check-square",action:()=>{y||((u==="check-in"||u==="pos")&&(f(null),u==="pos"&&(R([]),Z(null))),z(!0))}},{id:"people",label:"People",icon:"bi-people",action:()=>{ut(!0)}}];if(Array.isArray(x==null?void 0:x.suggestedPrompts)&&x.suggestedPrompts.length>0){const U=(x==null?void 0:x.pillIds)||[],ge=x.suggestedPrompts.map((ve,E)=>({id:U[E]||`prompt-${E}`,label:ve,icon:null,action:()=>{var Be;const P=U[E]||`prompt-${E}`;console.log("[Composer] Pill tapped:",P,ve),x!=null&&x.onPillTap?(console.log("[Composer] Calling onPillTap callback"),x.onPillTap(P,ve)):console.warn("[Composer] No onPillTap callback found in config"),O(ve),(Be=M.current)==null||Be.focus()}}));S.push(...ge)}le==="handoff"?["pos","assign","people","scan-qr","check-in"].forEach(ge=>{if(!D(ge))return;const ve=ce.find(E=>E.id===ge);ve&&S.push(ve)}):ce.forEach(U=>{D(U.id)&&S.push(U)})}else ne&&!u&&g.length===0?[{id:"ai-concierge",label:"Canyon Concierge",icon:"AI",action:()=>{wn({id:"ai",name:"Canyon Concierge",avatar:"AI",type:"ai",isSpecial:!0})}},{id:"choose-guest",label:"Choose guest",icon:"bi-people",action:()=>{ut(!0)}},{id:"scan-qr",label:"Scan QR",icon:"bi-qr-code-scan",action:()=>{if(v&&D("scan-qr")&&!D("check-in")){r==null||r("scan-qr",{source:"suggested-pill"});return}u!=="check-in"&&f("check-in"),Qe(!0)}},{id:"check-in",label:"Check-in",icon:"bi-person-check",action:()=>{u!=="check-in"&&(u==="pos"&&(R([]),Z(null)),f("check-in")),Qe(!0)}},{id:"pos",label:"POS",icon:"bi-cash-stack",action:()=>{u!=="pos"&&(u==="check-in"&&Pe(!1),f("pos")),Ze(!0)}}].forEach(le=>{D(le.id)&&S.push(le)}):G?S.push({id:"check-in",label:"Check-in",icon:"bi-person-check",action:()=>{u!=="check-in"&&(u==="pos"&&(R([]),Z(null)),f("check-in")),Qe(!0)}},{id:"pos",label:"POS",icon:"bi-cash-stack",action:()=>{u!=="pos"&&(u==="check-in"&&Pe(!1),f("pos")),Ze(!0)}},{id:"message-guest",label:"Message guest",icon:"bi-chat",action:()=>{var ie;(ie=M.current)==null||ie.focus()}},{id:"assign",label:"Assign",icon:"bi-check-square",action:()=>{y||((u==="check-in"||u==="pos")&&(f(null),u==="pos"&&(R([]),Z(null))),z(!0))}}):u==="pos"?S.push({id:"add-item",label:"Add item",icon:"bi-plus",action:()=>{Ze(!0)}},{id:"payment",label:"Payment",icon:"bi-credit-card",action:()=>{Ze(!0)}},{id:"assign",label:"Assign",icon:"bi-check-square",action:()=>{y||z(!0)}}):u==="check-in"&&S.push({id:"scan-qr",label:"Scan QR",icon:"bi-qr-code-scan",action:()=>{Qe(!0)}},{id:"choose-guest",label:"Choose guest",icon:"bi-people",action:()=>{ut(!0)}});return S.length===0?null:i.jsxs("div",{style:{display:"flex",gap:"0.5rem",padding:"0.5rem 1rem",paddingBottom:"0.75rem",overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},className:"suggested-pills-rail",onWheel:ie=>{ie.deltaY!==0&&(ie.currentTarget.scrollLeft+=ie.deltaY,ie.preventDefault())},children:[i.jsx("style",{children:`
          .suggested-pills-rail::-webkit-scrollbar {
            display: none;
          }
        `}),S.map(ie=>i.jsxs("button",{type:"button",onClick:le=>{le.stopPropagation(),ie.action()},style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.875rem",backgroundColor:"rgba(255, 255, 255, 0.08)",border:"none",borderRadius:"20px",color:"rgba(255, 255, 255, 0.9)",fontSize:"0.875rem",fontWeight:"500",whiteSpace:"nowrap",flexShrink:0,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:le=>{le.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.12)"},onMouseLeave:le=>{le.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},onTouchStart:le=>{le.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.15)"},onTouchEnd:le=>{setTimeout(()=>{le.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},150)},onTouchCancel:le=>{le.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},children:[ie.icon&&(ie.icon.startsWith("bi-")?i.jsx("i",{className:`bi ${ie.icon}`,style:{fontSize:"0.875rem",fontWeight:"bold"}}):i.jsx("span",{style:{fontSize:"0.875rem"},children:ie.icon})),i.jsx("span",{children:ie.label})]},ie.id))]})},Pd=()=>{if(!Ie)return null;const S=[{id:"people",label:"People",icon:"bi-people",description:"Select guests, staff, or AI",onClick:()=>{Ne(!1),ut(!0)}},{id:"check-in",label:"Check-in",icon:"bi-person-check",description:"Check in guests",onClick:()=>{Ne(!1),Qe(!0)}},{id:"pos",label:"POS",icon:"bi-cash-stack",description:"Add items to cart",onClick:()=>{Ne(!1),Ze(!0)}},{id:"assign",label:"Assign",icon:"bi-check-square",description:"Create a task",onClick:()=>{y?z(!1):u==="check-in"||u==="pos"?(f(null),u==="pos"&&(R([]),Z(null),ye(!1)),u==="check-in"&&Pe(!1),z(!0),ee("Switched to Assign")):z(!0),Ne(!1)}}];return i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:99999,animation:Rt?"fadeOut 0.3s ease-out":"fadeIn 0.2s ease-out",pointerEvents:"auto"},onClick:()=>{Ie&&(On(!0),setTimeout(()=>{Ne(!1),On(!1),document.body.removeAttribute("data-bottom-sheet-open"),document.body.style.overscrollBehaviorY="",document.documentElement.style.overscrollBehaviorY="",document.body.style.overflow="",document.documentElement.style.overflow=""},300)),Nt&&(en(!0),setTimeout(()=>{ut(!1),en(!1),document.body.removeAttribute("data-bottom-sheet-open"),document.body.style.overscrollBehaviorY="",document.documentElement.style.overscrollBehaviorY="",document.body.style.overflow="",document.documentElement.style.overflow=""},300)),bt&&(q(!0),setTimeout(()=>{Qe(!1),q(!1),document.body.removeAttribute("data-bottom-sheet-open"),document.body.style.overscrollBehaviorY="",document.documentElement.style.overscrollBehaviorY="",document.body.style.overflow="",document.documentElement.style.overflow=""},300)),Et&&(be(!0),setTimeout(()=>{Ze(!1),be(!1),document.body.removeAttribute("data-bottom-sheet-open"),document.body.style.overscrollBehaviorY="",document.documentElement.style.overscrollBehaviorY="",document.body.style.overflow="",document.documentElement.style.overflow=""},300))}}),i.jsxs("div",{ref:se,"data-bottom-sheet":!0,onTouchStart:I=>{const D=I.target;D.tagName==="BUTTON"||D.closest("button")||D.tagName==="INPUT"||D.closest("input")||(I.stopPropagation(),Ae(!0),me(I.touches[0].clientY))},onTouchMove:I=>{if(he&&se.current){I.preventDefault(),I.stopPropagation();const G=I.touches[0].clientY-we;G>0&&(se.current.style.transform=`translateX(-50%) translateY(${G}px)`)}},onTouchEnd:I=>{var D;if(he&&se.current){I.preventDefault(),I.stopPropagation();const G=se.current.style.transform;parseInt(((D=G.match(/translateY\((\d+)px\)/))==null?void 0:D[1])||"0")>100&&Ne(!1),se.current.style.transform="translateX(-50%)",se.current.style.touchAction=""}Ae(!1),me(0)},onMouseDown:I=>{const D=I.target;D.tagName==="BUTTON"||D.closest("button")||(I.stopPropagation(),Ae(!0),me(I.clientY))},style:{position:"fixed",bottom:0,left:"50%",transform:"translateX(-50%)",width:"100%",maxWidth:"600px",backgroundColor:"#0a0a0a",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem",padding:"1.5rem 1rem",paddingTop:"0.75rem",paddingBottom:"calc(1.5rem + env(safe-area-inset-bottom, 0))",zIndex:1e5,pointerEvents:"auto",boxShadow:"0 -4px 20px rgba(0, 0, 0, 0.3)",animation:he?"none":Rt?"slideDown 0.3s ease-out":"slideUp 0.3s ease-out",maxHeight:"70vh",overflowY:"auto",transition:he?"none":"transform 0.2s ease-out",cursor:he?"grabbing":"default",touchAction:he?"none":"pan-y",userSelect:"none",overscrollBehavior:"contain"},onClick:I=>{I.target.tagName!=="BUTTON"&&!I.target.closest("button")&&I.stopPropagation()},children:[i.jsx("div",{style:{width:"40px",height:"4px",backgroundColor:"rgba(255, 255, 255, 0.3)",borderRadius:"2px",margin:"0 auto 0.75rem",pointerEvents:"none"}}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:S.map(I=>{const D=I.id==="people"&&g.length>0||I.id==="check-in"&&u==="check-in"||I.id==="pos"&&u==="pos"||I.id==="assign"&&y;return i.jsxs("button",{type:"button",className:"btn",onClick:I.onClick,style:{display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start",gap:"1rem",padding:"1rem",backgroundColor:"transparent",border:"none",borderRadius:"0.5rem",color:"rgba(255, 255, 255, 0.5)",transition:"all 0.2s",textAlign:"left",width:"100%"},onMouseEnter:G=>{G.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)"},onMouseLeave:G=>{G.currentTarget.style.backgroundColor="transparent"},onTouchStart:G=>{G.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.15)"},onTouchEnd:G=>{setTimeout(()=>{G.currentTarget.style.backgroundColor="transparent"},150)},onTouchCancel:G=>{G.currentTarget.style.backgroundColor="transparent"},children:[i.jsx("i",{className:`bi ${I.icon}`,style:{fontSize:"1.5rem",flexShrink:0,marginTop:"0.125rem",color:D?"#0d6efd":"rgba(255, 255, 255, 0.9)"}}),i.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"0.25rem"},children:[i.jsx("span",{style:{fontSize:"1rem",fontWeight:"500",color:D?"#0d6efd":"rgba(255, 255, 255, 0.9)"},children:I.label}),I.description&&i.jsx("span",{style:{fontSize:"0.875rem",color:D?"#0d6efd":"rgba(255, 255, 255, 0.6)",fontWeight:"400"},children:I.description})]}),D&&i.jsx("i",{className:"bi bi-check",style:{fontSize:"1.5rem",color:"#0d6efd",flexShrink:0,marginTop:"0.125rem",fontWeight:"bold"}})]},I.id)})})]})]})};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"composer-bar",style:{position:"relative",padding:"0.25rem 1rem 0.75rem 1rem",zIndex:100},children:[i.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(to top, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 0.8) 40%, rgba(0, 0, 0, 0) 100%)",pointerEvents:"none",zIndex:-1}}),i.jsx("div",{style:{position:"absolute",top:"-2rem",left:0,right:0,height:"2rem",background:"linear-gradient(to top, rgba(0, 0, 0, 0.8) 0%, rgba(0, 0, 0, 0) 100%)",pointerEvents:"none",zIndex:-1}}),i.jsxs("div",{style:{position:"relative",zIndex:1},children:[zd(),Id()]})]}),Pd(),Rd(),Ed(),Nd()]})}function fm({thread:e,onReply:t}){const[n,r]=T.useState(""),[s,o]=T.useState(null),a=(v,p)=>{v==="thread-reply"&&t?t(e.id,p.message):(console.log("Tool action:",v,p),alert(`Action: ${v}
Data: ${JSON.stringify(p,null,2)}`),o(null))},l=()=>i.jsx("div",{className:"tool-composer",children:i.jsxs("div",{className:"d-flex gap-2",children:[i.jsxs("button",{className:"btn btn-primary flex-grow-1",onClick:()=>a("scan-ticket",{method:"scanner"}),children:[i.jsx("i",{className:"bi bi-qr-code-scan"})," Open Scanner"]}),i.jsxs("button",{className:"btn btn-outline-primary flex-grow-1",onClick:()=>a("scan-ticket",{method:"manual"}),children:[i.jsx("i",{className:"bi bi-keyboard"})," Manual Entry"]}),i.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>o(null),children:i.jsx("i",{className:"bi bi-x"})})]})}),c=()=>{const[v,p]=T.useState(1),[b,g]=T.useState(25);return i.jsxs("div",{className:"tool-composer",children:[i.jsxs("div",{className:"d-flex gap-2 mb-2",children:[i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.8)"},children:"Quantity"}),i.jsx("input",{type:"number",className:"form-control bg-dark text-white border-secondary",min:"1",value:v,onChange:w=>p(parseInt(w.target.value)||1)})]}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.8)"},children:"Price"}),i.jsx("input",{type:"number",className:"form-control bg-dark text-white border-secondary",min:"0",step:"0.01",value:b,onChange:w=>g(parseFloat(w.target.value)||0)})]})]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsxs("button",{className:"btn btn-success flex-grow-1",onClick:()=>a("sell-ticket",{quantity:v,price:b,method:"charge"}),children:[i.jsx("i",{className:"bi bi-credit-card"})," Charge $",(v*b).toFixed(2)]}),i.jsxs("button",{className:"btn btn-outline-warning flex-grow-1",onClick:()=>a("sell-ticket",{quantity:v,price:b,method:"comp"}),children:[i.jsx("i",{className:"bi bi-gift"})," Comp"]}),i.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>o(null),children:i.jsx("i",{className:"bi bi-x"})})]})]})},d=()=>{const v=["Wine","Beer","Cocktail","Soft Drink"],[p,b]=T.useState("");return i.jsxs("div",{className:"tool-composer",children:[i.jsxs("div",{className:"mb-2",children:[i.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.8)"},children:"Select Drink"}),i.jsxs("select",{className:"form-select bg-dark text-white border-secondary",value:p,onChange:g=>b(g.target.value),children:[i.jsx("option",{value:"",children:"Choose..."}),v.map(g=>i.jsx("option",{value:g,children:g},g))]})]}),i.jsxs("div",{className:"d-flex gap-2",children:[i.jsxs("button",{className:"btn btn-primary flex-grow-1",disabled:!p,onClick:()=>a("order-drink",{drink:p}),children:[i.jsx("i",{className:"bi bi-send"})," Send Order"]}),i.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>o(null),children:i.jsx("i",{className:"bi bi-x"})})]})]})},x=()=>{if(s==="ticket-scan")return l();if(s==="sell-ticket")return c();if(s==="order-drink")return d();if(s==="checkin")return i.jsx("div",{className:"tool-composer",children:i.jsxs("div",{className:"d-flex gap-2",children:[i.jsxs("button",{className:"btn btn-primary flex-grow-1",onClick:()=>a("checkin",{threadId:e.id}),children:[i.jsx("i",{className:"bi bi-person-check"})," Check-in Guest"]}),i.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>o(null),children:i.jsx("i",{className:"bi bi-x"})})]})});const v=n.trim();return i.jsx("div",{style:{display:"flex",alignItems:"flex-end",gap:"0.5rem"},children:i.jsxs("div",{style:{flex:1,backgroundColor:"#0a0a0a",border:"none",borderRadius:"20px",padding:"0.5rem 0.75rem",paddingRight:"2.75rem",minHeight:"45px",display:"flex",flexDirection:"row",alignItems:n.trim()?"flex-end":"center",cursor:"text",position:"relative",overflow:"visible"},children:[i.jsx("textarea",{className:"form-control bg-transparent text-white border-0 p-0",placeholder:"Ask or act",value:n,onChange:p=>{if(r(p.target.value),p.target){p.target.style.height="auto";const b=Math.min(p.target.scrollHeight,200);p.target.style.height=`${b}px`}},onKeyPress:p=>{p.key==="Enter"&&!p.shiftKey&&v&&(p.preventDefault(),a("thread-reply",{message:n}),r(""))},rows:1,style:{flex:1,width:"100%",border:"none",outline:"none",boxShadow:"none",fontSize:"16px",background:"transparent",padding:"0",paddingTop:(n.trim(),"calc((45px - 1.5 * 16px) / 2)"),lineHeight:"1.5",resize:"none",overflow:"hidden",maxHeight:"200px",fontFamily:"inherit",margin:0,height:n.trim()?"auto":"calc(1.5 * 16px)",minHeight:"calc(1.5 * 16px)",display:"block",boxSizing:"border-box",verticalAlign:"top",alignSelf:n.trim()?"flex-end":"center"}}),i.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:p=>{p.stopPropagation(),p.preventDefault(),v&&(a("thread-reply",{message:n}),r(""))},disabled:!v,style:{position:"absolute",right:"0.5rem",top:n.trim()?"auto":"50%",bottom:n.trim()?"0.5rem":"auto",transform:n.trim()?"none":"translateY(-50%)",width:"32px",height:"32px",borderRadius:"50%",backgroundColor:v?"#ffffff":"rgba(255, 255, 255, 0.1)",border:"none",display:"flex",alignItems:"center",justifyContent:"center",color:v?"#000000":"rgba(255, 255, 255, 0.5)",cursor:v?"pointer":"not-allowed",flexShrink:0,zIndex:10},title:"Send",children:i.jsx("i",{className:"bi bi-arrow-up-short",style:{fontSize:"1.125rem",fontWeight:"bold",transform:"scale(1.3)"}})})]})})};return i.jsxs("div",{className:"composer-bar",style:{position:"relative",padding:"0.75rem 1rem",zIndex:100},children:[i.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(to top, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 0.8) 40%, rgba(0, 0, 0, 0) 100%)",pointerEvents:"none",zIndex:-1}}),i.jsx("div",{style:{position:"absolute",top:"-2rem",left:0,right:0,height:"2rem",background:"linear-gradient(to top, rgba(0, 0, 0, 0.8) 0%, rgba(0, 0, 0, 0) 100%)",pointerEvents:"none",zIndex:-1}}),i.jsx("div",{style:{position:"relative",zIndex:1},children:x()})]})}function pm({thread:e,onBack:t,onReply:n,participantMap:r={},currentUserId:s}){var b,g;const o=w=>{const K=["#0d6efd","#6f42c1","#d63384","#dc3545","#fd7e14","#ffc107","#20c997","#198754"],m=w.charCodeAt(0)%K.length;return K[m]},a=w=>{const K=new Date(w),u=new Date-K,f=Math.floor(u/6e4);if(f<1)return"Just now";if(f<60)return`${f}m ago`;const y=Math.floor(f/60);return y<24?`${y}h ago`:K.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};console.log("ThreadView received thread:",e),console.log("Thread messages:",e.messages),console.log("Thread participants:",e.participants),console.log("Participant map:",r);const l=((b=e.participants)==null?void 0:b.find(w=>w.type!=="ai"))||((g=e.participants)==null?void 0:g[0]),c=[...e.messages||[]].sort((w,K)=>w.createdAt-K.createdAt);console.log("Sorted messages:",c);const[d,x]=T.useState(!1),[v,p]=T.useState(null);return i.jsxs("div",{className:"thread-view",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#000000",zIndex:1e3,display:"flex",flexDirection:"column",animation:"slideIn 0.3s ease-out"},children:[i.jsxs("div",{className:"thread-header",style:{backgroundColor:"#0a0a0a",padding:"1rem",display:"flex",alignItems:"center",gap:"1rem"},children:[i.jsx("button",{className:"btn btn-link p-0",onClick:t,style:{color:"#ffffff",fontSize:"1.25rem"},children:i.jsx("i",{className:"bi bi-chevron-left"})}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsx("h5",{className:"mb-0",style:{color:"#ffffff"},children:"Thread"}),i.jsx("small",{style:{color:"rgba(255, 255, 255, 0.6)"},children:(l==null?void 0:l.name)||"Unknown"})]})]}),i.jsx("div",{className:"thread-content flex-grow-1 overflow-auto",style:{padding:"1rem",paddingBottom:"8rem"},children:i.jsx("div",{className:"thread-messages",children:c.length===0?i.jsx("div",{style:{color:"rgba(255, 255, 255, 0.5)",textAlign:"center",padding:"2rem"},children:"No messages in this thread"}):c.map((w,K)=>{var L,Z;console.log(`Rendering message ${K}:`,w);const m=w.senderId||((L=w.sender)==null?void 0:L.id),u=r[m]||w.sender,f=m==="ai"||((Z=w.sender)==null?void 0:Z.type)==="ai",y=f?"Canyon Concierge":(u==null?void 0:u.name)||"Unknown",z=f?"AI":(u==null?void 0:u.avatar)||"?",C=f?"#3B31FF":o(z),R=w.text||w.message||"";return i.jsx("div",{className:"thread-message mb-3",children:i.jsxs("div",{className:"d-flex align-items-start gap-2",children:[i.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"40px",height:"40px",backgroundColor:C,color:"#ffffff",fontSize:"0.875rem",fontWeight:"600",flexShrink:0},children:z}),i.jsxs("div",{className:"flex-grow-1",children:[i.jsxs("div",{className:"d-flex align-items-center gap-2 mb-1",children:[i.jsx("strong",{style:{color:f?"rgba(130, 170, 210, 1)":"#ffffff",fontSize:"0.875rem"},children:y}),i.jsx("small",{style:{color:"rgba(255, 255, 255, 0.6)"},children:a(w.createdAt||w.timestamp)})]}),i.jsx("p",{className:"mb-0",style:{color:"#ffffff"},children:R})]})]})},w.id||`msg-${K}`)})})}),i.jsx("div",{style:{position:"sticky",bottom:0,zIndex:100},children:i.jsx(fm,{thread:e,onReply:n})})]})}function mm({feedItems:e,visibleFeedItems:t,activeFilter:n,onFilterChange:r,starredIds:s,onToggleStar:o,selectedContext:a,onItemClick:l,onOpenThread:c,onClearSelectedContext:d,itemRefs:x,onUpdateTaskLocation:v,onCompleteTask:p,currentUserId:b,highlightedItemId:g,atBottom:w,isBottomSheetOpen:K,scrollToBottom:m,composerHeight:u,feedRef:f,composerRef:y,toolMode:z,onToolModeChange:C,onToolAction:R,onReassignTask:L,onSendMessage:Z}){return i.jsxs("div",{className:"app-container d-flex flex-column",style:{height:"100dvh",backgroundColor:"lch(4.8% 0.7 272)",color:"#ffffff",position:"relative",overflow:"hidden"},children:[i.jsx("div",{style:{position:"sticky",top:0,left:0,right:0,zIndex:100},children:i.jsx(am,{feedItems:e,activeFilter:n,onFilterChange:r,starredIds:s})}),i.jsxs("div",{className:"flex-grow-1 overflow-auto",ref:f,style:{height:"100%",position:"relative",backgroundColor:"#000"},onClick:Y=>{(Y.target===Y.currentTarget||Y.target.closest(".feed-container"))&&(Y.target.closest(".feed-item")||d==null||d())},children:[i.jsx(md,{items:t,allItems:e,activeFilter:n,onItemClick:l,onOpenThread:c,selectedContext:a,starredIds:s,onToggleStar:o,itemRefs:x,onUpdateTaskLocation:v,onCompleteTask:p,currentUserId:b,highlightedItemId:g}),!w&&!K&&i.jsx("button",{onClick:m,className:"btn btn-sm btn-primary rounded-pill",style:{position:"fixed",bottom:`${u+8}px`,left:"50%",transform:"translateX(-50%)",zIndex:200,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"none",padding:"0.5rem",width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},onMouseEnter:Y=>{Y.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.2)",Y.currentTarget.style.transform="translateX(-50%) scale(1.05)"},onMouseLeave:Y=>{Y.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)",Y.currentTarget.style.transform="translateX(-50%) scale(1)"},children:i.jsx("i",{className:"bi bi-arrow-down",style:{fontSize:"1rem"}})})]}),i.jsx("div",{ref:y,style:{position:"sticky",bottom:0,left:0,right:0,zIndex:100,paddingBottom:"env(safe-area-inset-bottom, 0)"},children:i.jsx(gd,{selectedContext:a,toolMode:z,onToolModeChange:C,onToolAction:R,onCompleteTask:p,onReassignTask:L,feedItems:t,onSendMessage:Z})})]})}const hd="canyon_test_events",$i=1e3;let Hi=null,Xn=[];if(typeof window<"u"){Hi=sessionStorage.getItem("canyon_test_session_id")||`test_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sessionStorage.setItem("canyon_test_session_id",Hi);try{const e=localStorage.getItem(hd);e&&(Xn=JSON.parse(e),Xn.length>$i&&(Xn=Xn.slice(-$i)))}catch(e){console.warn("Failed to load test events from localStorage",e)}}function Ui(e,t={}){const n={name:e,payload:t,timestamp:Date.now(),sessionId:Hi,stage:t.stage||null};if(Xn.push(n),typeof window<"u")try{const r=Xn.slice(-$i);localStorage.setItem(hd,JSON.stringify(r))}catch(r){console.warn("Failed to save test events to localStorage",r)}return n}const ue={ARRIVAL:"arrival",ORIENT:"orient",EXPLORE:"explore",TRANSITION:"transition",WRAP:"wrap"},eu=1500,gm=2500,hm=1e4,ym=1e4;function vm({appendFeedItem:e,setSuggestedPills:t,setCardExpanded:n,getState:r,logEvent:s=Ui}){let o=ue.ARRIVAL,a={},l=null,c=null,d=!1;const x=()=>eu+Math.random()*(gm-eu),v=()=>{l&&(clearTimeout(l),l=null)},p=()=>{c&&(clearTimeout(c),c=null)},b=(_,O=null)=>{v();const J=O!==null?O:x();console.log("[ScenarioDirector] Scheduling advancement with delay:",J),l=setTimeout(()=>{console.log("[ScenarioDirector] Executing scheduled advancement");try{_()}catch(te){console.error("[ScenarioDirector] Error in scheduled advancement:",te)}l=null},J)},g=()=>{p(),c=setTimeout(()=>{L()},hm)},w=_=>{switch(_){case ue.ARRIVAL:return[{id:"washrooms",text:"Where are the washrooms?"},{id:"coat",text:"Where do I put my coat?"}];case ue.ORIENT:return[{id:"what-to-see-first",text:"What should I see first?"},{id:"drinks-allowed",text:"Are drinks allowed in the galleries?"}];case ue.EXPLORE:return[];case ue.TRANSITION:return[{id:"souvenir",text:"Can I take a souvenir home with me?"},{id:"whats-next",text:"What's next?"}];case ue.WRAP:return[{id:"this-week",text:"What's going this week?"},{id:"members",text:"What do members get?"}];default:return[]}},K=(_,O)=>({washrooms:"The washrooms are past the gift shop, to the right. There are also lockers available in the same area if you need to store your coat.",coat:"You can use the lockers past the gift shop, to the right. They're free to use during your visit.","what-to-see-first":"I'd recommend starting with DOKU by Lu Yang at 8pm in the Cinemateque - it's our featured exhibition tonight. You can also check out Pulse in the Main Hall or Centers in Gallery 1 while you wait.","drinks-allowed":"Yes! Drinks from the bar are welcome in all galleries. Just be mindful of the artwork and use the provided coasters.",souvenir:"Absolutely! The gift shop has books, prints, and other items related to our current exhibitions. They're open until 9pm.","whats-next":"Thanks for visiting CANYON tonight! We hope you enjoyed your experience. Before you go, we'd love to hear your feedback.","this-week":"This week we have DOKU by Lu Yang, Pulse by Rafael Lozano-Hemmer, and Centers by Vito Acconci. Check the schedule card for times and locations.",members:"Members get priority access to exhibitions, discounts at the gift shop and bar, and invitations to special events. Would you like to learn more about membership?"})[_]||"Thanks for asking! How else can I help you?",m=(_,O={})=>{const J=Date.now();switch(_){case ue.ORIENT:const te=J+18e5,xe=J+45*60*1e3,de=J+60*60*1e3;return{id:`moment-schedule-${J}`,type:"moment",momentType:"schedule",title:"Schedule",events:[{image:"https://www.researchgate.net/profile/Thamara-Venancio-De-Almeida/publication/349324699/figure/fig2/AS:991563220004864@1613418502381/FIGURA-3-Centers-Vito-Acconci-1971_Q320.jpg",title:"Centers",artist:"Vito Acconci",location:"Gallery 1",startTime:"Ongoing",startsAt:te},{image:"https://www.lozano-hemmer.com/image_sets/pulse_topology/pulse_topology.jpg",title:"Pulse",artist:"Rafael Lozano-Hemmer",location:"Main Hall",startTime:"Ongoing",startsAt:xe},{image:"https://www.aros.dk/media/3885/luyang_02.png?height=1600&widthratio=1.641025641025641&mode=crop&center=0.30964467005076141,0.50666666666666671&rnd=132822238650000000&format=webp",title:"DOKU",artist:"Lu Yang",location:"Cinemateque",startTime:"8:00pm",startsAt:de}],timestamp:J};case ue.EXPLORE:return{id:`moment-bar-menu-${J}`,type:"moment",momentType:"bar-menu",title:"Bar Menu",mostPopular:[{name:"white wine",description:"pinot project, italy 2022",price:12},{name:"red wine",description:"pasqua veneto rosso, veneto",price:12},{name:"Lager",description:"Sunday beer",price:10}],deliveryLocation:"Pick up at bar",paymentMethod:"Mastercard  3245",total:0,showActions:!0,timestamp:J};case ue.TRANSITION:return{id:`moment-gift-shop-${J}`,type:"moment",momentType:"gift-shop",title:"Gift Shop",products:[{image:"https://draw-down.com/cdn/shop/products/TheArtHappensHereNetArtAnthology_19s.jpg",title:"The Art Happens Here: Net Art Anthology",author:"Josephine Bosma",contributors:3,price:50},{image:"https://boutique.centrepompidou.fr/files/products/38226/66338-86c5e96a-xl/products-66338.jpg",title:"China: A new generation of artists",author:"Lu Yang (contributor)",contributors:10,price:70}],timestamp:J};case ue.WRAP:return{id:`moment-feedback-${J}`,type:"moment",momentType:"feedback",title:"Feedback",question:"How likely are you to recommend CANYON to a friend or colleague?",showScale:!0,timestamp:J};default:return null}},u=_=>{if(_===o)return;const O=o;o=_,s("stage_start",{stage:_,previousStage:O});const J=w(_);t(J)},f=_=>{if(console.log("[ScenarioDirector] onUserAction called:",_.type,_.payload),!d){console.warn("[ScenarioDirector] Director is not active!");return}switch(v(),p(),s(_.type,{..._.payload,stage:o}),_.type){case"pill_tap":y(_.payload);break;case"message_send":z(_.payload);break;case"card_expand":_.payload.reason==="manual"&&(a[_.payload.cardId]=Date.now());break;case"card_collapse":break;case"qr_scan":C(_.payload);break}_.type!=="pill_tap"&&_.type!=="message_send"&&b(()=>{R(_)}),g()},y=_=>{const{pillId:O,pillText:J}=_||{};if(console.log("[ScenarioDirector] handlePillTap called:",O,J),!O){console.warn("[ScenarioDirector] No pillId in payload:",_);return}const te=K(O);console.log("[ScenarioDirector] Got reply:",te),b(()=>{console.log("[ScenarioDirector] Scheduling reply addition");const xe=Date.now();if(e({id:`concierge-reply-${xe}`,type:"concierge",sender:{name:"Canyon Concierge",avatar:"AI",type:"ai"},message:te,timestamp:xe}),(O==="washrooms"||O==="coat")&&o===ue.ARRIVAL)r().items.some($=>$.id==="moment-amenities-1")?n("moment-amenities-1",!0,{reason:"auto"}):setTimeout(()=>{const $=Date.now();e({id:"moment-amenities-1",type:"moment",momentType:"amenities",title:"Amenities",subtitle:"Find your way around",items:[{icon:"washroom",label:"Washrooms",hint:"Past gift shop, to the right"},{icon:"locker",label:"Lockers",hint:"Past gift shop, to the right"},{icon:"cinema",label:"Cinemateque",hint:"Near Delancey entrance"}],timestamp:$}),n("moment-amenities-1",!0,{reason:"auto"}),s("feed_item_added",{stage:o,itemId:"moment-amenities-1",itemType:"moment",momentType:"amenities"})},x());else if(O==="what-to-see-first")r().items.some($=>$.momentType==="schedule")?n("moment-ticket-1",!0,{reason:"auto"}):setTimeout(()=>{const $=Date.now(),V=m(ue.ORIENT);V&&(e(V),n(V.id,!0,{reason:"auto"}),s("feed_item_added",{stage:o,itemId:V.id,itemType:V.type}))},x());else if(O==="drinks-allowed"){const de=r();if(!de.items.some($=>$.momentType==="bar-menu"))setTimeout(()=>{const $=m(ue.EXPLORE);$&&(e($),n($.id,!0,{reason:"auto"}),s("feed_item_added",{stage:o,itemId:$.id,itemType:$.type}),setTimeout(()=>{o===ue.ORIENT?(console.log("[ScenarioDirector] Advancing stage after bar menu card added (from ORIENT to TRANSITION via pill)"),u(ue.TRANSITION)):o===ue.EXPLORE&&(console.log("[ScenarioDirector] Advancing stage after bar menu card added (from EXPLORE via pill)"),u(ue.TRANSITION))},x()))},x());else{const $=de.items.find(V=>V.momentType==="bar-menu");$&&n($.id,!0,{reason:"auto"}),o===ue.ORIENT?setTimeout(()=>{console.log("[ScenarioDirector] Advancing stage after bar menu (already exists, from ORIENT to TRANSITION via pill)"),u(ue.TRANSITION)},x()):o===ue.EXPLORE&&setTimeout(()=>{console.log("[ScenarioDirector] Advancing stage after bar menu (already exists, from EXPLORE via pill)"),u(ue.TRANSITION)},x())}}else if(O==="souvenir"){const de=r();if(!de.items.some($=>$.momentType==="gift-shop"))setTimeout(()=>{const $=Date.now(),V=m(ue.TRANSITION);V&&(e(V),n(V.id,!0,{reason:"auto"}),s("feed_item_added",{stage:o,itemId:V.id,itemType:V.type}))},x());else{const $=de.items.find(V=>V.momentType==="gift-shop");$&&n($.id,!0,{reason:"auto"})}}else if(O==="whats-next"){const de=r();if(!de.items.some($=>$.momentType==="feedback"))setTimeout(()=>{const $=m(ue.WRAP);$&&(e($),n($.id,!0,{reason:"auto"}),s("feed_item_added",{stage:o,itemId:$.id,itemType:$.type}),setTimeout(()=>{console.log("[ScenarioDirector] Advancing stage after feedback card added (to WRAP)"),u(ue.WRAP)},x()))},x());else{const $=de.items.find(V=>V.momentType==="feedback");$&&n($.id,!0,{reason:"auto"}),setTimeout(()=>{console.log("[ScenarioDirector] Advancing stage after feedback (already exists, to WRAP)"),u(ue.WRAP)},x())}}setTimeout(()=>{R({type:"pill_tap",payload:{pillId:O,pillText:J}})},x())})},z=_=>{const{text:O}=_;console.log("[ScenarioDirector] handleMessageSend called with:",O);let J="Thanks for your message! How else can I help you?";const te=O.toLowerCase();let xe=!1,de=!1,A=!1,$=!1,V=!1;te.includes("lu yang")||te.includes("doku")?J="Lu Yang is a multimedia artist known for exploring themes of technology, identity, and the digital body. DOKU is their current work showing in the Cinemateque.":te.includes("washroom")||te.includes("bathroom")||te.includes("washrooms")?(J="The washrooms are past the gift shop, to the right. There are also lockers available there.",xe=!0):te.includes("coat")||te.includes("locker")||te.includes("lockers")?(J="You can use the lockers past the gift shop, to the right. They're free to use during your visit.",xe=!0):te.includes("what should i see")||te.includes("what to see")||te.includes("see first")||te.includes("recommend")?(J="I'd recommend starting with DOKU by Lu Yang at 8pm in the Cinemateque - it's our featured exhibition tonight. You can also check out Pulse in the Main Hall or Centers in Gallery 1 while you wait.",de=!0):te.includes("drinks allowed")||te.includes("can i bring")?(J="Yes! Drinks from the bar are welcome in all galleries. Just be mindful of the artwork and use the provided coasters.",A=!0):te.includes("order a drink")||te.includes("how do i order")||te.includes("what can i order")||te.includes("bar menu")?(J="You can order drinks from the bar menu - just tap the items you want and confirm your order. Pick up is at the bar, and you can pay with your card on file.",A=!0):te.includes("souvenir")||te.includes("gift shop")||te.includes("take home")?(J="Absolutely! The gift shop has books, prints, and other items related to our current exhibitions. They're open until 9pm.",$=!0):(te.includes("what's next")||te.includes("whats next")||te.includes("closing")||te.includes("wrap up"))&&(J="Thanks for visiting CANYON tonight! We hope you enjoyed your experience. Before you go, we'd love to hear your feedback.",V=!0),b(()=>{console.log("[ScenarioDirector] Inside scheduleAdvancement callback"),console.log("[ScenarioDirector] Adding concierge reply:",J),console.log("[ScenarioDirector] shouldAddAmenities:",xe),console.log("[ScenarioDirector] currentStage:",o),console.log("[ScenarioDirector] STAGES.ARRIVAL:",ue.ARRIVAL);const ye=Date.now();console.log("[ScenarioDirector] Calling appendFeedItem for concierge reply"),e({id:`concierge-reply-${ye}`,type:"concierge",sender:{name:"Canyon Concierge",avatar:"AI",type:"ai"},message:J,timestamp:ye}),console.log("[ScenarioDirector] Concierge reply item added");const fe=r();if(de)if(!fe.items.some(re=>re.momentType==="schedule"))setTimeout(()=>{const re=m(ue.ORIENT);re&&(e(re),n(re.id,!0,{reason:"auto"}),s("feed_item_added",{stage:o,itemId:re.id,itemType:re.type}))},x());else{const re=fe.items.find(Ie=>Ie.momentType==="schedule");re&&n(re.id,!0,{reason:"auto"})}if(A)if(!fe.items.some(re=>re.momentType==="bar-menu"))setTimeout(()=>{const re=m(ue.EXPLORE);re&&(e(re),n(re.id,!0,{reason:"auto"}),s("feed_item_added",{stage:o,itemId:re.id,itemType:re.type}))},x());else{const re=fe.items.find(Ie=>Ie.momentType==="bar-menu");re&&n(re.id,!0,{reason:"auto"})}if($)if(!fe.items.some(re=>re.momentType==="gift-shop"))setTimeout(()=>{const re=m(ue.TRANSITION);re&&(e(re),n(re.id,!0,{reason:"auto"}),s("feed_item_added",{stage:o,itemId:re.id,itemType:re.type}))},x());else{const re=fe.items.find(Ie=>Ie.momentType==="gift-shop");re&&n(re.id,!0,{reason:"auto"})}if(V)if(!fe.items.some(re=>re.momentType==="feedback"))setTimeout(()=>{const re=m(ue.WRAP);re&&(e(re),n(re.id,!0,{reason:"auto"}),s("feed_item_added",{stage:o,itemId:re.id,itemType:re.type}))},x());else{const re=fe.items.find(Ie=>Ie.momentType==="feedback");re&&n(re.id,!0,{reason:"auto"})}if(xe){console.log("[ScenarioDirector] Should add amenities card, checking if exists..."),console.log("[ScenarioDirector] Current state items:",fe.items.map(re=>re.id));const $e=fe.items.some(re=>re.id==="moment-amenities-1");console.log("[ScenarioDirector] Amenities exists?",$e),$e?(console.log("[ScenarioDirector] Amenities card already exists, expanding..."),n("moment-amenities-1",!0,{reason:"auto"})):(console.log("[ScenarioDirector] Adding amenities card"),setTimeout(()=>{const re=Date.now();e({id:"moment-amenities-1",type:"moment",momentType:"amenities",title:"Amenities",subtitle:"Find your way around",items:[{icon:"washroom",label:"Washrooms",hint:"Past gift shop, to the right"},{icon:"locker",label:"Lockers",hint:"Past gift shop, to the right"},{icon:"cinema",label:"Cinemateque",hint:"Near Delancey entrance"}],timestamp:re}),console.log("[ScenarioDirector] Amenities card added, expanding..."),n("moment-amenities-1",!0,{reason:"auto"}),s("feed_item_added",{stage:o,itemId:"moment-amenities-1",itemType:"moment",momentType:"amenities"})},x()))}let Pe=!1;(o===ue.ARRIVAL&&xe||o===ue.ORIENT&&(de||A)||o===ue.EXPLORE&&A||o===ue.TRANSITION&&($||V))&&(Pe=!0),Pe&&setTimeout(()=>{R({type:"message_send",payload:{text:O,shouldAddSchedule:de,shouldAddBarMenu:A,shouldAddGiftShop:$,shouldAddFeedback:V,shouldAddAmenities:xe}})},x())})},C=_=>{b(()=>{o===ue.ARRIVAL&&u(ue.ORIENT)})},R=_=>{var O,J,te,xe,de,A;switch(o){case ue.ARRIVAL:(_.type==="message_send"&&((O=_.payload)!=null&&O.shouldAddAmenities)||_.type==="pill_tap")&&u(ue.ORIENT);break;case ue.ORIENT:_.type==="message_send"?(J=_.payload)!=null&&J.shouldAddSchedule?u(ue.EXPLORE):(te=_.payload)!=null&&te.shouldAddBarMenu&&u(ue.TRANSITION):_.type==="pill_tap"&&u(ue.EXPLORE);break;case ue.EXPLORE:_.type==="message_send"&&((xe=_.payload)!=null&&xe.shouldAddBarMenu)&&u(ue.TRANSITION);break;case ue.TRANSITION:_.type==="message_send"?((de=_.payload)!=null&&de.shouldAddGiftShop||(A=_.payload)!=null&&A.shouldAddFeedback)&&u(ue.WRAP):_.type==="pill_tap"&&(_.payload.pillId==="souvenir"||_.payload.pillId==="whats-next")&&u(ue.WRAP);break}},L=()=>{d&&(s("idle_nudge",{stage:o}),g())};return{onUserAction:f,onIdle:L,onScroll:_=>{if(!d)return;const{cardId:O,visibilityRatio:J}=_;if(J<.4){const te=a[O];if((te?Date.now()-te:1/0)>ym){const de=r();de.expandedCards&&de.expandedCards[O]&&(n(O,!1,{reason:"auto",cause:"scroll"}),s("card_collapse",{cardId:O,reason:"auto",cause:"scroll",stage:o}))}}},start:(_="arrival")=>{if(d)return;d=!0,o=ue.ARRIVAL;const O=w(ue.ARRIVAL);console.log("[ScenarioDirector] Starting, setting initial pills:",O),t(O),s("scenario_start",{mode:_,stage:o}),g()},stop:()=>{d&&(d=!1,v(),p(),s("scenario_stop",{stage:o}))},getCurrentStage:()=>o,isActive:()=>d}}function xm({itemRefs:e,currentUserId:t,highlightedItemId:n,feedRef:r,composerRef:s}){const o=()=>typeof window>"u"?"arrival":new URLSearchParams(window.location.search).get("scenario")||"arrival",a=T.useMemo(()=>{const C=Date.now();return[{id:"moment-ticket-1",type:"moment",momentType:"ticket",title:"DOKU by Lu Yang",locationLabel:"Cinematheque",startsAt:C+60*60*1e3,heroImage:"https://www.aros.dk/media/3885/luyang_02.png?height=1600&widthratio=1.641025641025641&mode=crop&center=0.30964467005076141,0.50666666666666671&rnd=132822238650000000&format=webp",heroImageFallback:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ6crUzfZ7ak2LjN_qjOsgrKkkNbrJ8q2G1hA&s",qrCode:!0,description:"DOKU is a digital shell that can exist without the constraints of a physical body, time, or space, embodying the artist's exploration of a post-human or digital self.",timestamp:C}]},[]),[l,c]=T.useState(()=>a),[d,x]=T.useState([]),[v,p]=T.useState([]),[b,g]=T.useState({"moment-ticket-1":!0}),w=T.useRef(null);T.useRef(null);const K=T.useRef(l),m=T.useRef(b),u=T.useRef(d);T.useEffect(()=>{K.current=l},[l]),T.useEffect(()=>{m.current=b},[b]),T.useEffect(()=>{u.current=d},[d]);const f=o();T.useEffect(()=>{const C=vm({appendFeedItem:R=>{console.log("[VisitorShell] appendFeedItem called with:",R.id,R.type),c(L=>{const Z=[...L,R];return console.log("[VisitorShell] New items count:",Z.length),setTimeout(()=>{r.current&&r.current.scrollTo({top:r.current.scrollHeight,behavior:"smooth"})},100),Z})},setSuggestedPills:R=>{x(R),p(L=>{const Z=new Set(L.map(_=>_.id)),Y=R.filter(_=>!Z.has(_.id)),ee=[...L,...Y];return console.log("[VisitorShell] Updated allPills:",ee.map(_=>_.text)),ee})},setCardExpanded:(R,L,Z={})=>{g(Y=>({...Y,[R]:L})),Z.reason==="auto"&&Ui("card_expand",{cardId:R,reason:"auto",stage:C.getCurrentStage()})},getState:()=>({items:K.current,expandedCards:m.current,suggestedPills:u.current}),logEvent:Ui});return w.current=C,setTimeout(()=>{C.start(f),console.log("[VisitorShell] Director started with mode:",f)},100),()=>{w.current&&w.current.stop()}},[]),T.useEffect(()=>{if(!r.current)return;const C=()=>{w.current&&Object.keys(b).forEach(L=>{if(!b[L])return;const Z=document.getElementById(`feed-item-${L}`);if(!Z)return;const Y=Z.getBoundingClientRect(),ee=r.current.getBoundingClientRect(),_=Y.top-ee.top,O=Y.bottom-ee.top,J=ee.height,te=Math.max(0,-_),xe=Math.min(J,O),A=Math.max(0,xe-te)/Y.height;w.current.onScroll({cardId:L,visibilityRatio:A})})},R=r.current;return R.addEventListener("scroll",C,{passive:!0}),()=>{R.removeEventListener("scroll",C)}},[b]);const y=C=>{const R=b[C];g(L=>({...L,[C]:!R})),w.current&&w.current.onUserAction({type:R?"card_collapse":"card_expand",payload:{cardId:C,reason:"manual"}})},z=C=>{console.log("[VisitorShell] handleSendVisitorMessage called with:",C);const R=Date.now();return c(L=>[...L,{id:`visitor-msg-${R}`,type:"guest",name:"You",avatar:"Y",message:C,timestamp:R}]),w.current?(console.log("[VisitorShell] Notifying director of message_send"),w.current.onUserAction({type:"message_send",payload:{text:C}})):console.warn("[VisitorShell] Director ref is null when sending message!"),setTimeout(()=>{r.current&&r.current.scrollTo({top:r.current.scrollHeight,behavior:"smooth"})},100),{success:!0}};return i.jsxs("div",{className:"app-container d-flex flex-column",style:{height:"100dvh",backgroundColor:"#000",color:"#ffffff",position:"relative",overflow:"hidden"},children:[i.jsx("div",{className:"flex-grow-1 overflow-auto",ref:r,style:{height:"100%",position:"relative",backgroundColor:"#000"},children:i.jsx(md,{items:l,allItems:l,activeFilter:"all",onItemClick:()=>{},onOpenThread:void 0,onToggleMoment:y,selectedContext:null,starredIds:new Set,onToggleStar:void 0,itemRefs:e,onUpdateTaskLocation:void 0,onCompleteTask:void 0,currentUserId:t,highlightedItemId:n,collapseVariant:"visitor",expandedCards:b,onCardExpandChange:(C,R,L)=>{g(Z=>({...Z,[C]:R})),w.current&&w.current.onUserAction({type:R?"card_expand":"card_collapse",payload:{cardId:C,reason:(L==null?void 0:L.reason)||"manual"}})}})}),i.jsx("div",{ref:s,style:{position:"sticky",bottom:0,left:0,right:0,zIndex:100,paddingBottom:"env(safe-area-inset-bottom, 0)"},children:i.jsx(gd,{selectedContext:null,toolMode:null,onToolModeChange:()=>{},onToolAction:()=>{},onCompleteTask:()=>{},onReassignTask:()=>{},feedItems:l,onSendMessage:C=>(console.log("[VisitorShell] Message sent via Composer:",C),z(C)),config:{mode:"visitor",suggestedPrompts:v.length>0?v.map(C=>C.text):d.length>0?d.map(C=>C.text):["Where are the washrooms?","Where do I put my coat?"],pillIds:v.length>0?v.map(C=>C.id):d.length>0?d.map(C=>C.id):["washrooms","coat"]},readOnly:!1,placeholderOverride:"Ask anything"})})]})}function km({onEnterFeed:e}){T.useEffect(()=>{const y=document.createElement("link");return y.href="https://fonts.googleapis.com/css2?family=Archivo+Black&display=swap",y.rel="stylesheet",document.head.appendChild(y),()=>{document.head.removeChild(y)}},[]);const[t,n]=T.useState(!1),r=T.useRef(null),s=T.useRef(null),o=T.useRef(null),a=T.useRef(null),[l,c]=T.useState(null),[d,x]=T.useState(null),v=y=>{t||c(y.touches[0].clientY)},p=y=>{if(l===null||t)return;x(y.touches[0].clientY);const z=l-y.touches[0].clientY;if(z>0&&a.current){const C=Math.min(z*.5,50);a.current.style.transform=`translateY(-${C}px)`}},b=()=>{l!==null&&d!==null&&!t&&(l-d>50?g():a.current&&(a.current.style.transform="translateY(0)")),c(null),x(null)},g=()=>{t||(n(!0),setTimeout(()=>{e()},600))},K=Date.now()+60*60*1e3,m=y=>{const z=y-Date.now();if(z<=0)return"0:00";const C=Math.floor(z/1e3),R=Math.floor(C/60),L=C%60;return`${R}:${L.toString().padStart(2,"0")}`},[u,f]=T.useState(m(K));return T.useEffect(()=>{const y=setInterval(()=>{f(m(K))},1e3);return()=>clearInterval(y)},[K]),T.useEffect(()=>{if(!window.YT){const C=document.createElement("script");C.src="https://www.youtube.com/iframe_api";const R=document.getElementsByTagName("script")[0];R.parentNode.insertBefore(C,R)}const y=setInterval(()=>{window.YT&&window.YT.Player&&(clearInterval(y),z())},100);function z(){r.current&&(s.current=new window.YT.Player(r.current,{videoId:"jLMIh5mfaRY",playerVars:{autoplay:1,mute:1,controls:0,showinfo:0,rel:0,modestbranding:1,playsinline:1,start:0,end:30,iv_load_policy:3,fs:0,cc_load_policy:0,branding:0},events:{onReady:C=>{C.target.playVideo()},onStateChange:C=>{if(C.data===window.YT.PlayerState.ENDED&&(C.target.seekTo(0,!0),C.target.playVideo()),C.data===window.YT.PlayerState.PLAYING){const R=setInterval(()=>{s.current&&s.current.getCurrentTime()>=30&&(s.current.seekTo(0,!0),clearInterval(R))},100)}}}}))}return()=>{if(s.current)try{s.current.destroy()}catch{}clearInterval(y)}},[]),i.jsxs("div",{ref:o,style:{position:"fixed",top:0,left:0,right:0,bottom:0,overflow:"hidden",backgroundColor:"#000000",transform:t?"translateY(-100%)":"translateY(0)",transition:"transform 0.6s cubic-bezier(0.4, 0, 0.2, 1)",zIndex:1e3},children:[i.jsxs("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",zIndex:1},children:[i.jsx("div",{ref:r,style:{position:"absolute",top:"50%",left:"50%",width:"120vw",height:"67.5vw",minHeight:"120vh",minWidth:"213.34vh",transform:"translate(-50%, -50%) translateX(2%) translateY(-2%)",pointerEvents:"none"}}),i.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"linear-gradient(to bottom, rgba(0, 0, 0, 0.3) 0%, rgba(0, 0, 0, 0.6) 100%)",zIndex:2}})]}),i.jsxs("div",{style:{position:"relative",zIndex:3,height:"100%",display:"flex",flexDirection:"column",paddingBottom:"1rem"},children:[i.jsxs("div",{style:{position:"absolute",top:"2rem",left:0,right:0,display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:10},children:[i.jsxs("div",{style:{width:"18px",height:"18px",display:"flex",flexDirection:"column",justifyContent:"space-between",cursor:"pointer"},children:[i.jsx("div",{style:{width:"100%",height:"1.5px",backgroundColor:"#ffffff",borderRadius:"1px"}}),i.jsx("div",{style:{width:"100%",height:"1.5px",backgroundColor:"#ffffff",borderRadius:"1px"}}),i.jsx("div",{style:{width:"100%",height:"1.5px",backgroundColor:"#ffffff",borderRadius:"1px"}})]}),i.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)"},children:i.jsx("img",{src:"https://www.dropbox.com/scl/fi/xqcgumrwqmjrs6zb51qfv/Canyon_FullLockup_White_RGB_S.png?rlkey=a4ivnr9r1k53wr58iy67ho0ic&dl=1&raw=1",alt:"Canyon",style:{height:"24px",width:"auto"},onError:y=>{if(y.target.style.display="none",!y.target.nextSibling){const z=document.createElement("div");z.textContent="CANYON",z.style.cssText="color: white; font-size: 1.25rem; font-weight: 600;",y.target.parentNode.appendChild(z)}}})}),i.jsx("div",{style:{width:"18px"}})]}),i.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",width:"100%",padding:"0 1rem"},children:[i.jsx("h1",{style:{color:"#ffffff",fontSize:"clamp(3rem, 8vw, 5rem)",fontFamily:'"Archivo Black", sans-serif',fontWeight:"400",lineHeight:"1.2",marginBottom:"2rem",textShadow:"0 2px 10px rgba(0, 0, 0, 0.5)"},children:"Art that invites you to stay awhile"}),i.jsx("button",{onClick:g,style:{backgroundColor:"#3B31FF",color:"#ffffff",border:"none",borderRadius:"0.5rem",padding:"1rem 2rem",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)"},onMouseEnter:y=>{y.currentTarget.style.backgroundColor="#2d25e6",y.currentTarget.style.transform="scale(1.05)"},onMouseLeave:y=>{y.currentTarget.style.backgroundColor="#3B31FF",y.currentTarget.style.transform="scale(1)"},children:"Buy Tickets Now"})]}),i.jsxs("div",{style:{position:"relative",marginTop:"auto",padding:"2rem 1rem 1rem 1rem"},children:[i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.25rem",marginBottom:"1rem"},children:[i.jsx("div",{style:{animation:"bounce 2s infinite"},children:i.jsx("i",{className:"bi bi-chevron-up",style:{color:"#ffffff",fontSize:"1.25rem",opacity:.4}})}),i.jsx("div",{style:{animation:"pulse 2s infinite"},children:i.jsx("p",{style:{color:"#ffffff",fontSize:"0.875rem",fontWeight:"600",letterSpacing:"0.05em",textTransform:"uppercase",textShadow:"0 2px 4px rgba(0, 0, 0, 0.5)",opacity:.4},children:"Pick up where you left off"})})]}),i.jsxs("div",{ref:a,onClick:g,onTouchStart:v,onTouchMove:p,onTouchEnd:b,style:{backgroundColor:"rgba(20, 20, 20, 0.95)",borderRadius:"0.75rem",padding:"1rem",display:"flex",gap:"1rem",cursor:"pointer",transition:"transform 0.3s ease, box-shadow 0.3s ease",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)"},onMouseEnter:y=>{t||(y.currentTarget.style.boxShadow="0 6px 16px rgba(0, 0, 0, 0.5)",y.currentTarget.style.transform="translateY(-4px)")},onMouseLeave:y=>{t||(y.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.4)",y.currentTarget.style.transform="translateY(0)")},children:[i.jsx("img",{src:"https://www.aros.dk/media/3885/luyang_02.png?height=1600&widthratio=1.641025641025641&mode=crop&center=0.30964467005076141,0.50666666666666671&rnd=132822238650000000&format=webp",alt:"DOKU by Lu Yang",style:{width:"80px",height:"80px",borderRadius:"0.5rem",objectFit:"cover",flexShrink:0}}),i.jsxs("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column",gap:"0.5rem"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"0.5rem"},children:[i.jsxs("div",{style:{flex:1,minWidth:0},children:[i.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#ffffff",marginBottom:"0.25rem"},children:"DOKU by Lu Yang"}),i.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.6)"},children:"Performance"})]}),i.jsxs("span",{className:"badge bg-danger rounded-pill",style:{fontSize:"0.75rem",padding:"0.375rem 0.75rem",fontWeight:"600",whiteSpace:"nowrap",flexShrink:0},children:["STARTS ",u]})]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flexWrap:"wrap"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[i.jsx("i",{className:"bi bi-geo-alt-fill",style:{fontSize:"0.625rem",color:"rgba(255, 255, 255, 0.5)"}}),i.jsx("span",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)"},children:"Cinemateque"})]}),i.jsx("span",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)"},children:"Tonight at 8:00pm"})]})]})]})]})]}),i.jsx("style",{children:`
          @keyframes bounce {
            0%, 100% {
              transform: translateY(0);
            }
            50% {
              transform: translateY(-8px);
            }
          }
          @keyframes pulse {
            0%, 100% {
              opacity: 0.8;
            }
            50% {
              opacity: 1;
            }
          }
        `})]})}const j=e=>Date.now()-e*6e4,Fa=(e,t=60)=>({id:"sys-2",type:"system",title:"Performance starting soon",message:"DOKU performance begins in 60 minutes",timestamp:e,performanceStartTime:e+t*6e4});function bm(){const e=[];return e.push({id:"sys-shift-start",type:"system",title:"Shift started",message:"You're 15 minutes into your shift. Peak arrival window approaching.",timestamp:j(15)}),e.push(Fa(j(3),60)),e.push({id:"concierge-3-followup",type:"concierge",message:"Tickets are $25 each. You can pay at the Gallery 4 entrance with cash or card.",timestamp:j(.5),threadId:"thread-3",parentId:"guest-3-followup"}),e.push({id:"sys-shift-briefing",type:"system",title:"Shift briefing",message:` Next: DOKU starts soon (Cinemateque)
 Heads up: arrivals trending higher than usual
 Watch for: ticket scanning + drink delivery requests
 First move: keep Cinemateque entry moving`,timestamp:j(.1),briefingData:{schedule:[{title:"DOKU",artist:"Lu Yang",location:"Cinemateque",image:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ6crUzfZ7ak2LjN_qjOsgrKkkNbrJ8q2G1hA&s",startTime:"8:00pm",performanceStartTime:Date.now()+60*6e4}],visitors:{current:30,expected:150,trend:[{value:15,time:"7pm"},{value:20,time:"8pm"},{value:45,time:"9pm"},{value:30,time:"10pm"},{value:25,time:"11pm"}],avatars:[{name:"Sarah Chen",avatar:"SC"},{name:"Marcus Johnson",avatar:"MJ"},{name:"Emma Rodriguez",avatar:"ER"},{name:"David Kim",avatar:"DK"}]},staff:{current:4,expected:5,avatars:[{name:"Jeremy Bailey",avatar:"JB"},{name:"Alex Rivera",avatar:"AR"},{name:"Jordan Kim",avatar:"JK"},{name:"Casey Lee",avatar:"CL"}]},tasks:{incomplete:6}}}),e.push({id:"guest-3-followup",type:"guest",name:"Emma Rodriguez",avatar:"ER",message:"Great! How much are tickets?",timestamp:j(1),threadId:"thread-3"}),e.push({id:"concierge-3",type:"concierge",message:"Performance starts in 12 minutes. You can purchase tickets at the Gallery 4 entrance or use the ticket scanner.",timestamp:j(2),threadId:"thread-3",parentId:"guest-3"}),e.push({id:"task-4",type:"task",category:"service",title:"Drink order for Gallery 4",description:"Wine order for Gallery 4 - Zone 2",location:"gallery-4",status:"pending",timestamp:j(2),assignedTo:{name:"Emma Rodriguez",avatar:"ER",type:"guest"}}),e.push({id:"sys-1",type:"system",title:"Arrivals spike: +12 in 10m",message:"Unusual increase in arrivals detected",timestamp:j(5)}),e.push({id:"guest-3",type:"guest",name:"Emma Rodriguez",avatar:"ER",message:"Is the performance still happening? We want to buy tickets.",timestamp:j(3),threadId:"thread-3"}),e.push({id:"task-1",type:"task",category:"ticket",title:"Scan Ticket for Cinemateque",description:"Guest at entrance needs ticket validation",location:"cinemateque",status:"pending",timestamp:j(3),assignedTo:{name:"Sarah Chen",avatar:"SC",type:"guest"}}),e.push({id:"guest-2-followup",type:"guest",name:"Marcus Johnson",avatar:"MJ",message:"Perfect, found it. Thanks!",timestamp:j(4),threadId:"thread-2"}),e.push({id:"concierge-2",type:"concierge",message:"Restrooms are located on the second floor, near the main staircase. There are also facilities on the ground floor near Gallery 2.",timestamp:j(5),threadId:"thread-2",parentId:"guest-2"}),e.push({id:"guest-2",type:"guest",name:"Marcus Johnson",avatar:"MJ",message:"Where is the restroom?",timestamp:j(6),threadId:"thread-2"}),e.push({id:"task-7",type:"task",category:"service",title:"Assist guest with accessibility needs",description:"Guest requested wheelchair access information",status:"pending",timestamp:j(6),assignedTo:{name:"David Kim",avatar:"DK",type:"guest"}}),e.push({id:"concierge-1-followup",type:"concierge",message:"Of course! I'll add water to your order. It will be brought with your drinks.",timestamp:j(7),threadId:"thread-1",parentId:"guest-1-followup"}),e.push({id:"guest-1-followup",type:"guest",name:"Sarah Chen",avatar:"SC",message:"Thank you! Can we also get some water?",timestamp:j(8),threadId:"thread-1"}),e.push({id:"task-2",type:"task",category:"ticket",title:"Ticket scan failed - manual entry required",description:"QR code unreadable, need to enter ticket number manually",status:"pending",timestamp:j(8),assignedTo:{name:"Marcus Johnson",avatar:"MJ",type:"guest"}}),e.push({id:"sys-3",type:"system",title:"High service demand",message:"3 active drink orders pending",timestamp:j(9)}),e.push({id:"concierge-1",type:"concierge",message:"I've notified the service team about your drink order. It should arrive at table 5 within 5-7 minutes.",timestamp:j(9),threadId:"thread-1",parentId:"guest-1"}),e.push({id:"guest-1",type:"guest",name:"Sarah Chen",avatar:"SC",message:"Can we get another drink? We're at table 5 in Gallery 3.",timestamp:j(10),threadId:"thread-1"}),e.push({id:"sys-4",type:"system",title:"Ticket sales update",message:"139 tickets sold out of 150 capacity",timestamp:j(11)}),e.push({id:"task-3",type:"task",category:"ticket",title:"Walk-up ticket sale completed",description:"Sold 2 tickets at Gallery 1 entrance",status:"completed",timestamp:j(12),assignedTo:{name:"Alex Rivera",avatar:"AR",type:"staff"}}),e.push({id:"task-8",type:"task",category:"ticket",title:"Process group booking",description:"Party of 8 needs tickets for tonight's performance",status:"pending",timestamp:j(13),assignedTo:{name:"Priya Patel",avatar:"PP",type:"guest"}}),e.push({id:"guest-5",type:"guest",name:"Alex Thompson",avatar:"AT",message:"Can someone help us find the exit? We're near Gallery 2.",timestamp:j(14)}),e.push({id:"guest-4",type:"guest",name:"David Kim",avatar:"DK",message:"The audio in Gallery 1 seems too loud. Can someone check?",timestamp:j(15)}),e.push({id:"guest-6",type:"guest",name:"Priya Patel",avatar:"PP",message:"The artwork description card is missing in Gallery 1. Can it be replaced?",timestamp:j(16)}),e.push({id:"task-5",type:"task",category:"service",title:"Restock bar supplies",description:"Low on wine glasses and napkins",status:"pending",timestamp:j(18),assignedTo:{name:"Jordan Kim",avatar:"JK",type:"staff"}}),e.push({id:"task-9",type:"task",category:"service",title:"Check temperature in Gallery 3",description:"Guest reported it feels too warm",status:"completed",timestamp:j(20),assignedTo:{name:"Casey Lee",avatar:"CL",type:"staff"}}),e.push({id:"task-6",type:"task",category:"service",title:"Clean up Gallery 2",description:"Spill reported near installation",status:"completed",timestamp:j(25),assignedTo:{name:"Taylor Morgan",avatar:"TM",type:"staff"}}),e.sort((t,n)=>n.timestamp-t.timestamp)}function Sm(){const e=[];return e.push({id:"concierge-3-followup",type:"concierge",message:"Tickets are $25 each. You can pay at the Gallery 4 entrance with cash or card.",timestamp:j(.5),threadId:"thread-3",parentId:"guest-3-followup"}),e.push({id:"guest-3-followup",type:"guest",name:"Emma Rodriguez",avatar:"ER",message:"Great! How much are tickets?",timestamp:j(1),threadId:"thread-3"}),e.push({id:"concierge-3",type:"concierge",message:"Performance starts in 12 minutes. You can purchase tickets at the Gallery 4 entrance or use the ticket scanner.",timestamp:j(2),threadId:"thread-3",parentId:"guest-3"}),e.push({id:"task-4",type:"task",category:"service",title:"Drink order for Gallery 4",description:"Wine order for Gallery 4 - Zone 2",location:"gallery-4",status:"pending",timestamp:j(2),assignedTo:{name:"Emma Rodriguez",avatar:"ER",type:"guest"}}),e.push(Fa(j(4),10)),e.push({id:"sys-1",type:"system",title:"Arrivals spike: +12 in 10m",message:"Unusual increase in arrivals detected",timestamp:j(5)}),e.push({id:"guest-3",type:"guest",name:"Emma Rodriguez",avatar:"ER",message:"Is the performance still happening? We want to buy tickets.",timestamp:j(3),threadId:"thread-3"}),e.push({id:"task-1",type:"task",category:"ticket",title:"Scan Ticket for Cinemateque",description:"Guest at entrance needs ticket validation",location:"cinemateque",status:"pending",timestamp:j(3),assignedTo:{name:"Sarah Chen",avatar:"SC",type:"guest"}}),e.push({id:"guest-2-followup",type:"guest",name:"Marcus Johnson",avatar:"MJ",message:"Perfect, found it. Thanks!",timestamp:j(4),threadId:"thread-2"}),e.push({id:"concierge-2",type:"concierge",message:"Restrooms are located on the second floor, near the main staircase. There are also facilities on the ground floor near Gallery 2.",timestamp:j(5),threadId:"thread-2",parentId:"guest-2"}),e.push({id:"guest-2",type:"guest",name:"Marcus Johnson",avatar:"MJ",message:"Where is the restroom?",timestamp:j(6),threadId:"thread-2"}),e.push({id:"task-7",type:"task",category:"service",title:"Assist guest with accessibility needs",description:"Guest requested wheelchair access information",status:"pending",timestamp:j(6),assignedTo:{name:"David Kim",avatar:"DK",type:"guest"}}),e.push({id:"concierge-1-followup",type:"concierge",message:"Of course! I'll add water to your order. It will be brought with your drinks.",timestamp:j(7),threadId:"thread-1",parentId:"guest-1-followup"}),e.push({id:"guest-1-followup",type:"guest",name:"Sarah Chen",avatar:"SC",message:"Thank you! Can we also get some water?",timestamp:j(8),threadId:"thread-1"}),e.push({id:"task-2",type:"task",category:"ticket",title:"Ticket scan failed - manual entry required",description:"QR code unreadable, need to enter ticket number manually",status:"pending",timestamp:j(8),assignedTo:{name:"Marcus Johnson",avatar:"MJ",type:"guest"}}),e.push({id:"sys-3",type:"system",title:"High service demand",message:"3 active drink orders pending",timestamp:j(9)}),e.push({id:"concierge-1",type:"concierge",message:"I've notified the service team about your drink order. It should arrive at table 5 within 5-7 minutes.",timestamp:j(9),threadId:"thread-1",parentId:"guest-1"}),e.push({id:"guest-1",type:"guest",name:"Sarah Chen",avatar:"SC",message:"Can we get another drink? We're at table 5 in Gallery 3.",timestamp:j(10),threadId:"thread-1"}),e.push({id:"sys-4",type:"system",title:"Ticket sales update",message:"139 tickets sold out of 150 capacity",timestamp:j(11)}),e.push({id:"task-3",type:"task",category:"ticket",title:"Walk-up ticket sale completed",description:"Sold 2 tickets at Gallery 1 entrance",status:"completed",timestamp:j(12),assignedTo:{name:"Alex Rivera",avatar:"AR",type:"staff"}}),e.push({id:"task-8",type:"task",category:"ticket",title:"Process group booking",description:"Party of 8 needs tickets for tonight's performance",status:"pending",timestamp:j(13),assignedTo:{name:"Priya Patel",avatar:"PP",type:"guest"}}),e.push({id:"guest-5",type:"guest",name:"Alex Thompson",avatar:"AT",message:"Can someone help us find the exit? We're near Gallery 2.",timestamp:j(14)}),e.push({id:"guest-4",type:"guest",name:"David Kim",avatar:"DK",message:"The audio in Gallery 1 seems too loud. Can someone check?",timestamp:j(16)}),e.push({id:"task-audio",type:"task",category:"service",title:"Check audio level in Gallery 1",description:"Guest reported audio too loud in Gallery 1.",location:"gallery-1",status:"pending",timestamp:j(14),assignedTo:{name:"Alex Rivera",avatar:"AR",type:"staff"}}),e.push({id:"guest-6",type:"guest",name:"Priya Patel",avatar:"PP",message:"The artwork description card is missing in Gallery 1. Can it be replaced?",timestamp:j(16)}),e.push({id:"task-5",type:"task",category:"service",title:"Restock bar supplies",description:"Low on wine glasses and napkins",status:"pending",timestamp:j(18),assignedTo:{name:"Jordan Kim",avatar:"JK",type:"staff"}}),e.push({id:"task-9",type:"task",category:"service",title:"Check temperature in Gallery 3",description:"Guest reported it feels too warm",status:"completed",timestamp:j(20),assignedTo:{name:"Casey Lee",avatar:"CL",type:"staff"}}),e.push({id:"task-6",type:"task",category:"service",title:"Clean up Gallery 2",description:"Spill reported near installation",status:"completed",timestamp:j(25),assignedTo:{name:"Taylor Morgan",avatar:"TM",type:"staff"}}),e.sort((t,n)=>n.timestamp-t.timestamp)}function wm(){const e=[];return e.push({id:"concierge-3-followup",type:"concierge",message:"Tickets are $25 each. You can pay at the Gallery 4 entrance with cash or card.",timestamp:j(.5),threadId:"thread-3",parentId:"guest-3-followup"}),e.push({id:"guest-3-followup",type:"guest",name:"Emma Rodriguez",avatar:"ER",message:"Great! How much are tickets?",timestamp:j(1),threadId:"thread-3"}),e.push({id:"concierge-3",type:"concierge",message:"Performance starts in 12 minutes. You can purchase tickets at the Gallery 4 entrance or use the ticket scanner.",timestamp:j(2),threadId:"thread-3",parentId:"guest-3"}),e.push({id:"task-4",type:"task",category:"service",title:"Drink order for Gallery 4",description:"Wine order for Gallery 4 - Zone 2",location:"gallery-4",status:"pending",timestamp:j(2),assignedTo:{name:"Emma Rodriguez",avatar:"ER",type:"guest"}}),e.push({id:"sys-1",type:"system",title:"Arrivals spike: +12 in 10m",message:"Unusual increase in arrivals detected",timestamp:j(5)}),e.push({id:"guest-3",type:"guest",name:"Emma Rodriguez",avatar:"ER",message:"Is the performance still happening? We want to buy tickets.",timestamp:j(3),threadId:"thread-3"}),e.push({id:"task-1",type:"task",category:"ticket",title:"Scan ticket for Gallery 4",description:"Guest at entrance needs ticket validation",status:"pending",timestamp:j(3),assignedTo:{name:"Sarah Chen",avatar:"SC",type:"guest"}}),e.push({id:"guest-2-followup",type:"guest",name:"Marcus Johnson",avatar:"MJ",message:"Perfect, found it. Thanks!",timestamp:j(4),threadId:"thread-2"}),e.push({id:"concierge-2",type:"concierge",message:"Restrooms are located on the second floor, near the main staircase. There are also facilities on the ground floor near Gallery 2.",timestamp:j(5),threadId:"thread-2",parentId:"guest-2"}),e.push({id:"guest-2",type:"guest",name:"Marcus Johnson",avatar:"MJ",message:"Where is the restroom?",timestamp:j(6),threadId:"thread-2"}),e.push({id:"concierge-lu-yang",type:"concierge",message:`Lu Yang is a Shanghai-based artist known for blending gaming aesthetics, pop performance, Buddhism, and neuroscience.

DOKU explores the idea of a 'digital body'an identity that can be rebuilt, remixed, and transcended.

It's significant because it treats technology and contemporary spirituality as the same emotional space.`,timestamp:j(7.5),threadId:"thread-lu-yang",parentId:"guest-lu-yang"}),e.push({id:"guest-lu-yang",type:"guest",name:"Ava Park",avatar:"AP",message:"Who is Lu Yang, and why is DOKU important?",timestamp:j(8),threadId:"thread-lu-yang"}),e.push({id:"guest-shop-pending",type:"guest",name:"Lisa Park",avatar:"LP",message:"Is the gift shop still open?",timestamp:j(3),threadId:"thread-shop-pending"}),e.push({id:"guest-accessibility",type:"guest",name:"Michael Chen",avatar:"MC",message:"Where's wheelchair access?",timestamp:j(7),threadId:"thread-accessibility"}),e.push({id:"concierge-accessibility",type:"concierge",message:"Elevator access is available near Gallery 2.",timestamp:j(6),threadId:"thread-accessibility",parentId:"guest-accessibility"}),e.push({id:"sys-elevator",type:"system",title:"Notice: Elevator temporarily offline",message:"Use ramp at entrance (elevator temporarily offline).",timestamp:j(5)}),e.push({id:"task-7",type:"task",category:"service",title:"Assist guest with accessibility needs",description:"Guest requested wheelchair access information",status:"pending",timestamp:j(6),assignedTo:{name:"David Kim",avatar:"DK",type:"guest"}}),e.push({id:"concierge-1-followup",type:"concierge",message:"Of course! I'll add water to your order. It will be brought with your drinks.",timestamp:j(7),threadId:"thread-1",parentId:"guest-1-followup"}),e.push({id:"guest-1-followup",type:"guest",name:"Sarah Chen",avatar:"SC",message:"Thank you! Can we also get some water?",timestamp:j(8),threadId:"thread-1"}),e.push({id:"task-2",type:"task",category:"ticket",title:"Ticket scan failed - manual entry required",description:"QR code unreadable, need to enter ticket number manually",status:"pending",timestamp:j(8),assignedTo:{name:"Marcus Johnson",avatar:"MJ",type:"guest"}}),e.push({id:"sys-3",type:"system",title:"High service demand",message:"3 active drink orders pending",timestamp:j(9)}),e.push({id:"concierge-1",type:"concierge",message:"I've notified the service team about your drink order. It should arrive at table 5 within 5-7 minutes.",timestamp:j(9),threadId:"thread-1",parentId:"guest-1"}),e.push({id:"guest-1",type:"guest",name:"Sarah Chen",avatar:"SC",message:"Can we get another drink? We're at table 5 in Gallery 3.",timestamp:j(10),threadId:"thread-1"}),e.push({id:"sys-4",type:"system",title:"Ticket sales update",message:"139 tickets sold out of 150 capacity",timestamp:j(11)}),e.push({id:"task-3",type:"task",category:"ticket",title:"Walk-up ticket sale completed",description:"Sold 2 tickets at Gallery 1 entrance",status:"completed",timestamp:j(12),assignedTo:{name:"Alex Rivera",avatar:"AR",type:"staff"}}),e.push({id:"task-8",type:"task",category:"ticket",title:"Process group booking",description:"Party of 8 needs tickets for tonight's performance",status:"pending",timestamp:j(13),assignedTo:{name:"Priya Patel",avatar:"PP",type:"guest"}}),e.push({id:"guest-5",type:"guest",name:"Alex Thompson",avatar:"AT",message:"Can someone help us find the exit? We're near Gallery 2.",timestamp:j(14)}),e.push({id:"guest-4",type:"guest",name:"David Kim",avatar:"DK",message:"The audio in Gallery 1 seems too loud. Can someone check?",timestamp:j(15)}),e.push({id:"guest-6",type:"guest",name:"Priya Patel",avatar:"PP",message:"The artwork description card is missing in Gallery 1. Can it be replaced?",timestamp:j(16)}),e.push({id:"task-5",type:"task",category:"service",title:"Restock bar supplies",description:"Low on wine glasses and napkins",status:"pending",timestamp:j(18),assignedTo:{name:"Jordan Kim",avatar:"JK",type:"staff"}}),e.push({id:"task-9",type:"task",category:"service",title:"Check temperature in Gallery 3",description:"Guest reported it feels too warm",status:"completed",timestamp:j(20),assignedTo:{name:"Casey Lee",avatar:"CL",type:"staff"}}),e.push({id:"task-6",type:"task",category:"service",title:"Clean up Gallery 2",description:"Spill reported near installation",status:"completed",timestamp:j(25),assignedTo:{name:"Taylor Morgan",avatar:"TM",type:"staff"}}),e.sort((t,n)=>n.timestamp-t.timestamp)}function Cm(){const e=[];return e.push({id:"guest-shop-inquiry",type:"guest",name:"Lisa Park",avatar:"LP",message:"Is the gift shop still open? Anything related to Lu Yang?",timestamp:j(.5),threadId:"thread-shop"}),e.push({id:"concierge-shop-response",type:"concierge",message:"Yes, the gift shop is open for another 10 minutes. We have Lu Yang's exhibition catalogue available, plus limited edition prints. Would you like me to help you with a purchase?",timestamp:j(.3),threadId:"thread-shop",parentId:"guest-shop-inquiry"}),e.push({id:"sys-closing-soon",type:"system",title:"Closing soon",message:`Gift shop closes in 10m
Galleries close in 20m
Last call at bar in 15m`,timestamp:j(1)}),e.push({id:"sys-transition-1",type:"system",title:"Transition moment",message:"Post-performance drift: visitors moving toward exit + gift shop.",timestamp:j(1.5)}),e.push({id:"guest-urgent-exit",type:"guest",name:"Michael Chen",avatar:"MC",message:"We're trying to leave quicklywhere's the exit?",timestamp:j(2),threadId:"thread-exit"}),e.push({id:"sys-nudge-suggestion",type:"system",title:"Suggested nudge",message:"If guests are lingering near the shop: mention the Lu Yang catalog + limited prints.",timestamp:j(3)}),e.push({id:"sys-transition-2",type:"system",title:"Transition moment",message:"Dwell slowing in Gallery 3; many guests heading to bar.",timestamp:j(4)}),e.push({id:"sys-pos-confirmation",type:"system",title:"POS completed",message:"Gift shop purchase: Lu Yang catalog + print ($45)",timestamp:j(12)}),e.push({id:"task-4",type:"task",category:"service",title:"Drink order for Gallery 4",description:"Wine order for Gallery 4 - Zone 2",location:"gallery-4",status:"pending",timestamp:j(5),assignedTo:{name:"Emma Rodriguez",avatar:"ER",type:"guest"}}),e.push({id:"sys-1",type:"system",title:"Arrivals spike: +12 in 10m",message:"Unusual increase in arrivals detected",timestamp:j(6)}),e.push({id:"task-1",type:"task",category:"ticket",title:"Scan ticket for Gallery 4",description:"Guest at entrance needs ticket validation",status:"pending",timestamp:j(3),assignedTo:{name:"Sarah Chen",avatar:"SC",type:"guest"}}),e.push({id:"guest-2-followup",type:"guest",name:"Marcus Johnson",avatar:"MJ",message:"Perfect, found it. Thanks!",timestamp:j(4),threadId:"thread-2"}),e.push({id:"concierge-2",type:"concierge",message:"Restrooms are located on the second floor, near the main staircase. There are also facilities on the ground floor near Gallery 2.",timestamp:j(5),threadId:"thread-2",parentId:"guest-2"}),e.push({id:"guest-2",type:"guest",name:"Marcus Johnson",avatar:"MJ",message:"Where is the restroom?",timestamp:j(6),threadId:"thread-2"}),e.push({id:"task-7",type:"task",category:"service",title:"Assist guest with accessibility needs",description:"Guest requested wheelchair access information",status:"pending",timestamp:j(6),assignedTo:{name:"David Kim",avatar:"DK",type:"guest"}}),e.push({id:"concierge-1-followup",type:"concierge",message:"Of course! I'll add water to your order. It will be brought with your drinks.",timestamp:j(7),threadId:"thread-1",parentId:"guest-1-followup"}),e.push({id:"guest-1-followup",type:"guest",name:"Sarah Chen",avatar:"SC",message:"Thank you! Can we also get some water?",timestamp:j(8),threadId:"thread-1"}),e.push({id:"task-2",type:"task",category:"ticket",title:"Ticket scan failed - manual entry required",description:"QR code unreadable, need to enter ticket number manually",status:"pending",timestamp:j(8),assignedTo:{name:"Marcus Johnson",avatar:"MJ",type:"guest"}}),e.push({id:"sys-3",type:"system",title:"High service demand",message:"3 active drink orders pending",timestamp:j(9)}),e.push({id:"concierge-1",type:"concierge",message:"I've notified the service team about your drink order. It should arrive at table 5 within 5-7 minutes.",timestamp:j(9),threadId:"thread-1",parentId:"guest-1"}),e.push({id:"guest-1",type:"guest",name:"Sarah Chen",avatar:"SC",message:"Can we get another drink? We're at table 5 in Gallery 3.",timestamp:j(10),threadId:"thread-1"}),e.push({id:"sys-4",type:"system",title:"Ticket sales update",message:"139 tickets sold out of 150 capacity",timestamp:j(11)}),e.push({id:"task-3",type:"task",category:"ticket",title:"Walk-up ticket sale completed",description:"Sold 2 tickets at Gallery 1 entrance",status:"completed",timestamp:j(12),assignedTo:{name:"Alex Rivera",avatar:"AR",type:"staff"}}),e.push({id:"task-8",type:"task",category:"ticket",title:"Process group booking",description:"Party of 8 needs tickets for tonight's performance",status:"pending",timestamp:j(13),assignedTo:{name:"Priya Patel",avatar:"PP",type:"guest"}}),e.push({id:"guest-5",type:"guest",name:"Alex Thompson",avatar:"AT",message:"Can someone help us find the exit? We're near Gallery 2.",timestamp:j(14)}),e.push({id:"guest-4",type:"guest",name:"David Kim",avatar:"DK",message:"The audio in Gallery 1 seems too loud. Can someone check?",timestamp:j(15)}),e.push({id:"guest-6",type:"guest",name:"Priya Patel",avatar:"PP",message:"The artwork description card is missing in Gallery 1. Can it be replaced?",timestamp:j(16)}),e.push({id:"task-5",type:"task",category:"service",title:"Restock bar supplies",description:"Low on wine glasses and napkins",status:"pending",timestamp:j(18),assignedTo:{name:"Jordan Kim",avatar:"JK",type:"staff"}}),e.push({id:"task-9",type:"task",category:"service",title:"Check temperature in Gallery 3",description:"Guest reported it feels too warm",status:"completed",timestamp:j(20),assignedTo:{name:"Casey Lee",avatar:"CL",type:"staff"}}),e.push({id:"task-6",type:"task",category:"service",title:"Clean up Gallery 2",description:"Spill reported near installation",status:"completed",timestamp:j(25),assignedTo:{name:"Taylor Morgan",avatar:"TM",type:"staff"}}),e.push({id:"task-handoff",type:"task",category:"ticket",title:"Follow up: group booking question",description:"Needs a response before 7pm; unclear who owns.",status:"pending",timestamp:j(45),assignedTo:null}),e.push(Fa(j(60),0)),e.sort((t,n)=>n.timestamp-t.timestamp)}function Tm(){const e=[];return e.push({id:"sys-post-shift-summary",type:"system",title:"Post-shift summary",message:`Ask: "What confused first-time visitors tonight?"
Ask: "Were drink delays worse than usual?"`,summaryData:{attendance:{actual:139,expected:150,percentage:93},peakPressure:{start:"6:45pm",end:"7:30pm"},requestThemes:[{label:"Ticket scan",count:24,color:"rgba(59, 49, 255, 0.8)"},{label:"Washrooms",count:18,color:"rgba(80, 100, 240, 0.8)"},{label:"Drink order",count:15,color:"rgba(100, 120, 230, 0.8)"},{label:"Artist info",count:9,color:"rgba(120, 140, 220, 0.8)"}],frictionSignals:[{label:"Drink delays",count:12,color:"rgba(255, 80, 80, 0.8)"},{label:"Ticket lookup failures",count:6,color:"rgba(240, 100, 100, 0.8)"}],win:"Visitors found DOKU timing easy to follow",opportunity:"Drink delivery ETAs caused repeat questions",nextTime:"Proactively announce gift shop closing at 9:50pm",nextTimeLabel:"Next Time"},timestamp:j(.5)}),e.push({id:"guest-washroom",type:"guest",name:"Sarah Chen",avatar:"SC",message:"Where is the restroom?",timestamp:j(45),threadId:"thread-washroom"}),e.push({id:"concierge-washroom",type:"concierge",message:"Restrooms are located on the second floor, near the main staircase. There are also facilities on the ground floor near Gallery 2.",timestamp:j(44),threadId:"thread-washroom",parentId:"guest-washroom"}),e.push({id:"guest-artist",type:"guest",name:"Marcus Johnson",avatar:"MJ",message:"Can you tell me more about Lu Yang?",timestamp:j(50),threadId:"thread-artist"}),e.push({id:"concierge-artist",type:"concierge",message:"Lu Yang is a multimedia artist known for exploring themes of technology, identity, and the digital body. Their work DOKU is currently showing in the Cinemateque.",timestamp:j(49),threadId:"thread-artist",parentId:"guest-artist"}),e.push({id:"task-drink-delay",type:"task",category:"service",title:"Drink order for Gallery 4",description:"Wine order delayed - bar backed up",location:"gallery-4",status:"completed",timestamp:j(55),assignedTo:{name:"Emma Rodriguez",avatar:"ER",type:"guest"}}),e.push({id:"task-ticket-scan",type:"task",category:"ticket",title:"Ticket scan failed - manual entry required",description:"QR code unreadable, need to enter ticket number manually",status:"completed",timestamp:j(60),assignedTo:{name:"Alex Rivera",avatar:"AR",type:"staff"}}),e.push({id:"sys-arrivals-spike",type:"system",title:"Arrivals spike: +12 in 10m",message:"Unusual increase in arrivals detected",timestamp:j(70)}),e.push({id:"sys-performance-start",type:"system",title:"Performance starting soon",message:"DOKU performance begins in 60 minutes",timestamp:j(120),performanceStartTime:j(60)}),e.push({id:"task-completed-1",type:"task",category:"service",title:"Check temperature in Gallery 3",description:"Guest reported it feels too warm",status:"completed",timestamp:j(75),assignedTo:{name:"Casey Lee",avatar:"CL",type:"staff"}}),e.push({id:"task-completed-2",type:"task",category:"ticket",title:"Walk-up ticket sale completed",description:"Sold 2 tickets at Gallery 1 entrance",status:"completed",timestamp:j(80),assignedTo:{name:"Alex Rivera",avatar:"AR",type:"staff"}}),e.sort((t,n)=>n.timestamp-t.timestamp)}function jm(){switch(new URLSearchParams(typeof window<"u"?window.location.search:"").get("scenario")||"anticipation"){case"arrival":return Sm();case"during_visit":return wm();case"handoff":return Cm();case"reflection":return Tm();case"anticipation":default:return bm()}}function Gi(e){return`thread-${e.sort().join("-")}`}function Yi(e){return`thread-staff-ai-${e}`}function Im(e,t,n="direct"){let r;if(n==="ai"){const a=t.find(l=>l!=="ai");r=Yi(a)}else r=Gi(t);if(e[r])return e[r];const s=Date.now(),o={id:r,kind:n,participantIds:[...t].sort(),messages:[],lastMessageAt:s,createdAt:s,unreadCount:0,unread:!1};return e[r]=o,o}function Nm(e,t,n,r=Date.now()){const s={id:`msg-${r}-${Math.random().toString(36).substr(2,9)}`,senderId:t,text:n,createdAt:r};return e.messages.push(s),e.lastMessageAt=r,s}function Em(e,t){const r=[...new Set(e.participantIds)].map(l=>{const c=t[l];if(!c){if(console.warn("Participant not found in map:",l,"Available keys:",Object.keys(t),"Map:",t),l==="ai")return{id:"ai",type:"ai",name:"Canyon Concierge",avatar:"AI"};if(l.includes("jeremy")||l.includes("staff"))return{id:l,type:"staff",name:"Jeremy Bailey",avatar:"JB"};const d=Object.values(t).find(x=>x.type==="guest"&&(x.id===l||x.id.startsWith(l)||l.startsWith(x.id)));return d?(console.log("Found guest by partial match:",l,"->",d),d):(console.error("Could not find participant, using fallback:",l),{id:l,type:"guest",name:"Guest",avatar:"?"})}return c}).filter(Boolean),s=new Set,o=r.filter(l=>s.has(l.id)?!1:(s.add(l.id),!0));if(o.length===0)return console.error("Thread has no participants:",e),null;o.find(l=>l.type!=="ai")||o[0],e.messages[e.messages.length-1];const a=e.lastMessageAt||e.createdAt||Date.now();return{type:"thread",id:e.id,thread:{id:e.id,participants:o,messages:e.messages.map(l=>{var c;return{id:l.id,type:l.senderId==="ai"?"concierge":((c=t[l.senderId])==null?void 0:c.type)||"guest",sender:l.senderId==="ai"?{type:"ai",name:"Canyon Concierge",avatar:"AI"}:t[l.senderId]||{id:l.senderId,type:"guest",name:"Guest",avatar:"?"},message:l.text,timestamp:l.createdAt}}),lastActivity:a,unreadCount:e.unreadCount,unread:e.unread},timestamp:a}}function Rm(){const e=(k,h)=>{try{const N=typeof window<"u"?window.location.search:"",M=new URLSearchParams(N),Q=M.get(k);if(Q)return Q;for(const[we]of M.entries())if(typeof we=="string"&&we.startsWith(`${k}=`))return we.slice(`${k}=`.length)||h;const se=decodeURIComponent(N||"").match(new RegExp(`[?&]${k}=([^&]+)`));if(se&&se[1])return se[1]}catch{}return h},[t,n]=T.useState([]),[r,s]=T.useState("all"),[o,a]=T.useState(null),[l,c]=T.useState(null),[d,x]=T.useState(null),[v,p]=T.useState(null),b=T.useRef(null),g=T.useRef(null),[w,K]=T.useState(0),[m,u]=T.useState({}),f="jeremy-bailey",[y,z]=T.useState(!1);T.useEffect(()=>{const k=()=>{z(document.body.hasAttribute("data-bottom-sheet-open"))};k();const h=new MutationObserver(k);return h.observe(document.body,{attributes:!0,attributeFilter:["data-bottom-sheet-open"]}),()=>h.disconnect()},[]),T.useEffect(()=>{const k=()=>{if(g.current){const N=g.current.offsetHeight;K(N)}};k();const h=new ResizeObserver(k);return g.current&&h.observe(g.current),()=>{h.disconnect()}},[]);const C=T.useRef(new Map),[R,L]=T.useState(null),Z=T.useRef(0),Y=T.useRef(!1),[ee,_]=T.useState(!0),[O,J]=T.useState(0);T.useRef(0);const[te,xe]=T.useState(()=>{try{const k=localStorage.getItem("canyon-starred-ids");if(k)return new Set(JSON.parse(k))}catch(k){console.error("Failed to load starred ids from localStorage:",k)}return new Set});T.useEffect(()=>{try{localStorage.setItem("canyon-starred-ids",JSON.stringify(Array.from(te)))}catch(k){console.error("Failed to save starred ids to localStorage:",k)}},[te]);const de=T.useRef(!1),[A,$]=T.useState(()=>e("scenario","anticipation")),[V,ye]=T.useState(()=>e("mode","staff")),[fe,Pe]=T.useState(()=>e("mode","staff")==="visitor");T.useEffect(()=>{const k=()=>{const N=e("scenario","anticipation"),M=e("mode","staff");N!==A&&$(N),M!==V&&ye(M)};k(),window.addEventListener("popstate",k);const h=setInterval(k,100);return()=>{window.removeEventListener("popstate",k),clearInterval(h)}},[A,V]),T.useEffect(()=>{const k=jm();n(k);const h={},N={};N[f]={id:f,type:"staff",name:"Jeremy Bailey",avatar:"JB"},N.ai={id:"ai",type:"ai",name:"Canyon Concierge",avatar:"AI"};const M=new Map;k.forEach(F=>{F.type==="guest"&&F.id&&(M.has(F.name)||M.set(F.name,F.id),N[F.id]={id:F.id,type:"guest",name:F.name,avatar:F.avatar})}),M.forEach((F,se)=>{if(!N[F]){const we=k.find(me=>me.type==="guest"&&me.name===se);we&&(N[F]={id:F,type:"guest",name:se,avatar:we.avatar})}}),console.log("Participant map built:",N);const Q=um(k);console.log("Grouped threads:",Q.length,Q),Q.forEach(F=>{var Sn;let se=F.participants.map(Ce=>Ce.type==="guest"?Ce.id:Ce.type==="staff"?f:Ce.type==="ai"?"ai":null).filter(Boolean);const we=F.participants.some(Ce=>Ce.type==="guest");we&&!se.includes(f)&&se.push(f);const me=[...se].sort();let he;const Ae=F.participants.some(Ce=>Ce.type==="ai"),je=se.includes(f);F.id&&typeof F.id=="string"&&(F.id.startsWith("thread-")||F.id.startsWith("thread-staff-ai-"))?he=F.id:Ae&&je&&!we?he=Yi(f):he=Gi(me),h[he]={id:he,kind:Ae?"ai":"direct",participantIds:me,messages:F.messages.map((Ce,Ht)=>{let st;return Ht<3&&console.log(`Mapping message ${Ht}:`,{msgId:Ce.id,senderType:Ce.sender.type,senderId:Ce.sender.id,senderName:Ce.sender.name,message:Ce.message.substring(0,30)}),Ce.sender.type==="ai"?st="ai":Ce.sender.type==="guest"?Ce.sender.id?st=Ce.sender.id:(st=me.find(bo=>{const wn=N[bo];return wn&&wn.type==="guest"&&wn.name===Ce.sender.name}),console.warn("Guest message missing sender.id, using fallback:",Ce,"found:",st)):(Ce.sender.type,st=Ce.sender.id||f),st||(console.error("Could not determine senderId for message:",Ce,"thread:",F.id),st=f),Ht<3&&console.log(`Mapped to senderId: ${st}`),{id:Ce.id,senderId:st,text:Ce.text||Ce.message,createdAt:Ce.timestamp}}),lastMessageAt:F.lastActivity,createdAt:((Sn=F.messages[0])==null?void 0:Sn.timestamp)||F.lastActivity,unreadCount:F.unreadCount||0,unread:F.unread||!1}}),console.log("Initialized threads:",Object.keys(h).length),console.log("Thread IDs:",Object.keys(h)),console.log("Thread details:",Object.values(h).map(F=>({id:F.id,participantIds:F.participantIds,messageCount:F.messages.length,lastMessageAt:F.lastMessageAt}))),u(h),de.current=!1},[A]),T.useEffect(()=>{t.length>0&&b.current&&!de.current&&setTimeout(()=>{b.current&&(b.current.scrollTop=b.current.scrollHeight,de.current=!0)},100)},[t]),T.useEffect(()=>{r!=="all"&&o===null&&a(60)},[r]),T.useEffect(()=>{if(o===null||o<=0){o===0&&s("all");return}const k=setInterval(()=>{a(h=>h<=1?(s("all"),null):h-1)},1e3);return()=>clearInterval(k)},[o]),T.useEffect(()=>{r==="all"&&a(null)},[r]),T.useEffect(()=>{const k=b.current;if(!k)return;const h=()=>{const N=k.scrollTop,M=k.scrollHeight,Q=k.clientHeight,se=M-Q-N<120;se!==ee&&(_(se),se&&J(0))};return k.addEventListener("scroll",h,{passive:!0}),()=>{k.removeEventListener("scroll",h)}},[ee]);const $e=k=>{r===k?(s("all"),a(null)):(s(k),a(k==="all"||k==="starred"?null:60))},re=k=>{xe(h=>{const N=new Set(h);return N.has(k)?N.delete(k):N.add(k),N})},Ie=k=>{c(k)},Ne=k=>{n(h=>h.map(N=>N.id===k?{...N,status:"completed"}:N)),c(null)},Nt=k=>{alert(`Task ${k} reassigned`),c(null)},ut=(k,h)=>{n(N=>N.map(Q=>Q.id===k?{...Q,location:h||null}:Q))},bt=k=>{x(k)},Qe=(k,h)=>{if(!(k!=null&&k.trim()))return{success:!1,error:"Message cannot be empty"};if(!h)return{success:!1,error:"Select someone to message"};const{type:N,participantIds:M,kind:Q}=h;console.log("sendChatMessage:",{text:k,chatTarget:h,participantIds:M,kind:Q});let F;if(Q==="ai"){const me=M.find(he=>he!=="ai");F=Yi(me)}else{const me=[...M].sort();F=Gi(me)}const se=m[F]!==void 0;let we=null;return u(me=>{const he={...me},Ae=Im(he,M,Q);se||(we=Ae.id),console.log("Thread found/created:",Ae.id,Ae,"isNewThread:",!se);const je=Date.now();return Nm(Ae,f,k,je),console.log("Message added, thread now has",Ae.messages.length,"messages"),he[Ae.id]={...Ae,messages:[...Ae.messages],lastMessageAt:je},{...he}}),we&&setTimeout(()=>{Rt(we)},150),{success:!0}},Et=(k,h,N=null)=>{if(console.log("handleSendMessage called with:",{message:k,recipients:h,primaryAction:N}),!N){if(!h||h.length===0)return{success:!1,error:"Select someone to message"};if(h.length>1)return{success:!1,error:"Only one recipient allowed"};const me=h[0];let he=[f],Ae="direct";return me.type==="ai"?(Ae="ai",he=[f,"ai"]):me.type==="guest"?he=[f,me.id]:me.type==="staff"&&(he=[f,me.id]),Qe(k,{type:"direct",participantIds:he,kind:Ae})}if(!(k!=null&&k.trim())&&(!h||h.length===0))return console.log("No message or recipients, skipping"),{success:!1};const M=h==null?void 0:h.find(me=>me.type==="guest"),Q=h==null?void 0:h.find(me=>me.type==="staff");let F=null,se=null;if(M){const me=t.find(he=>he.type==="guest"&&he.id===M.id);F=(me==null?void 0:me.threadId)||`thread-${M.id}`,se=M.id}else Q&&(F=`thread-staff-${Q.id}`);const we={id:`message-${Date.now()}`,type:"concierge",message:(k==null?void 0:k.trim())||"No message",timestamp:Date.now(),sender:{name:"Jeremy Bailey",avatar:"JB",type:"staff"},recipients:(h||[]).map(me=>({id:me.id,name:me.name,type:me.type})),threadId:F,parentId:se};console.log("Creating new item:",we),n(me=>{const he=[...me,we];return console.log("Updated feed items count:",he.length),console.log("New item in array:",he.find(Ae=>Ae.id===we.id)),he}),Rt(we.id),J(0),_(!0)},Ze=()=>{b.current&&(b.current.scrollTo({top:b.current.scrollHeight,behavior:"smooth"}),J(0),_(!0))},Rt=k=>{if(!(!b.current||!k))try{setTimeout(()=>{var h;try{const N=(h=C.current)==null?void 0:h.get(k);if(N&&b.current){const M=b.current,Q=N.getBoundingClientRect(),F=M.getBoundingClientRect(),se=M.scrollTop,he=Q.top-F.top+se-20;M.scrollTo({top:Math.max(0,he),behavior:"smooth"}),L(k),setTimeout(()=>{L(null)},2e3)}else Ze()}catch(N){console.error("Error in scrollToItemAndHighlight:",N),Ze()}},100)}catch(h){console.error("Error setting up scrollToItemAndHighlight:",h)}},On=(k,h)=>{if(console.log("Tool action:",k,h),k==="create-task"){const N=h.assignee||{name:"Jeremy Bailey",avatar:"JB",type:"staff"},M=h.posPayload?"Complete purchase":h.description||"New Task",Q=h.posPayload?h.description&&h.description!=="Complete purchase"?h.description:null:h.description,F={id:`task-${Date.now()}`,type:"task",category:"service",title:M,description:Q,status:"assigned",timestamp:Date.now(),assignedTo:N,forGuest:h.forGuest||null,location:h.location||null,posPayload:h.posPayload||null};n(se=>[...se,F]),Rt(F.id),x(null),c(null);return}if(k==="execute-pos"){const N=h.cart.reduce((se,we)=>se+we.quantity*we.price,0),M=h.cart.map(se=>`${se.quantity} ${se.name}`).join(", "),Q=h.paymentMethod==="cash"?"Cash":h.paymentMethod==="card"?"Card":"Card on File",F={id:`pos-${Date.now()}`,type:"system",title:`POS completed: ${M}  $${N.toFixed(2)}  ${Q}`,note:h.note||null,timestamp:Date.now(),posReceipt:{cart:h.cart,paymentMethod:h.paymentMethod,total:N,forGuest:h.forGuest}};n(se=>[...se,F]),Rt(F.id),J(0),_(!0);return}if(k==="check-in"){const N={id:`checkin-${Date.now()}`,type:"system",title:`Checked in: ${h.guest.name}`,note:h.note||null,timestamp:Date.now()};n(M=>[...M,N]),Rt(N.id),J(0),_(!0);return}alert(`Action: ${k}
Data: ${JSON.stringify(h,null,2)}`),x(null),c(null)},He=k=>{p(k)},en=()=>{p(null)},W=T.useMemo(()=>{const k={};return k[f]={id:f,type:"staff",name:"Jeremy Bailey",avatar:"JB"},k.ai={id:"ai",type:"ai",name:"Canyon Concierge",avatar:"AI"},t.forEach(h=>{if(h.type==="guest"&&h.id&&(k[h.id]={id:h.id,type:"guest",name:h.name,avatar:h.avatar}),h.type==="task"&&h.assignedTo&&h.assignedTo.type==="staff"){const N=`staff-${h.assignedTo.name}`;k[N]||(k[N]={id:N,type:"staff",name:h.assignedTo.name,avatar:h.assignedTo.avatar||h.assignedTo.name.charAt(0)})}}),Object.values(m).forEach(h=>{h.participantIds.forEach(N=>{if(!k[N])if(h.messages.find(M=>M.senderId===N),N==="ai")k[N]={id:"ai",type:"ai",name:"Canyon Concierge",avatar:"AI"};else if(N===f)k[N]={id:f,type:"staff",name:"Jeremy Bailey",avatar:"JB"};else{const M=t.find(Q=>Q.id===N);if(M&&M.type==="guest")k[N]={id:N,type:"guest",name:M.name,avatar:M.avatar};else if(N.startsWith("staff-")){const Q=t.find(F=>F.type==="task"&&F.assignedTo&&F.assignedTo.type==="staff"&&`staff-${F.assignedTo.name}`===N);Q&&Q.assignedTo&&(k[N]={id:N,type:"staff",name:Q.assignedTo.name,avatar:Q.assignedTo.avatar||Q.assignedTo.name.charAt(0)})}}})}),k},[t,f,m]),q=T.useMemo(()=>{const k=Object.values(m).map(Q=>{try{return Em(Q,W)}catch(F){return console.error("Error converting thread to feed item:",Q,F),null}}).filter(Boolean),h=t.filter(Q=>Q.type==="task"||Q.type==="system"),M=[...k,...h].sort((Q,F)=>Q.timestamp-F.timestamp);return console.log("visibleFeedItems:",{threadCount:k.length,nonThreadCount:h.length,total:M.length,threadsByIdKeys:Object.keys(m).length}),M},[m,t,W]),pe=(k,h)=>h==="all"?!0:h==="starred"?te&&te instanceof Set&&te.has(k.id):h==="service"?k.type==="task":h==="guests"?k.type==="guest"||k.type==="concierge":h==="system"?k.type==="system":h==="pending"?k.type==="pending_draft"||k.status==="pending_review":!1,be=T.useRef(r);T.useEffect(()=>{var k,h;if(be.current==="all"&&r!=="all"){if(Z.current=0,d||((k=document.activeElement)==null?void 0:k.tagName)==="INPUT"||((h=document.activeElement)==null?void 0:h.tagName)==="TEXTAREA"){be.current=r;return}const N=q.filter(F=>pe(F,r));if(console.log("Auto-scroll: Filter activated",{filter:r,matchingItemsCount:N.length,allItemsCount:q.length,starredIdsSize:(te==null?void 0:te.size)||0}),N.length===0){console.log("Auto-scroll: No matching items found"),be.current=r;return}const M=N[N.length-1];console.log("Auto-scroll: Target item",{itemId:M.id,itemType:M.type,timestamp:M.timestamp});const Q=C.current.get(M.id);console.log("Auto-scroll: Element lookup",{hasElement:!!Q,refsMapSize:C.current.size,allRefIds:Array.from(C.current.keys())}),Q&&b.current?requestAnimationFrame(()=>{requestAnimationFrame(()=>{const F=C.current.get(M.id);if(!F||!b.current){console.log("Auto-scroll: Element not found or container missing",{itemId:M.id});return}const se=Date.now()-Z.current;if(se<200&&se>0){console.log("Auto-scroll: User scrolled after filter activation, aborting");return}const we=b.current,me=we.getBoundingClientRect(),he=F.getBoundingClientRect(),Ae=we.scrollTop,je=he.top-me.top+Ae,Ht=60+12+12,st=je-Ht;console.log("Auto-scroll: Scrolling to item",{itemId:M.id,currentScrollTop:Ae,elementTopRelativeToContainer:je,targetScrollTop:st,offset:Ht}),we.scrollTo({top:Math.max(0,st),behavior:"smooth"})})}):console.log("Auto-scroll: Target element or container not found",{hasTargetElement:!!Q,hasFeedRef:!!b.current,targetItemId:M==null?void 0:M.id})}be.current=r},[r,q,te,d]),T.useEffect(()=>{const k=b.current;if(!k)return;const h=()=>{Z.current=Date.now(),Y.current=!0,clearTimeout(Y.timeout),Y.timeout=setTimeout(()=>{Y.current=!1},300)};return k.addEventListener("scroll",h,{passive:!0}),()=>{k.removeEventListener("scroll",h),Y.timeout&&clearTimeout(Y.timeout)}},[]);const H=(k,h)=>{var M;if(!k||!h||!h.trim()){console.warn("Invalid thread reply:",{threadId:k,message:h});return}const N=Qe(h.trim(),{type:"direct",participantIds:((M=m[k])==null?void 0:M.participantIds)||[]});N.success?console.log("Thread reply sent successfully"):console.error("Failed to send thread reply:",N.error)};if(V!=="visitor"&&v){let k,h;if(v.threadId){if(k=v.threadId,h=m[k],!h){const N=Object.values(m).find(M=>{var Q;return M.id===k||((Q=M.id)==null?void 0:Q.toLowerCase())===(k==null?void 0:k.toLowerCase())});N&&(h=N,k=N.id)}if(!h&&v.thread){const N=v.thread;h={id:N.id,participantIds:N.participants.map(M=>M.id),participants:N.participants,messages:N.messages.map(M=>{var Q,F,se;return{id:M.id,senderId:((Q=M.sender)==null?void 0:Q.id)||(((F=M.sender)==null?void 0:F.type)==="ai"?"ai":(se=M.sender)==null?void 0:se.id),text:M.message||M.text,createdAt:M.timestamp||M.createdAt}}),lastMessageAt:N.lastActivity,createdAt:N.lastActivity,unreadCount:N.unreadCount||0,unread:N.unread||!1}}}else if(v.thread){if(k=v.thread.id||v.id,h=m[k],!h){const N=Object.values(m).find(M=>{var Q;return M.id===k||((Q=M.id)==null?void 0:Q.toLowerCase())===(k==null?void 0:k.toLowerCase())});N&&(h=N,k=N.id)}if(!h&&v.thread){const N=v.thread;h={id:N.id,participantIds:N.participants.map(M=>M.id),participants:N.participants,messages:N.messages.map(M=>{var Q,F,se;return{id:M.id,senderId:((Q=M.sender)==null?void 0:Q.id)||(((F=M.sender)==null?void 0:F.type)==="ai"?"ai":(se=M.sender)==null?void 0:se.id),text:M.message||M.text,createdAt:M.timestamp||M.createdAt}}),lastMessageAt:N.lastActivity,createdAt:N.lastActivity,unreadCount:N.unreadCount||0,unread:N.unread||!1}}}else v.id&&(k=v.id,h=Object.values(m).find(N=>N.participantIds&&N.participantIds.includes(k)));return h?i.jsx(pm,{thread:h,onBack:en,onReply:H,participantMap:W,currentUserId:f}):(console.error("Thread not found:",{openThread:v,threadId:k,availableThreads:Object.keys(m)}),null)}return V==="visitor"?i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:fe?1:2},children:i.jsx(xm,{itemRefs:C,currentUserId:f,highlightedItemId:R,feedRef:b,composerRef:g})}),fe&&i.jsx(km,{onEnterFeed:()=>Pe(!1)})]}):i.jsx(mm,{feedItems:t,visibleFeedItems:q,activeFilter:r,onFilterChange:$e,starredIds:te,onToggleStar:re,selectedContext:l,onItemClick:Ie,onOpenThread:He,onClearSelectedContext:()=>c(null),itemRefs:C,onUpdateTaskLocation:ut,onCompleteTask:Ne,currentUserId:f,highlightedItemId:R,atBottom:ee,isBottomSheetOpen:y,scrollToBottom:Ze,composerHeight:w,feedRef:b,composerRef:g,toolMode:d,onToolModeChange:bt,onToolAction:On,onReassignTask:Nt,onSendMessage:(k,h,N)=>Et(k,h,N)})}const zm=Qo.createRoot(document.getElementById("root"));zm.render(i.jsx(du.StrictMode,{children:i.jsx(Rm,{})}));
