(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Ld(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var su={exports:{}},oo={},ou={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ts=Symbol.for("react.element"),_d=Symbol.for("react.portal"),Bd=Symbol.for("react.fragment"),Od=Symbol.for("react.strict_mode"),Wd=Symbol.for("react.profiler"),Fd=Symbol.for("react.provider"),$d=Symbol.for("react.context"),Hd=Symbol.for("react.forward_ref"),Ud=Symbol.for("react.suspense"),Gd=Symbol.for("react.memo"),Yd=Symbol.for("react.lazy"),Ya=Symbol.iterator;function Vd(e){return e===null||typeof e!="object"?null:(e=Ya&&e[Ya]||e["@@iterator"],typeof e=="function"?e:null)}var iu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},au=Object.assign,lu={};function dr(e,t,n){this.props=e,this.context=t,this.refs=lu,this.updater=n||iu}dr.prototype.isReactComponent={};dr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};dr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function uu(){}uu.prototype=dr.prototype;function Ki(e,t,n){this.props=e,this.context=t,this.refs=lu,this.updater=n||iu}var Qi=Ki.prototype=new uu;Qi.constructor=Ki;au(Qi,dr.prototype);Qi.isPureReactComponent=!0;var Va=Array.isArray,cu=Object.prototype.hasOwnProperty,qi={current:null},du={key:!0,ref:!0,__self:!0,__source:!0};function fu(e,t,n){var r,s={},i=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)cu.call(t,r)&&!du.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:ts,type:e,key:i,ref:a,props:s,_owner:qi.current}}function Kd(e,t){return{$$typeof:ts,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ji(e){return typeof e=="object"&&e!==null&&e.$$typeof===ts}function Qd(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ka=/\/+/g;function Co(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Qd(""+e.key):t.toString(36)}function Ss(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case ts:case _d:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+Co(a,0):r,Va(s)?(n="",e!=null&&(n=e.replace(Ka,"$&/")+"/"),Ss(s,t,n,"",function(d){return d})):s!=null&&(Ji(s)&&(s=Kd(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Ka,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",Va(e))for(var l=0;l<e.length;l++){i=e[l];var u=r+Co(i,l);a+=Ss(i,t,n,u,s)}else if(u=Vd(e),typeof u=="function")for(e=u.call(e),l=0;!(i=e.next()).done;)i=i.value,u=r+Co(i,l++),a+=Ss(i,t,n,u,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function is(e,t,n){if(e==null)return e;var r=[],s=0;return Ss(e,r,"","",function(i){return t.call(n,i,s++)}),r}function qd(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var it={current:null},Cs={transition:null},Jd={ReactCurrentDispatcher:it,ReactCurrentBatchConfig:Cs,ReactCurrentOwner:qi};function pu(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:is,forEach:function(e,t,n){is(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return is(e,function(){t++}),t},toArray:function(e){return is(e,function(t){return t})||[]},only:function(e){if(!Ji(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ce.Component=dr;Ce.Fragment=Bd;Ce.Profiler=Wd;Ce.PureComponent=Ki;Ce.StrictMode=Od;Ce.Suspense=Ud;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jd;Ce.act=pu;Ce.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=au({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=qi.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)cu.call(t,u)&&!du.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:ts,type:e.type,key:s,ref:i,props:r,_owner:a}};Ce.createContext=function(e){return e={$$typeof:$d,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Fd,_context:e},e.Consumer=e};Ce.createElement=fu;Ce.createFactory=function(e){var t=fu.bind(null,e);return t.type=e,t};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(e){return{$$typeof:Hd,render:e}};Ce.isValidElement=Ji;Ce.lazy=function(e){return{$$typeof:Yd,_payload:{_status:-1,_result:e},_init:qd}};Ce.memo=function(e,t){return{$$typeof:Gd,type:e,compare:t===void 0?null:t}};Ce.startTransition=function(e){var t=Cs.transition;Cs.transition={};try{e()}finally{Cs.transition=t}};Ce.unstable_act=pu;Ce.useCallback=function(e,t){return it.current.useCallback(e,t)};Ce.useContext=function(e){return it.current.useContext(e)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(e){return it.current.useDeferredValue(e)};Ce.useEffect=function(e,t){return it.current.useEffect(e,t)};Ce.useId=function(){return it.current.useId()};Ce.useImperativeHandle=function(e,t,n){return it.current.useImperativeHandle(e,t,n)};Ce.useInsertionEffect=function(e,t){return it.current.useInsertionEffect(e,t)};Ce.useLayoutEffect=function(e,t){return it.current.useLayoutEffect(e,t)};Ce.useMemo=function(e,t){return it.current.useMemo(e,t)};Ce.useReducer=function(e,t,n){return it.current.useReducer(e,t,n)};Ce.useRef=function(e){return it.current.useRef(e)};Ce.useState=function(e){return it.current.useState(e)};Ce.useSyncExternalStore=function(e,t,n){return it.current.useSyncExternalStore(e,t,n)};Ce.useTransition=function(){return it.current.useTransition()};Ce.version="18.3.1";ou.exports=Ce;var j=ou.exports;const mu=Ld(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xd=j,Zd=Symbol.for("react.element"),ef=Symbol.for("react.fragment"),tf=Object.prototype.hasOwnProperty,nf=Xd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rf={key:!0,ref:!0,__self:!0,__source:!0};function gu(e,t,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)tf.call(t,r)&&!rf.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Zd,type:e,key:i,ref:a,props:s,_owner:nf.current}}oo.Fragment=ef;oo.jsx=gu;oo.jsxs=gu;su.exports=oo;var o=su.exports,qo={},hu={exports:{}},vt={},yu={exports:{}},vu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(N,Q){var $=N.length;N.push(Q);e:for(;0<$;){var J=$-1>>>1,se=N[J];if(0<s(se,Q))N[J]=Q,N[$]=se,$=J;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var Q=N[0],$=N.pop();if($!==Q){N[0]=$;e:for(var J=0,se=N.length,ye=se>>>1;J<ye;){var ve=2*(J+1)-1,Ne=N[ve],V=ve+1,oe=N[V];if(0>s(Ne,$))V<se&&0>s(oe,Ne)?(N[J]=oe,N[V]=$,J=V):(N[J]=Ne,N[ve]=$,J=ve);else if(V<se&&0>s(oe,$))N[J]=oe,N[V]=$,J=V;else break e}}return Q}function s(N,Q){var $=N.sortIndex-Q.sortIndex;return $!==0?$:N.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],d=[],v=1,g=null,f=3,k=!1,b=!1,h=!1,q=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function c(N){for(var Q=n(d);Q!==null;){if(Q.callback===null)r(d);else if(Q.startTime<=N)r(d),Q.sortIndex=Q.expirationTime,t(u,Q);else break;Q=n(d)}}function y(N){if(h=!1,c(N),!b)if(n(u)!==null)b=!0,G(S);else{var Q=n(d);Q!==null&&ee(y,Q.startTime-N)}}function S(N,Q){b=!1,h&&(h=!1,m(U),U=-1),k=!0;var $=f;try{for(c(Q),g=n(u);g!==null&&(!(g.expirationTime>Q)||N&&!Se());){var J=g.callback;if(typeof J=="function"){g.callback=null,f=g.priorityLevel;var se=J(g.expirationTime<=Q);Q=e.unstable_now(),typeof se=="function"?g.callback=se:g===n(u)&&r(u),c(Q)}else r(u);g=n(u)}if(g!==null)var ye=!0;else{var ve=n(d);ve!==null&&ee(y,ve.startTime-Q),ye=!1}return ye}finally{g=null,f=$,k=!1}}var D=!1,O=null,U=-1,pe=5,X=-1;function Se(){return!(e.unstable_now()-X<pe)}function ce(){if(O!==null){var N=e.unstable_now();X=N;var Q=!0;try{Q=O(!0,N)}finally{Q?A():(D=!1,O=null)}}else D=!1}var A;if(typeof p=="function")A=function(){p(ce)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,ae=te.port2;te.port1.onmessage=ce,A=function(){ae.postMessage(null)}}else A=function(){q(ce,0)};function G(N){O=N,D||(D=!0,A())}function ee(N,Q){U=q(function(){N(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_continueExecution=function(){b||k||(b=!0,G(S))},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):pe=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(N){switch(f){case 1:case 2:case 3:var Q=3;break;default:Q=f}var $=f;f=Q;try{return N()}finally{f=$}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(N,Q){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var $=f;f=N;try{return Q()}finally{f=$}},e.unstable_scheduleCallback=function(N,Q,$){var J=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?J+$:J):$=J,N){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=$+se,N={id:v++,callback:Q,priorityLevel:N,startTime:$,expirationTime:se,sortIndex:-1},$>J?(N.sortIndex=$,t(d,N),n(u)===null&&N===n(d)&&(h?(m(U),U=-1):h=!0,ee(y,$-J))):(N.sortIndex=se,t(u,N),b||k||(b=!0,G(S))),N},e.unstable_shouldYield=Se,e.unstable_wrapCallback=function(N){var Q=f;return function(){var $=f;f=Q;try{return N.apply(this,arguments)}finally{f=$}}}})(vu);yu.exports=vu;var sf=yu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var of=j,yt=sf;function H(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xu=new Set,Br={};function Dn(e,t){sr(e,t),sr(e+"Capture",t)}function sr(e,t){for(Br[e]=t,e=0;e<t.length;e++)xu.add(t[e])}var Kt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jo=Object.prototype.hasOwnProperty,af=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qa={},qa={};function lf(e){return Jo.call(qa,e)?!0:Jo.call(Qa,e)?!1:af.test(e)?qa[e]=!0:(Qa[e]=!0,!1)}function uf(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function cf(e,t,n,r){if(t===null||typeof t>"u"||uf(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function at(e,t,n,r,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var Xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Xe[e]=new at(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Xe[t]=new at(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Xe[e]=new at(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Xe[e]=new at(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Xe[e]=new at(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Xe[e]=new at(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Xe[e]=new at(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Xe[e]=new at(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Xe[e]=new at(e,5,!1,e.toLowerCase(),null,!1,!1)});var Xi=/[\-:]([a-z])/g;function Zi(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Xi,Zi);Xe[t]=new at(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Xi,Zi);Xe[t]=new at(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Xi,Zi);Xe[t]=new at(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Xe[e]=new at(e,1,!1,e.toLowerCase(),null,!1,!1)});Xe.xlinkHref=new at("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Xe[e]=new at(e,1,!1,e.toLowerCase(),null,!0,!0)});function ea(e,t,n,r){var s=Xe.hasOwnProperty(t)?Xe[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(cf(t,n,s,r)&&(n=null),r||s===null?lf(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Xt=of.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,as=Symbol.for("react.element"),On=Symbol.for("react.portal"),Wn=Symbol.for("react.fragment"),ta=Symbol.for("react.strict_mode"),Xo=Symbol.for("react.profiler"),ku=Symbol.for("react.provider"),bu=Symbol.for("react.context"),na=Symbol.for("react.forward_ref"),Zo=Symbol.for("react.suspense"),ei=Symbol.for("react.suspense_list"),ra=Symbol.for("react.memo"),tn=Symbol.for("react.lazy"),wu=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function yr(e){return e===null||typeof e!="object"?null:(e=Ja&&e[Ja]||e["@@iterator"],typeof e=="function"?e:null)}var _e=Object.assign,To;function Tr(e){if(To===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);To=t&&t[1]||""}return`
`+To+e}var jo=!1;function Io(e,t){if(!e||jo)return"";jo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var u=`
`+s[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=a&&0<=l);break}}}finally{jo=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Tr(e):""}function df(e){switch(e.tag){case 5:return Tr(e.type);case 16:return Tr("Lazy");case 13:return Tr("Suspense");case 19:return Tr("SuspenseList");case 0:case 2:case 15:return e=Io(e.type,!1),e;case 11:return e=Io(e.type.render,!1),e;case 1:return e=Io(e.type,!0),e;default:return""}}function ti(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Wn:return"Fragment";case On:return"Portal";case Xo:return"Profiler";case ta:return"StrictMode";case Zo:return"Suspense";case ei:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case bu:return(e.displayName||"Context")+".Consumer";case ku:return(e._context.displayName||"Context")+".Provider";case na:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ra:return t=e.displayName||null,t!==null?t:ti(e.type)||"Memo";case tn:t=e._payload,e=e._init;try{return ti(e(t))}catch{}}return null}function ff(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ti(t);case 8:return t===ta?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function hn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Su(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function pf(e){var t=Su(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ls(e){e._valueTracker||(e._valueTracker=pf(e))}function Cu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Su(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ds(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ni(e,t){var n=t.checked;return _e({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Xa(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=hn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Tu(e,t){t=t.checked,t!=null&&ea(e,"checked",t,!1)}function ri(e,t){Tu(e,t);var n=hn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?si(e,t.type,n):t.hasOwnProperty("defaultValue")&&si(e,t.type,hn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Za(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function si(e,t,n){(t!=="number"||Ds(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var jr=Array.isArray;function Xn(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+hn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function oi(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(H(91));return _e({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function el(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(H(92));if(jr(n)){if(1<n.length)throw Error(H(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:hn(n)}}function ju(e,t){var n=hn(t.value),r=hn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function tl(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Iu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ii(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Iu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var us,Nu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(us=us||document.createElement("div"),us.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=us.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Or(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Er={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mf=["Webkit","ms","Moz","O"];Object.keys(Er).forEach(function(e){mf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Er[t]=Er[e]})});function Eu(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Er.hasOwnProperty(e)&&Er[e]?(""+t).trim():t+"px"}function Pu(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Eu(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var gf=_e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ai(e,t){if(t){if(gf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(H(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(H(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(H(61))}if(t.style!=null&&typeof t.style!="object")throw Error(H(62))}}function li(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ui=null;function sa(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ci=null,Zn=null,er=null;function nl(e){if(e=ss(e)){if(typeof ci!="function")throw Error(H(280));var t=e.stateNode;t&&(t=co(t),ci(e.stateNode,e.type,t))}}function zu(e){Zn?er?er.push(e):er=[e]:Zn=e}function Ru(){if(Zn){var e=Zn,t=er;if(er=Zn=null,nl(e),t)for(e=0;e<t.length;e++)nl(t[e])}}function Au(e,t){return e(t)}function Mu(){}var No=!1;function Du(e,t,n){if(No)return e(t,n);No=!0;try{return Au(e,t,n)}finally{No=!1,(Zn!==null||er!==null)&&(Mu(),Ru())}}function Wr(e,t){var n=e.stateNode;if(n===null)return null;var r=co(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(H(231,t,typeof n));return n}var di=!1;if(Kt)try{var vr={};Object.defineProperty(vr,"passive",{get:function(){di=!0}}),window.addEventListener("test",vr,vr),window.removeEventListener("test",vr,vr)}catch{di=!1}function hf(e,t,n,r,s,i,a,l,u){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(v){this.onError(v)}}var Pr=!1,Ls=null,_s=!1,fi=null,yf={onError:function(e){Pr=!0,Ls=e}};function vf(e,t,n,r,s,i,a,l,u){Pr=!1,Ls=null,hf.apply(yf,arguments)}function xf(e,t,n,r,s,i,a,l,u){if(vf.apply(this,arguments),Pr){if(Pr){var d=Ls;Pr=!1,Ls=null}else throw Error(H(198));_s||(_s=!0,fi=d)}}function Ln(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Lu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function rl(e){if(Ln(e)!==e)throw Error(H(188))}function kf(e){var t=e.alternate;if(!t){if(t=Ln(e),t===null)throw Error(H(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return rl(s),e;if(i===r)return rl(s),t;i=i.sibling}throw Error(H(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?e:t}function _u(e){return e=kf(e),e!==null?Bu(e):null}function Bu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Bu(e);if(t!==null)return t;e=e.sibling}return null}var Ou=yt.unstable_scheduleCallback,sl=yt.unstable_cancelCallback,bf=yt.unstable_shouldYield,wf=yt.unstable_requestPaint,We=yt.unstable_now,Sf=yt.unstable_getCurrentPriorityLevel,oa=yt.unstable_ImmediatePriority,Wu=yt.unstable_UserBlockingPriority,Bs=yt.unstable_NormalPriority,Cf=yt.unstable_LowPriority,Fu=yt.unstable_IdlePriority,io=null,Ot=null;function Tf(e){if(Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(io,e,void 0,(e.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:Nf,jf=Math.log,If=Math.LN2;function Nf(e){return e>>>=0,e===0?32:31-(jf(e)/If|0)|0}var cs=64,ds=4194304;function Ir(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Os(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=Ir(l):(i&=a,i!==0&&(r=Ir(i)))}else a=n&~s,a!==0?r=Ir(a):i!==0&&(r=Ir(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-zt(t),s=1<<n,r|=e[n],t&=~s;return r}function Ef(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pf(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-zt(i),l=1<<a,u=s[a];u===-1?(!(l&n)||l&r)&&(s[a]=Ef(l,t)):u<=t&&(e.expiredLanes|=l),i&=~l}}function pi(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function $u(){var e=cs;return cs<<=1,!(cs&4194240)&&(cs=64),e}function Eo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ns(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-zt(t),e[t]=n}function zf(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-zt(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function ia(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-zt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Ee=0;function Hu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Uu,aa,Gu,Yu,Vu,mi=!1,fs=[],ln=null,un=null,cn=null,Fr=new Map,$r=new Map,rn=[],Rf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ol(e,t){switch(e){case"focusin":case"focusout":ln=null;break;case"dragenter":case"dragleave":un=null;break;case"mouseover":case"mouseout":cn=null;break;case"pointerover":case"pointerout":Fr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":$r.delete(t.pointerId)}}function xr(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=ss(t),t!==null&&aa(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Af(e,t,n,r,s){switch(t){case"focusin":return ln=xr(ln,e,t,n,r,s),!0;case"dragenter":return un=xr(un,e,t,n,r,s),!0;case"mouseover":return cn=xr(cn,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Fr.set(i,xr(Fr.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,$r.set(i,xr($r.get(i)||null,e,t,n,r,s)),!0}return!1}function Ku(e){var t=Tn(e.target);if(t!==null){var n=Ln(t);if(n!==null){if(t=n.tag,t===13){if(t=Lu(n),t!==null){e.blockedOn=t,Vu(e.priority,function(){Gu(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ts(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=gi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ui=r,n.target.dispatchEvent(r),ui=null}else return t=ss(n),t!==null&&aa(t),e.blockedOn=n,!1;t.shift()}return!0}function il(e,t,n){Ts(e)&&n.delete(t)}function Mf(){mi=!1,ln!==null&&Ts(ln)&&(ln=null),un!==null&&Ts(un)&&(un=null),cn!==null&&Ts(cn)&&(cn=null),Fr.forEach(il),$r.forEach(il)}function kr(e,t){e.blockedOn===t&&(e.blockedOn=null,mi||(mi=!0,yt.unstable_scheduleCallback(yt.unstable_NormalPriority,Mf)))}function Hr(e){function t(s){return kr(s,e)}if(0<fs.length){kr(fs[0],e);for(var n=1;n<fs.length;n++){var r=fs[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ln!==null&&kr(ln,e),un!==null&&kr(un,e),cn!==null&&kr(cn,e),Fr.forEach(t),$r.forEach(t),n=0;n<rn.length;n++)r=rn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<rn.length&&(n=rn[0],n.blockedOn===null);)Ku(n),n.blockedOn===null&&rn.shift()}var tr=Xt.ReactCurrentBatchConfig,Ws=!0;function Df(e,t,n,r){var s=Ee,i=tr.transition;tr.transition=null;try{Ee=1,la(e,t,n,r)}finally{Ee=s,tr.transition=i}}function Lf(e,t,n,r){var s=Ee,i=tr.transition;tr.transition=null;try{Ee=4,la(e,t,n,r)}finally{Ee=s,tr.transition=i}}function la(e,t,n,r){if(Ws){var s=gi(e,t,n,r);if(s===null)Oo(e,t,r,Fs,n),ol(e,r);else if(Af(s,e,t,n,r))r.stopPropagation();else if(ol(e,r),t&4&&-1<Rf.indexOf(e)){for(;s!==null;){var i=ss(s);if(i!==null&&Uu(i),i=gi(e,t,n,r),i===null&&Oo(e,t,r,Fs,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Oo(e,t,r,null,n)}}var Fs=null;function gi(e,t,n,r){if(Fs=null,e=sa(r),e=Tn(e),e!==null)if(t=Ln(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Lu(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Fs=e,null}function Qu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Sf()){case oa:return 1;case Wu:return 4;case Bs:case Cf:return 16;case Fu:return 536870912;default:return 16}default:return 16}}var on=null,ua=null,js=null;function qu(){if(js)return js;var e,t=ua,n=t.length,r,s="value"in on?on.value:on.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[i-r];r++);return js=s.slice(e,1<r?1-r:void 0)}function Is(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ps(){return!0}function al(){return!1}function xt(e){function t(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ps:al,this.isPropagationStopped=al,this}return _e(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ps)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ps)},persist:function(){},isPersistent:ps}),t}var fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ca=xt(fr),rs=_e({},fr,{view:0,detail:0}),_f=xt(rs),Po,zo,br,ao=_e({},rs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:da,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==br&&(br&&e.type==="mousemove"?(Po=e.screenX-br.screenX,zo=e.screenY-br.screenY):zo=Po=0,br=e),Po)},movementY:function(e){return"movementY"in e?e.movementY:zo}}),ll=xt(ao),Bf=_e({},ao,{dataTransfer:0}),Of=xt(Bf),Wf=_e({},rs,{relatedTarget:0}),Ro=xt(Wf),Ff=_e({},fr,{animationName:0,elapsedTime:0,pseudoElement:0}),$f=xt(Ff),Hf=_e({},fr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Uf=xt(Hf),Gf=_e({},fr,{data:0}),ul=xt(Gf),Yf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Kf[e])?!!t[e]:!1}function da(){return Qf}var qf=_e({},rs,{key:function(e){if(e.key){var t=Yf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Is(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Vf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:da,charCode:function(e){return e.type==="keypress"?Is(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Is(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Jf=xt(qf),Xf=_e({},ao,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cl=xt(Xf),Zf=_e({},rs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:da}),ep=xt(Zf),tp=_e({},fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),np=xt(tp),rp=_e({},ao,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),sp=xt(rp),op=[9,13,27,32],fa=Kt&&"CompositionEvent"in window,zr=null;Kt&&"documentMode"in document&&(zr=document.documentMode);var ip=Kt&&"TextEvent"in window&&!zr,Ju=Kt&&(!fa||zr&&8<zr&&11>=zr),dl=" ",fl=!1;function Xu(e,t){switch(e){case"keyup":return op.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Fn=!1;function ap(e,t){switch(e){case"compositionend":return Zu(t);case"keypress":return t.which!==32?null:(fl=!0,dl);case"textInput":return e=t.data,e===dl&&fl?null:e;default:return null}}function lp(e,t){if(Fn)return e==="compositionend"||!fa&&Xu(e,t)?(e=qu(),js=ua=on=null,Fn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ju&&t.locale!=="ko"?null:t.data;default:return null}}var up={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!up[e.type]:t==="textarea"}function ec(e,t,n,r){zu(r),t=$s(t,"onChange"),0<t.length&&(n=new ca("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Rr=null,Ur=null;function cp(e){dc(e,0)}function lo(e){var t=Un(e);if(Cu(t))return e}function dp(e,t){if(e==="change")return t}var tc=!1;if(Kt){var Ao;if(Kt){var Mo="oninput"in document;if(!Mo){var ml=document.createElement("div");ml.setAttribute("oninput","return;"),Mo=typeof ml.oninput=="function"}Ao=Mo}else Ao=!1;tc=Ao&&(!document.documentMode||9<document.documentMode)}function gl(){Rr&&(Rr.detachEvent("onpropertychange",nc),Ur=Rr=null)}function nc(e){if(e.propertyName==="value"&&lo(Ur)){var t=[];ec(t,Ur,e,sa(e)),Du(cp,t)}}function fp(e,t,n){e==="focusin"?(gl(),Rr=t,Ur=n,Rr.attachEvent("onpropertychange",nc)):e==="focusout"&&gl()}function pp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return lo(Ur)}function mp(e,t){if(e==="click")return lo(t)}function gp(e,t){if(e==="input"||e==="change")return lo(t)}function hp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var At=typeof Object.is=="function"?Object.is:hp;function Gr(e,t){if(At(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Jo.call(t,s)||!At(e[s],t[s]))return!1}return!0}function hl(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yl(e,t){var n=hl(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=hl(n)}}function rc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?rc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function sc(){for(var e=window,t=Ds();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ds(e.document)}return t}function pa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function yp(e){var t=sc(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&rc(n.ownerDocument.documentElement,n)){if(r!==null&&pa(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=yl(n,i);var a=yl(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vp=Kt&&"documentMode"in document&&11>=document.documentMode,$n=null,hi=null,Ar=null,yi=!1;function vl(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;yi||$n==null||$n!==Ds(r)||(r=$n,"selectionStart"in r&&pa(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ar&&Gr(Ar,r)||(Ar=r,r=$s(hi,"onSelect"),0<r.length&&(t=new ca("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=$n)))}function ms(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Hn={animationend:ms("Animation","AnimationEnd"),animationiteration:ms("Animation","AnimationIteration"),animationstart:ms("Animation","AnimationStart"),transitionend:ms("Transition","TransitionEnd")},Do={},oc={};Kt&&(oc=document.createElement("div").style,"AnimationEvent"in window||(delete Hn.animationend.animation,delete Hn.animationiteration.animation,delete Hn.animationstart.animation),"TransitionEvent"in window||delete Hn.transitionend.transition);function uo(e){if(Do[e])return Do[e];if(!Hn[e])return e;var t=Hn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in oc)return Do[e]=t[n];return e}var ic=uo("animationend"),ac=uo("animationiteration"),lc=uo("animationstart"),uc=uo("transitionend"),cc=new Map,xl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vn(e,t){cc.set(e,t),Dn(t,[e])}for(var Lo=0;Lo<xl.length;Lo++){var _o=xl[Lo],xp=_o.toLowerCase(),kp=_o[0].toUpperCase()+_o.slice(1);vn(xp,"on"+kp)}vn(ic,"onAnimationEnd");vn(ac,"onAnimationIteration");vn(lc,"onAnimationStart");vn("dblclick","onDoubleClick");vn("focusin","onFocus");vn("focusout","onBlur");vn(uc,"onTransitionEnd");sr("onMouseEnter",["mouseout","mouseover"]);sr("onMouseLeave",["mouseout","mouseover"]);sr("onPointerEnter",["pointerout","pointerover"]);sr("onPointerLeave",["pointerout","pointerover"]);Dn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bp=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nr));function kl(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,xf(r,t,void 0,e),e.currentTarget=null}function dc(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;kl(s,l,d),i=u}else for(a=0;a<r.length;a++){if(l=r[a],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;kl(s,l,d),i=u}}}if(_s)throw e=fi,_s=!1,fi=null,e}function Re(e,t){var n=t[wi];n===void 0&&(n=t[wi]=new Set);var r=e+"__bubble";n.has(r)||(fc(t,e,2,!1),n.add(r))}function Bo(e,t,n){var r=0;t&&(r|=4),fc(n,e,r,t)}var gs="_reactListening"+Math.random().toString(36).slice(2);function Yr(e){if(!e[gs]){e[gs]=!0,xu.forEach(function(n){n!=="selectionchange"&&(bp.has(n)||Bo(n,!1,e),Bo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[gs]||(t[gs]=!0,Bo("selectionchange",!1,t))}}function fc(e,t,n,r){switch(Qu(t)){case 1:var s=Df;break;case 4:s=Lf;break;default:s=la}n=s.bind(null,t,n,e),s=void 0,!di||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Oo(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Tn(l),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}l=l.parentNode}}r=r.return}Du(function(){var d=i,v=sa(n),g=[];e:{var f=cc.get(e);if(f!==void 0){var k=ca,b=e;switch(e){case"keypress":if(Is(n)===0)break e;case"keydown":case"keyup":k=Jf;break;case"focusin":b="focus",k=Ro;break;case"focusout":b="blur",k=Ro;break;case"beforeblur":case"afterblur":k=Ro;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=ll;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=Of;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=ep;break;case ic:case ac:case lc:k=$f;break;case uc:k=np;break;case"scroll":k=_f;break;case"wheel":k=sp;break;case"copy":case"cut":case"paste":k=Uf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=cl}var h=(t&4)!==0,q=!h&&e==="scroll",m=h?f!==null?f+"Capture":null:f;h=[];for(var p=d,c;p!==null;){c=p;var y=c.stateNode;if(c.tag===5&&y!==null&&(c=y,m!==null&&(y=Wr(p,m),y!=null&&h.push(Vr(p,y,c)))),q)break;p=p.return}0<h.length&&(f=new k(f,b,null,n,v),g.push({event:f,listeners:h}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",k=e==="mouseout"||e==="pointerout",f&&n!==ui&&(b=n.relatedTarget||n.fromElement)&&(Tn(b)||b[Qt]))break e;if((k||f)&&(f=v.window===v?v:(f=v.ownerDocument)?f.defaultView||f.parentWindow:window,k?(b=n.relatedTarget||n.toElement,k=d,b=b?Tn(b):null,b!==null&&(q=Ln(b),b!==q||b.tag!==5&&b.tag!==6)&&(b=null)):(k=null,b=d),k!==b)){if(h=ll,y="onMouseLeave",m="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(h=cl,y="onPointerLeave",m="onPointerEnter",p="pointer"),q=k==null?f:Un(k),c=b==null?f:Un(b),f=new h(y,p+"leave",k,n,v),f.target=q,f.relatedTarget=c,y=null,Tn(v)===d&&(h=new h(m,p+"enter",b,n,v),h.target=c,h.relatedTarget=q,y=h),q=y,k&&b)t:{for(h=k,m=b,p=0,c=h;c;c=Bn(c))p++;for(c=0,y=m;y;y=Bn(y))c++;for(;0<p-c;)h=Bn(h),p--;for(;0<c-p;)m=Bn(m),c--;for(;p--;){if(h===m||m!==null&&h===m.alternate)break t;h=Bn(h),m=Bn(m)}h=null}else h=null;k!==null&&bl(g,f,k,h,!1),b!==null&&q!==null&&bl(g,q,b,h,!0)}}e:{if(f=d?Un(d):window,k=f.nodeName&&f.nodeName.toLowerCase(),k==="select"||k==="input"&&f.type==="file")var S=dp;else if(pl(f))if(tc)S=gp;else{S=pp;var D=fp}else(k=f.nodeName)&&k.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=mp);if(S&&(S=S(e,d))){ec(g,S,n,v);break e}D&&D(e,f,d),e==="focusout"&&(D=f._wrapperState)&&D.controlled&&f.type==="number"&&si(f,"number",f.value)}switch(D=d?Un(d):window,e){case"focusin":(pl(D)||D.contentEditable==="true")&&($n=D,hi=d,Ar=null);break;case"focusout":Ar=hi=$n=null;break;case"mousedown":yi=!0;break;case"contextmenu":case"mouseup":case"dragend":yi=!1,vl(g,n,v);break;case"selectionchange":if(vp)break;case"keydown":case"keyup":vl(g,n,v)}var O;if(fa)e:{switch(e){case"compositionstart":var U="onCompositionStart";break e;case"compositionend":U="onCompositionEnd";break e;case"compositionupdate":U="onCompositionUpdate";break e}U=void 0}else Fn?Xu(e,n)&&(U="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(U="onCompositionStart");U&&(Ju&&n.locale!=="ko"&&(Fn||U!=="onCompositionStart"?U==="onCompositionEnd"&&Fn&&(O=qu()):(on=v,ua="value"in on?on.value:on.textContent,Fn=!0)),D=$s(d,U),0<D.length&&(U=new ul(U,e,null,n,v),g.push({event:U,listeners:D}),O?U.data=O:(O=Zu(n),O!==null&&(U.data=O)))),(O=ip?ap(e,n):lp(e,n))&&(d=$s(d,"onBeforeInput"),0<d.length&&(v=new ul("onBeforeInput","beforeinput",null,n,v),g.push({event:v,listeners:d}),v.data=O))}dc(g,t)})}function Vr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function $s(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Wr(e,n),i!=null&&r.unshift(Vr(e,i,s)),i=Wr(e,t),i!=null&&r.push(Vr(e,i,s))),e=e.return}return r}function Bn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function bl(e,t,n,r,s){for(var i=t._reactName,a=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=Wr(n,i),u!=null&&a.unshift(Vr(n,u,l))):s||(u=Wr(n,i),u!=null&&a.push(Vr(n,u,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var wp=/\r\n?/g,Sp=/\u0000|\uFFFD/g;function wl(e){return(typeof e=="string"?e:""+e).replace(wp,`
`).replace(Sp,"")}function hs(e,t,n){if(t=wl(t),wl(e)!==t&&n)throw Error(H(425))}function Hs(){}var vi=null,xi=null;function ki(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var bi=typeof setTimeout=="function"?setTimeout:void 0,Cp=typeof clearTimeout=="function"?clearTimeout:void 0,Sl=typeof Promise=="function"?Promise:void 0,Tp=typeof queueMicrotask=="function"?queueMicrotask:typeof Sl<"u"?function(e){return Sl.resolve(null).then(e).catch(jp)}:bi;function jp(e){setTimeout(function(){throw e})}function Wo(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),Hr(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Hr(t)}function dn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Cl(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var pr=Math.random().toString(36).slice(2),Bt="__reactFiber$"+pr,Kr="__reactProps$"+pr,Qt="__reactContainer$"+pr,wi="__reactEvents$"+pr,Ip="__reactListeners$"+pr,Np="__reactHandles$"+pr;function Tn(e){var t=e[Bt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Qt]||n[Bt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Cl(e);e!==null;){if(n=e[Bt])return n;e=Cl(e)}return t}e=n,n=e.parentNode}return null}function ss(e){return e=e[Bt]||e[Qt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Un(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(H(33))}function co(e){return e[Kr]||null}var Si=[],Gn=-1;function xn(e){return{current:e}}function Ae(e){0>Gn||(e.current=Si[Gn],Si[Gn]=null,Gn--)}function ze(e,t){Gn++,Si[Gn]=e.current,e.current=t}var yn={},rt=xn(yn),ct=xn(!1),Pn=yn;function or(e,t){var n=e.type.contextTypes;if(!n)return yn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function dt(e){return e=e.childContextTypes,e!=null}function Us(){Ae(ct),Ae(rt)}function Tl(e,t,n){if(rt.current!==yn)throw Error(H(168));ze(rt,t),ze(ct,n)}function pc(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(H(108,ff(e)||"Unknown",s));return _e({},n,r)}function Gs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||yn,Pn=rt.current,ze(rt,e),ze(ct,ct.current),!0}function jl(e,t,n){var r=e.stateNode;if(!r)throw Error(H(169));n?(e=pc(e,t,Pn),r.__reactInternalMemoizedMergedChildContext=e,Ae(ct),Ae(rt),ze(rt,e)):Ae(ct),ze(ct,n)}var Ut=null,fo=!1,Fo=!1;function mc(e){Ut===null?Ut=[e]:Ut.push(e)}function Ep(e){fo=!0,mc(e)}function kn(){if(!Fo&&Ut!==null){Fo=!0;var e=0,t=Ee;try{var n=Ut;for(Ee=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ut=null,fo=!1}catch(s){throw Ut!==null&&(Ut=Ut.slice(e+1)),Ou(oa,kn),s}finally{Ee=t,Fo=!1}}return null}var Yn=[],Vn=0,Ys=null,Vs=0,bt=[],wt=0,zn=null,Gt=1,Yt="";function Sn(e,t){Yn[Vn++]=Vs,Yn[Vn++]=Ys,Ys=e,Vs=t}function gc(e,t,n){bt[wt++]=Gt,bt[wt++]=Yt,bt[wt++]=zn,zn=e;var r=Gt;e=Yt;var s=32-zt(r)-1;r&=~(1<<s),n+=1;var i=32-zt(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Gt=1<<32-zt(t)+s|n<<s|r,Yt=i+e}else Gt=1<<i|n<<s|r,Yt=e}function ma(e){e.return!==null&&(Sn(e,1),gc(e,1,0))}function ga(e){for(;e===Ys;)Ys=Yn[--Vn],Yn[Vn]=null,Vs=Yn[--Vn],Yn[Vn]=null;for(;e===zn;)zn=bt[--wt],bt[wt]=null,Yt=bt[--wt],bt[wt]=null,Gt=bt[--wt],bt[wt]=null}var ht=null,gt=null,Me=!1,Pt=null;function hc(e,t){var n=St(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Il(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ht=e,gt=dn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ht=e,gt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=zn!==null?{id:Gt,overflow:Yt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=St(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ht=e,gt=null,!0):!1;default:return!1}}function Ci(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ti(e){if(Me){var t=gt;if(t){var n=t;if(!Il(e,t)){if(Ci(e))throw Error(H(418));t=dn(n.nextSibling);var r=ht;t&&Il(e,t)?hc(r,n):(e.flags=e.flags&-4097|2,Me=!1,ht=e)}}else{if(Ci(e))throw Error(H(418));e.flags=e.flags&-4097|2,Me=!1,ht=e}}}function Nl(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ht=e}function ys(e){if(e!==ht)return!1;if(!Me)return Nl(e),Me=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ki(e.type,e.memoizedProps)),t&&(t=gt)){if(Ci(e))throw yc(),Error(H(418));for(;t;)hc(e,t),t=dn(t.nextSibling)}if(Nl(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(H(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){gt=dn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}gt=null}}else gt=ht?dn(e.stateNode.nextSibling):null;return!0}function yc(){for(var e=gt;e;)e=dn(e.nextSibling)}function ir(){gt=ht=null,Me=!1}function ha(e){Pt===null?Pt=[e]:Pt.push(e)}var Pp=Xt.ReactCurrentBatchConfig;function wr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(H(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function El(e){var t=e._init;return t(e._payload)}function vc(e){function t(m,p){if(e){var c=m.deletions;c===null?(m.deletions=[p],m.flags|=16):c.push(p)}}function n(m,p){if(!e)return null;for(;p!==null;)t(m,p),p=p.sibling;return null}function r(m,p){for(m=new Map;p!==null;)p.key!==null?m.set(p.key,p):m.set(p.index,p),p=p.sibling;return m}function s(m,p){return m=gn(m,p),m.index=0,m.sibling=null,m}function i(m,p,c){return m.index=c,e?(c=m.alternate,c!==null?(c=c.index,c<p?(m.flags|=2,p):c):(m.flags|=2,p)):(m.flags|=1048576,p)}function a(m){return e&&m.alternate===null&&(m.flags|=2),m}function l(m,p,c,y){return p===null||p.tag!==6?(p=Ko(c,m.mode,y),p.return=m,p):(p=s(p,c),p.return=m,p)}function u(m,p,c,y){var S=c.type;return S===Wn?v(m,p,c.props.children,y,c.key):p!==null&&(p.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===tn&&El(S)===p.type)?(y=s(p,c.props),y.ref=wr(m,p,c),y.return=m,y):(y=Ms(c.type,c.key,c.props,null,m.mode,y),y.ref=wr(m,p,c),y.return=m,y)}function d(m,p,c,y){return p===null||p.tag!==4||p.stateNode.containerInfo!==c.containerInfo||p.stateNode.implementation!==c.implementation?(p=Qo(c,m.mode,y),p.return=m,p):(p=s(p,c.children||[]),p.return=m,p)}function v(m,p,c,y,S){return p===null||p.tag!==7?(p=En(c,m.mode,y,S),p.return=m,p):(p=s(p,c),p.return=m,p)}function g(m,p,c){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Ko(""+p,m.mode,c),p.return=m,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case as:return c=Ms(p.type,p.key,p.props,null,m.mode,c),c.ref=wr(m,null,p),c.return=m,c;case On:return p=Qo(p,m.mode,c),p.return=m,p;case tn:var y=p._init;return g(m,y(p._payload),c)}if(jr(p)||yr(p))return p=En(p,m.mode,c,null),p.return=m,p;vs(m,p)}return null}function f(m,p,c,y){var S=p!==null?p.key:null;if(typeof c=="string"&&c!==""||typeof c=="number")return S!==null?null:l(m,p,""+c,y);if(typeof c=="object"&&c!==null){switch(c.$$typeof){case as:return c.key===S?u(m,p,c,y):null;case On:return c.key===S?d(m,p,c,y):null;case tn:return S=c._init,f(m,p,S(c._payload),y)}if(jr(c)||yr(c))return S!==null?null:v(m,p,c,y,null);vs(m,c)}return null}function k(m,p,c,y,S){if(typeof y=="string"&&y!==""||typeof y=="number")return m=m.get(c)||null,l(p,m,""+y,S);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case as:return m=m.get(y.key===null?c:y.key)||null,u(p,m,y,S);case On:return m=m.get(y.key===null?c:y.key)||null,d(p,m,y,S);case tn:var D=y._init;return k(m,p,c,D(y._payload),S)}if(jr(y)||yr(y))return m=m.get(c)||null,v(p,m,y,S,null);vs(p,y)}return null}function b(m,p,c,y){for(var S=null,D=null,O=p,U=p=0,pe=null;O!==null&&U<c.length;U++){O.index>U?(pe=O,O=null):pe=O.sibling;var X=f(m,O,c[U],y);if(X===null){O===null&&(O=pe);break}e&&O&&X.alternate===null&&t(m,O),p=i(X,p,U),D===null?S=X:D.sibling=X,D=X,O=pe}if(U===c.length)return n(m,O),Me&&Sn(m,U),S;if(O===null){for(;U<c.length;U++)O=g(m,c[U],y),O!==null&&(p=i(O,p,U),D===null?S=O:D.sibling=O,D=O);return Me&&Sn(m,U),S}for(O=r(m,O);U<c.length;U++)pe=k(O,m,U,c[U],y),pe!==null&&(e&&pe.alternate!==null&&O.delete(pe.key===null?U:pe.key),p=i(pe,p,U),D===null?S=pe:D.sibling=pe,D=pe);return e&&O.forEach(function(Se){return t(m,Se)}),Me&&Sn(m,U),S}function h(m,p,c,y){var S=yr(c);if(typeof S!="function")throw Error(H(150));if(c=S.call(c),c==null)throw Error(H(151));for(var D=S=null,O=p,U=p=0,pe=null,X=c.next();O!==null&&!X.done;U++,X=c.next()){O.index>U?(pe=O,O=null):pe=O.sibling;var Se=f(m,O,X.value,y);if(Se===null){O===null&&(O=pe);break}e&&O&&Se.alternate===null&&t(m,O),p=i(Se,p,U),D===null?S=Se:D.sibling=Se,D=Se,O=pe}if(X.done)return n(m,O),Me&&Sn(m,U),S;if(O===null){for(;!X.done;U++,X=c.next())X=g(m,X.value,y),X!==null&&(p=i(X,p,U),D===null?S=X:D.sibling=X,D=X);return Me&&Sn(m,U),S}for(O=r(m,O);!X.done;U++,X=c.next())X=k(O,m,U,X.value,y),X!==null&&(e&&X.alternate!==null&&O.delete(X.key===null?U:X.key),p=i(X,p,U),D===null?S=X:D.sibling=X,D=X);return e&&O.forEach(function(ce){return t(m,ce)}),Me&&Sn(m,U),S}function q(m,p,c,y){if(typeof c=="object"&&c!==null&&c.type===Wn&&c.key===null&&(c=c.props.children),typeof c=="object"&&c!==null){switch(c.$$typeof){case as:e:{for(var S=c.key,D=p;D!==null;){if(D.key===S){if(S=c.type,S===Wn){if(D.tag===7){n(m,D.sibling),p=s(D,c.props.children),p.return=m,m=p;break e}}else if(D.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===tn&&El(S)===D.type){n(m,D.sibling),p=s(D,c.props),p.ref=wr(m,D,c),p.return=m,m=p;break e}n(m,D);break}else t(m,D);D=D.sibling}c.type===Wn?(p=En(c.props.children,m.mode,y,c.key),p.return=m,m=p):(y=Ms(c.type,c.key,c.props,null,m.mode,y),y.ref=wr(m,p,c),y.return=m,m=y)}return a(m);case On:e:{for(D=c.key;p!==null;){if(p.key===D)if(p.tag===4&&p.stateNode.containerInfo===c.containerInfo&&p.stateNode.implementation===c.implementation){n(m,p.sibling),p=s(p,c.children||[]),p.return=m,m=p;break e}else{n(m,p);break}else t(m,p);p=p.sibling}p=Qo(c,m.mode,y),p.return=m,m=p}return a(m);case tn:return D=c._init,q(m,p,D(c._payload),y)}if(jr(c))return b(m,p,c,y);if(yr(c))return h(m,p,c,y);vs(m,c)}return typeof c=="string"&&c!==""||typeof c=="number"?(c=""+c,p!==null&&p.tag===6?(n(m,p.sibling),p=s(p,c),p.return=m,m=p):(n(m,p),p=Ko(c,m.mode,y),p.return=m,m=p),a(m)):n(m,p)}return q}var ar=vc(!0),xc=vc(!1),Ks=xn(null),Qs=null,Kn=null,ya=null;function va(){ya=Kn=Qs=null}function xa(e){var t=Ks.current;Ae(Ks),e._currentValue=t}function ji(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function nr(e,t){Qs=e,ya=Kn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ut=!0),e.firstContext=null)}function Tt(e){var t=e._currentValue;if(ya!==e)if(e={context:e,memoizedValue:t,next:null},Kn===null){if(Qs===null)throw Error(H(308));Kn=e,Qs.dependencies={lanes:0,firstContext:e}}else Kn=Kn.next=e;return t}var jn=null;function ka(e){jn===null?jn=[e]:jn.push(e)}function kc(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,ka(t)):(n.next=s.next,s.next=n),t.interleaved=n,qt(e,r)}function qt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var nn=!1;function ba(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function fn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ie&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,qt(e,n)}return s=r.interleaved,s===null?(t.next=t,ka(r)):(t.next=s.next,s.next=t),r.interleaved=t,qt(e,n)}function Ns(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ia(e,n)}}function Pl(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qs(e,t,n,r){var s=e.updateQueue;nn=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,a===null?i=d:a.next=d,a=u;var v=e.alternate;v!==null&&(v=v.updateQueue,l=v.lastBaseUpdate,l!==a&&(l===null?v.firstBaseUpdate=d:l.next=d,v.lastBaseUpdate=u))}if(i!==null){var g=s.baseState;a=0,v=d=u=null,l=i;do{var f=l.lane,k=l.eventTime;if((r&f)===f){v!==null&&(v=v.next={eventTime:k,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=e,h=l;switch(f=t,k=n,h.tag){case 1:if(b=h.payload,typeof b=="function"){g=b.call(k,g,f);break e}g=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=h.payload,f=typeof b=="function"?b.call(k,g,f):b,f==null)break e;g=_e({},g,f);break e;case 2:nn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else k={eventTime:k,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},v===null?(d=v=k,u=g):v=v.next=k,a|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(v===null&&(u=g),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=v,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);An|=a,e.lanes=a,e.memoizedState=g}}function zl(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(H(191,s));s.call(r)}}}var os={},Wt=xn(os),Qr=xn(os),qr=xn(os);function In(e){if(e===os)throw Error(H(174));return e}function wa(e,t){switch(ze(qr,t),ze(Qr,e),ze(Wt,os),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ii(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ii(t,e)}Ae(Wt),ze(Wt,t)}function lr(){Ae(Wt),Ae(Qr),Ae(qr)}function wc(e){In(qr.current);var t=In(Wt.current),n=ii(t,e.type);t!==n&&(ze(Qr,e),ze(Wt,n))}function Sa(e){Qr.current===e&&(Ae(Wt),Ae(Qr))}var De=xn(0);function Js(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var $o=[];function Ca(){for(var e=0;e<$o.length;e++)$o[e]._workInProgressVersionPrimary=null;$o.length=0}var Es=Xt.ReactCurrentDispatcher,Ho=Xt.ReactCurrentBatchConfig,Rn=0,Le=null,He=null,Ke=null,Xs=!1,Mr=!1,Jr=0,zp=0;function et(){throw Error(H(321))}function Ta(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!At(e[n],t[n]))return!1;return!0}function ja(e,t,n,r,s,i){if(Rn=i,Le=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Es.current=e===null||e.memoizedState===null?Dp:Lp,e=n(r,s),Mr){i=0;do{if(Mr=!1,Jr=0,25<=i)throw Error(H(301));i+=1,Ke=He=null,t.updateQueue=null,Es.current=_p,e=n(r,s)}while(Mr)}if(Es.current=Zs,t=He!==null&&He.next!==null,Rn=0,Ke=He=Le=null,Xs=!1,t)throw Error(H(300));return e}function Ia(){var e=Jr!==0;return Jr=0,e}function _t(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?Le.memoizedState=Ke=e:Ke=Ke.next=e,Ke}function jt(){if(He===null){var e=Le.alternate;e=e!==null?e.memoizedState:null}else e=He.next;var t=Ke===null?Le.memoizedState:Ke.next;if(t!==null)Ke=t,He=e;else{if(e===null)throw Error(H(310));He=e,e={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Ke===null?Le.memoizedState=Ke=e:Ke=Ke.next=e}return Ke}function Xr(e,t){return typeof t=="function"?t(e):t}function Uo(e){var t=jt(),n=t.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=e;var r=He,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,u=null,d=i;do{var v=d.lane;if((Rn&v)===v)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var g={lane:v,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=g,a=r):u=u.next=g,Le.lanes|=v,An|=v}d=d.next}while(d!==null&&d!==i);u===null?a=r:u.next=l,At(r,t.memoizedState)||(ut=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Le.lanes|=i,An|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Go(e){var t=jt(),n=t.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);At(i,t.memoizedState)||(ut=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Sc(){}function Cc(e,t){var n=Le,r=jt(),s=t(),i=!At(r.memoizedState,s);if(i&&(r.memoizedState=s,ut=!0),r=r.queue,Na(Ic.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Ke!==null&&Ke.memoizedState.tag&1){if(n.flags|=2048,Zr(9,jc.bind(null,n,r,s,t),void 0,null),Qe===null)throw Error(H(349));Rn&30||Tc(n,t,s)}return s}function Tc(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Le.updateQueue,t===null?(t={lastEffect:null,stores:null},Le.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function jc(e,t,n,r){t.value=n,t.getSnapshot=r,Nc(t)&&Ec(e)}function Ic(e,t,n){return n(function(){Nc(t)&&Ec(e)})}function Nc(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!At(e,n)}catch{return!0}}function Ec(e){var t=qt(e,1);t!==null&&Rt(t,e,1,-1)}function Rl(e){var t=_t();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xr,lastRenderedState:e},t.queue=e,e=e.dispatch=Mp.bind(null,Le,e),[t.memoizedState,e]}function Zr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Le.updateQueue,t===null?(t={lastEffect:null,stores:null},Le.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Pc(){return jt().memoizedState}function Ps(e,t,n,r){var s=_t();Le.flags|=e,s.memoizedState=Zr(1|t,n,void 0,r===void 0?null:r)}function po(e,t,n,r){var s=jt();r=r===void 0?null:r;var i=void 0;if(He!==null){var a=He.memoizedState;if(i=a.destroy,r!==null&&Ta(r,a.deps)){s.memoizedState=Zr(t,n,i,r);return}}Le.flags|=e,s.memoizedState=Zr(1|t,n,i,r)}function Al(e,t){return Ps(8390656,8,e,t)}function Na(e,t){return po(2048,8,e,t)}function zc(e,t){return po(4,2,e,t)}function Rc(e,t){return po(4,4,e,t)}function Ac(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Mc(e,t,n){return n=n!=null?n.concat([e]):null,po(4,4,Ac.bind(null,t,e),n)}function Ea(){}function Dc(e,t){var n=jt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ta(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Lc(e,t){var n=jt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ta(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function _c(e,t,n){return Rn&21?(At(n,t)||(n=$u(),Le.lanes|=n,An|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ut=!0),e.memoizedState=n)}function Rp(e,t){var n=Ee;Ee=n!==0&&4>n?n:4,e(!0);var r=Ho.transition;Ho.transition={};try{e(!1),t()}finally{Ee=n,Ho.transition=r}}function Bc(){return jt().memoizedState}function Ap(e,t,n){var r=mn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Oc(e))Wc(t,n);else if(n=kc(e,t,n,r),n!==null){var s=ot();Rt(n,e,r,s),Fc(n,t,r)}}function Mp(e,t,n){var r=mn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Oc(e))Wc(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,At(l,a)){var u=t.interleaved;u===null?(s.next=s,ka(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}n=kc(e,t,s,r),n!==null&&(s=ot(),Rt(n,e,r,s),Fc(n,t,r))}}function Oc(e){var t=e.alternate;return e===Le||t!==null&&t===Le}function Wc(e,t){Mr=Xs=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Fc(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,ia(e,n)}}var Zs={readContext:Tt,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useInsertionEffect:et,useLayoutEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useMutableSource:et,useSyncExternalStore:et,useId:et,unstable_isNewReconciler:!1},Dp={readContext:Tt,useCallback:function(e,t){return _t().memoizedState=[e,t===void 0?null:t],e},useContext:Tt,useEffect:Al,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ps(4194308,4,Ac.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ps(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ps(4,2,e,t)},useMemo:function(e,t){var n=_t();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=_t();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ap.bind(null,Le,e),[r.memoizedState,e]},useRef:function(e){var t=_t();return e={current:e},t.memoizedState=e},useState:Rl,useDebugValue:Ea,useDeferredValue:function(e){return _t().memoizedState=e},useTransition:function(){var e=Rl(!1),t=e[0];return e=Rp.bind(null,e[1]),_t().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Le,s=_t();if(Me){if(n===void 0)throw Error(H(407));n=n()}else{if(n=t(),Qe===null)throw Error(H(349));Rn&30||Tc(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Al(Ic.bind(null,r,i,e),[e]),r.flags|=2048,Zr(9,jc.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=_t(),t=Qe.identifierPrefix;if(Me){var n=Yt,r=Gt;n=(r&~(1<<32-zt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Jr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=zp++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Lp={readContext:Tt,useCallback:Dc,useContext:Tt,useEffect:Na,useImperativeHandle:Mc,useInsertionEffect:zc,useLayoutEffect:Rc,useMemo:Lc,useReducer:Uo,useRef:Pc,useState:function(){return Uo(Xr)},useDebugValue:Ea,useDeferredValue:function(e){var t=jt();return _c(t,He.memoizedState,e)},useTransition:function(){var e=Uo(Xr)[0],t=jt().memoizedState;return[e,t]},useMutableSource:Sc,useSyncExternalStore:Cc,useId:Bc,unstable_isNewReconciler:!1},_p={readContext:Tt,useCallback:Dc,useContext:Tt,useEffect:Na,useImperativeHandle:Mc,useInsertionEffect:zc,useLayoutEffect:Rc,useMemo:Lc,useReducer:Go,useRef:Pc,useState:function(){return Go(Xr)},useDebugValue:Ea,useDeferredValue:function(e){var t=jt();return He===null?t.memoizedState=e:_c(t,He.memoizedState,e)},useTransition:function(){var e=Go(Xr)[0],t=jt().memoizedState;return[e,t]},useMutableSource:Sc,useSyncExternalStore:Cc,useId:Bc,unstable_isNewReconciler:!1};function Nt(e,t){if(e&&e.defaultProps){t=_e({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ii(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:_e({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var mo={isMounted:function(e){return(e=e._reactInternals)?Ln(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ot(),s=mn(e),i=Vt(r,s);i.payload=t,n!=null&&(i.callback=n),t=fn(e,i,s),t!==null&&(Rt(t,e,s,r),Ns(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ot(),s=mn(e),i=Vt(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=fn(e,i,s),t!==null&&(Rt(t,e,s,r),Ns(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ot(),r=mn(e),s=Vt(n,r);s.tag=2,t!=null&&(s.callback=t),t=fn(e,s,r),t!==null&&(Rt(t,e,r,n),Ns(t,e,r))}};function Ml(e,t,n,r,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,a):t.prototype&&t.prototype.isPureReactComponent?!Gr(n,r)||!Gr(s,i):!0}function $c(e,t,n){var r=!1,s=yn,i=t.contextType;return typeof i=="object"&&i!==null?i=Tt(i):(s=dt(t)?Pn:rt.current,r=t.contextTypes,i=(r=r!=null)?or(e,s):yn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=mo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Dl(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&mo.enqueueReplaceState(t,t.state,null)}function Ni(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},ba(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Tt(i):(i=dt(t)?Pn:rt.current,s.context=or(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Ii(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&mo.enqueueReplaceState(s,s.state,null),qs(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ur(e,t){try{var n="",r=t;do n+=df(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Yo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ei(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Bp=typeof WeakMap=="function"?WeakMap:Map;function Hc(e,t,n){n=Vt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){to||(to=!0,Oi=r),Ei(e,t)},n}function Uc(e,t,n){n=Vt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Ei(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ei(e,t),typeof r!="function"&&(pn===null?pn=new Set([this]):pn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Ll(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Bp;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Xp.bind(null,e,t,n),t.then(e,e))}function _l(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Bl(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Vt(-1,1),t.tag=2,fn(n,t,1))),n.lanes|=1),e)}var Op=Xt.ReactCurrentOwner,ut=!1;function st(e,t,n,r){t.child=e===null?xc(t,null,n,r):ar(t,e.child,n,r)}function Ol(e,t,n,r,s){n=n.render;var i=t.ref;return nr(t,s),r=ja(e,t,n,r,i,s),n=Ia(),e!==null&&!ut?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Jt(e,t,s)):(Me&&n&&ma(t),t.flags|=1,st(e,t,r,s),t.child)}function Wl(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!_a(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Gc(e,t,i,r,s)):(e=Ms(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Gr,n(a,r)&&e.ref===t.ref)return Jt(e,t,s)}return t.flags|=1,e=gn(i,r),e.ref=t.ref,e.return=t,t.child=e}function Gc(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Gr(i,r)&&e.ref===t.ref)if(ut=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(ut=!0);else return t.lanes=e.lanes,Jt(e,t,s)}return Pi(e,t,n,r,s)}function Yc(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(qn,mt),mt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ze(qn,mt),mt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ze(qn,mt),mt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,ze(qn,mt),mt|=r;return st(e,t,s,n),t.child}function Vc(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Pi(e,t,n,r,s){var i=dt(n)?Pn:rt.current;return i=or(t,i),nr(t,s),n=ja(e,t,n,r,i,s),r=Ia(),e!==null&&!ut?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Jt(e,t,s)):(Me&&r&&ma(t),t.flags|=1,st(e,t,n,s),t.child)}function Fl(e,t,n,r,s){if(dt(n)){var i=!0;Gs(t)}else i=!1;if(nr(t,s),t.stateNode===null)zs(e,t),$c(t,n,r),Ni(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var u=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Tt(d):(d=dt(n)?Pn:rt.current,d=or(t,d));var v=n.getDerivedStateFromProps,g=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||u!==d)&&Dl(t,a,r,d),nn=!1;var f=t.memoizedState;a.state=f,qs(t,r,a,s),u=t.memoizedState,l!==r||f!==u||ct.current||nn?(typeof v=="function"&&(Ii(t,n,v,r),u=t.memoizedState),(l=nn||Ml(t,n,l,r,f,u,d))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=d,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,bc(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Nt(t.type,l),a.props=d,g=t.pendingProps,f=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Tt(u):(u=dt(n)?Pn:rt.current,u=or(t,u));var k=n.getDerivedStateFromProps;(v=typeof k=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==g||f!==u)&&Dl(t,a,r,u),nn=!1,f=t.memoizedState,a.state=f,qs(t,r,a,s);var b=t.memoizedState;l!==g||f!==b||ct.current||nn?(typeof k=="function"&&(Ii(t,n,k,r),b=t.memoizedState),(d=nn||Ml(t,n,d,r,f,b,u)||!1)?(v||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,b,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,b,u)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=b),a.props=r,a.state=b,a.context=u,r=d):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return zi(e,t,n,r,i,s)}function zi(e,t,n,r,s,i){Vc(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&jl(t,n,!1),Jt(e,t,i);r=t.stateNode,Op.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=ar(t,e.child,null,i),t.child=ar(t,null,l,i)):st(e,t,l,i),t.memoizedState=r.state,s&&jl(t,n,!0),t.child}function Kc(e){var t=e.stateNode;t.pendingContext?Tl(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Tl(e,t.context,!1),wa(e,t.containerInfo)}function $l(e,t,n,r,s){return ir(),ha(s),t.flags|=256,st(e,t,n,r),t.child}var Ri={dehydrated:null,treeContext:null,retryLane:0};function Ai(e){return{baseLanes:e,cachePool:null,transitions:null}}function Qc(e,t,n){var r=t.pendingProps,s=De.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),ze(De,s&1),e===null)return Ti(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,i?(r=t.mode,i=t.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=yo(a,r,0,null),e=En(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Ai(n),t.memoizedState=Ri,e):Pa(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Wp(e,t,a,r,l,s,n);if(i){i=r.fallback,a=t.mode,s=e.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=gn(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=gn(l,i):(i=En(i,a,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,a=e.child.memoizedState,a=a===null?Ai(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=Ri,r}return i=e.child,e=i.sibling,r=gn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Pa(e,t){return t=yo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function xs(e,t,n,r){return r!==null&&ha(r),ar(t,e.child,null,n),e=Pa(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Wp(e,t,n,r,s,i,a){if(n)return t.flags&256?(t.flags&=-257,r=Yo(Error(H(422))),xs(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=yo({mode:"visible",children:r.children},s,0,null),i=En(i,s,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&ar(t,e.child,null,a),t.child.memoizedState=Ai(a),t.memoizedState=Ri,i);if(!(t.mode&1))return xs(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(H(419)),r=Yo(i,r,void 0),xs(e,t,a,r)}if(l=(a&e.childLanes)!==0,ut||l){if(r=Qe,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,qt(e,s),Rt(r,e,s,-1))}return La(),r=Yo(Error(H(421))),xs(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Zp.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,gt=dn(s.nextSibling),ht=t,Me=!0,Pt=null,e!==null&&(bt[wt++]=Gt,bt[wt++]=Yt,bt[wt++]=zn,Gt=e.id,Yt=e.overflow,zn=t),t=Pa(t,r.children),t.flags|=4096,t)}function Hl(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),ji(e.return,t,n)}function Vo(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function qc(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(st(e,t,r.children,n),r=De.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Hl(e,n,t);else if(e.tag===19)Hl(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ze(De,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Js(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Vo(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Js(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Vo(t,!0,n,null,i);break;case"together":Vo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zs(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Jt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),An|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(H(153));if(t.child!==null){for(e=t.child,n=gn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=gn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Fp(e,t,n){switch(t.tag){case 3:Kc(t),ir();break;case 5:wc(t);break;case 1:dt(t.type)&&Gs(t);break;case 4:wa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;ze(Ks,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ze(De,De.current&1),t.flags|=128,null):n&t.child.childLanes?Qc(e,t,n):(ze(De,De.current&1),e=Jt(e,t,n),e!==null?e.sibling:null);ze(De,De.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return qc(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ze(De,De.current),r)break;return null;case 22:case 23:return t.lanes=0,Yc(e,t,n)}return Jt(e,t,n)}var Jc,Mi,Xc,Zc;Jc=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Mi=function(){};Xc=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,In(Wt.current);var i=null;switch(n){case"input":s=ni(e,s),r=ni(e,r),i=[];break;case"select":s=_e({},s,{value:void 0}),r=_e({},r,{value:void 0}),i=[];break;case"textarea":s=oi(e,s),r=oi(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Hs)}ai(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Br.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Br.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Re("scroll",e),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};Zc=function(e,t,n,r){n!==r&&(t.flags|=4)};function Sr(e,t){if(!Me)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function tt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function $p(e,t,n){var r=t.pendingProps;switch(ga(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(t),null;case 1:return dt(t.type)&&Us(),tt(t),null;case 3:return r=t.stateNode,lr(),Ae(ct),Ae(rt),Ca(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(ys(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Pt!==null&&($i(Pt),Pt=null))),Mi(e,t),tt(t),null;case 5:Sa(t);var s=In(qr.current);if(n=t.type,e!==null&&t.stateNode!=null)Xc(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(H(166));return tt(t),null}if(e=In(Wt.current),ys(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Bt]=t,r[Kr]=i,e=(t.mode&1)!==0,n){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(s=0;s<Nr.length;s++)Re(Nr[s],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":Xa(r,i),Re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Re("invalid",r);break;case"textarea":el(r,i),Re("invalid",r)}ai(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&hs(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&hs(r.textContent,l,e),s=["children",""+l]):Br.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Re("scroll",r)}switch(n){case"input":ls(r),Za(r,i,!0);break;case"textarea":ls(r),tl(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Hs)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Iu(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Bt]=t,e[Kr]=r,Jc(e,t,!1,!1),t.stateNode=e;e:{switch(a=li(n,r),n){case"dialog":Re("cancel",e),Re("close",e),s=r;break;case"iframe":case"object":case"embed":Re("load",e),s=r;break;case"video":case"audio":for(s=0;s<Nr.length;s++)Re(Nr[s],e);s=r;break;case"source":Re("error",e),s=r;break;case"img":case"image":case"link":Re("error",e),Re("load",e),s=r;break;case"details":Re("toggle",e),s=r;break;case"input":Xa(e,r),s=ni(e,r),Re("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=_e({},r,{value:void 0}),Re("invalid",e);break;case"textarea":el(e,r),s=oi(e,r),Re("invalid",e);break;default:s=r}ai(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Pu(e,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Nu(e,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Or(e,u):typeof u=="number"&&Or(e,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Br.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Re("scroll",e):u!=null&&ea(e,i,u,a))}switch(n){case"input":ls(e),Za(e,r,!1);break;case"textarea":ls(e),tl(e);break;case"option":r.value!=null&&e.setAttribute("value",""+hn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Xn(e,!!r.multiple,i,!1):r.defaultValue!=null&&Xn(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Hs)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return tt(t),null;case 6:if(e&&t.stateNode!=null)Zc(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(H(166));if(n=In(qr.current),In(Wt.current),ys(t)){if(r=t.stateNode,n=t.memoizedProps,r[Bt]=t,(i=r.nodeValue!==n)&&(e=ht,e!==null))switch(e.tag){case 3:hs(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&hs(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bt]=t,t.stateNode=r}return tt(t),null;case 13:if(Ae(De),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Me&&gt!==null&&t.mode&1&&!(t.flags&128))yc(),ir(),t.flags|=98560,i=!1;else if(i=ys(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(H(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(H(317));i[Bt]=t}else ir(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;tt(t),i=!1}else Pt!==null&&($i(Pt),Pt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||De.current&1?Ue===0&&(Ue=3):La())),t.updateQueue!==null&&(t.flags|=4),tt(t),null);case 4:return lr(),Mi(e,t),e===null&&Yr(t.stateNode.containerInfo),tt(t),null;case 10:return xa(t.type._context),tt(t),null;case 17:return dt(t.type)&&Us(),tt(t),null;case 19:if(Ae(De),i=t.memoizedState,i===null)return tt(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)Sr(i,!1);else{if(Ue!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Js(e),a!==null){for(t.flags|=128,Sr(i,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ze(De,De.current&1|2),t.child}e=e.sibling}i.tail!==null&&We()>cr&&(t.flags|=128,r=!0,Sr(i,!1),t.lanes=4194304)}else{if(!r)if(e=Js(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Sr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Me)return tt(t),null}else 2*We()-i.renderingStartTime>cr&&n!==1073741824&&(t.flags|=128,r=!0,Sr(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=We(),t.sibling=null,n=De.current,ze(De,r?n&1|2:n&1),t):(tt(t),null);case 22:case 23:return Da(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?mt&1073741824&&(tt(t),t.subtreeFlags&6&&(t.flags|=8192)):tt(t),null;case 24:return null;case 25:return null}throw Error(H(156,t.tag))}function Hp(e,t){switch(ga(t),t.tag){case 1:return dt(t.type)&&Us(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return lr(),Ae(ct),Ae(rt),Ca(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Sa(t),null;case 13:if(Ae(De),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(H(340));ir()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ae(De),null;case 4:return lr(),null;case 10:return xa(t.type._context),null;case 22:case 23:return Da(),null;case 24:return null;default:return null}}var ks=!1,nt=!1,Up=typeof WeakSet=="function"?WeakSet:Set,re=null;function Qn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Be(e,t,r)}else n.current=null}function Di(e,t,n){try{n()}catch(r){Be(e,t,r)}}var Ul=!1;function Gp(e,t){if(vi=Ws,e=sc(),pa(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,d=0,v=0,g=e,f=null;t:for(;;){for(var k;g!==n||s!==0&&g.nodeType!==3||(l=a+s),g!==i||r!==0&&g.nodeType!==3||(u=a+r),g.nodeType===3&&(a+=g.nodeValue.length),(k=g.firstChild)!==null;)f=g,g=k;for(;;){if(g===e)break t;if(f===n&&++d===s&&(l=a),f===i&&++v===r&&(u=a),(k=g.nextSibling)!==null)break;g=f,f=g.parentNode}g=k}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(xi={focusedElem:e,selectionRange:n},Ws=!1,re=t;re!==null;)if(t=re,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,re=e;else for(;re!==null;){t=re;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var h=b.memoizedProps,q=b.memoizedState,m=t.stateNode,p=m.getSnapshotBeforeUpdate(t.elementType===t.type?h:Nt(t.type,h),q);m.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var c=t.stateNode.containerInfo;c.nodeType===1?c.textContent="":c.nodeType===9&&c.documentElement&&c.removeChild(c.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(y){Be(t,t.return,y)}if(e=t.sibling,e!==null){e.return=t.return,re=e;break}re=t.return}return b=Ul,Ul=!1,b}function Dr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Di(t,n,i)}s=s.next}while(s!==r)}}function go(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Li(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function ed(e){var t=e.alternate;t!==null&&(e.alternate=null,ed(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Bt],delete t[Kr],delete t[wi],delete t[Ip],delete t[Np])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function td(e){return e.tag===5||e.tag===3||e.tag===4}function Gl(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||td(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _i(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Hs));else if(r!==4&&(e=e.child,e!==null))for(_i(e,t,n),e=e.sibling;e!==null;)_i(e,t,n),e=e.sibling}function Bi(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Bi(e,t,n),e=e.sibling;e!==null;)Bi(e,t,n),e=e.sibling}var qe=null,Et=!1;function en(e,t,n){for(n=n.child;n!==null;)nd(e,t,n),n=n.sibling}function nd(e,t,n){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(io,n)}catch{}switch(n.tag){case 5:nt||Qn(n,t);case 6:var r=qe,s=Et;qe=null,en(e,t,n),qe=r,Et=s,qe!==null&&(Et?(e=qe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):qe.removeChild(n.stateNode));break;case 18:qe!==null&&(Et?(e=qe,n=n.stateNode,e.nodeType===8?Wo(e.parentNode,n):e.nodeType===1&&Wo(e,n),Hr(e)):Wo(qe,n.stateNode));break;case 4:r=qe,s=Et,qe=n.stateNode.containerInfo,Et=!0,en(e,t,n),qe=r,Et=s;break;case 0:case 11:case 14:case 15:if(!nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Di(n,t,a),s=s.next}while(s!==r)}en(e,t,n);break;case 1:if(!nt&&(Qn(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Be(n,t,l)}en(e,t,n);break;case 21:en(e,t,n);break;case 22:n.mode&1?(nt=(r=nt)||n.memoizedState!==null,en(e,t,n),nt=r):en(e,t,n);break;default:en(e,t,n)}}function Yl(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Up),t.forEach(function(r){var s=em.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function It(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:qe=l.stateNode,Et=!1;break e;case 3:qe=l.stateNode.containerInfo,Et=!0;break e;case 4:qe=l.stateNode.containerInfo,Et=!0;break e}l=l.return}if(qe===null)throw Error(H(160));nd(i,a,s),qe=null,Et=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Be(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)rd(t,e),t=t.sibling}function rd(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(It(t,e),Lt(e),r&4){try{Dr(3,e,e.return),go(3,e)}catch(h){Be(e,e.return,h)}try{Dr(5,e,e.return)}catch(h){Be(e,e.return,h)}}break;case 1:It(t,e),Lt(e),r&512&&n!==null&&Qn(n,n.return);break;case 5:if(It(t,e),Lt(e),r&512&&n!==null&&Qn(n,n.return),e.flags&32){var s=e.stateNode;try{Or(s,"")}catch(h){Be(e,e.return,h)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Tu(s,i),li(l,a);var d=li(l,i);for(a=0;a<u.length;a+=2){var v=u[a],g=u[a+1];v==="style"?Pu(s,g):v==="dangerouslySetInnerHTML"?Nu(s,g):v==="children"?Or(s,g):ea(s,v,g,d)}switch(l){case"input":ri(s,i);break;case"textarea":ju(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var k=i.value;k!=null?Xn(s,!!i.multiple,k,!1):f!==!!i.multiple&&(i.defaultValue!=null?Xn(s,!!i.multiple,i.defaultValue,!0):Xn(s,!!i.multiple,i.multiple?[]:"",!1))}s[Kr]=i}catch(h){Be(e,e.return,h)}}break;case 6:if(It(t,e),Lt(e),r&4){if(e.stateNode===null)throw Error(H(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(h){Be(e,e.return,h)}}break;case 3:if(It(t,e),Lt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Hr(t.containerInfo)}catch(h){Be(e,e.return,h)}break;case 4:It(t,e),Lt(e);break;case 13:It(t,e),Lt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Aa=We())),r&4&&Yl(e);break;case 22:if(v=n!==null&&n.memoizedState!==null,e.mode&1?(nt=(d=nt)||v,It(t,e),nt=d):It(t,e),Lt(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!v&&e.mode&1)for(re=e,v=e.child;v!==null;){for(g=re=v;re!==null;){switch(f=re,k=f.child,f.tag){case 0:case 11:case 14:case 15:Dr(4,f,f.return);break;case 1:Qn(f,f.return);var b=f.stateNode;if(typeof b.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(h){Be(r,n,h)}}break;case 5:Qn(f,f.return);break;case 22:if(f.memoizedState!==null){Kl(g);continue}}k!==null?(k.return=f,re=k):Kl(g)}v=v.sibling}e:for(v=null,g=e;;){if(g.tag===5){if(v===null){v=g;try{s=g.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=g.stateNode,u=g.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Eu("display",a))}catch(h){Be(e,e.return,h)}}}else if(g.tag===6){if(v===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(h){Be(e,e.return,h)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;v===g&&(v=null),g=g.return}v===g&&(v=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:It(t,e),Lt(e),r&4&&Yl(e);break;case 21:break;default:It(t,e),Lt(e)}}function Lt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(td(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Or(s,""),r.flags&=-33);var i=Gl(e);Bi(e,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Gl(e);_i(e,l,a);break;default:throw Error(H(161))}}catch(u){Be(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Yp(e,t,n){re=e,sd(e)}function sd(e,t,n){for(var r=(e.mode&1)!==0;re!==null;){var s=re,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||ks;if(!a){var l=s.alternate,u=l!==null&&l.memoizedState!==null||nt;l=ks;var d=nt;if(ks=a,(nt=u)&&!d)for(re=s;re!==null;)a=re,u=a.child,a.tag===22&&a.memoizedState!==null?Ql(s):u!==null?(u.return=a,re=u):Ql(s);for(;i!==null;)re=i,sd(i),i=i.sibling;re=s,ks=l,nt=d}Vl(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,re=i):Vl(e)}}function Vl(e){for(;re!==null;){var t=re;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:nt||go(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!nt)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Nt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&zl(t,i,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}zl(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var v=d.memoizedState;if(v!==null){var g=v.dehydrated;g!==null&&Hr(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}nt||t.flags&512&&Li(t)}catch(f){Be(t,t.return,f)}}if(t===e){re=null;break}if(n=t.sibling,n!==null){n.return=t.return,re=n;break}re=t.return}}function Kl(e){for(;re!==null;){var t=re;if(t===e){re=null;break}var n=t.sibling;if(n!==null){n.return=t.return,re=n;break}re=t.return}}function Ql(e){for(;re!==null;){var t=re;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{go(4,t)}catch(u){Be(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(u){Be(t,s,u)}}var i=t.return;try{Li(t)}catch(u){Be(t,i,u)}break;case 5:var a=t.return;try{Li(t)}catch(u){Be(t,a,u)}}}catch(u){Be(t,t.return,u)}if(t===e){re=null;break}var l=t.sibling;if(l!==null){l.return=t.return,re=l;break}re=t.return}}var Vp=Math.ceil,eo=Xt.ReactCurrentDispatcher,za=Xt.ReactCurrentOwner,Ct=Xt.ReactCurrentBatchConfig,Ie=0,Qe=null,$e=null,Je=0,mt=0,qn=xn(0),Ue=0,es=null,An=0,ho=0,Ra=0,Lr=null,lt=null,Aa=0,cr=1/0,Ht=null,to=!1,Oi=null,pn=null,bs=!1,an=null,no=0,_r=0,Wi=null,Rs=-1,As=0;function ot(){return Ie&6?We():Rs!==-1?Rs:Rs=We()}function mn(e){return e.mode&1?Ie&2&&Je!==0?Je&-Je:Pp.transition!==null?(As===0&&(As=$u()),As):(e=Ee,e!==0||(e=window.event,e=e===void 0?16:Qu(e.type)),e):1}function Rt(e,t,n,r){if(50<_r)throw _r=0,Wi=null,Error(H(185));ns(e,n,r),(!(Ie&2)||e!==Qe)&&(e===Qe&&(!(Ie&2)&&(ho|=n),Ue===4&&sn(e,Je)),ft(e,r),n===1&&Ie===0&&!(t.mode&1)&&(cr=We()+500,fo&&kn()))}function ft(e,t){var n=e.callbackNode;Pf(e,t);var r=Os(e,e===Qe?Je:0);if(r===0)n!==null&&sl(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&sl(n),t===1)e.tag===0?Ep(ql.bind(null,e)):mc(ql.bind(null,e)),Tp(function(){!(Ie&6)&&kn()}),n=null;else{switch(Hu(r)){case 1:n=oa;break;case 4:n=Wu;break;case 16:n=Bs;break;case 536870912:n=Fu;break;default:n=Bs}n=fd(n,od.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function od(e,t){if(Rs=-1,As=0,Ie&6)throw Error(H(327));var n=e.callbackNode;if(rr()&&e.callbackNode!==n)return null;var r=Os(e,e===Qe?Je:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ro(e,r);else{t=r;var s=Ie;Ie|=2;var i=ad();(Qe!==e||Je!==t)&&(Ht=null,cr=We()+500,Nn(e,t));do try{qp();break}catch(l){id(e,l)}while(!0);va(),eo.current=i,Ie=s,$e!==null?t=0:(Qe=null,Je=0,t=Ue)}if(t!==0){if(t===2&&(s=pi(e),s!==0&&(r=s,t=Fi(e,s))),t===1)throw n=es,Nn(e,0),sn(e,r),ft(e,We()),n;if(t===6)sn(e,r);else{if(s=e.current.alternate,!(r&30)&&!Kp(s)&&(t=ro(e,r),t===2&&(i=pi(e),i!==0&&(r=i,t=Fi(e,i))),t===1))throw n=es,Nn(e,0),sn(e,r),ft(e,We()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(H(345));case 2:Cn(e,lt,Ht);break;case 3:if(sn(e,r),(r&130023424)===r&&(t=Aa+500-We(),10<t)){if(Os(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){ot(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=bi(Cn.bind(null,e,lt,Ht),t);break}Cn(e,lt,Ht);break;case 4:if(sn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-zt(r);i=1<<a,a=t[a],a>s&&(s=a),r&=~i}if(r=s,r=We()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Vp(r/1960))-r,10<r){e.timeoutHandle=bi(Cn.bind(null,e,lt,Ht),r);break}Cn(e,lt,Ht);break;case 5:Cn(e,lt,Ht);break;default:throw Error(H(329))}}}return ft(e,We()),e.callbackNode===n?od.bind(null,e):null}function Fi(e,t){var n=Lr;return e.current.memoizedState.isDehydrated&&(Nn(e,t).flags|=256),e=ro(e,t),e!==2&&(t=lt,lt=n,t!==null&&$i(t)),e}function $i(e){lt===null?lt=e:lt.push.apply(lt,e)}function Kp(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!At(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function sn(e,t){for(t&=~Ra,t&=~ho,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-zt(t),r=1<<n;e[n]=-1,t&=~r}}function ql(e){if(Ie&6)throw Error(H(327));rr();var t=Os(e,0);if(!(t&1))return ft(e,We()),null;var n=ro(e,t);if(e.tag!==0&&n===2){var r=pi(e);r!==0&&(t=r,n=Fi(e,r))}if(n===1)throw n=es,Nn(e,0),sn(e,t),ft(e,We()),n;if(n===6)throw Error(H(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cn(e,lt,Ht),ft(e,We()),null}function Ma(e,t){var n=Ie;Ie|=1;try{return e(t)}finally{Ie=n,Ie===0&&(cr=We()+500,fo&&kn())}}function Mn(e){an!==null&&an.tag===0&&!(Ie&6)&&rr();var t=Ie;Ie|=1;var n=Ct.transition,r=Ee;try{if(Ct.transition=null,Ee=1,e)return e()}finally{Ee=r,Ct.transition=n,Ie=t,!(Ie&6)&&kn()}}function Da(){mt=qn.current,Ae(qn)}function Nn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Cp(n)),$e!==null)for(n=$e.return;n!==null;){var r=n;switch(ga(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Us();break;case 3:lr(),Ae(ct),Ae(rt),Ca();break;case 5:Sa(r);break;case 4:lr();break;case 13:Ae(De);break;case 19:Ae(De);break;case 10:xa(r.type._context);break;case 22:case 23:Da()}n=n.return}if(Qe=e,$e=e=gn(e.current,null),Je=mt=t,Ue=0,es=null,Ra=ho=An=0,lt=Lr=null,jn!==null){for(t=0;t<jn.length;t++)if(n=jn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}jn=null}return e}function id(e,t){do{var n=$e;try{if(va(),Es.current=Zs,Xs){for(var r=Le.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Xs=!1}if(Rn=0,Ke=He=Le=null,Mr=!1,Jr=0,za.current=null,n===null||n.return===null){Ue=1,es=t,$e=null;break}e:{var i=e,a=n.return,l=n,u=t;if(t=Je,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,v=l,g=v.tag;if(!(v.mode&1)&&(g===0||g===11||g===15)){var f=v.alternate;f?(v.updateQueue=f.updateQueue,v.memoizedState=f.memoizedState,v.lanes=f.lanes):(v.updateQueue=null,v.memoizedState=null)}var k=_l(a);if(k!==null){k.flags&=-257,Bl(k,a,l,i,t),k.mode&1&&Ll(i,d,t),t=k,u=d;var b=t.updateQueue;if(b===null){var h=new Set;h.add(u),t.updateQueue=h}else b.add(u);break e}else{if(!(t&1)){Ll(i,d,t),La();break e}u=Error(H(426))}}else if(Me&&l.mode&1){var q=_l(a);if(q!==null){!(q.flags&65536)&&(q.flags|=256),Bl(q,a,l,i,t),ha(ur(u,l));break e}}i=u=ur(u,l),Ue!==4&&(Ue=2),Lr===null?Lr=[i]:Lr.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var m=Hc(i,u,t);Pl(i,m);break e;case 1:l=u;var p=i.type,c=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||c!==null&&typeof c.componentDidCatch=="function"&&(pn===null||!pn.has(c)))){i.flags|=65536,t&=-t,i.lanes|=t;var y=Uc(i,l,t);Pl(i,y);break e}}i=i.return}while(i!==null)}ud(n)}catch(S){t=S,$e===n&&n!==null&&($e=n=n.return);continue}break}while(!0)}function ad(){var e=eo.current;return eo.current=Zs,e===null?Zs:e}function La(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),Qe===null||!(An&268435455)&&!(ho&268435455)||sn(Qe,Je)}function ro(e,t){var n=Ie;Ie|=2;var r=ad();(Qe!==e||Je!==t)&&(Ht=null,Nn(e,t));do try{Qp();break}catch(s){id(e,s)}while(!0);if(va(),Ie=n,eo.current=r,$e!==null)throw Error(H(261));return Qe=null,Je=0,Ue}function Qp(){for(;$e!==null;)ld($e)}function qp(){for(;$e!==null&&!bf();)ld($e)}function ld(e){var t=dd(e.alternate,e,mt);e.memoizedProps=e.pendingProps,t===null?ud(e):$e=t,za.current=null}function ud(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Hp(n,t),n!==null){n.flags&=32767,$e=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ue=6,$e=null;return}}else if(n=$p(n,t,mt),n!==null){$e=n;return}if(t=t.sibling,t!==null){$e=t;return}$e=t=e}while(t!==null);Ue===0&&(Ue=5)}function Cn(e,t,n){var r=Ee,s=Ct.transition;try{Ct.transition=null,Ee=1,Jp(e,t,n,r)}finally{Ct.transition=s,Ee=r}return null}function Jp(e,t,n,r){do rr();while(an!==null);if(Ie&6)throw Error(H(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(H(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(zf(e,i),e===Qe&&($e=Qe=null,Je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||bs||(bs=!0,fd(Bs,function(){return rr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ct.transition,Ct.transition=null;var a=Ee;Ee=1;var l=Ie;Ie|=4,za.current=null,Gp(e,n),rd(n,e),yp(xi),Ws=!!vi,xi=vi=null,e.current=n,Yp(n),wf(),Ie=l,Ee=a,Ct.transition=i}else e.current=n;if(bs&&(bs=!1,an=e,no=s),i=e.pendingLanes,i===0&&(pn=null),Tf(n.stateNode),ft(e,We()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(to)throw to=!1,e=Oi,Oi=null,e;return no&1&&e.tag!==0&&rr(),i=e.pendingLanes,i&1?e===Wi?_r++:(_r=0,Wi=e):_r=0,kn(),null}function rr(){if(an!==null){var e=Hu(no),t=Ct.transition,n=Ee;try{if(Ct.transition=null,Ee=16>e?16:e,an===null)var r=!1;else{if(e=an,an=null,no=0,Ie&6)throw Error(H(331));var s=Ie;for(Ie|=4,re=e.current;re!==null;){var i=re,a=i.child;if(re.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(re=d;re!==null;){var v=re;switch(v.tag){case 0:case 11:case 15:Dr(8,v,i)}var g=v.child;if(g!==null)g.return=v,re=g;else for(;re!==null;){v=re;var f=v.sibling,k=v.return;if(ed(v),v===d){re=null;break}if(f!==null){f.return=k,re=f;break}re=k}}}var b=i.alternate;if(b!==null){var h=b.child;if(h!==null){b.child=null;do{var q=h.sibling;h.sibling=null,h=q}while(h!==null)}}re=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,re=a;else e:for(;re!==null;){if(i=re,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Dr(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,re=m;break e}re=i.return}}var p=e.current;for(re=p;re!==null;){a=re;var c=a.child;if(a.subtreeFlags&2064&&c!==null)c.return=a,re=c;else e:for(a=p;re!==null;){if(l=re,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:go(9,l)}}catch(S){Be(l,l.return,S)}if(l===a){re=null;break e}var y=l.sibling;if(y!==null){y.return=l.return,re=y;break e}re=l.return}}if(Ie=s,kn(),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(io,e)}catch{}r=!0}return r}finally{Ee=n,Ct.transition=t}}return!1}function Jl(e,t,n){t=ur(n,t),t=Hc(e,t,1),e=fn(e,t,1),t=ot(),e!==null&&(ns(e,1,t),ft(e,t))}function Be(e,t,n){if(e.tag===3)Jl(e,e,n);else for(;t!==null;){if(t.tag===3){Jl(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pn===null||!pn.has(r))){e=ur(n,e),e=Uc(t,e,1),t=fn(t,e,1),e=ot(),t!==null&&(ns(t,1,e),ft(t,e));break}}t=t.return}}function Xp(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ot(),e.pingedLanes|=e.suspendedLanes&n,Qe===e&&(Je&n)===n&&(Ue===4||Ue===3&&(Je&130023424)===Je&&500>We()-Aa?Nn(e,0):Ra|=n),ft(e,t)}function cd(e,t){t===0&&(e.mode&1?(t=ds,ds<<=1,!(ds&130023424)&&(ds=4194304)):t=1);var n=ot();e=qt(e,t),e!==null&&(ns(e,t,n),ft(e,n))}function Zp(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),cd(e,n)}function em(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(t),cd(e,n)}var dd;dd=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ct.current)ut=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ut=!1,Fp(e,t,n);ut=!!(e.flags&131072)}else ut=!1,Me&&t.flags&1048576&&gc(t,Vs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zs(e,t),e=t.pendingProps;var s=or(t,rt.current);nr(t,n),s=ja(null,t,r,e,s,n);var i=Ia();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,dt(r)?(i=!0,Gs(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ba(t),s.updater=mo,t.stateNode=s,s._reactInternals=t,Ni(t,r,e,n),t=zi(null,t,r,!0,i,n)):(t.tag=0,Me&&i&&ma(t),st(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(zs(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=nm(r),e=Nt(r,e),s){case 0:t=Pi(null,t,r,e,n);break e;case 1:t=Fl(null,t,r,e,n);break e;case 11:t=Ol(null,t,r,e,n);break e;case 14:t=Wl(null,t,r,Nt(r.type,e),n);break e}throw Error(H(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Nt(r,s),Pi(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Nt(r,s),Fl(e,t,r,s,n);case 3:e:{if(Kc(t),e===null)throw Error(H(387));r=t.pendingProps,i=t.memoizedState,s=i.element,bc(e,t),qs(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=ur(Error(H(423)),t),t=$l(e,t,r,n,s);break e}else if(r!==s){s=ur(Error(H(424)),t),t=$l(e,t,r,n,s);break e}else for(gt=dn(t.stateNode.containerInfo.firstChild),ht=t,Me=!0,Pt=null,n=xc(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ir(),r===s){t=Jt(e,t,n);break e}st(e,t,r,n)}t=t.child}return t;case 5:return wc(t),e===null&&Ti(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,ki(r,s)?a=null:i!==null&&ki(r,i)&&(t.flags|=32),Vc(e,t),st(e,t,a,n),t.child;case 6:return e===null&&Ti(t),null;case 13:return Qc(e,t,n);case 4:return wa(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ar(t,null,r,n):st(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Nt(r,s),Ol(e,t,r,s,n);case 7:return st(e,t,t.pendingProps,n),t.child;case 8:return st(e,t,t.pendingProps.children,n),t.child;case 12:return st(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,ze(Ks,r._currentValue),r._currentValue=a,i!==null)if(At(i.value,a)){if(i.children===s.children&&!ct.current){t=Jt(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Vt(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var v=d.pending;v===null?u.next=u:(u.next=v.next,v.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),ji(i.return,n,t),l.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(H(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),ji(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}st(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,nr(t,n),s=Tt(s),r=r(s),t.flags|=1,st(e,t,r,n),t.child;case 14:return r=t.type,s=Nt(r,t.pendingProps),s=Nt(r.type,s),Wl(e,t,r,s,n);case 15:return Gc(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Nt(r,s),zs(e,t),t.tag=1,dt(r)?(e=!0,Gs(t)):e=!1,nr(t,n),$c(t,r,s),Ni(t,r,s,n),zi(null,t,r,!0,e,n);case 19:return qc(e,t,n);case 22:return Yc(e,t,n)}throw Error(H(156,t.tag))};function fd(e,t){return Ou(e,t)}function tm(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function St(e,t,n,r){return new tm(e,t,n,r)}function _a(e){return e=e.prototype,!(!e||!e.isReactComponent)}function nm(e){if(typeof e=="function")return _a(e)?1:0;if(e!=null){if(e=e.$$typeof,e===na)return 11;if(e===ra)return 14}return 2}function gn(e,t){var n=e.alternate;return n===null?(n=St(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ms(e,t,n,r,s,i){var a=2;if(r=e,typeof e=="function")_a(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Wn:return En(n.children,s,i,t);case ta:a=8,s|=8;break;case Xo:return e=St(12,n,t,s|2),e.elementType=Xo,e.lanes=i,e;case Zo:return e=St(13,n,t,s),e.elementType=Zo,e.lanes=i,e;case ei:return e=St(19,n,t,s),e.elementType=ei,e.lanes=i,e;case wu:return yo(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ku:a=10;break e;case bu:a=9;break e;case na:a=11;break e;case ra:a=14;break e;case tn:a=16,r=null;break e}throw Error(H(130,e==null?e:typeof e,""))}return t=St(a,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function En(e,t,n,r){return e=St(7,e,r,t),e.lanes=n,e}function yo(e,t,n,r){return e=St(22,e,r,t),e.elementType=wu,e.lanes=n,e.stateNode={isHidden:!1},e}function Ko(e,t,n){return e=St(6,e,null,t),e.lanes=n,e}function Qo(e,t,n){return t=St(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function rm(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Eo(0),this.expirationTimes=Eo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Eo(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ba(e,t,n,r,s,i,a,l,u){return e=new rm(e,t,n,l,u),t===1?(t=1,i===!0&&(t|=8)):t=0,i=St(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ba(i),e}function sm(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:On,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function pd(e){if(!e)return yn;e=e._reactInternals;e:{if(Ln(e)!==e||e.tag!==1)throw Error(H(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(dt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(H(171))}if(e.tag===1){var n=e.type;if(dt(n))return pc(e,n,t)}return t}function md(e,t,n,r,s,i,a,l,u){return e=Ba(n,r,!0,e,s,i,a,l,u),e.context=pd(null),n=e.current,r=ot(),s=mn(n),i=Vt(r,s),i.callback=t??null,fn(n,i,s),e.current.lanes=s,ns(e,s,r),ft(e,r),e}function vo(e,t,n,r){var s=t.current,i=ot(),a=mn(s);return n=pd(n),t.context===null?t.context=n:t.pendingContext=n,t=Vt(i,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=fn(s,t,a),e!==null&&(Rt(e,s,a,i),Ns(e,s,a)),a}function so(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Xl(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Oa(e,t){Xl(e,t),(e=e.alternate)&&Xl(e,t)}function om(){return null}var gd=typeof reportError=="function"?reportError:function(e){console.error(e)};function Wa(e){this._internalRoot=e}xo.prototype.render=Wa.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(H(409));vo(e,t,null,null)};xo.prototype.unmount=Wa.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Mn(function(){vo(null,e,null,null)}),t[Qt]=null}};function xo(e){this._internalRoot=e}xo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Yu();e={blockedOn:null,target:e,priority:t};for(var n=0;n<rn.length&&t!==0&&t<rn[n].priority;n++);rn.splice(n,0,e),n===0&&Ku(e)}};function Fa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ko(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Zl(){}function im(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=so(a);i.call(d)}}var a=md(t,r,e,0,null,!1,!1,"",Zl);return e._reactRootContainer=a,e[Qt]=a.current,Yr(e.nodeType===8?e.parentNode:e),Mn(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=so(u);l.call(d)}}var u=Ba(e,0,!1,null,null,!1,!1,"",Zl);return e._reactRootContainer=u,e[Qt]=u.current,Yr(e.nodeType===8?e.parentNode:e),Mn(function(){vo(t,u,n,r)}),u}function bo(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var u=so(a);l.call(u)}}vo(t,a,e,s)}else a=im(n,t,e,s,r);return so(a)}Uu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ir(t.pendingLanes);n!==0&&(ia(t,n|1),ft(t,We()),!(Ie&6)&&(cr=We()+500,kn()))}break;case 13:Mn(function(){var r=qt(e,1);if(r!==null){var s=ot();Rt(r,e,1,s)}}),Oa(e,1)}};aa=function(e){if(e.tag===13){var t=qt(e,134217728);if(t!==null){var n=ot();Rt(t,e,134217728,n)}Oa(e,134217728)}};Gu=function(e){if(e.tag===13){var t=mn(e),n=qt(e,t);if(n!==null){var r=ot();Rt(n,e,t,r)}Oa(e,t)}};Yu=function(){return Ee};Vu=function(e,t){var n=Ee;try{return Ee=e,t()}finally{Ee=n}};ci=function(e,t,n){switch(t){case"input":if(ri(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=co(r);if(!s)throw Error(H(90));Cu(r),ri(r,s)}}}break;case"textarea":ju(e,n);break;case"select":t=n.value,t!=null&&Xn(e,!!n.multiple,t,!1)}};Au=Ma;Mu=Mn;var am={usingClientEntryPoint:!1,Events:[ss,Un,co,zu,Ru,Ma]},Cr={findFiberByHostInstance:Tn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lm={bundleType:Cr.bundleType,version:Cr.version,rendererPackageName:Cr.rendererPackageName,rendererConfig:Cr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=_u(e),e===null?null:e.stateNode},findFiberByHostInstance:Cr.findFiberByHostInstance||om,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ws=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ws.isDisabled&&ws.supportsFiber)try{io=ws.inject(lm),Ot=ws}catch{}}vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=am;vt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fa(t))throw Error(H(200));return sm(e,t,null,n)};vt.createRoot=function(e,t){if(!Fa(e))throw Error(H(299));var n=!1,r="",s=gd;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Ba(e,1,!1,null,null,n,!1,r,s),e[Qt]=t.current,Yr(e.nodeType===8?e.parentNode:e),new Wa(t)};vt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(H(188)):(e=Object.keys(e).join(","),Error(H(268,e)));return e=_u(t),e=e===null?null:e.stateNode,e};vt.flushSync=function(e){return Mn(e)};vt.hydrate=function(e,t,n){if(!ko(t))throw Error(H(200));return bo(null,e,t,!0,n)};vt.hydrateRoot=function(e,t,n){if(!Fa(e))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=gd;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=md(t,null,e,1,n??null,s,!1,i,a),e[Qt]=t.current,Yr(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new xo(t)};vt.render=function(e,t,n){if(!ko(t))throw Error(H(200));return bo(null,e,t,!1,n)};vt.unmountComponentAtNode=function(e){if(!ko(e))throw Error(H(40));return e._reactRootContainer?(Mn(function(){bo(null,null,e,!1,function(){e._reactRootContainer=null,e[Qt]=null})}),!0):!1};vt.unstable_batchedUpdates=Ma;vt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ko(n))throw Error(H(200));if(e==null||e._reactInternals===void 0)throw Error(H(38));return bo(e,t,n,!1,r)};vt.version="18.3.1-next-f1338f8080-20240426";function hd(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hd)}catch(e){console.error(e)}}hd(),hu.exports=vt;var um=hu.exports,eu=um;qo.createRoot=eu.createRoot,qo.hydrateRoot=eu.hydrateRoot;function cm({feedItems:e,activeFilter:t,onFilterChange:n,starredIds:r=new Set,config:s}){const i=e.filter(b=>b.type==="guest"&&b.threadId).length,a=e.filter(b=>b.type==="task"&&b.status!=="completed").length;e.filter(b=>b.type==="task").length;const l=a;let u=0;r&&r instanceof Set&&r.size>0&&(u=Array.from(r).filter(h=>e.some(q=>q.id===h)).length);const d=u>0?u:null,v=[{key:"guests",filterKey:"guests",label:"Threads",value:"",icon:"bi-chat-dots",badge:i>0?i:null},{key:"service",filterKey:"service",label:"Tasks",value:"",icon:"bi-check-square",badge:l>0?l:null},{key:"system",filterKey:"system",label:"AI",value:"",icon:"bi-stars",badge:null},{key:"starred",filterKey:"starred",label:"Starred",value:"",icon:"bi-star",badge:d}],g=Array.isArray(s==null?void 0:s.visibleFilters)?s.visibleFilters:null,f=g?v.filter(b=>g.includes(b.filterKey)):v,k=b=>{t===b.filterKey?n("all"):n(b.filterKey)};return o.jsxs("div",{className:"today-bar",style:{position:"relative",padding:"0.375rem 1rem",display:"flex",gap:"0.75rem",alignItems:"center",flexWrap:"nowrap",overflowX:"auto",overflowY:"hidden",WebkitOverflowScrolling:"touch",scrollbarWidth:"none",msOverflowStyle:"none",zIndex:10},children:[o.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(to bottom, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 0.8) 40%, rgba(0, 0, 0, 0) 100%)",pointerEvents:"none",zIndex:-1}}),o.jsx("div",{style:{position:"absolute",bottom:"-2rem",left:0,right:0,height:"2rem",background:"linear-gradient(to bottom, rgba(0, 0, 0, 0.8) 0%, rgba(0, 0, 0, 0) 100%)",pointerEvents:"none",zIndex:-1}}),f.map(b=>{const h=t===b.filterKey;return o.jsxs("div",{className:"metric-item rounded-pill d-flex align-items-center",style:{cursor:"pointer",padding:"0.5rem 0.875rem",transition:"all 0.2s",position:"relative",zIndex:1,flexShrink:0,whiteSpace:"nowrap",backgroundColor:h?"rgba(13, 110, 253, 0.25)":"rgba(255, 255, 255, 0.05)",border:h?"1px solid rgba(13, 110, 253, 0.3)":"1px solid rgba(255, 255, 255, 0.1)",boxShadow:h?"0 0 8px rgba(13, 110, 253, 0.3), 0 0 4px rgba(13, 110, 253, 0.2)":"none",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",height:"40px",borderRadius:"20px"},onClick:()=>k(b),onMouseEnter:q=>{h||(q.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)",q.currentTarget.style.borderColor="rgba(255, 255, 255, 0.15)")},onMouseLeave:q=>{h||(q.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)",q.currentTarget.style.borderColor="rgba(255, 255, 255, 0.1)")},children:[o.jsx("i",{className:`bi ${b.icon}`,style:{fontSize:"1.25rem",color:h?"rgba(255, 255, 255, 0.95)":"rgba(255, 255, 255, 0.5)",fontWeight:"bold"}}),o.jsx("span",{style:{fontSize:"0.875rem",color:h?"rgba(255, 255, 255, 0.95)":"rgba(255, 255, 255, 0.5)",fontWeight:"500"},children:b.label}),b.badge&&o.jsx("span",{className:`badge rounded-pill ${b.key==="starred"||b.key==="guests"?"bg-secondary":"bg-danger"}`,style:{position:"absolute",top:"-6px",right:"-6px",fontSize:"0.75rem",fontWeight:"600",minWidth:"22px",height:"22px",display:"flex",alignItems:"center",justifyContent:"center",padding:"0 6px",fontFamily:"inherit",lineHeight:"1",backgroundColor:b.key==="starred"||b.key==="guests"?"rgba(255, 255, 255, 0.25)":"#dc3545",color:"#ffffff",border:"2px solid #000000",boxSizing:"border-box"},children:b.badge})]},b.key)})]})}function tu({event:e}){const[t,n]=j.useState(null),[r,s]=j.useState(null),i=e.title==="Pulse",a=e.title==="Centers";return j.useEffect(()=>{if(i)return;const l=e.startsAt||e.performanceStartTime;if(!l){if(a){const u=()=>{const v=new Date,g=v.getHours().toString().padStart(2,"0"),f=v.getMinutes().toString().padStart(2,"0");s(`${g}:${f}`)};u();const d=setInterval(u,6e4);return()=>clearInterval(d)}return}if(a){const u=()=>{const v=Date.now(),f=(typeof l=="number"?l:new Date(l).getTime())-v;if(f<=0){s("00:00");return}const k=Math.floor(f/1e3),b=Math.floor(k/60),h=k%60;s(`${b.toString().padStart(2,"0")}:${h.toString().padStart(2,"0")}`)};u();const d=setInterval(u,1e3);return()=>clearInterval(d)}else{const u=()=>{const v=Date.now(),g=l-v;if(g<=0){n("0:00");return}const f=Math.floor(g/1e3),k=Math.floor(f/60),b=f%60;n(`${k}:${b.toString().padStart(2,"0")}`)};u();const d=setInterval(u,1e3);return()=>clearInterval(d)}},[e.startsAt,e.performanceStartTime,i,a]),o.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"flex-start"},children:[e.image&&o.jsx("img",{src:e.image,alt:e.title,style:{width:"80px",height:"80px",borderRadius:"0.5rem",objectFit:"cover",flexShrink:0}}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500",color:"rgba(255, 255, 255, 0.9)",marginBottom:"0.125rem"},children:e.title}),o.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",marginBottom:"0.125rem"},children:e.artist}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap",marginBottom:"0.25rem"},children:[e.startTime&&o.jsx("span",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)"},children:e.startTime}),a&&r&&o.jsxs("span",{className:"badge rounded-pill",style:{fontSize:"0.65rem",padding:"0.2rem 0.5rem",fontWeight:"600",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"rgba(255, 255, 255, 0.9)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:["LOOPS ",r]}),!i&&!a&&t&&o.jsxs("span",{className:"badge bg-danger rounded-pill",style:{fontSize:"0.65rem",padding:"0.2rem 0.5rem",fontWeight:"600"},children:["STARTS ",t]})]}),e.location&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[o.jsx("i",{className:"bi bi-geo-alt-fill",style:{fontSize:"0.625rem",color:"rgba(255, 255, 255, 0.5)"}}),o.jsx("span",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)"},children:e.location})]})]})]})}function dm({item:e,allItems:t,isEmphasized:n,isSelected:r,isHighlighted:s=!1,onClick:i,onOpenThread:a,onToggleMoment:l,isStarred:u=!1,onToggleStar:d,onUpdateTaskLocation:v,onCompleteTask:g,itemRef:f,collapseVariant:k="staff",expandedCards:b,onCardExpandChange:h,onRevealArtist:q}){const[m,p]=j.useState(!1),c=j.useRef(null),[y,S]=j.useState(null),[D,O]=j.useState(!1),U=j.useRef(null),[pe,X]=j.useState(!1),[Se,ce]=j.useState(!1),[A,te]=j.useState(e.deliveryLocation||null),ae=d===void 0,G=k==="visitor",[ee,N]=j.useState(null),Q=b&&b[e.id]!==void 0,$=e.type==="concierge"&&e.sender&&e.sender.type==="ai",J=e.type==="guest",ye=$||J?!1:Q?!b[e.id]:G?ee!==null?ee:!0:ee!==null?ee:!n,ve=j.useRef(null),Ne=j.useRef(null);j.useEffect(()=>{const x=()=>{X(document.body.hasAttribute("data-bottom-sheet-open"))};x();const P=new MutationObserver(x);return P.observe(document.body,{attributes:!0,attributeFilter:["data-bottom-sheet-open"]}),()=>P.disconnect()},[]);const V=j.useRef(ye);j.useEffect(()=>{if(V.current===!0&&ye===!1&&Ne.current){const x=setTimeout(()=>{Ne.current&&Ne.current.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},50);return()=>clearTimeout(x)}V.current=ye},[ye]);const oe=x=>{const P=new Date(x),Z=new Date-P,T=Math.floor(Z/6e4);if(T<1)return"Just now";if(T<60)return`${T}m ago`;const W=Math.floor(T/60);return W<24?`${W}h ago`:P.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},be=()=>{const x=e.assignedTo,P=x?Te(x.avatar):null,M=(x==null?void 0:x.type)==="staff"?"Staff":(x==null?void 0:x.type)==="ai"?"AI":"Guest",Z=e.forGuest,T=e.posPayload&&e.posPayload.cart&&e.posPayload.cart.length>0,W=T?e.posPayload.cart.reduce((B,he)=>B+he.quantity*he.price,0):0;return o.jsx("div",{className:"d-flex justify-content-between align-items-start",children:o.jsxs("div",{className:"flex-grow-1",children:[o.jsxs("div",{onClick:B=>{B.target.closest('button, a, [role="button"]')||(B.stopPropagation(),!$&&!J&&I())},style:{cursor:!$&&!J?"pointer":"default",userSelect:"none"},children:[x&&o.jsxs("div",{className:"d-flex align-items-center gap-2 mb-2",children:[o.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"40px",height:"40px",backgroundColor:x.type==="ai"?"#3B31FF":P,color:"#ffffff",fontSize:"0.875rem",fontWeight:"600",flexShrink:0},children:x.avatar}),o.jsxs("div",{children:[o.jsx("strong",{style:{color:"#ffffff",display:"block",marginBottom:"0",lineHeight:"1.2"},children:x.name}),o.jsx("small",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem",marginTop:"0",lineHeight:"1.2"},children:M})]})]}),o.jsx("div",{className:"d-flex align-items-center gap-2 mb-1",style:{marginLeft:x?"52px":"0"},children:o.jsx("strong",{style:{color:"#ffffff"},children:T?"Complete purchase":e.title})})]}),o.jsx("div",{style:{display:"grid",gridTemplateRows:ye?"0fr":"1fr",transition:"grid-template-rows 0.2s ease-in-out"},children:o.jsxs("div",{style:{overflow:"hidden",minHeight:0},children:[Z&&o.jsx("div",{className:"d-flex align-items-center gap-2 mb-2",style:{marginLeft:x?"52px":"0"},children:o.jsxs("small",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"},children:["for ",Z.name]})}),o.jsx("div",{className:"d-flex align-items-center gap-2 mb-2",style:{marginLeft:x?"52px":"0"},children:o.jsxs("div",{className:"position-relative",ref:U,children:[o.jsxs("button",{type:"button",className:"btn btn-link p-0 text-decoration-none",onClick:B=>{B.stopPropagation(),O(!D)},style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem",padding:"0",border:"none",background:"none",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[o.jsxs("span",{children:["Location: ",(()=>{const B=e.location;return B==="lobby"?"Lobby":B==="bar"?"Bar":B==="bathroom"?"Bathroom":B==="gallery-1"?"Gallery 1":B==="gallery-2"?"Gallery 2":B==="gallery-3"?"Gallery 3":B==="gallery-4"?"Gallery 4":B==="gift-shop"?"Gift Shop":B==="cinemateque"?"Cinemateque":"Not specified"})()]}),o.jsx("i",{className:"bi bi-chevron-down",style:{fontSize:"0.625rem",fontWeight:"bold"}})]}),D&&o.jsx("div",{className:"dropdown-menu show",style:{position:"absolute",top:"100%",left:0,marginTop:"0.25rem",backgroundColor:"#0a0a0a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"0.375rem",minWidth:"150px",zIndex:1001,boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",padding:"0.25rem"},onClick:B=>B.stopPropagation(),children:["","lobby","bar","bathroom","gallery-1","gallery-2","gallery-3","gallery-4","gift-shop","cinemateque"].map(B=>{const he=B===""?"Not specified":B==="lobby"?"Lobby":B==="bar"?"Bar":B==="bathroom"?"Bathroom":B==="gallery-1"?"Gallery 1":B==="gallery-2"?"Gallery 2":B==="gallery-3"?"Gallery 3":B==="gallery-4"?"Gallery 4":B==="gift-shop"?"Gift Shop":B==="cinemateque"?"Cinemateque":B,Pe=(e.location||"")===B;return o.jsx("button",{className:"dropdown-item",style:{color:Pe?"#0d6efd":"rgba(255, 255, 255, 0.8)",backgroundColor:Pe?"rgba(13, 110, 253, 0.1)":"transparent",fontSize:"0.75rem",padding:"0.375rem 0.75rem",border:"none",width:"100%",textAlign:"left",cursor:"pointer"},onClick:je=>{je.stopPropagation(),je.preventDefault(),v&&v(e.id,B||null),O(!1)},onMouseEnter:je=>{Pe||(je.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)")},onMouseLeave:je=>{Pe||(je.currentTarget.style.backgroundColor="transparent")},children:he},B)})})]})}),T&&o.jsxs("div",{style:{marginLeft:x?"52px":"0",marginBottom:"0.5rem"},children:[o.jsxs("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",marginBottom:"0.25rem"},children:["Complete purchase: ",e.posPayload.cart.map(B=>`${B.quantity} ${B.name}`).join(", ")]}),W>0&&e.posPayload.paymentMethod&&o.jsxs("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",fontWeight:"600"},children:["Settlement: $",W.toFixed(2),"  ",e.posPayload.paymentMethod==="cash"?"Cash":e.posPayload.paymentMethod==="card"?"Card":"Card on File"]})]}),e.description&&e.description.trim()&&(!T||T&&e.description!=="Complete purchase")&&o.jsxs("div",{style:{marginLeft:x?"52px":"0",marginTop:T?"0.5rem":"0",marginBottom:"1.5rem"},children:[o.jsx("span",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",fontWeight:"500"},children:"Note: "}),o.jsx("span",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)"},children:e.description})]}),T&&o.jsxs("div",{style:{marginLeft:x?"52px":"0",marginTop:"0.75rem",display:"flex",gap:"0.5rem"},children:[o.jsx("button",{className:"btn btn-primary btn-sm",onClick:B=>{B.stopPropagation(),alert("Complete in Square (stub)")},style:{fontSize:"0.75rem",padding:"0.25rem 0.75rem"},children:"Complete in Square"}),o.jsx("button",{className:"btn btn-outline-secondary btn-sm",onClick:B=>{B.stopPropagation(),i()},style:{fontSize:"0.75rem",padding:"0.25rem 0.75rem"},children:"Mark done"})]})]})})]})})},Te=x=>{const P=["#0d6efd","#6f42c1","#d63384","#dc3545","#fd7e14","#ffc107","#20c997","#198754"],M=x.charCodeAt(0)%P.length;return P[M]};j.useEffect(()=>{const x=P=>{c.current&&!c.current.contains(P.target)&&p(!1),U.current&&!U.current.contains(P.target)&&O(!1)};if(m||D)return document.addEventListener("mousedown",x),()=>{document.removeEventListener("mousedown",x)}},[m,D]),j.useEffect(()=>{const x=e.type==="system"&&e.performanceStartTime?e.performanceStartTime:e.type==="moment"&&e.momentType==="ticket"&&e.startsAt?e.startsAt:null;if(!x){S(null);return}const P=()=>{const Z=Date.now(),T=x-Z;if(T<=0){S("0:00");return}const W=Math.floor(T/1e3),B=Math.floor(W/60),he=W%60;S(`${B}:${he.toString().padStart(2,"0")}`)};P();const M=setInterval(P,1e3);return()=>clearInterval(M)},[e.type,e.performanceStartTime,e.momentType,e.startsAt]);const ne=()=>{const x=e.name||"Guest",P=e.avatar||x.split(" ").map(B=>B[0]).join("").toUpperCase().slice(0,2),M=Te(P),Z=e.threadId?t.filter(B=>B.threadId===e.threadId&&B.type==="concierge").sort((B,he)=>he.timestamp-B.timestamp):[],T=Z.length,W=T>0?Z[0]:null;return o.jsxs("div",{children:[o.jsxs("div",{className:"d-flex align-items-start gap-3 mb-2",onClick:B=>{B.target.closest('button, a, [role="button"]')||(B.stopPropagation(),!$&&!J&&I())},style:{cursor:!$&&!J?"pointer":"default",userSelect:"none"},children:[o.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"48px",height:"48px",backgroundColor:M,color:"#ffffff",fontSize:"1rem",fontWeight:"600"},children:P}),o.jsxs("div",{className:"flex-grow-1",style:{minWidth:0},children:[o.jsxs("div",{className:"d-flex align-items-center gap-2 mb-1",children:[o.jsx("strong",{style:{color:"#ffffff",fontSize:"0.875rem"},children:x}),o.jsx("small",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"},children:"Guest"})]}),o.jsx("p",{className:"mb-0",style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)"},children:e.message})]})]}),o.jsx("div",{style:{display:"grid",gridTemplateRows:ye?"0fr":"1fr",transition:"grid-template-rows 0.2s ease-in-out"},children:o.jsxs("div",{style:{overflow:"hidden",minHeight:0},children:[W&&o.jsxs("div",{className:"d-flex align-items-start",style:{marginLeft:"64px",marginTop:"0.5rem",cursor:"pointer",padding:"8px",marginBottom:"1.5rem"},onClick:B=>{B.stopPropagation(),a(e)},onMouseEnter:B=>{B.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)",B.currentTarget.style.borderRadius="0.25rem"},onMouseLeave:B=>{B.currentTarget.style.backgroundColor="transparent"},children:[o.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"32px",height:"32px",backgroundColor:"#3B31FF",color:"#ffffff",fontSize:"0.75rem",fontWeight:"600",marginRight:"0.75rem"},children:"AI"}),o.jsxs("div",{className:"flex-grow-1",style:{minWidth:0,padding:"0.25rem 0"},children:[o.jsxs("div",{className:"d-flex align-items-center gap-2 mb-1",children:[o.jsx("strong",{style:{color:"rgba(130, 170, 210, 1)",fontSize:"0.875rem"},children:"Canyon Concierge"}),T>1&&o.jsxs("span",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"},children:["+",T-1," more"]})]}),o.jsx("p",{className:"mb-0",style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)"},children:W.message})]})]}),!W&&e.threadId&&o.jsxs("div",{className:"thread-indicator d-flex align-items-center gap-2",style:{marginLeft:"60px",cursor:"pointer",padding:"0.25rem 0.5rem",borderRadius:"0.25rem",transition:"background-color 0.2s"},onClick:B=>{B.stopPropagation(),a(e)},onMouseEnter:B=>B.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)",onMouseLeave:B=>B.currentTarget.style.backgroundColor="transparent",children:[o.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"24px",height:"24px",backgroundColor:"#3B31FF",color:"#ffffff",fontSize:"0.625rem",fontWeight:"600"},children:"AI"}),o.jsx("span",{style:{color:"rgba(255, 255, 255, 0.8)",fontSize:"0.875rem"},children:"View thread"})]})]})})]})},Fe=()=>{const x=e.recipients||[],P=e.sender&&e.sender.type==="staff",M=P?e.sender:{name:"Canyon Concierge",avatar:"AI"},Z=P?Te(M.avatar):"#3B31FF";return o.jsxs("div",{className:"d-flex align-items-start gap-2",children:[o.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center flex-shrink-0",onClick:T=>{T.target.closest('button, a, [role="button"]')||(T.stopPropagation(),!$&&!J&&I())},style:{width:"48px",height:"48px",backgroundColor:Z,color:"#ffffff",fontSize:"1rem",fontWeight:"600",cursor:!$&&!J?"pointer":"default",userSelect:"none"},children:M.avatar}),o.jsxs("div",{className:"flex-grow-1",style:{minWidth:0},children:[o.jsx("div",{className:"mb-1",onClick:T=>{T.target.closest('button, a, [role="button"]')||(T.stopPropagation(),!$&&!J&&I())},style:{cursor:!$&&!J?"pointer":"default",userSelect:"none"},children:o.jsx("strong",{style:{color:"#ffffff",fontSize:"0.875rem"},children:M.name})}),o.jsx("div",{style:{display:"grid",gridTemplateRows:ye?"0fr":"1fr",transition:"grid-template-rows 0.2s ease-in-out"},children:o.jsxs("div",{style:{overflow:"hidden",minHeight:0},children:[x.length>0&&o.jsxs("div",{className:"mb-1 d-flex align-items-center gap-1 flex-wrap",children:[o.jsx("i",{className:"bi bi-arrow-right",style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem",fontWeight:"bold"}}),x.map((T,W)=>{const B=T.isSpecial&&T.type==="ai"?"#3B31FF":Te(T.name),he=T.name.split(" ").map(Pe=>Pe[0]).join("").toUpperCase().slice(0,2);return o.jsxs("div",{className:"d-flex align-items-center gap-1",children:[o.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"16px",height:"16px",backgroundColor:B,color:"#ffffff",fontSize:"0.5rem",fontWeight:"600",flexShrink:0},children:T.isSpecial?T.type==="ai"?"AI":"S":he}),o.jsx("small",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"},children:T.name}),W<x.length-1&&o.jsx("span",{style:{color:"rgba(255, 255, 255, 0.4)",fontSize:"0.75rem"},children:","})]},T.id)})]}),o.jsx("p",{className:"mb-0",style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",marginBottom:$t?"2.5rem":"0"},children:e.message}),e.posReceipt&&o.jsxs("div",{style:{marginTop:"0.5rem",padding:"0.5rem",backgroundColor:"rgba(255, 193, 7, 0.1)",borderRadius:"0.25rem",border:"1px solid rgba(255, 193, 7, 0.2)"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.7)",marginBottom:"0.25rem",fontWeight:"500"},children:"Receipt"}),e.posReceipt.cart.map(T=>o.jsxs("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",display:"flex",justifyContent:"space-between"},children:[o.jsxs("span",{children:[T.quantity," ",T.name]}),o.jsxs("span",{children:["$",(T.quantity*T.price).toFixed(2)]})]},T.id)),o.jsxs("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",display:"flex",justifyContent:"space-between",marginTop:"0.25rem",paddingTop:"0.25rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)",fontWeight:"600"},children:[o.jsx("span",{children:"Settlement"}),o.jsxs("span",{children:["$",e.posReceipt.total.toFixed(2),"  ",e.posReceipt.paymentMethod==="cash"?"Cash":e.posReceipt.paymentMethod==="card"?"Card":"Card on File"]})]})]})]})})]})]})},Ze=()=>{const x=e.type==="system"&&e.title==="Performance starting soon";return o.jsxs("div",{children:[o.jsxs("div",{onClick:P=>{P.target.closest('button, a, [role="button"]')||(P.stopPropagation(),!$&&!J&&I())},style:{cursor:!$&&!J?"pointer":"default",userSelect:"none"},children:[o.jsxs("div",{className:"d-flex align-items-center gap-2 mb-2",children:[o.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"40px",height:"40px",backgroundColor:"#3B31FF",color:"#ffffff",fontSize:"0.875rem",fontWeight:"600",flexShrink:0},children:"AI"}),o.jsxs("div",{children:[o.jsx("strong",{style:{color:"rgba(130, 170, 210, 1)",display:"block",marginBottom:"0",lineHeight:"1.2"},children:"Canyon Concierge"}),o.jsx("small",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem",marginTop:"0",lineHeight:"1.2"},children:"System"})]})]}),o.jsx("div",{className:"d-flex align-items-center gap-2 mb-1",style:{marginLeft:"52px"},children:o.jsx("strong",{style:{color:e.title==="Shift briefing"||e.title==="Post-shift summary"?"rgba(255, 255, 255, 1)":"rgba(130, 170, 210, 1)",fontSize:e.title==="Shift briefing"||e.title==="Post-shift summary"?"24px":"inherit"},children:e.title})})]}),o.jsx("div",{style:{display:"grid",gridTemplateRows:ye?"0fr":"1fr",transition:"grid-template-rows 0.2s ease-in-out"},children:o.jsxs("div",{style:{overflow:"hidden",minHeight:0},children:[x&&o.jsxs("div",{style:{marginLeft:"52px",marginTop:"0.5rem",display:"flex",gap:"0.75rem",alignItems:"flex-start"},children:[o.jsx("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ6crUzfZ7ak2LjN_qjOsgrKkkNbrJ8q2G1hA&s",alt:"DOKU by Lu Yang",style:{width:"80px",height:"80px",borderRadius:"0.5rem",objectFit:"cover",flexShrink:0}}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("div",{style:{marginBottom:"0.25rem"},children:o.jsx("small",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.875rem",fontWeight:"500"},children:"DOKU by Lu Yang"})}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[o.jsx("small",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"},children:"8:00pm"}),y&&o.jsx("span",{className:"badge bg-danger rounded-pill",style:{fontSize:"0.65rem",padding:"0.2rem 0.5rem",fontWeight:"600"},children:y})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[o.jsx("i",{className:"bi bi-geo-alt-fill",style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)"}}),o.jsx("small",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"},children:"Cinemateque"})]})]})]}),!x&&y&&o.jsx("div",{style:{marginLeft:"52px",marginTop:"0.25rem"},children:o.jsx("span",{className:"badge bg-danger rounded-pill",style:{fontSize:"0.65rem",padding:"0.2rem 0.5rem",fontWeight:"600"},children:y})}),e.type==="system"&&e.note&&o.jsxs("p",{className:"mb-0",style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.6)",fontStyle:"italic",marginLeft:"52px",marginTop:"0.25rem"},children:["Note: ",e.note]}),e.type==="system"&&e.title==="Shift briefing"&&e.briefingData&&o.jsxs("div",{style:{marginLeft:"52px",marginTop:"0.75rem"},children:[o.jsxs("div",{style:{marginBottom:"1rem"},children:[o.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"rgba(255, 255, 255, 0.9)",marginBottom:"0.5rem"},children:"Schedule"}),e.briefingData.schedule&&e.briefingData.schedule.map((P,M)=>o.jsx(tu,{event:P},M))]}),e.briefingData.visitors&&o.jsxs("div",{style:{marginBottom:"1rem"},children:[o.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"rgba(255, 255, 255, 0.9)",marginBottom:"0.5rem"},children:"Visitors"}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{display:"flex",alignItems:"center",gap:"-0.25rem"},children:e.briefingData.visitors&&e.briefingData.visitors.avatars&&e.briefingData.visitors.avatars.slice(0,4).map((P,M)=>o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:Te(P.avatar||P.name),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"500",color:"#ffffff",marginLeft:M>0?"-0.5rem":"0",border:"2px solid rgba(20, 20, 20, 1)",zIndex:4-M},children:P.avatar||(P.name?P.name.charAt(0):"?")},M))}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)"},children:[e.briefingData.visitors.current,"/",e.briefingData.visitors.expected," Expected"]})]}),e.briefingData.visitors.trend&&e.briefingData.visitors.trend.length>0&&o.jsxs("div",{style:{marginTop:"0.5rem"},children:[o.jsxs("svg",{width:"100%",height:"50",viewBox:"0 0 100 50",preserveAspectRatio:"none",style:{marginBottom:"0.25rem"},children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:`visitorGradient-${e.id}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"rgba(59, 49, 255, 0.4)"}),o.jsx("stop",{offset:"100%",stopColor:"rgba(59, 49, 255, 0.05)"})]})}),(()=>{const P=e.briefingData.visitors.trend.map(me=>typeof me=="object"?me.value:me),M=Math.max(...P),Z=Math.min(...P),T=M-Z||1,W=50,B=100,Pe=e.briefingData.visitors.trend.map((me,kt)=>{const Ye=typeof me=="object"?me.value:me,gr=kt/(e.briefingData.visitors.trend.length-1)*B,wn=W-(Ye-Z)/T*W;return{x:gr,y:wn}}).map((me,kt)=>kt===0?`M${me.x},${me.y}`:`L${me.x},${me.y}`).join(" "),je=`${Pe}L${B},${W}L0,${W}Z`;return o.jsxs(o.Fragment,{children:[o.jsx("path",{d:je,fill:`url(#visitorGradient-${e.id})`,fillOpacity:"1"}),o.jsx("path",{d:Pe,stroke:"rgba(59, 49, 255, 0.8)",strokeWidth:"1.5",fill:"none"})]})})()]}),o.jsx("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.625rem",color:"rgba(255, 255, 255, 0.5)"},children:e.briefingData.visitors.trend.map((P,M)=>typeof P=="object"&&P.time?o.jsx("span",{children:P.time},M):null)})]})]}),e.briefingData.staff&&o.jsxs("div",{style:{marginBottom:"1rem"},children:[o.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"rgba(255, 255, 255, 0.9)",marginBottom:"0.5rem"},children:"Staff"}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{display:"flex",alignItems:"center",gap:"-0.25rem"},children:e.briefingData.staff.avatars&&e.briefingData.staff.avatars.slice(0,4).map((P,M)=>o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:Te(P.avatar),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"500",color:"#ffffff",marginLeft:M>0?"-0.5rem":"0",border:"2px solid rgba(20, 20, 20, 1)",zIndex:4-M},children:P.avatar},M))}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)"},children:[e.briefingData.staff.current,"/",e.briefingData.staff.expected," Expected"]})]})]}),e.briefingData.tasks&&o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"rgba(255, 255, 255, 0.9)",marginBottom:"0.5rem"},children:"Tasks"}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)"},children:[e.briefingData.tasks.incomplete," incomplete"]})]})]}),e.type==="system"&&e.title==="Post-shift summary"&&e.summaryData&&o.jsxs("div",{style:{marginLeft:"52px",marginTop:"0.75rem"},children:[o.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.25rem",flexWrap:"wrap"},children:[o.jsxs("div",{style:{flex:"1 1 200px",padding:"0.875rem",backgroundColor:"rgba(255, 255, 255, 0.03)",borderRadius:"0.5rem",border:"1px solid rgba(255, 255, 255, 0.08)"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",marginBottom:"0.25rem",fontWeight:"500"},children:"Attendance"}),o.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"0.5rem"},children:[o.jsx("span",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#ffffff"},children:e.summaryData.attendance.actual}),o.jsxs("span",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.5)"},children:["/ ",e.summaryData.attendance.expected]})]}),o.jsx("div",{style:{marginTop:"0.5rem",height:"4px",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"2px",overflow:"hidden"},children:o.jsx("div",{style:{height:"100%",width:`${e.summaryData.attendance.percentage}%`,backgroundColor:"rgba(59, 49, 255, 0.8)",borderRadius:"2px",transition:"width 0.3s ease"}})})]}),o.jsxs("div",{style:{flex:"1 1 200px",padding:"0.875rem",backgroundColor:"rgba(255, 255, 255, 0.03)",borderRadius:"0.5rem",border:"1px solid rgba(255, 255, 255, 0.08)"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",marginBottom:"0.25rem",fontWeight:"500"},children:"Peak Pressure"}),o.jsxs("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#ffffff"},children:[e.summaryData.peakPressure.start,"  ",e.summaryData.peakPressure.end]})]})]}),o.jsxs("div",{style:{marginBottom:"1.25rem"},children:[o.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"rgba(255, 255, 255, 0.9)",marginBottom:"0.75rem"},children:"Top Request Themes"}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.625rem"},children:e.summaryData.requestThemes.map((P,M)=>{const Z=Math.max(...e.summaryData.requestThemes.map(W=>W.count)),T=P.count/Z*100;return o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.7)",minWidth:"100px",fontWeight:"500"},children:P.label}),o.jsx("div",{style:{flex:1,height:"20px",backgroundColor:"rgba(255, 255, 255, 0.08)",borderRadius:"10px",overflow:"hidden",position:"relative"},children:o.jsx("div",{style:{height:"100%",width:`${T}%`,backgroundColor:P.color,borderRadius:"10px",transition:"width 0.4s ease",display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:"0.5rem"},children:o.jsx("span",{style:{fontSize:"0.625rem",fontWeight:"600",color:"#ffffff",textShadow:"0 1px 2px rgba(0, 0, 0, 0.3)"},children:P.count})})})]},M)})})]}),o.jsxs("div",{style:{marginBottom:"1.25rem"},children:[o.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"rgba(255, 255, 255, 0.9)",marginBottom:"0.75rem"},children:"Friction Signals"}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.625rem"},children:e.summaryData.frictionSignals.map((P,M)=>{const Z=Math.max(...e.summaryData.frictionSignals.map(W=>W.count)),T=P.count/Z*100;return o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.7)",minWidth:"140px",fontWeight:"500"},children:P.label}),o.jsx("div",{style:{flex:1,height:"20px",backgroundColor:"rgba(255, 255, 255, 0.08)",borderRadius:"10px",overflow:"hidden",position:"relative"},children:o.jsx("div",{style:{height:"100%",width:`${T}%`,backgroundColor:P.color,borderRadius:"10px",transition:"width 0.4s ease",display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:"0.5rem"},children:o.jsx("span",{style:{fontSize:"0.625rem",fontWeight:"600",color:"#ffffff",textShadow:"0 1px 2px rgba(0, 0, 0, 0.3)"},children:P.count})})})]},M)})})]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.875rem",marginBottom:"1.25rem"},children:[o.jsxs("div",{style:{padding:"0.875rem",backgroundColor:"rgba(98, 200, 163, 0.1)",borderRadius:"0.5rem",border:"1px solid rgba(98, 200, 163, 0.2)"},children:[o.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",color:"rgba(98, 200, 163, 1)",marginBottom:"0.375rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Win"}),o.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.9)",lineHeight:"1.4"},children:e.summaryData.win})]}),o.jsxs("div",{style:{padding:"0.875rem",backgroundColor:"rgba(255, 200, 87, 0.1)",borderRadius:"0.5rem",border:"1px solid rgba(255, 200, 87, 0.2)"},children:[o.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",color:"rgba(255, 200, 87, 1)",marginBottom:"0.375rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Opportunity"}),o.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.9)",lineHeight:"1.4"},children:e.summaryData.opportunity})]}),o.jsxs("div",{style:{padding:"0.875rem",backgroundColor:"rgba(130, 170, 210, 0.1)",borderRadius:"0.5rem",border:"1px solid rgba(130, 170, 210, 0.2)"},children:[o.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",color:"rgba(130, 170, 210, 1)",marginBottom:"0.375rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:e.summaryData.nextTimeLabel||"Next Time"}),o.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.9)",lineHeight:"1.4"},children:e.summaryData.nextTime})]})]}),e.message&&o.jsx("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:o.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.7)",whiteSpace:"pre-line",lineHeight:"1.6",fontStyle:"italic"},children:e.message})})]}),e.type==="system"&&e.message&&!x&&e.title!=="Shift briefing"&&e.title!=="Post-shift summary"&&o.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",marginLeft:"52px",marginTop:"0.25rem",whiteSpace:"pre-line",lineHeight:"1.5"},children:e.message}),e.type!=="system"&&e.message&&o.jsx("p",{className:"mb-0",style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",marginLeft:"52px"},children:e.message})]})})]})},pt=()=>{const x=e.momentType==="arrival",P=!x||e.state!=="collapsed",M=()=>{if(!e.startsAt)return e.subtitle||"";const T=e.startsAt-Date.now();if(T<=0)return`${e.subtitlePrefix||""}Starts now`.trim();const W=Math.floor(T/1e3),B=Math.floor(W/60),he=W%60;return`${e.locationLabel||""}${e.locationLabel?"  ":""}Starts in ${B}:${he.toString().padStart(2,"0")}`},Z=T=>{switch(T){case"washroom":return"bi-badge-wc";case"locker":return"bi-file-lock";case"cinema":return"bi-person-video";default:return"bi-info-circle"}};return o.jsxs("div",{children:[e.momentType==="arrival"?o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",userSelect:"none"},onClick:T=>{T.target.closest('button, a, [role="button"]')||(T.stopPropagation(),!$&&!J&&I())},children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"0.75rem",backgroundColor:"rgba(255, 255, 255, 0.06)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:o.jsx("i",{className:`bi ${P?"bi-chevron-down":"bi-chevron-right"}`,style:{fontSize:"1.125rem",color:"rgba(255,255,255,0.75)"}})}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("div",{style:{fontSize:"0.95rem",fontWeight:600,color:"rgba(255,255,255,0.95)"},children:e.title}),o.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.6)"},children:M()})]})]}):o.jsxs("div",{onClick:T=>{T.target.closest('button, a, [role="button"]')||(T.stopPropagation(),!$&&!J&&I())},style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:e.momentType==="ticket"?"1rem":"0",paddingBottom:e.momentType==="ticket"?"0.5rem":"0",cursor:!$&&!J?"pointer":"default",userSelect:"none"},children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"0.75rem",backgroundColor:"rgba(255, 255, 255, 0.06)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:o.jsx("i",{className:`bi ${e.momentType==="ticket"?"bi-qr-code":e.momentType==="amenities"?"bi-signpost-split":e.momentType==="schedule"?"bi-calendar-event":e.momentType==="bar-menu"?"bi-cup-straw":e.momentType==="gift-shop"?"bi-bag":e.momentType==="feedback"?"bi-chat-left-text":e.momentType==="artist"?"bi-person-badge":"bi-info-circle"}`,style:{fontSize:"1.125rem",color:"rgba(255,255,255,0.75)"}})}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("div",{style:{fontSize:"0.95rem",fontWeight:600,color:"rgba(255,255,255,0.95)"},children:e.title}),e.momentType==="amenities"&&e.subtitle&&o.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",marginTop:"0.25rem"},children:e.subtitle}),e.momentType==="ticket"&&(e.locationLabel||e.startsAt)&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap",marginTop:"0.25rem"},children:[e.locationLabel&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[o.jsx("i",{className:"bi bi-geo-alt-fill",style:{fontSize:"0.625rem",color:"rgba(255, 255, 255, 0.7)"}}),o.jsx("span",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.85)"},children:e.locationLabel})]}),e.startsAt&&(()=>{const W=e.title&&e.title.includes("DOKU")?"8:00pm":(()=>{const B=new Date(e.startsAt),he=B.getHours(),Pe=he>=12?"pm":"am",je=he%12||12,me=B.getMinutes();return me===0?`${je}:00${Pe}`:`${je}:${me.toString().padStart(2,"0")}${Pe}`})();return o.jsx("span",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.85)"},children:W})})(),y&&o.jsx("span",{className:"badge bg-danger rounded-pill",style:{fontSize:"0.65rem",padding:"0.2rem 0.5rem",fontWeight:"600"},children:y})]})]})]}),x&&!P&&e.collapsedSummary&&o.jsx("div",{style:{marginTop:"0.75rem",color:"rgba(255,255,255,0.75)",fontSize:"0.875rem"},children:e.collapsedSummary}),o.jsx("div",{style:{display:"grid",gridTemplateRows:ye?"0fr":"1fr",transition:"grid-template-rows 0.2s ease-in-out"},children:o.jsx("div",{style:{overflow:"hidden",minHeight:0},children:o.jsxs("div",{style:{marginTop:e.momentType==="ticket"?"4rem":"0.75rem"},children:[e.momentType==="arrival"&&o.jsxs("div",{style:{position:"relative",width:"100%",height:"220px",borderRadius:"1.25rem",overflow:"hidden",backgroundColor:"rgba(255, 255, 255, 0.06)",border:"1px solid rgba(255, 255, 255, 0.08)"},children:[e.heroImage?o.jsx("img",{src:e.heroImage,alt:e.title,style:{width:"100%",height:"100%",objectFit:"cover",display:"block"},onError:T=>{const W=e.heroImageFallback;if(W&&T.currentTarget.src!==W){T.currentTarget.src=W;return}T.currentTarget.style.display="none"}}):null,e.startsAt&&o.jsx("div",{style:{position:"absolute",top:"12px",left:"12px",backgroundColor:"rgba(0, 0, 0, 0.55)",color:"rgba(255, 255, 255, 0.95)",padding:"0.4rem 0.6rem",borderRadius:"999px",fontSize:"0.8rem",fontWeight:700,letterSpacing:"0.02em",backdropFilter:"blur(6px)"},children:(()=>{const W=M().match(/Starts in\\s+(\\d+:\\d{2})/i);return W?`STARTS ${W[1]}`:"STARTS SOON"})()})]}),e.momentType==="ticket"&&o.jsxs("div",{style:{position:"relative",width:"100%",minHeight:"350px",overflow:"hidden",zIndex:2,display:"flex",flexDirection:"column"},children:[o.jsx("div",{style:{flex:1,position:"relative"},children:e.qrCode&&o.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:2,width:"180px",height:"180px",backgroundColor:"#ffffff",borderRadius:"24px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 10px 30px rgba(0,0,0,0.5)"},children:o.jsx("img",{src:"https://www.youar.org/images/qr.gif",alt:"Ticket QR code",style:{width:"150px",height:"150px",borderRadius:"18px",objectFit:"contain"},onError:T=>{console.error("QR code image failed to load:",T)}})})}),e.description&&o.jsx("div",{style:{padding:"1.25rem",fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.95)",lineHeight:1.6},children:e.description}),ae&&e.momentType==="ticket"&&e.title&&(e.title.includes("DOKU")||e.title.includes("Lu Yang"))&&q&&o.jsx("div",{style:{padding:"0 1.25rem 1.25rem 1.25rem"},children:o.jsx("button",{onClick:T=>{T.stopPropagation(),q({artistId:"lu_yang",source:"doku_cta"})},style:{background:"none",border:"none",color:"rgba(255, 255, 255, 0.7)",fontSize:"0.875rem",textDecoration:"underline",cursor:"pointer",padding:"0",fontFamily:"inherit"},children:"More about the artist"})})]}),e.momentType==="amenities"&&Array.isArray(e.items)&&o.jsx("div",{style:{marginTop:"25px",marginBottom:"25px",textAlign:"left"},children:o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:e.items.map((T,W)=>o.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"flex-start"},children:[o.jsx("i",{className:`bi ${Z(T.icon)}`,style:{color:"rgba(255,255,255,0.7)",marginTop:"0.1rem",fontSize:"19px"}}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("div",{style:{fontSize:"19px",color:"rgba(255,255,255,0.85)"},children:T.label}),T.hint&&o.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.6)"},children:T.hint})]})]},`amenity-${W}`))})}),e.momentType==="schedule"&&Array.isArray(e.events)&&o.jsx("div",{style:{marginTop:"25px",marginBottom:"25px"},children:o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:e.events.map((T,W)=>o.jsx(tu,{event:T},W))})}),e.momentType==="bar-menu"&&o.jsxs("div",{style:{marginTop:"25px",marginBottom:"25px"},children:[e.mostPopular&&e.mostPopular.length>0&&o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.6)",marginBottom:"0.75rem"},children:"Most Popular"}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:e.mostPopular.map((T,W)=>o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"1rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flex:1,minWidth:0},children:[o.jsx("button",{style:{width:"32px",height:"32px",borderRadius:"50%",border:"1px solid rgba(255, 255, 255, 0.3)",backgroundColor:"transparent",color:"rgba(255, 255, 255, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",flexShrink:0},children:o.jsx("i",{className:"bi bi-plus",style:{fontSize:"0.875rem"}})}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("div",{style:{fontSize:"0.875rem",fontWeight:600,color:"rgba(255, 255, 255, 0.95)"},children:T.name}),T.description&&o.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)"},children:T.description})]})]}),o.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:600,color:"rgba(255, 255, 255, 0.95)",flexShrink:0},children:["$",T.price]})]},`drink-${W}`))})]}),e.deliveryLocation&&o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{height:"1px",backgroundColor:"rgba(255, 255, 255, 0.1)",marginBottom:"1rem"}}),o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem",cursor:"pointer"},onClick:T=>{T.stopPropagation(),ce(!Se)},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flex:1},children:[o.jsx("i",{className:"bi bi-geo-alt",style:{fontSize:"1rem",color:"rgba(255, 255, 255, 0.6)"}}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.625rem",color:"rgba(255, 255, 255, 0.6)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"DELIVERY LOCATION"}),o.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.95)",marginTop:"0.125rem"},children:A||e.deliveryLocation})]})]}),o.jsx("i",{className:`bi ${Se?"bi-chevron-up":"bi-chevron-down"}`,style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",transition:"transform 0.2s"}})]}),o.jsx("div",{style:{display:"grid",gridTemplateRows:Se?"1fr":"0fr",transition:"grid-template-rows 0.2s ease-in-out",marginBottom:Se?"1rem":"0",overflow:"hidden"},children:o.jsx("div",{style:{minHeight:0,paddingLeft:"2rem"},children:["Pick up at bar","Main Hall","Gallery 1","Gallery 2","Cinemateque"].map(T=>o.jsxs("div",{onClick:W=>{W.stopPropagation(),te(T),ce(!1)},style:{padding:"0.75rem 0",cursor:"pointer",borderBottom:T!=="Cinemateque"?"1px solid rgba(255, 255, 255, 0.1)":"none",color:(A||e.deliveryLocation)===T?"rgba(255, 255, 255, 0.95)":"rgba(255, 255, 255, 0.7)",fontSize:"0.875rem",display:"flex",alignItems:"center",justifyContent:"space-between"},onMouseEnter:W=>{(A||e.deliveryLocation)!==T&&(W.currentTarget.style.color="rgba(255, 255, 255, 0.9)")},onMouseLeave:W=>{(A||e.deliveryLocation)!==T&&(W.currentTarget.style.color="rgba(255, 255, 255, 0.7)")},children:[o.jsx("span",{children:T}),(A||e.deliveryLocation)===T&&o.jsx("i",{className:"bi bi-check-circle",style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.95)"}})]},T))})})]})]}),e.paymentMethod&&o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{height:"1px",backgroundColor:"rgba(255, 255, 255, 0.1)",marginBottom:"1rem"}}),o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem",cursor:"pointer"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flex:1},children:[o.jsx("i",{className:"bi bi-credit-card",style:{fontSize:"1rem",color:"rgba(255, 255, 255, 0.6)"}}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.625rem",color:"rgba(255, 255, 255, 0.6)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"PAYMENT METHOD"}),o.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.95)",marginTop:"0.125rem"},children:e.paymentMethod})]})]}),o.jsx("i",{className:"bi bi-chevron-right",style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)"}})]})]}),e.total!==void 0&&o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{height:"1px",backgroundColor:"rgba(255, 255, 255, 0.1)",marginBottom:"1rem"}}),o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem"},children:[o.jsx("div",{style:{fontSize:"0.875rem",fontWeight:600,color:"rgba(255, 255, 255, 0.95)"},children:"TOTAL"}),o.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:600,color:"rgba(255, 255, 255, 0.95)"},children:["$",e.total.toFixed(2)]})]})]}),e.showActions&&o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[o.jsx("button",{style:{width:"100%",padding:"0.75rem",borderRadius:"0.5rem",backgroundColor:"#0d6efd",color:"#ffffff",border:"none",fontSize:"0.875rem",fontWeight:600,cursor:"pointer"},children:"Confirm Order"}),o.jsx("div",{style:{textAlign:"center"},children:o.jsx("span",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.6)",cursor:"pointer"},children:"Full Menu"})})]})]}),e.momentType==="gift-shop"&&Array.isArray(e.products)&&o.jsxs("div",{style:{marginTop:"25px",marginBottom:"25px"},children:[o.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.6)",marginBottom:"0.75rem"},children:"Featured"}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:e.products.map((T,W)=>o.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"flex-start"},children:[T.image&&o.jsx("img",{src:T.image,alt:T.title,style:{width:"80px",height:"80px",borderRadius:"0.5rem",objectFit:"cover",flexShrink:0}}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("div",{style:{fontSize:"0.875rem",fontWeight:500,color:"rgba(255, 255, 255, 0.95)",marginBottom:"0.25rem"},children:T.title}),T.author&&o.jsxs("div",{style:{fontSize:"0.75rem",fontStyle:"italic",color:"rgba(255, 255, 255, 0.6)",textDecoration:"underline",marginBottom:"0.125rem"},children:["by ",T.author]}),T.contributors&&o.jsxs("div",{style:{fontSize:"0.75rem",fontStyle:"italic",color:"rgba(255, 255, 255, 0.6)"},children:["and ",T.contributors," more"]})]}),T.price&&o.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:500,color:"rgba(255, 255, 255, 0.95)",flexShrink:0},children:["$",T.price]})]},`product-${W}`))})]}),e.momentType==="artist"&&o.jsxs("div",{style:{marginTop:"25px",marginBottom:"25px"},children:[e.subhead&&o.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.7)",marginBottom:"1rem",lineHeight:1.5},children:e.subhead}),e.imageUrl&&o.jsx("div",{style:{marginBottom:"1.5rem"},children:o.jsx("img",{src:e.imageUrl,alt:e.title,style:{width:"100%",borderRadius:"0.75rem",objectFit:"cover",maxHeight:"300px"},onError:T=>{T.currentTarget.style.display="none"}})}),e.bullets&&Array.isArray(e.bullets)&&e.bullets.length>0&&o.jsx("div",{style:{marginBottom:"1.5rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:e.bullets.map((T,W)=>o.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"flex-start"},children:[o.jsx("span",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.875rem",marginTop:"0.125rem"},children:""}),o.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.9)",lineHeight:1.5,flex:1},children:T})]},W))}),e.whyItMatters&&o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",marginBottom:"0.5rem",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Why it matters"}),o.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.9)",lineHeight:1.6},children:e.whyItMatters})]}),e.links&&o.jsx("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",paddingTop:"1rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:e.links.website&&o.jsx("a",{href:e.links.website,target:"_blank",rel:"noopener noreferrer",onClick:T=>T.stopPropagation(),style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem",textDecoration:"underline",cursor:"pointer"},children:"Visit artist website"})})]}),e.momentType==="feedback"&&o.jsxs("div",{style:{marginTop:"25px",marginBottom:"25px"},children:[e.question&&o.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.95)",marginBottom:"1rem",lineHeight:1.5},children:e.question}),e.showScale&&o.jsxs("div",{children:[o.jsx("div",{style:{display:"flex",gap:"0.25rem",justifyContent:"space-between",flexWrap:"nowrap",marginBottom:"0.5rem"},children:Array.from({length:11},(T,W)=>W).map(T=>o.jsx("button",{style:{flex:"1 1 0",minWidth:0,height:"36px",borderRadius:"0.375rem",backgroundColor:"rgba(255, 255, 255, 0.08)",color:"rgba(255, 255, 255, 0.95)",border:"none",fontSize:"0.75rem",fontWeight:500,cursor:"pointer",transition:"background-color 0.2s",padding:"0",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:W=>{W.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.15)"},onMouseLeave:W=>{W.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},children:T},T))}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.7rem",color:"rgba(255, 255, 255, 0.6)",marginTop:"0.25rem"},children:[o.jsx("span",{children:"Not at all likely"}),o.jsx("span",{children:"Extremely likely"})]})]})]})]})})}),!G&&o.jsx("div",{style:{display:"grid",gridTemplateRows:ye?"1fr":"0fr",transition:"grid-template-rows 0.2s ease-in-out"},children:o.jsx("div",{style:{overflow:"hidden",minHeight:0},children:o.jsx("div",{style:{padding:C?"1rem":"0.75rem",marginTop:C?"25px":"0",marginBottom:C?"25px":"0",backgroundColor:C?"rgba(0, 0, 0, 0.6)":"transparent",backdropFilter:C?"blur(8px)":"none",fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.75)"},children:_n()})})})]})},Ge=()=>{switch(e.type){case"task":return be();case"guest":return ne();case"concierge":return Fe();case"system":return Ze();case"moment":return pt();default:return o.jsx("div",{children:e.message||e.title})}},_n=()=>{var x,P,M;if(!G)switch(e.type){case"task":const Z=e.description?`${e.description.substring(0,60)}...`:"";return o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:600,marginBottom:"0.25rem"},children:e.title}),Z&&o.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.7)"},children:Z})]});case"guest":const T=e.name||"Guest";return o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:600,marginBottom:"0.25rem"},children:T}),o.jsxs("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.7)"},children:[(x=e.message)==null?void 0:x.substring(0,50),"..."]})]});case"concierge":return o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:600,marginBottom:"0.25rem"},children:"Canyon Concierge"}),o.jsxs("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.7)"},children:[(P=e.message)==null?void 0:P.substring(0,50),"..."]})]});case"system":const W=e.message?`${e.message.substring(0,60)}...`:"";return o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:600,marginBottom:"0.25rem"},children:e.title}),W&&o.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.7)"},children:W})]});case"moment":return o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:600,marginBottom:"0.25rem"},children:e.title||"Moment"}),(e.collapsedSummary||e.description)&&o.jsxs("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.7)"},children:[e.collapsedSummary||((M=e.description)==null?void 0:M.substring(0,50)),"..."]})]});default:return o.jsx("div",{children:o.jsx("div",{style:{fontWeight:600},children:e.title||"Item"})})}return null},bn=(()=>{if(e.type==="task"){if(e.status==="completed"||e.completed)return"#198754";if(e.assignedTo)return"#dc3545"}else if(e.type==="system")return"#3B31FF";return null})(),Mt=e.type==="guest",Ft=e.type==="concierge"&&e.sender&&e.sender.type==="staff",$t=e.type==="concierge"&&e.sender&&e.sender.type==="ai",Dt=Mt||Ft||$t,Zt=Dt?r?"rgba(13, 110, 253, 0.15)":"transparent":r?"rgba(13, 110, 253, 0.15)":"rgba(20, 20, 20, 1)",C=!ye&&(e.type==="moment"&&e.momentType==="ticket"&&e.heroImage||e.type==="system"&&e.title==="Performance starting soon"),I=()=>{const x=ye;Q&&h?h(e.id,x,{reason:"manual"}):N(!ye)},_=x=>{Ne.current=x,f&&f(x)};return o.jsxs("div",{id:`feed-item-${e.id}`,ref:_,className:"feed-item position-relative",style:{position:"relative",backgroundColor:s?"rgba(13, 110, 253, 0.2)":Zt,border:"none",borderLeft:bn?`4px solid ${bn}`:"none",opacity:n?1:.4,cursor:"pointer",transition:s?"background-color 0.3s ease-out":"all 0.2s",padding:e.type==="moment"&&e.momentType==="ticket"?"0":n?"1rem":"0.5rem 1rem",borderRadius:"0.5rem",boxShadow:s?"0 0 0 2px rgba(13, 110, 253, 0.3)":"none",marginBottom:"1rem",overflow:"hidden"},onClick:x=>{e.threadId&&a?(x.stopPropagation(),a({threadId:e.threadId,thread:e.thread||null})):i()},onMouseEnter:x=>{n&&(x.currentTarget.style.backgroundColor=r?"rgba(13, 110, 253, 0.2)":"rgba(255, 255, 255, 0.05)")},onMouseLeave:x=>{Dt?x.currentTarget.style.backgroundColor=r?"rgba(13, 110, 253, 0.15)":"transparent":x.currentTarget.style.backgroundColor=r?"rgba(13, 110, 253, 0.15)":"rgba(20, 20, 20, 1)"},children:[e.heroImage&&o.jsxs(o.Fragment,{children:[o.jsx("img",{src:e.heroImage,alt:"",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",objectPosition:"top center",zIndex:0},onError:x=>{const P=e.heroImageFallback;P&&x.currentTarget.src!==P&&(x.currentTarget.src=P)}}),o.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:ye?"linear-gradient(to bottom, rgba(0, 0, 0, 0.4) 0%, rgba(0, 0, 0, 0.7) 100%)":"linear-gradient(to bottom, rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0.85) 100%)",zIndex:1}})]}),!ae&&!G&&n&&!ye&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"position-absolute",style:{top:"0.5rem",right:"2.75rem",zIndex:m?1003:1001,display:pe?"none":"block"},ref:c,onClick:x=>x.stopPropagation(),children:[o.jsx("button",{className:"btn btn-link p-0",style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"1.25rem",zIndex:m?1:"auto",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",width:"26px",height:"26px",padding:"0",border:"none",background:"none",cursor:"pointer",transition:"all 0.2s"},onClick:x=>{x.stopPropagation(),p(!m)},title:"Actions",children:o.jsx("i",{className:"bi bi-three-dots-vertical"})}),m&&o.jsxs("div",{className:"actions-popover",style:{position:"absolute",top:"100%",right:"0",marginTop:"0.25rem",backgroundColor:"#0a0a0a",border:"none",borderRadius:"0.5rem",padding:"0.5rem",minWidth:"150px",zIndex:1003,boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)"},onClick:x=>x.stopPropagation(),children:[o.jsxs("button",{className:"btn btn-link text-start w-100 p-2",style:{color:e.status==="completed"||e.completed?"rgba(255, 255, 255, 0.4)":"#ffffff",fontSize:"0.875rem",textDecoration:"none",cursor:e.status==="completed"||e.completed?"not-allowed":"pointer"},disabled:e.status==="completed"||e.completed,onClick:()=>{p(!1),!(e.status==="completed"||e.completed)&&g&&g(e.id)},children:[o.jsx("i",{className:"bi bi-check-circle me-2",style:{fontWeight:"bold"}})," Complete"]}),o.jsxs("button",{className:"btn btn-link text-start w-100 p-2",style:{color:"#ffffff",fontSize:"0.875rem",textDecoration:"none"},onClick:()=>{p(!1),i()},children:[o.jsx("i",{className:"bi bi-chat me-2",style:{fontWeight:"bold"}})," Reply"]}),o.jsxs("button",{className:"btn btn-link text-start w-100 p-2",style:{color:"#ffffff",fontSize:"0.875rem",textDecoration:"none"},onClick:()=>{p(!1),i()},children:[o.jsx("i",{className:"bi bi-arrow-repeat me-2",style:{fontWeight:"bold"}})," Reassign"]})]})]}),o.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:x=>{x.stopPropagation(),d&&d()},"aria-pressed":u,"aria-label":u?"Unstar item":"Star item",style:{position:"absolute",top:"0.5rem",right:"5.5rem",zIndex:9,color:u?"#ffc107":"rgba(255, 255, 255, 0.4)",fontSize:"1.1rem",padding:"0",border:"none",background:"none",borderRadius:"50%",cursor:"pointer",transition:"all 0.2s",display:ae||G?"none":"flex",alignItems:"center",justifyContent:"center",width:"26px",height:"26px"},onMouseEnter:x=>{x.currentTarget.style.color=u?"#ffd700":"rgba(255, 255, 255, 0.7)",x.currentTarget.style.transform="scale(1.1)",x.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)"},onMouseLeave:x=>{x.currentTarget.style.color=u?"#ffc107":"rgba(255, 255, 255, 0.4)",x.currentTarget.style.transform="scale(1)",x.currentTarget.style.backgroundColor="none"},children:u?o.jsx("i",{className:"bi bi-star-fill",style:{fontSize:"1.1rem",fontWeight:"bold"}}):o.jsx("i",{className:"bi bi-star",style:{fontSize:"1.1rem",fontWeight:"bold"}})})]}),!$&&!J&&o.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:x=>{x.stopPropagation(),I()},"aria-label":ye?"Expand card":"Collapse card",style:{position:"absolute",top:(()=>{const x=e.type==="moment"&&e.momentType==="ticket"?0:n?16:8,P=e.type==="moment"&&e.momentType==="ticket"?16:0;return`${x+P+20-14}px`})(),right:"1rem",zIndex:10,color:"rgba(255, 255, 255, 0.75)",fontSize:"1rem",padding:"0",border:"none",background:"rgba(255, 255, 255, 0.06)",borderRadius:"50%",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",width:"28px",height:"28px"},onMouseEnter:x=>{x.currentTarget.style.color="rgba(255, 255, 255, 1)",x.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)"},onMouseLeave:x=>{x.currentTarget.style.color="rgba(255, 255, 255, 0.75)",x.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.06)"},children:o.jsx("i",{className:"bi bi-chevron-down",style:{fontSize:"1rem",transform:ye?"rotate(0deg)":"rotate(180deg)",transition:"transform 0.2s ease-in-out"}})}),o.jsx("div",{ref:ve,style:{minWidth:0,position:"relative",zIndex:2},children:o.jsx("div",{style:{padding:"0",position:"relative"},children:Ge()})}),!ye&&!(e.type==="moment"&&e.momentType==="ticket")&&o.jsx("div",{className:"position-absolute",style:{bottom:C?"1.25rem":"0.5rem",right:C?"1.25rem":"0.5rem",fontSize:"0.75rem",color:C?"rgba(255, 255, 255, 0.9)":"rgba(255, 255, 255, 0.7)",backgroundColor:"transparent",padding:"0",borderRadius:C?"999px":"0",backdropFilter:"none",zIndex:C?2:"auto"},children:oe(e.timestamp)})]})}function fm(e){const t=new Map,n=new Map;return e.forEach(r=>{if(r.type==="guest"){let s=r.threadId;if(!s){for(const[u,d]of t.entries())if(d.participants.some(g=>g.type==="guest"&&g.name===r.name)){s=u;break}s||(s=`thread-${r.id}`)}if(n.set(r.id,s),t.has(s)){const u=t.get(s);u.participants.some(v=>v.type==="guest"&&v.name===r.name)||u.participants.find(g=>g.type==="guest"&&g.name===r.name)||u.participants.push({type:"guest",name:r.name,avatar:r.avatar,id:r.id})}else{const u=[];u.push({type:"guest",name:r.name,avatar:r.avatar,id:r.id}),u.push({type:"ai",name:"Canyon Concierge",avatar:"AI",id:"ai"}),t.set(s,{id:s,participants:u,messages:[],lastActivity:r.timestamp,unreadCount:0,unread:!1})}const i=t.get(s),a=i.participants.find(u=>u.type==="guest"&&u.name===r.name),l=a?a.id:r.id;i.messages.push({id:r.id,type:r.type,sender:{type:"guest",name:r.name,avatar:r.avatar,id:l},message:r.message,timestamp:r.timestamp}),r.timestamp>i.lastActivity&&(i.lastActivity=r.timestamp)}}),e.forEach(r=>{if(r.type==="concierge"){let s=null;if(r.sender&&r.sender.type==="staff"){if(s=`thread-staff-${r.sender.id}`,!t.has(s)){const i=new Set;i.add({type:"staff",name:r.sender.name,avatar:r.sender.avatar,id:r.sender.id}),i.add({type:"ai",name:"Canyon Concierge",avatar:"AI"}),t.set(s,{id:s,participants:Array.from(i),messages:[],lastActivity:r.timestamp,unreadCount:0,unread:!1})}}else if(r.parentId&&n.has(r.parentId)?s=n.get(r.parentId):r.threadId&&(s=r.threadId),s&&t.has(s)){const i=t.get(s);i.messages.push({id:r.id,type:r.type,sender:{type:"ai",name:"Canyon Concierge",avatar:"AI",id:"ai"},message:r.message,timestamp:r.timestamp}),r.timestamp>i.lastActivity&&(i.lastActivity=r.timestamp)}if(r.sender&&r.sender.type==="staff"&&s){const i=t.get(s);i.messages.push({id:r.id,type:r.type,sender:{type:"staff",name:r.sender.name,avatar:r.sender.avatar,id:r.sender.id||"staff"},message:r.message,timestamp:r.timestamp}),r.timestamp>i.lastActivity&&(i.lastActivity=r.timestamp)}}}),t.forEach(r=>{r.messages.sort((s,i)=>s.timestamp-i.timestamp)}),Array.from(t.values()).sort((r,s)=>s.lastActivity-r.lastActivity)}function pm(e){var v,g;if(!e.messages||e.messages.length===0)return{preview:null,hasReply:!1};const t=[...e.messages].sort((f,k)=>{const b=f.timestamp||f.createdAt||0;return(k.timestamp||k.createdAt||0)-b}),n=t[0],r=f=>f.senderId?f.senderId==="ai"?"ai":f.senderId.includes("jeremy")||f.senderId.includes("staff")||f.senderId==="jeremy-bailey"?"staff":"guest":f.sender&&f.sender.type||"unknown",s=f=>f.text||f.message||"",i=(v=e.participants)==null?void 0:v.find(f=>f.type==="guest"),a=t.length>0?t[t.length-1]:null,l=a&&r(a)==="staff";if(i&&!l){const f=t.filter(c=>r(c)==="guest"),k=t.filter(c=>r(c)==="ai"),b=t.filter(c=>r(c)==="staff"||c.senderId&&(c.senderId.includes("jeremy")||c.senderId.includes("staff")||c.senderId==="jeremy-bailey")||c.sender&&c.sender.type==="staff"),h=f[0]?{message:s(f[0]),timestamp:f[0].timestamp||f[0].createdAt}:null,q=k[0]?{message:s(k[0]),timestamp:k[0].timestamp||k[0].createdAt,senderType:"ai"}:null,m=b[0]?{message:s(b[0]),timestamp:b[0].timestamp||b[0].createdAt,senderType:"staff",sender:b[0].sender||(b[0].senderId?{id:b[0].senderId,type:"staff"}:null)}:null;let p=null;return q&&m?p=q.timestamp>m.timestamp?q:m:p=q||m,{guestMessage:h,aiReply:q,staffReply:m,reply:p,hasReply:p!==null}}const d=((g=e.participants)==null?void 0:g.find(f=>f.type==="staff"))!==void 0;return d&&!i?{latestMessage:{message:s(n),timestamp:n.timestamp||n.createdAt},hasReply:!1}:d&&i?{latestMessage:{message:s(n),timestamp:n.timestamp||n.createdAt},hasReply:!1}:{latestMessage:{message:s(n),timestamp:n.timestamp||n.createdAt},hasReply:!1}}function mm({thread:e,isEmphasized:t=!0,isSelected:n,onClick:r,isInteractive:s=!0,formatTime:i,getAvatarColor:a,itemRef:l,currentUserId:u}){var S,D,O,U,pe,X,Se,ce;const d=pm(e),[v,g]=mu.useState(!1),f=e.participants.find(A=>A.id!==u&&A.type==="guest")||e.participants.find(A=>A.id!==u&&A.type==="staff")||e.participants.find(A=>A.type==="ai")||e.participants.find(A=>A.id!==u)||e.participants[0],k=e.messages&&e.messages.length>0?e.messages[e.messages.length-1]:null,b=k&&(k.senderId===u||k.sender&&k.sender.id===u||k.sender&&k.sender.type==="staff"&&k.sender.name==="Jeremy Bailey"||k.senderId&&(k.senderId.includes("jeremy")||k.senderId.includes("staff")||k.senderId==="jeremy-bailey")),h=e.messages&&e.messages.length>0?e.messages[0]:null,q=h&&(h.senderId===u||h.sender&&h.sender.id===u||h.sender&&h.sender.type==="staff"&&h.sender.name==="Jeremy Bailey"||h.senderId&&(h.senderId.includes("jeremy")||h.senderId.includes("staff")||h.senderId==="jeremy-bailey")),p=(f==null?void 0:f.type)==="guest"?"Guest":(f==null?void 0:f.type)==="staff"?"Staff":(f==null?void 0:f.type)==="ai"?"AI":"",y=((S=e.participants)==null?void 0:S.some(A=>A.type==="guest"))&&!q;return o.jsxs("div",{ref:l,className:"thread-row",onClick:r,onMouseEnter:()=>s&&g(!0),onMouseLeave:()=>s&&g(!1),style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",padding:t?"0.75rem":"0.5rem 1rem",paddingLeft:"1rem",paddingRight:"1rem",paddingBottom:t?"2rem":"0.5rem",marginTop:"0.75rem",marginBottom:"1.25rem",minHeight:t?"80px":"auto",borderRadius:"0.5rem",backgroundColor:n?"rgba(13, 110, 253, 0.15)":s&&v?"rgba(255, 255, 255, 0.05)":"transparent",borderLeft:n?"3px solid #0d6efd":"3px solid transparent",cursor:s?"pointer":"default",transition:"background-color 0.2s, border-color 0.2s, border-radius 0.2s, opacity 0.2s",position:"relative",opacity:t?1:.4},children:[t&&o.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"40px",height:"40px",backgroundColor:(f==null?void 0:f.type)==="ai"?"#3B31FF":(f==null?void 0:f.type)==="guest"||(f==null?void 0:f.type)==="staff"?a(f.avatar||f.name):"#3B31FF",color:"#ffffff",fontSize:"0.875rem",fontWeight:"600"},children:(f==null?void 0:f.type)==="ai"?"AI":(f==null?void 0:f.avatar)||(f!=null&&f.name?f.name.charAt(0):"?")}),o.jsx("div",{style:{flex:1,minWidth:0,paddingRight:t?0:"4rem"},children:t?o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[o.jsx("strong",{style:{color:"#ffffff",fontSize:"0.875rem"},children:(f==null?void 0:f.name)||"Unknown"}),p&&o.jsx("small",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"},children:p})]}),d.guestMessage&&(d.aiReply||d.staffReply||d.reply)?o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{marginBottom:"0.25rem"},children:o.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:d.guestMessage.message})}),o.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:(()=>{const A=d.reply||d.aiReply||d.staffReply;if(!A)return null;const te=A.senderType==="staff"||d.staffReply&&(A===d.staffReply||A.message===d.staffReply.message)||A.sender&&A.sender.type==="staff"||A.senderId&&A.senderId!=="ai"&&A.senderId!==void 0&&(A.senderId===u||A.senderId.includes("jeremy")||A.senderId.includes("staff")),ae=A.senderType==="ai"||d.aiReply&&(A===d.aiReply||A.message===d.aiReply.message)||A.sender&&A.sender.type==="ai"||A.senderId==="ai";return te?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"20px",height:"20px",backgroundColor:a("JB"),color:"#ffffff",fontSize:"0.625rem",fontWeight:"600"},children:"JB"}),o.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.6)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:A.message})]}):ae?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"20px",height:"20px",backgroundColor:"#3B31FF",color:"#ffffff",fontSize:"0.625rem",fontWeight:"600"},children:"AI"}),o.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.6)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:A.message})]}):null})()})]}):d.guestMessage?b?o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"20px",height:"20px",backgroundColor:a("JB"),color:"#ffffff",fontSize:"0.625rem",fontWeight:"600"},children:"JB"}),o.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.6)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(k==null?void 0:k.text)||(k==null?void 0:k.message)||d.guestMessage.message})]}):o.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:d.guestMessage.message}):d.latestMessage?b&&!y?o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"20px",height:"20px",backgroundColor:a("JB"),color:"#ffffff",fontSize:"0.625rem",fontWeight:"600"},children:"JB"}),o.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.6)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:d.latestMessage.message})]}):o.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:d.latestMessage.message}):e.messages&&e.messages.length>0&&o.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:((D=e.messages[e.messages.length-1])==null?void 0:D.text)||((O=e.messages[e.messages.length-1])==null?void 0:O.message)||""})]}):o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",minWidth:0,overflow:"hidden"},children:[o.jsxs("strong",{style:{color:"rgba(255, 255, 255, 0.75)",fontSize:"0.875rem",whiteSpace:"nowrap",flexShrink:0},children:[(f==null?void 0:f.name)||"Unknown",":"]}),o.jsx("span",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.875rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",minWidth:0,flex:1},children:((U=d.guestMessage)==null?void 0:U.message)||((pe=d.latestMessage)==null?void 0:pe.message)||((X=d.reply)==null?void 0:X.message)||e.messages&&e.messages.length>0&&(((Se=e.messages[e.messages.length-1])==null?void 0:Se.text)||((ce=e.messages[e.messages.length-1])==null?void 0:ce.message))||""})]})}),e.unread&&e.unreadCount>0&&o.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"#0d6efd",flexShrink:0,marginTop:"0.5rem"}}),o.jsx("div",{className:"position-absolute",style:{bottom:"0.5rem",right:"0.5rem",fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.7)"},children:i(e.lastActivity)})]})}function yd({items:e,allItems:t,activeFilter:n,onItemClick:r,onOpenThread:s,onToggleMoment:i,selectedContext:a,starredIds:l=new Set,onToggleStar:u,itemRefs:d,onUpdateTaskLocation:v,onCompleteTask:g,currentUserId:f,highlightedItemId:k,collapseVariant:b="staff",expandedCards:h,onCardExpandChange:q,onRevealArtist:m}){const p=ce=>{switch(ce.type){case"task":return"service";case"thread":return"guests";case"system":return"system";default:return"all"}},c=e,y=ce=>n==="all"?!0:n==="starred"?l&&l instanceof Set&&l.has(ce.id):p(ce)===n,S=ce=>{if(ce.type==="thread"){const A=ce.thread;return n==="all"?!0:n==="starred"?l&&l instanceof Set&&A.messages.some(te=>l.has(te.id)):n==="guests"}else return y(ce)},O=c.filter(ce=>S(ce)).length>0,pe=n!=="all"&&!O,Se=(()=>{switch(n){case"guests":return{message:"No active conversations",icon:"bi-chat-dots"};case"service":return{message:"No open tasks",icon:"bi-check-square"};case"system":return{message:"No system alerts",icon:"bi-lightning"};case"starred":return{message:"Nothing starred yet",icon:"bi-star"};default:return null}})();return o.jsx("div",{className:"feed-container",style:{padding:"0.75rem 1rem",paddingTop:"2rem",paddingBottom:"6rem",overflow:pe?"hidden":"visible",height:pe?"100%":"auto",minHeight:pe?"calc(100vh - 200px)":"auto",display:"flex",flexDirection:"column",position:"relative"},children:pe&&Se?o.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem 1rem",color:"rgba(255, 255, 255, 0.4)",textAlign:"center",width:"100%",maxWidth:"100%"},children:[o.jsx("i",{className:`bi ${Se.icon}`,style:{fontSize:"1.75rem",marginBottom:"0.75rem",color:"rgba(255, 255, 255, 0.3)",fontWeight:"normal"}}),o.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"400",color:"rgba(255, 255, 255, 0.4)",lineHeight:"1.4"},children:Se.message})]}):o.jsx("div",{className:"feed-items",children:c.map(ce=>{const A=S(ce);if(ce.type==="thread"){const ae=ce.thread,G=(a==null?void 0:a.type)==="thread"&&(a==null?void 0:a.id)===ae.id;return o.jsx(mm,{thread:ae,isEmphasized:A,isSelected:G,isInteractive:!!s,onClick:s?()=>{s({threadId:ae.id,thread:ae})}:void 0,formatTime:ee=>{const N=new Date(ee),$=new Date-N,J=Math.floor($/6e4);if(J<1)return"Just now";if(J<60)return`${J}m ago`;const se=Math.floor(J/60);return se<24?`${se}h ago`:N.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},getAvatarColor:ee=>{const N=["#0d6efd","#6f42c1","#d63384","#dc3545","#fd7e14","#ffc107","#20c997","#198754"],Q=ee.charCodeAt(0)%N.length;return N[Q]},currentUserId:f,itemRef:ee=>{ee?d.current.set(ae.id,ee):d.current.delete(ae.id)}},ae.id)}const te=(a==null?void 0:a.id)===ce.id;return o.jsx(dm,{item:ce,allItems:t,isEmphasized:A,isSelected:te,isHighlighted:k===ce.id,onClick:()=>r(ce),onOpenThread:s,onToggleMoment:i,isStarred:l&&l instanceof Set?l.has(ce.id):!1,onToggleStar:()=>u&&u(ce.id),onUpdateTaskLocation:v,onCompleteTask:g,collapseVariant:b,expandedCards:h,onCardExpandChange:q,onRevealArtist:m,itemRef:ae=>{ae?d.current.set(ce.id,ae):d.current.delete(ce.id)}},ce.id)})})})}function vd({selectedContext:e,toolMode:t,onToolModeChange:n,onToolAction:r,onCompleteTask:s,onReassignTask:i,isThreadMode:a=!1,feedItems:l=[],onSendMessage:u,onInputFocus:d,config:v,readOnly:g=!1,placeholderOverride:f,showRecipientPill:k=!0}){const b=(v==null?void 0:v.mode)==="visitor",[h,q]=j.useState([]),[m,p]=j.useState(null),[c,y]=j.useState(null),[S,D]=j.useState(!1),[O,U]=j.useState([]),[pe,X]=j.useState(null),[Se,ce]=j.useState(null),[A,te]=j.useState(""),[ae,G]=j.useState(!1),[ee,N]=j.useState(""),[Q,$]=j.useState(!1),[J,se]=j.useState(!1),[ye,ve]=j.useState(!1),[Ne,V]=j.useState(!0),[oe,be]=j.useState(!1),[Te,ne]=j.useState(!1),[Fe,Ze]=j.useState(!1),[pt,Ge]=j.useState(!1),[_n,mr]=j.useState(!1),[bn,Mt]=j.useState(!1),[Ft,$t]=j.useState(!1),[Dt,Zt]=j.useState(!1),C=j.useRef(null),I=j.useRef(null),_=j.useRef(null),x=j.useRef(null),P=j.useRef(null),M=j.useRef(null),Z=j.useRef(null),T=j.useRef(null);j.useRef(null);const[W,B]=j.useState(0),[he,Pe]=j.useState(!1),je=()=>!A||typeof A!="string"?"":A.trim(),me=w=>{if(!w||typeof w!="string"||w.length===0)return"#0d6efd";const z=["#0d6efd","#6f42c1","#d63384","#dc3545","#fd7e14","#ffc107","#20c997","#198754"],F=w.charCodeAt(0)%z.length;return z[F]},kt=()=>{const w=new Map;w.set("ai",{id:"ai",name:"Canyon Concierge",avatar:"AI",type:"ai",isSpecial:!0}),w.set("staff",{id:"staff",name:"Staff",avatar:"",type:"staff",isSpecial:!0}),l.forEach(ie=>{if(ie.type==="thread"&&ie.thread&&ie.thread.participants){const le=new Set;ie.thread.participants.forEach(de=>{if(de.type==="guest"&&de.id&&de.name){const ue=String(de.id);if(le.has(ue))return;le.add(ue),w.set(ue,{id:de.id,name:de.name,avatar:de.avatar||de.name.charAt(0),type:"guest",isSpecial:!1})}})}if(ie.type==="task"&&ie.assignedTo&&ie.assignedTo.type==="staff"){const le=`staff-${ie.assignedTo.name}`;w.has(le)||w.set(le,{id:le,name:ie.assignedTo.name,avatar:ie.assignedTo.avatar||ie.assignedTo.name.charAt(0),type:"staff",isSpecial:!1})}});const z=Array.from(w.values()),F=z.filter(ie=>ie.type==="guest").map(ie=>ie.name),K=new Set(F);return F.length!==K.size&&console.warn("Duplicate guest names detected in people list:",{total:F.length,unique:K.size,allNames:F,allPeople:z.filter(ie=>ie.type==="guest")}),z},Ye=()=>{const w=new Map;return l.forEach(z=>{if(z.type==="task"&&z.assignedTo&&z.assignedTo.type==="staff"){const F=`staff-${z.assignedTo.name}`;w.has(F)||w.set(F,{id:F,name:z.assignedTo.name,avatar:z.assignedTo.avatar||z.assignedTo.name.charAt(0),type:"staff",isSpecial:!1})}if(z.type==="concierge"&&z.sender&&z.sender.type==="staff"){const F=`staff-${z.sender.name}`;w.has(F)||w.set(F,{id:F,name:z.sender.name,avatar:z.sender.avatar||z.sender.name.charAt(0),type:"staff",isSpecial:!1})}}),Array.from(w.values())},gr=()=>{const w=kt();if(!ee.trim())return w;const z=ee.toLowerCase();return w.filter(F=>F.name.toLowerCase().includes(z))};j.useEffect(()=>{ae&&I.current&&setTimeout(()=>{var w;(w=I.current)==null||w.focus()},100)},[ae]),j.useEffect(()=>{const w=z=>{C.current&&!C.current.contains(z.target)&&(G(!1),N(""),$(!1)),_.current&&!_.current.contains(z.target)&&se(!1),x.current&&!x.current.contains(z.target)&&ve(!1)};return(ae||J||ye)&&document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[ae,J,ye]),j.useEffect(()=>{c!=="pos"&&(U([]),X(null),se(!1))},[c]),j.useEffect(()=>{c!=="check-in"&&ve(!1)},[c]),j.useEffect(()=>{if(Se){const w=setTimeout(()=>{ce(null)},2e3);return()=>clearTimeout(w)}},[Se]),j.useEffect(()=>{const w=oe||Te||Fe||pt,z=()=>{w||(document.body.removeAttribute("data-bottom-sheet-open"),document.body.style.overscrollBehaviorY="",document.documentElement.style.overscrollBehaviorY="",document.body.style.overflow="",document.documentElement.style.overflow="")};if(w){document.body.setAttribute("data-bottom-sheet-open","true");const F=K=>{const le=K.target.closest("[data-bottom-sheet]")!==null;(window.scrollY===0||window.scrollY<=10)&&!le&&K.preventDefault()};return document.addEventListener("touchmove",F,{passive:!1,capture:!0}),document.body.style.overscrollBehaviorY="none",document.documentElement.style.overscrollBehaviorY="none",()=>{document.body.removeAttribute("data-bottom-sheet-open"),document.removeEventListener("touchmove",F,{capture:!0}),document.body.style.overscrollBehaviorY="",document.documentElement.style.overscrollBehaviorY="",document.body.style.overflow="",document.documentElement.style.overflow=""}}else z();return()=>{z()}},[oe,Te,Fe,pt]),j.useEffect(()=>{if(!(oe||Te||Fe||pt)){const z=setTimeout(()=>{document.body.removeAttribute("data-bottom-sheet-open"),document.body.style.overscrollBehaviorY="",document.documentElement.style.overscrollBehaviorY="",document.body.style.overflow="",document.documentElement.style.overflow=""},100);return()=>clearTimeout(z)}},[oe,Te,Fe,pt]),j.useEffect(()=>{const w=setTimeout(()=>{oe||Te||Fe||pt||(document.body.removeAttribute("data-bottom-sheet-open"),document.body.style.overscrollBehaviorY="",document.documentElement.style.overscrollBehaviorY="",document.body.style.overflow="",document.documentElement.style.overflow="")},0);return()=>clearTimeout(w)},[]),j.useEffect(()=>{if(!he)return;const w=F=>{if(he&&T.current){F.preventDefault();const ie=F.clientY-W;ie>0&&(T.current.style.transform=`translateX(-50%) translateY(${ie}px)`)}},z=()=>{var F;if(he&&T.current){const K=T.current.style.transform;parseInt(((F=K.match(/translateY\((\d+)px\)/))==null?void 0:F[1])||"0")>100&&be(!1),T.current.style.transform="translateX(-50%)"}Pe(!1),B(0)};return document.addEventListener("mousemove",w,{passive:!1}),document.addEventListener("mouseup",z),()=>{document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",z)}},[he,W]),j.useEffect(()=>{if(!k)return;const z=je().length>0,F=!c&&!S,K=h.length===0,ie=h.some(le=>le.id==="ai");z&&F&&K&&!ie&&q([{id:"ai",name:"Canyon Concierge",avatar:"AI",type:"ai",isSpecial:!0}])},[A,c,S,h,k]),j.useEffect(()=>{if(!Z.current||!M.current)return;if(!(h.length>0||c!==null||S||O.length>0)){Z.current&&(Z.current.style.paddingTop="0.5rem");return}const z=()=>{if(M.current&&Z.current){const K=M.current.scrollHeight,ie=12,le=8;Z.current.style.paddingTop=`${ie+K+le}px`}};z();const F=new ResizeObserver(z);return F.observe(M.current),()=>{F.disconnect()}},[h,c,S,O]);const wn=w=>{q(z=>z.filter(F=>F.id!==w))},wo=w=>{if(!w||!w.id){console.error("addRecipient: Invalid person object",w);return}q(z=>{if(z.some(le=>le.id===w.id))return z;if(!c&&!S&&z.length>=1)return[w];const K=z.filter(le=>le.type==="staff"||le.type==="ai"),ie=z.filter(le=>le.type==="guest");return w.type==="staff"||w.type==="ai"?[...K,w,...ie]:w.type==="guest"?[...K,...ie,w]:[...z,w]}),G(!1),$(!1),N(""),setTimeout(()=>{P.current&&P.current.focus()},100)},So=w=>{q(z=>{if(z.some(le=>le.id===w.id))return z.filter(le=>le.id!==w.id);if(!c&&!S&&z.length>=1)return[w];const K=z.filter(le=>le.type==="staff"||le.type==="ai"),ie=z.filter(le=>le.type==="guest");return w.type==="staff"||w.type==="ai"?[...K,w,...ie]:w.type==="guest"?[...K,...ie,w]:[...z,w]})},hr=w=>{let z;return w.type==="ai"||w.type==="staff"?z="rgba(13, 110, 253, 0.3)":w.type==="guest"?z="rgba(216, 51, 132, 0.3)":z="rgba(13, 110, 253, 0.3)",o.jsxs("span",{className:"badge",style:{backgroundColor:z,color:"#ffffff",padding:"0.5rem 0.75rem",fontSize:"0.875rem",display:"inline-flex",alignItems:"center",gap:"0.5rem",borderRadius:"20px",border:"none",whiteSpace:"nowrap",height:"32px",lineHeight:"1",flexShrink:0},children:[o.jsx("span",{style:{fontSize:"1rem"},children:w.avatar}),o.jsx("span",{style:{fontWeight:"500"},children:w.name}),o.jsx("button",{type:"button",className:"btn-close btn-close-white",style:{fontSize:"0.75rem",marginLeft:"0.25rem",padding:"0",width:"1rem",height:"1rem",opacity:.8,flexShrink:0},onClick:F=>{F.stopPropagation(),F.preventDefault(),wn(w.id)},onMouseEnter:F=>{F.currentTarget.style.opacity="1"},onMouseLeave:F=>{F.currentTarget.style.opacity="0.8"},"aria-label":"Remove"})]},w.id)},kd=()=>S?o.jsxs("span",{className:"badge",style:{backgroundColor:"rgba(255, 255, 255, 0.08)",color:"rgba(255, 255, 255, 0.7)",padding:"0.5rem 0.75rem",fontSize:"0.875rem",display:"inline-flex",alignItems:"center",gap:"0.5rem",borderRadius:"20px",border:"none",whiteSpace:"nowrap",height:"32px",lineHeight:"1",flexShrink:0},children:[o.jsx("i",{className:"bi bi-check-square",style:{fontSize:"0.875rem",fontWeight:"bold"}}),o.jsx("span",{style:{fontWeight:"500"},children:"Assign"}),o.jsx("button",{type:"button",className:"btn-close btn-close-white",style:{fontSize:"0.75rem",marginLeft:"0.25rem",padding:"0",width:"1rem",height:"1rem",opacity:.8,flexShrink:0},onClick:w=>{w.stopPropagation(),w.preventDefault(),D(!1)},onMouseEnter:w=>{w.currentTarget.style.opacity="1"},onMouseLeave:w=>{w.currentTarget.style.opacity="0.8"},"aria-label":"Remove Task"})]}):null,bd=()=>c!=="pos"?null:o.jsxs("span",{className:"badge",style:{backgroundColor:"rgba(255, 193, 7, 0.3)",color:"#ffffff",padding:"0.5rem 0.75rem",fontSize:"0.875rem",display:"inline-flex",alignItems:"center",gap:"0.5rem",borderRadius:"20px",border:"none",whiteSpace:"nowrap",height:"32px",lineHeight:"1",flexShrink:0},children:[o.jsx("i",{className:"bi bi-cart",style:{fontSize:"0.875rem",fontWeight:"bold"}}),o.jsx("span",{style:{fontWeight:"500"},children:"POS"}),o.jsx("button",{type:"button",className:"btn-close btn-close-white",style:{fontSize:"0.75rem",marginLeft:"0.25rem",padding:"0",width:"1rem",height:"1rem",opacity:.8,flexShrink:0},onClick:w=>{w.stopPropagation(),w.preventDefault(),y(null),U([]),X(null)},onMouseEnter:w=>{w.currentTarget.style.opacity="1"},onMouseLeave:w=>{w.currentTarget.style.opacity="0.8"},"aria-label":"Remove POS"})]}),wd=()=>c!=="check-in"?null:o.jsxs("span",{className:"badge",style:{backgroundColor:"rgba(25, 135, 84, 0.3)",color:"#ffffff",padding:"0.5rem 0.75rem",fontSize:"0.875rem",display:"inline-flex",alignItems:"center",gap:"0.5rem",borderRadius:"20px",border:"none",whiteSpace:"nowrap",height:"32px",lineHeight:"1",flexShrink:0},children:[o.jsx("i",{className:"bi bi-person-check",style:{fontSize:"0.875rem",fontWeight:"bold"}}),o.jsx("span",{style:{fontWeight:"500"},children:"Check-in"}),o.jsx("button",{type:"button",className:"btn-close btn-close-white",style:{fontSize:"0.75rem",marginLeft:"0.25rem",padding:"0",width:"1rem",height:"1rem",opacity:.8,flexShrink:0},onClick:w=>{w.stopPropagation(),w.preventDefault(),y(null),ve(!1)},onMouseEnter:w=>{w.currentTarget.style.opacity="1"},onMouseLeave:w=>{w.currentTarget.style.opacity="0.8"},"aria-label":"Remove Check-in"})]}),Ha=(w,z,F,K=!1)=>{const ie=h.filter(R=>R.type==="guest").length,le=c==="check-in"&&ie>=1,de=!c&&!S,ue=!b&&de&&h.length>1,fe=!b&&de&&h.length===0,ge=S&&h.some(R=>R.type==="staff"||R.type==="ai"),Y=S?ge:!0,ke=b?!g&&!!je():!g&&(je()||h.length>0||c==="pos"||S&&Y||le),we=()=>{if(!g){if(!ke){console.log("handleSubmit: Cannot submit, canSubmit is false");return}if(b){const R=je();if(!R)return;const L=u==null?void 0:u(R,[],null);L&&L.success&&te("");return}if(de){if(ue){console.log("handleSubmit: Multiple recipients in CHAT mode, cannot submit");return}if(fe){console.log("handleSubmit: No recipients in CHAT mode, cannot submit");return}if(!je()){console.log("handleSubmit: No message text in CHAT mode, cannot submit");return}}if(console.log("handleSubmit: canSubmit is true, checking handlers...",{hasOnSend:!!F,hasOnSendMessage:!!u,hasOnKeyPress:!!z,inputValue:A,selectedRecipients:h.length,primaryAction:c,isChatMode:de}),F)console.log("handleSubmit: Calling onSend callback"),F();else if(u){console.log("handleSubmit: Calling onSendMessage with:",{inputValue:A,selectedRecipients:h,primaryAction:c});const R=u(A,h,c);R&&R.success?(te(""),de||(q([]),y(null),D(!1))):R&&R.error&&console.error("handleSubmit: Send failed:",R.error)}else if(z){console.log("handleSubmit: Simulating Enter key press");const R=new KeyboardEvent("keypress",{key:"Enter",bubbles:!0});z(R)}else console.log("handleSubmit: No handler available")}};return o.jsxs("div",{style:{display:"flex",alignItems:"flex-end",gap:"0.5rem"},children:[K&&!g&&!b&&o.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:R=>{R.stopPropagation(),be(!0)},"data-plus-button":!0,style:{width:"45px",height:"45px",borderRadius:"50%",backgroundColor:"rgba(20, 20, 20, 1)",border:"none",display:"flex",alignItems:"center",justifyContent:"center",color:"#ffffff",cursor:"pointer",transition:"all 0.2s",flexShrink:0},onMouseEnter:R=>{R.currentTarget.style.backgroundColor="#2a2a2a",R.currentTarget.style.transform="scale(1.05)"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="rgba(20, 20, 20, 1)",R.currentTarget.style.transform="scale(1)"},title:"Add action",children:o.jsx("i",{className:"bi bi-plus-lg",style:{fontSize:"1.25rem",fontWeight:"900",textShadow:"0.5px 0.5px 0px currentColor"}})}),o.jsxs("div",{ref:Z,style:{flex:1,backgroundColor:"rgba(20, 20, 20, 1)",border:"none",borderRadius:"20px",borderTopLeftRadius:"20px",borderTopRightRadius:"20px",borderBottomLeftRadius:"20px",borderBottomRightRadius:"20px",padding:"0.5rem 0.75rem",paddingRight:"2.75rem",paddingTop:k&&(h.length>0||c!==null||S||O.length>0)?"calc(0.75rem + 32px + 0.5rem)":"0.5rem",paddingBottom:"0.5rem",minHeight:"45px",display:"flex",flexDirection:"row",alignItems:k&&(h.length>0||c!==null||S||O.length>0)||je()?"flex-end":"center",cursor:"text",position:"relative",overflow:"visible"},onClick:()=>{var R;(R=P.current)==null||R.focus(),d&&d()},children:[k&&(h.length>0||c!==null||S||O.length>0)&&o.jsxs("div",{ref:M,style:{position:"absolute",top:"0.75rem",left:"0.75rem",right:"2.75rem",display:"flex",flexWrap:"wrap",alignItems:"flex-start",gap:"0.375rem",minHeight:"32px",zIndex:1},children:[kd(),k&&S&&(()=>{const R=h.filter(L=>L.type==="staff"||L.type==="ai");return R.length>0?R.map(L=>hr(L)):o.jsx("span",{className:"badge",style:{backgroundColor:"rgba(255, 255, 255, 0.08)",color:"rgba(255, 255, 255, 0.7)",padding:"0.5rem 0.75rem",fontSize:"0.875rem",display:"inline-flex",alignItems:"center",gap:"0.5rem",borderRadius:"20px",border:"none",whiteSpace:"nowrap",height:"32px",lineHeight:"1",flexShrink:0,cursor:"pointer",transition:"all 0.2s"},onClick:L=>{L.stopPropagation(),ne(!0)},onMouseEnter:L=>{L.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.12)"},onMouseLeave:L=>{L.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},onTouchStart:L=>{L.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.15)"},onTouchEnd:L=>{setTimeout(()=>{L.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},150)},onTouchCancel:L=>{L.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},children:o.jsx("span",{style:{fontWeight:"400"},children:"No staff"})},"no-staff")})(),k&&!S&&h.filter(R=>R.type==="staff"||R.type==="ai").map(R=>hr(R)),wd(),bd(),k&&!c&&h.filter(R=>R.type==="guest").map(R=>hr(R)),k&&c==="check-in"&&(()=>{const R=h.filter(L=>L.type==="guest");return R[0],R.length>0?R.map(L=>hr(L)):o.jsx("span",{className:"badge",style:{backgroundColor:"rgba(255, 255, 255, 0.08)",color:"rgba(255, 255, 255, 0.7)",padding:"0.5rem 0.75rem",fontSize:"0.875rem",display:"inline-flex",alignItems:"center",gap:"0.5rem",borderRadius:"20px",border:"none",whiteSpace:"nowrap",height:"32px",lineHeight:"1",flexShrink:0,cursor:"pointer",transition:"all 0.2s"},onClick:L=>{L.stopPropagation(),ne(!0)},onMouseEnter:L=>{L.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.12)"},onMouseLeave:L=>{L.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},onTouchStart:L=>{L.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.15)"},onTouchEnd:L=>{setTimeout(()=>{L.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},150)},onTouchCancel:L=>{L.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},children:o.jsx("span",{style:{fontWeight:"400"},children:"Guest optional"})},"guest-optional")})(),c==="pos"&&O.map(R=>o.jsxs("span",{className:"badge",style:{backgroundColor:"rgba(255, 193, 7, 0.25)",color:"#ffffff",padding:"0.5rem 0.75rem",fontSize:"0.875rem",display:"inline-flex",alignItems:"center",gap:"0.5rem",borderRadius:"20px",border:"none",whiteSpace:"nowrap",height:"32px",lineHeight:"1",flexShrink:0},children:[R.emoji&&o.jsx("span",{style:{fontSize:"0.875rem"},children:R.emoji}),o.jsxs("span",{style:{fontWeight:"500"},children:[R.name," ",R.quantity]}),o.jsx("button",{type:"button",className:"btn-close btn-close-white",style:{fontSize:"0.75rem",marginLeft:"0.25rem",padding:"0",width:"1rem",height:"1rem",opacity:.8,flexShrink:0},onClick:L=>{L.stopPropagation(),L.preventDefault(),U(Oe=>Oe.filter(Ve=>Ve.id!==R.id))},onMouseEnter:L=>{L.currentTarget.style.opacity="1"},onMouseLeave:L=>{L.currentTarget.style.opacity="0.8"},"aria-label":"Remove item"})]},R.id)),k&&c==="pos"&&(()=>{const R=h.filter(L=>L.type==="guest");return R.length>0?R.map(L=>hr(L)):o.jsx("span",{className:"badge",style:{backgroundColor:"rgba(255, 255, 255, 0.08)",color:"rgba(255, 255, 255, 0.7)",padding:"0.5rem 0.75rem",fontSize:"0.875rem",display:"inline-flex",alignItems:"center",gap:"0.5rem",borderRadius:"20px",border:"none",whiteSpace:"nowrap",height:"32px",lineHeight:"1",flexShrink:0,cursor:"pointer",transition:"all 0.2s"},onClick:L=>{L.stopPropagation(),ne(!0)},onMouseEnter:L=>{L.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.12)"},onMouseLeave:L=>{L.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},onTouchStart:L=>{L.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.15)"},onTouchEnd:L=>{setTimeout(()=>{L.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},150)},onTouchCancel:L=>{L.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},children:o.jsx("span",{style:{fontWeight:"400"},children:"No guest"})},"no-guest")})(),c==="pos"&&O.length>0&&pe&&(()=>{const R=O.reduce((L,Oe)=>L+Oe.quantity*Oe.price,0);return R>0?o.jsxs("span",{className:"badge",style:{backgroundColor:"rgba(255, 193, 7, 0.3)",color:"#ffffff",padding:"0.5rem 0.75rem",fontSize:"0.875rem",display:"inline-flex",alignItems:"center",gap:"0.5rem",borderRadius:"20px",border:"none",whiteSpace:"nowrap",height:"32px",lineHeight:"1",flexShrink:0,fontWeight:"600",cursor:"pointer"},onClick:L=>{L.stopPropagation(),se(!J)},children:[o.jsxs("span",{children:["$",R.toFixed(2),"  ",pe==="cash"?"Cash":pe==="card"?"Card":"Card on File"]}),o.jsx("button",{type:"button",className:"btn-close btn-close-white",style:{fontSize:"0.75rem",marginLeft:"0.25rem",padding:"0",width:"1rem",height:"1rem",opacity:.8,flexShrink:0},onClick:L=>{L.stopPropagation(),L.preventDefault(),X(null)},onMouseEnter:L=>{L.currentTarget.style.opacity="1"},onMouseLeave:L=>{L.currentTarget.style.opacity="0.8"},"aria-label":"Remove settlement"})]}):null})()]}),ue&&o.jsx("div",{style:{position:"absolute",top:"calc(0.75rem + 32px + 0.5rem)",left:"0.75rem",right:"2.75rem",fontSize:"0.75rem",color:"rgba(255, 193, 7, 0.9)",padding:"0.25rem 0.5rem",backgroundColor:"rgba(255, 193, 7, 0.1)",borderRadius:"0.25rem",marginTop:"0.25rem",zIndex:2},children:"Only one recipient allowed"}),h.length===0&&c===null&&!S&&O.length===0?o.jsx("textarea",{ref:P,className:"form-control bg-transparent text-white border-0 p-0",placeholder:w,value:A,readOnly:g,onChange:R=>{if(!g)try{if(te(R.target.value),R.target&&R.target.scrollHeight!==void 0){R.target.style.height="auto";const L=Math.min(R.target.scrollHeight,200);R.target.style.height=`${L}px`}}catch(L){console.error("Error in input onChange:",L),te(R.target.value)}},onFocus:()=>{d&&d()},onKeyPress:R=>{try{if(g)return;R.key==="Enter"&&!R.shiftKey&&ke?(R.preventDefault(),we&&we()):z&&z(R)}catch(L){console.error("Error in onKeyPress:",L)}},rows:1,style:{flex:1,width:"100%",border:"none",outline:"none",boxShadow:"none",fontSize:"16px",background:"transparent",padding:"0",paddingTop:"calc((45px - 1.5 * 16px) / 2)",lineHeight:"1.5",resize:"none",overflow:"hidden",maxHeight:"200px",fontFamily:"inherit",margin:0,height:je()?"auto":"calc(1.5 * 16px)",minHeight:"calc(1.5 * 16px)",display:"block",boxSizing:"border-box",verticalAlign:"top"}}):o.jsx("textarea",{ref:P,className:"form-control bg-transparent text-white border-0 p-0",placeholder:k?h.length===0?w:"Add a message...":f||w,value:A,readOnly:g,onChange:R=>{if(!g)try{if(te(R.target.value),R.target&&R.target.scrollHeight!==void 0){R.target.style.height="auto";const L=Math.min(R.target.scrollHeight,200);R.target.style.height=`${L}px`}}catch(L){console.error("Error in textarea onChange:",L),te(R.target.value)}},onFocus:()=>{d&&d()},onKeyPress:R=>{try{if(g)return;R.key==="Enter"&&!R.shiftKey&&ke?(R.preventDefault(),we&&we()):z&&z(R)}catch(L){console.error("Error in onKeyPress:",L)}},rows:1,style:{flex:1,width:"100%",border:"none",outline:"none",boxShadow:"none",fontSize:"16px",background:"transparent",padding:"0",paddingTop:"calc((45px - 1.5 * 16px) / 2)",lineHeight:"1.5",resize:"none",overflow:"hidden",maxHeight:"200px",fontFamily:"inherit",margin:0,height:je()?"auto":"calc(1.5 * 16px)",minHeight:"calc(1.5 * 16px)",display:"block",boxSizing:"border-box",verticalAlign:"top",alignSelf:"flex-end"}}),o.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:R=>{R.stopPropagation(),R.preventDefault(),g||we()},disabled:g||!ke,style:{position:"absolute",right:"0.5rem",top:h.length===0&&c===null&&!S&&O.length===0?"50%":"auto",bottom:h.length===0&&c===null&&!S&&O.length===0?"auto":"0.5rem",transform:h.length===0&&c===null&&!S&&O.length===0?"translateY(-50%)":"none",width:"32px",height:"32px",borderRadius:"50%",backgroundColor:ke?"#ffffff":"rgba(255, 255, 255, 0.06)",border:"none",display:"flex",alignItems:"center",justifyContent:"center",color:ke?"#000000":"rgba(255, 255, 255, 0.5)",cursor:g?"not-allowed":ke?"pointer":"not-allowed",flexShrink:0,zIndex:10},title:"Send",children:o.jsx("i",{className:"bi bi-arrow-up-short",style:{fontSize:"1.125rem",fontWeight:"bold",transform:"scale(1.3)"}})})]})]})},Ua=()=>{const w=h.find(de=>de.type==="staff"||de.type==="ai"),z=w?{name:w.name,avatar:w.avatar,type:w.type}:{name:"Jeremy Bailey",avatar:"JB",type:"staff"},F=h.find(de=>de.type==="guest"),K=F?{id:F.id,name:F.name,avatar:F.avatar}:null,ie=()=>{const de=h.filter(ke=>ke.type==="guest").length,ue=c==="check-in"&&de>=1,fe=S&&h.some(ke=>ke.type==="staff"||ke.type==="ai"),ge=S?fe:!0;if(je()||h.length>0||c==="pos"||S&&ge||ue){if(c==="check-in"&&ue){if(r){const ke=h.filter(we=>we.type==="guest");if(S){const we=je()||null;ke.forEach(R=>{const L=we?`Check-in ${R.name}${we?` - ${we}`:""}`:`Check-in ${R.name}`;r("create-task",{description:L,assignee:z,forGuest:{id:R.id,name:R.name,avatar:R.avatar},location:null})})}else{const we=je()||null;ke.forEach(R=>{r("check-in",{guest:{id:R.id,name:R.name,avatar:R.avatar},note:we})})}}te(""),q([]),y(null),D(!1);return}if(c==="pos"){if(S)r&&r("create-task",{description:je()||"Complete purchase",assignee:z,forGuest:K,location:null,posPayload:{cart:O,paymentMethod:pe}}),te(""),q([]),y(null),D(!1),U([]),X(null);else{if(r){const ke=je()||null;r("execute-pos",{cart:O,paymentMethod:pe,forGuest:K,note:ke})}te(""),q([]),y(null),U([]),X(null)}return}if(S){r&&r("create-task",{description:je(),assignee:z,forGuest:K,location:null}),te(""),q([]),D(!1);return}if(!c&&!S){if(h.length===0){console.log("Select someone to message");return}if(h.length>1){console.log("Only one recipient allowed");return}if(!je()){console.log("Message cannot be empty");return}if(u){const ke=u(A,h,c);ke&&ke.success?te(""):ke&&ke.error&&console.log("Error:",ke.error)}return}u&&(je()||h.length>0)&&(u(A,h,c),te(""),q([]))}};return(()=>{if(c==="check-in"){const de=h.find(ge=>ge.type==="guest"),ue=h.find(ge=>ge.type==="staff"||ge.type==="ai"),fe=ue||{name:"Jeremy Bailey"};return S?`Assign  ${fe.name}  Check-in ${de?de.name:"guest"}`:de?`Check-in ${de.name}`:null}if(c==="pos"){const de=h.find(Y=>Y.type==="guest"),ue=h.find(Y=>Y.type==="staff"||Y.type==="ai"),fe=ue||{name:"Jeremy Bailey"},ge=de||null;return S?`Assign  ${fe.name}  POS for ${ge?ge.name:"no guest"}`:`POS for ${ge?ge.name:"no guest"}`}if(S){const de=h.find(Y=>Y.type==="guest"),ue=h.find(Y=>Y.type==="staff"||Y.type==="ai"),fe=ue||{name:"Jeremy Bailey"},ge=de||null;return`Assign  ${fe.name}  ${ge?`for ${ge.name}`:"task"}`}return null})(),o.jsxs("div",{style:{flex:1,position:"relative"},children:[Se&&o.jsx("div",{style:{position:"absolute",top:"-2rem",left:"50%",transform:"translateX(-50%)",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"#ffffff",padding:"0.375rem 0.75rem",borderRadius:"20px",fontSize:"0.75rem",zIndex:1001,whiteSpace:"nowrap"},children:Se}),Ha(f||(S?"Task description":c==="pos"?"Add note (optional)":"Ask or act"),de=>{de.key==="Enter"&&(de.preventDefault(),ie())},ie,!b)]})},Sd=()=>o.jsx("div",{className:"tool-composer",children:o.jsxs("div",{className:"d-flex gap-2",children:[o.jsxs("button",{className:"btn btn-primary flex-grow-1",onClick:()=>r("scan-ticket",{method:"scanner"}),children:[o.jsx("i",{className:"bi bi-qr-code-scan"})," Open Scanner"]}),o.jsxs("button",{className:"btn btn-outline-primary flex-grow-1",onClick:()=>r("scan-ticket",{method:"manual"}),children:[o.jsx("i",{className:"bi bi-keyboard"})," Manual Entry"]}),o.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>n(null),children:o.jsx("i",{className:"bi bi-x"})})]})}),Cd=()=>{const[w,z]=j.useState(1),[F,K]=j.useState(25);return o.jsxs("div",{className:"tool-composer",children:[o.jsxs("div",{className:"d-flex gap-2 mb-2",children:[o.jsxs("div",{className:"flex-grow-1",children:[o.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.8)"},children:"Quantity"}),o.jsx("input",{type:"number",className:"form-control bg-dark text-white border-secondary",min:"1",value:w,onChange:ie=>z(parseInt(ie.target.value)||1)})]}),o.jsxs("div",{className:"flex-grow-1",children:[o.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.8)"},children:"Price"}),o.jsx("input",{type:"number",className:"form-control bg-dark text-white border-secondary",min:"0",step:"0.01",value:F,onChange:ie=>K(parseFloat(ie.target.value)||0)})]})]}),o.jsxs("div",{className:"d-flex gap-2",children:[o.jsxs("button",{className:"btn btn-success flex-grow-1",onClick:()=>r("sell-ticket",{quantity:w,price:F,method:"charge"}),children:[o.jsx("i",{className:"bi bi-credit-card"})," Charge $",(w*F).toFixed(2)]}),o.jsxs("button",{className:"btn btn-outline-warning flex-grow-1",onClick:()=>r("sell-ticket",{quantity:w,price:F,method:"comp"}),children:[o.jsx("i",{className:"bi bi-gift"})," Comp"]}),o.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>n(null),children:o.jsx("i",{className:"bi bi-x"})})]})]})},Td=()=>{const w=["Wine","Beer","Cocktail","Soft Drink"],[z,F]=j.useState("");return o.jsxs("div",{className:"tool-composer",children:[o.jsxs("div",{className:"mb-2",children:[o.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.8)"},children:"Select Drink"}),o.jsxs("select",{className:"form-select bg-dark text-white border-secondary",value:z,onChange:K=>F(K.target.value),children:[o.jsx("option",{value:"",children:"Choose..."}),w.map(K=>o.jsx("option",{value:K,children:K},K))]})]}),o.jsxs("div",{className:"d-flex gap-2",children:[o.jsxs("button",{className:"btn btn-primary flex-grow-1",disabled:!z,onClick:()=>r("order-drink",{drink:z}),children:[o.jsx("i",{className:"bi bi-send"})," Send Order"]}),o.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>n(null),children:o.jsx("i",{className:"bi bi-x"})})]})]})},jd=()=>o.jsx("div",{className:"tool-composer",children:o.jsxs("div",{className:"d-flex gap-2 align-items-center",children:[o.jsx("div",{style:{flex:1},children:Ha("Type message to guest",w=>{w.key==="Enter"&&(je()||h.length>0)&&(r("message-guest",{message:A,recipients:h}),te(""),q([]))})}),o.jsxs("button",{className:"btn btn-primary",disabled:!je()&&h.length===0,onClick:()=>{r("message-guest",{message:A,recipients:h}),te(""),q([])},children:[o.jsx("i",{className:"bi bi-send"})," Send"]}),o.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>n(null),children:o.jsx("i",{className:"bi bi-x"})})]})}),Id=()=>o.jsxs("div",{className:"tools-palette",children:[o.jsxs("div",{className:"d-flex gap-2 mb-2 flex-wrap",children:[o.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>n("ticket-scan"),children:[o.jsx("i",{className:"bi bi-qr-code-scan"})," Ticket Scan"]}),o.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>n("sell-ticket"),children:[o.jsx("i",{className:"bi bi-ticket"})," Sell Ticket"]}),o.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>n("order-drink"),children:[o.jsx("i",{className:"bi bi-cup-straw"})," Order Drink"]}),o.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>n("message-guest"),children:[o.jsx("i",{className:"bi bi-chat"})," Message Guest"]})]}),o.jsx("button",{className:"btn btn-outline-secondary btn-sm w-100",onClick:()=>n(null),children:"Close Tools"})]}),Nd=()=>a?Ua():null,Ed=()=>{const[w,z]=j.useState("fob"),[F,K]=j.useState("");return o.jsxs("div",{className:"tool-composer",children:[o.jsxs("div",{className:"mb-2",children:[o.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.8)"},children:"Purchase Type"}),o.jsxs("div",{className:"btn-group w-100",role:"group",children:[o.jsx("button",{type:"button",className:`btn ${w==="fob"?"btn-primary":"btn-outline-primary"}`,onClick:()=>z("fob"),children:"FOB"}),o.jsx("button",{type:"button",className:`btn ${w==="retail"?"btn-primary":"btn-outline-primary"}`,onClick:()=>z("retail"),children:"Retail"})]})]}),o.jsxs("div",{className:"mb-2",children:[o.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.8)"},children:"Amount"}),o.jsx("input",{type:"number",className:"form-control bg-dark text-white border-secondary",min:"0",step:"0.01",placeholder:"0.00",value:F,onChange:ie=>K(ie.target.value)})]}),o.jsxs("div",{className:"d-flex gap-2",children:[o.jsxs("button",{className:"btn btn-success flex-grow-1",disabled:!F||parseFloat(F)<=0,onClick:()=>{r("fob-retail",{type:w,amount:parseFloat(F)}),K(""),n(null)},children:[o.jsx("i",{className:"bi bi-credit-card"})," Process Payment"]}),o.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>n(null),children:o.jsx("i",{className:"bi bi-x"})})]})]})},Pd=()=>t==="ticket-scan"?Sd():t==="sell-ticket"?Cd():t==="fob-retail"?Ed():t==="order-drink"?Td():t==="message-guest"?jd():t==="checkin"?o.jsx("div",{className:"tool-composer",children:o.jsxs("div",{className:"d-flex gap-2",children:[o.jsxs("button",{className:"btn btn-primary flex-grow-1",onClick:()=>r("checkin",{guestId:e==null?void 0:e.id}),children:[o.jsx("i",{className:"bi bi-person-check"})," Check-in Guest"]}),o.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>n(null),children:o.jsx("i",{className:"bi bi-x"})})]})}):t==="tools"?Id():a?Nd():Ua(),zd=()=>{if(!pt)return null;const w=[{id:"ticket",name:"Ticket",price:25,emoji:""},{id:"wine",name:"Wine",price:12,emoji:""},{id:"beer",name:"Beer",price:8,emoji:""},{id:"cocktail",name:"Cocktail",price:15,emoji:""},{id:"soft-drink",name:"Soft Drink",price:5,emoji:""},{id:"gift-shop",name:"Gift Shop Item",price:20,emoji:""}],z=O.reduce((K,ie)=>K+ie.quantity,0),F=z>0?`Add ${z} ${z===1?"item":"items"}`:null;return o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:99999,animation:Dt?"fadeOut 0.3s ease-out":"fadeIn 0.2s ease-out",pointerEvents:"auto"},onClick:()=>{Zt(!0),setTimeout(()=>{Ge(!1),be(!1),Zt(!1),document.body.removeAttribute("data-bottom-sheet-open"),document.body.style.overscrollBehaviorY="",document.documentElement.style.overscrollBehaviorY="",document.body.style.overflow="",document.documentElement.style.overflow=""},300)}}),o.jsxs("div",{"data-bottom-sheet":!0,style:{position:"fixed",bottom:0,left:"50%",transform:"translateX(-50%)",width:"100%",maxWidth:"600px",backgroundColor:"#0a0a0a",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem",padding:"1rem",paddingBottom:F?"calc(5.5rem + env(safe-area-inset-bottom, 0))":"calc(1rem + env(safe-area-inset-bottom, 0))",zIndex:1e5,pointerEvents:"auto",boxShadow:"0 -4px 20px rgba(0, 0, 0, 0.3)",animation:Dt?"slideDown 0.3s ease-out":"slideUp 0.3s ease-out",maxHeight:"80vh",display:"flex",flexDirection:"column"},onClick:K=>K.stopPropagation(),children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[o.jsx("h6",{style:{margin:0,color:"#ffffff",fontWeight:"600"},children:"Add Items"}),o.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:()=>{Ge(!1),be(!0)},style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"1.25rem",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx("i",{className:"bi bi-x-lg"})})]}),o.jsx("div",{style:{flex:1,overflowY:"auto",minHeight:0,marginBottom:F||c==="pos"&&O.length>0?"1rem":"0"},children:o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:w.map(K=>{const ie=O.find(de=>de.id===K.id),le=ie?ie.quantity:0;return o.jsxs("button",{className:"btn w-100",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem",backgroundColor:le>0?"rgba(255, 193, 7, 0.2)":"rgba(255, 255, 255, 0.05)",border:"none",borderRadius:"0.5rem",color:"#ffffff",textAlign:"left"},onClick:de=>{de.stopPropagation(),c!=="pos"&&(c==="check-in"||S?(c==="check-in"&&ve(!1),D(!1),y("pos"),ce("Switched to POS")):y("pos")),U(ue=>ue.find(ge=>ge.id===K.id)?ue.map(ge=>ge.id===K.id?{...ge,quantity:ge.quantity+1}:ge):[...ue,{...K,quantity:1}])},onTouchStart:de=>{de.currentTarget.style.backgroundColor=le>0?"rgba(255, 193, 7, 0.3)":"rgba(255, 255, 255, 0.15)"},onTouchEnd:de=>{setTimeout(()=>{de.currentTarget.style.backgroundColor=le>0?"rgba(255, 193, 7, 0.2)":"rgba(255, 255, 255, 0.05)"},150)},onTouchCancel:de=>{de.currentTarget.style.backgroundColor=le>0?"rgba(255, 193, 7, 0.2)":"rgba(255, 255, 255, 0.05)"},children:[o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[K.emoji&&o.jsx("span",{style:{fontSize:"1.25rem"},children:K.emoji}),o.jsx("span",{style:{fontWeight:"500"},children:K.name})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[le>0&&o.jsxs("span",{style:{color:"rgba(255, 193, 7, 0.9)",fontSize:"0.875rem",fontWeight:"600"},children:["",le]}),o.jsxs("span",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.875rem"},children:["$",K.price]})]})]},K.id)})})}),c==="pos"&&O.length>0&&o.jsxs("div",{style:{paddingTop:"1rem",marginTop:"auto",marginBottom:F?"1rem":"0",borderTop:"1px solid rgba(255, 255, 255, 0.1)",flexShrink:0},children:[o.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",marginBottom:"0.75rem",fontWeight:"500"},children:"Payment"}),o.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:["cash","card","card-on-file"].map(K=>{const ie=pe===K;return o.jsx("button",{className:"btn flex-grow-1",style:{fontSize:"0.875rem",padding:"0.5rem",backgroundColor:ie?"rgba(255, 193, 7, 0.2)":"rgba(255, 255, 255, 0.05)",border:"none",borderRadius:"0.5rem",color:"#ffffff",fontWeight:"500"},onClick:le=>{le.stopPropagation(),X(K)},onTouchStart:le=>{le.currentTarget.style.backgroundColor=ie?"rgba(255, 193, 7, 0.3)":"rgba(255, 255, 255, 0.15)"},onTouchEnd:le=>{setTimeout(()=>{le.currentTarget.style.backgroundColor=ie?"rgba(255, 193, 7, 0.2)":"rgba(255, 255, 255, 0.05)"},150)},onTouchCancel:le=>{le.currentTarget.style.backgroundColor=ie?"rgba(255, 193, 7, 0.2)":"rgba(255, 255, 255, 0.05)"},children:K==="cash"?"Cash":K==="card"?"Card":"Card on File"},K)})})]}),F&&o.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,padding:"1rem",paddingBottom:"calc(1rem + env(safe-area-inset-bottom, 0))",borderTop:"1px solid rgba(255, 255, 255, 0.1)",backgroundColor:"#0a0a0a",zIndex:10},children:o.jsx("button",{className:"btn btn-primary w-100",style:{padding:"0.875rem",fontSize:"0.875rem",fontWeight:"500",borderRadius:"0.5rem"},onClick:K=>{K.stopPropagation(),c!=="pos"&&(c==="check-in"||S?(c==="check-in"&&ve(!1),D(!1),y("pos"),ce("Switched to POS")):y("pos")),Ge(!1),be(!1)},onTouchStart:K=>{K.currentTarget.style.opacity="0.8",K.currentTarget.style.transform="scale(0.98)"},onTouchEnd:K=>{setTimeout(()=>{K.currentTarget.style.opacity="1",K.currentTarget.style.transform="scale(1)"},150)},onTouchCancel:K=>{K.currentTarget.style.opacity="1",K.currentTarget.style.transform="scale(1)"},children:F})})]})]})},Rd=()=>Fe?o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:99999,animation:Ft?"fadeOut 0.3s ease-out":"fadeIn 0.2s ease-out",pointerEvents:"auto"},onClick:()=>{$t(!0),setTimeout(()=>{Ze(!1),be(!1),$t(!1),document.body.removeAttribute("data-bottom-sheet-open"),document.body.style.overscrollBehaviorY="",document.documentElement.style.overscrollBehaviorY="",document.body.style.overflow="",document.documentElement.style.overflow=""},300)}}),o.jsxs("div",{"data-bottom-sheet":!0,style:{position:"fixed",bottom:0,left:"50%",transform:"translateX(-50%)",width:"100%",maxWidth:"600px",backgroundColor:"#0a0a0a",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem",padding:"1rem",paddingBottom:"calc(1rem + env(safe-area-inset-bottom, 0))",zIndex:1e5,pointerEvents:"auto",boxShadow:"0 -4px 20px rgba(0, 0, 0, 0.3)",animation:Ft?"slideDown 0.3s ease-out":"slideUp 0.3s ease-out",maxHeight:"80vh",overflowY:"auto"},onClick:w=>w.stopPropagation(),children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[o.jsx("h6",{style:{margin:0,color:"#ffffff",fontWeight:"600"},children:"Check-in Guest"}),o.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:()=>{Ze(!1),be(!0)},style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"1.25rem",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx("i",{className:"bi bi-x-lg"})})]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[o.jsxs("button",{type:"button",className:"btn btn-primary w-100",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",padding:"1rem",fontSize:"1rem",fontWeight:"500"},onClick:w=>{w.stopPropagation(),c!=="check-in"&&(S||c==="pos"?(D(!1),c==="pos"&&(U([]),X(null),se(!1)),y("check-in"),ce("Switched to Check-in")):y("check-in"));const z={id:`scanned-${Date.now()}`,name:"Scanned Guest",avatar:"SG",type:"guest",isSpecial:!1};q(F=>F.find(le=>le.type==="guest"&&le.id===z.id)?F:[...F.filter(le=>le.type!=="guest"),z]),Ze(!1),be(!1)},onTouchStart:w=>{w.currentTarget.style.opacity="0.8",w.currentTarget.style.transform="scale(0.98)"},onTouchEnd:w=>{setTimeout(()=>{w.currentTarget.style.opacity="1",w.currentTarget.style.transform="scale(1)"},150)},onTouchCancel:w=>{w.currentTarget.style.opacity="1",w.currentTarget.style.transform="scale(1)"},children:[o.jsx("i",{className:"bi bi-qr-code-scan",style:{fontSize:"1.25rem"}}),o.jsx("span",{children:"Scan QR"})]}),o.jsxs("button",{type:"button",className:"btn w-100",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",padding:"1rem",fontSize:"1rem",fontWeight:"500",backgroundColor:"rgba(255, 255, 255, 0.05)",border:"none",borderRadius:"0.5rem",color:"#ffffff"},onClick:w=>{w.stopPropagation(),c!=="check-in"&&(S||c==="pos"?(D(!1),c==="pos"&&(U([]),X(null),se(!1)),y("check-in"),ce("Switched to Check-in")):y("check-in")),Ze(!1),be(!1)},onTouchStart:w=>{w.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.15)"},onTouchEnd:w=>{setTimeout(()=>{w.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)"},150)},onTouchCancel:w=>{w.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)"},children:[o.jsx("i",{className:"bi bi-keyboard",style:{fontSize:"1.25rem"}}),o.jsx("span",{children:"Manual"})]})]})]})]}):null,Ad=()=>{if(!Te)return null;const w=gr(),z=S?w.filter(Y=>Y.type==="staff"||Y.type==="ai"||Y.isSpecial):w,F=z.filter(Y=>Y.isSpecial),K=S?[]:z.filter(Y=>!Y.isSpecial&&Y.type==="guest"),ie=h.filter(Y=>w.find(we=>we.id===Y.id)!==void 0),le=ie.filter(Y=>Y.type==="guest").length,de=ie.filter(Y=>Y.type==="staff").length,ue=ie.filter(Y=>Y.type==="ai").length,ge=(()=>{const Y=[];return le>0&&Y.push(`${le} ${le===1?"guest":"guests"}`),de>0&&Y.push(`${de} staff`),ue>0&&Y.push(`${ue} AI`),Y.length===0?null:Y.length===1?`Add ${Y[0]}`:Y.length===2?`Add ${Y[0]} and ${Y[1]}`:`Add ${Y.slice(0,-1).join(", ")}, and ${Y[Y.length-1]}`})();return o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:99999,animation:bn?"fadeOut 0.3s ease-out":"fadeIn 0.2s ease-out",pointerEvents:"auto"},onClick:()=>{Mt(!0),setTimeout(()=>{ne(!1),be(!1),Mt(!1),document.body.removeAttribute("data-bottom-sheet-open"),document.body.style.overscrollBehaviorY="",document.documentElement.style.overscrollBehaviorY="",document.body.style.overflow="",document.documentElement.style.overflow=""},300)}}),o.jsxs("div",{"data-bottom-sheet":!0,style:{position:"fixed",bottom:0,left:"50%",transform:"translateX(-50%)",width:"100%",maxWidth:"600px",backgroundColor:"#0a0a0a",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem",padding:"1rem",paddingBottom:ge?"calc(5.5rem + env(safe-area-inset-bottom, 0))":"calc(1rem + env(safe-area-inset-bottom, 0))",zIndex:1e5,pointerEvents:"auto",boxShadow:"0 -4px 20px rgba(0, 0, 0, 0.3)",animation:bn?"slideDown 0.3s ease-out":"slideUp 0.3s ease-out",maxHeight:"80vh",display:"flex",flexDirection:"column"},onClick:Y=>Y.stopPropagation(),children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[o.jsx("h6",{style:{margin:0,color:"#ffffff",fontWeight:"600"},children:"Select People"}),o.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:()=>{ne(!1),be(!0)},style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"1.25rem",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx("i",{className:"bi bi-x-lg"})})]}),o.jsx("div",{style:{marginBottom:"1rem"},children:o.jsx("input",{ref:I,type:"text",className:"form-control bg-dark text-white",placeholder:"Search people...",value:ee,onChange:Y=>N(Y.target.value),style:{fontSize:"0.875rem",border:"none"},onClick:Y=>Y.stopPropagation()})}),o.jsxs("div",{style:{flex:1,overflowY:"auto",minHeight:0,marginBottom:ge?"1rem":"0"},children:[F.length>0&&o.jsx("div",{style:{marginBottom:"1rem"},children:F.map(Y=>{const ke=Y.id==="staff",we=ke?Ye():[],R=h.some(L=>L.id===Y.id);return o.jsxs("div",{style:{marginBottom:"0.5rem"},children:[o.jsxs("button",{className:"btn w-100",style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",backgroundColor:R?"rgba(13, 110, 253, 0.2)":"rgba(255, 255, 255, 0.05)",border:"none",borderRadius:"0.5rem",color:"#ffffff",textAlign:"left",width:"100%"},onClick:L=>{L.stopPropagation(),ke&&we.length>0?$(!Q):So(Y)},onMouseEnter:L=>{R||(L.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)")},onMouseLeave:L=>{R||(L.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)")},onTouchStart:L=>{L.currentTarget.style.backgroundColor=R?"rgba(13, 110, 253, 0.3)":"rgba(255, 255, 255, 0.15)"},onTouchEnd:L=>{setTimeout(()=>{L.currentTarget.style.backgroundColor=R?"rgba(13, 110, 253, 0.2)":"rgba(255, 255, 255, 0.05)"},150)},onTouchCancel:L=>{L.currentTarget.style.backgroundColor=R?"rgba(13, 110, 253, 0.2)":"rgba(255, 255, 255, 0.05)"},children:[o.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",backgroundColor:Y.type==="ai"?"#3B31FF":me(Y.avatar||Y.name),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.875rem",fontWeight:"500",color:"#ffffff",flexShrink:0},children:Y.avatar}),o.jsx("span",{style:{flex:1,fontWeight:"500",fontSize:"0.875rem"},children:Y.name}),ke&&we.length>0&&o.jsx("i",{className:`bi bi-chevron-${Q?"up":"down"}`,style:{fontSize:"1rem",color:"rgba(255, 255, 255, 0.8)",flexShrink:0,fontWeight:"bold"}}),!ke&&R&&o.jsx("i",{className:"bi bi-check-circle-fill",style:{color:"#0d6efd",fontSize:"1.25rem",flexShrink:0,fontWeight:"bold"}})]}),ke&&Q&&we.length>0&&o.jsx("div",{style:{marginTop:"0.5rem",marginLeft:"0.75rem",paddingLeft:"0.75rem",borderLeft:"1px solid rgba(255, 255, 255, 0.1)"},children:we.map(L=>{const Oe=h.some(Ve=>Ve.id===L.id);return o.jsxs("button",{className:"btn w-100",style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.625rem",backgroundColor:Oe?"rgba(13, 110, 253, 0.2)":"rgba(255, 255, 255, 0.05)",border:"none",borderRadius:"0.5rem",color:"#ffffff",textAlign:"left",width:"100%",marginBottom:"0.5rem"},onClick:Ve=>{Ve.stopPropagation(),So(L)},onMouseEnter:Ve=>{Oe||(Ve.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)")},onMouseLeave:Ve=>{Oe||(Ve.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)")},onTouchStart:Ve=>{Ve.currentTarget.style.backgroundColor=Oe?"rgba(13, 110, 253, 0.3)":"rgba(255, 255, 255, 0.15)"},onTouchEnd:Ve=>{setTimeout(()=>{Ve.currentTarget.style.backgroundColor=Oe?"rgba(13, 110, 253, 0.2)":"rgba(255, 255, 255, 0.05)"},150)},onTouchCancel:Ve=>{Ve.currentTarget.style.backgroundColor=Oe?"rgba(13, 110, 253, 0.2)":"rgba(255, 255, 255, 0.05)"},children:[o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:me(L.avatar||L.name),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"500",color:"#ffffff",flexShrink:0},children:L.avatar}),o.jsx("span",{style:{flex:1,fontSize:"0.875rem"},children:L.name}),Oe&&o.jsx("i",{className:"bi bi-check-circle-fill",style:{color:"#0d6efd",fontSize:"1.25rem",flexShrink:0,fontWeight:"bold"}}),!Oe&&o.jsx("div",{style:{width:"1.25rem",flexShrink:0}})]},L.id)})})]},Y.id)})}),K.length>0&&o.jsx("div",{children:K.map(Y=>{const ke=h.some(we=>we.id===Y.id);return o.jsxs("button",{className:"btn w-100",style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",backgroundColor:ke?"rgba(13, 110, 253, 0.2)":"rgba(255, 255, 255, 0.05)",border:"none",borderRadius:"0.5rem",color:"#ffffff",textAlign:"left",width:"100%",marginBottom:"0.5rem"},onClick:we=>{we.stopPropagation(),So(Y)},onMouseEnter:we=>{ke||(we.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)")},onMouseLeave:we=>{ke||(we.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)")},children:[o.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",backgroundColor:me(Y.avatar||Y.name),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.875rem",fontWeight:"500",color:"#ffffff",flexShrink:0},children:Y.avatar||(Y.name?Y.name.charAt(0):"?")}),o.jsx("span",{style:{flex:1,fontWeight:"500",fontSize:"0.875rem"},children:Y.name}),ke&&o.jsx("i",{className:"bi bi-check-circle-fill",style:{color:"#0d6efd",fontSize:"1.25rem",flexShrink:0}})]},Y.id)})}),w.length===0&&o.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"rgba(255, 255, 255, 0.5)",fontSize:"0.875rem"},children:"No people found"})]}),ge&&o.jsx("div",{style:{position:"absolute",bottom:"env(safe-area-inset-bottom, 0)",left:"1rem",right:"1rem",paddingTop:"1rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)",backgroundColor:"#0a0a0a",paddingBottom:"1rem"},children:o.jsx("button",{className:"btn btn-primary w-100",style:{padding:"0.875rem",fontSize:"0.875rem",fontWeight:"500",borderRadius:"0.5rem"},onClick:Y=>{Y.stopPropagation(),ne(!1),be(!1)},onTouchStart:Y=>{Y.currentTarget.style.opacity="0.8",Y.currentTarget.style.transform="scale(0.98)"},onTouchEnd:Y=>{setTimeout(()=>{Y.currentTarget.style.opacity="1",Y.currentTarget.style.transform="scale(1)"},150)},onTouchCancel:Y=>{Y.currentTarget.style.opacity="1",Y.currentTarget.style.transform="scale(1)"},children:ge})})]})]})},Md=()=>{const w=[],z=v==null?void 0:v.enabledTools,F=ue=>z?z.includes(ue):!0;if((v==null?void 0:v.mode)==="visitor"){const ue=Array.isArray(v==null?void 0:v.suggestedPrompts)?v.suggestedPrompts:[],fe=Array.isArray(v==null?void 0:v.pillIds)?v.pillIds:[];if(ue.length===0)return null;ue.forEach((R,L)=>{const Oe=fe[L]||`prompt-${L}`;w.push({id:Oe,label:R,icon:null,action:()=>{var Ve;if(b&&u){v!=null&&v.onPillTap&&v.onPillTap(Oe,R);const Ga=u(R,[],null);Ga&&Ga.success}else te(R),(Ve=P.current)==null||Ve.focus()}})});const ge=j.useRef(null),Y=j.useRef(new Set);j.useEffect(()=>{ge.current&&ue.length>0&&setTimeout(()=>{ge.current&&ge.current.scrollTo({left:0,behavior:"smooth"})},100)},[ue.length]);const ke=new Set(w.map(R=>R.id)),we=new Set;return w.forEach(R=>{Y.current.has(R.id)||we.add(R.id)}),Y.current=ke,o.jsxs("div",{ref:ge,style:{display:"flex",gap:"0.5rem",padding:"0.5rem 1rem",paddingBottom:"0.75rem",overflowX:"auto",overflowY:"hidden",scrollbarWidth:"thin",scrollbarColor:"rgba(255, 255, 255, 0.2) transparent",msOverflowStyle:"auto",WebkitOverflowScrolling:"touch",scrollBehavior:"smooth"},className:"suggested-pills-rail",children:[o.jsx("style",{children:`
            .suggested-pills-rail::-webkit-scrollbar {
              height: 4px;
            }
            .suggested-pills-rail::-webkit-scrollbar-track {
              background: transparent;
            }
            .suggested-pills-rail::-webkit-scrollbar-thumb {
              background: rgba(255, 255, 255, 0.2);
              border-radius: 2px;
            }
            .suggested-pills-rail::-webkit-scrollbar-thumb:hover {
              background: rgba(255, 255, 255, 0.3);
            }
            @keyframes slideInFromRight {
              from {
                transform: translateX(100%);
                opacity: 0;
              }
              to {
                transform: translateX(0);
                opacity: 1;
              }
            }
            .pill-enter {
              animation: slideInFromRight 0.3s ease-out forwards;
            }
          `}),w.map(R=>{const L=we.has(R.id);return o.jsx("button",{type:"button",onClick:Oe=>{Oe.stopPropagation(),R.action()},className:L?"pill-enter":"",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.875rem",backgroundColor:"rgba(255, 255, 255, 0.08)",border:"none",borderRadius:"20px",color:"rgba(255, 255, 255, 0.5)",fontSize:"0.875rem",fontWeight:"500",whiteSpace:"nowrap",flexShrink:0,cursor:"pointer",transition:"all 0.2s"},children:o.jsx("span",{children:R.label})},R.id)})]})}const K=h.some(ue=>ue.type==="guest"),ie=je().length>0,le=!ie&&!c&&!S&&h.length===0,de=h.some(ue=>ue.type==="staff"||ue.type==="ai");if(S&&!de)return w.push({id:"ai-concierge",label:"Canyon Concierge",icon:"AI",action:()=>{wo({id:"ai",name:"Canyon Concierge",avatar:"AI",type:"ai",isSpecial:!0})}}),Ye().forEach(fe=>{w.push({id:`staff-${fe.id}`,label:fe.name,icon:fe.avatar||fe.name.charAt(0),action:()=>{wo(fe)}})}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem",padding:"0.5rem 1rem",paddingBottom:"0.75rem",overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},className:"suggested-pills-rail",onWheel:fe=>{fe.deltaY!==0&&(fe.currentTarget.scrollLeft+=fe.deltaY,fe.preventDefault())},children:[o.jsx("style",{children:`
            .suggested-pills-rail::-webkit-scrollbar {
              display: none;
            }
          `}),w.map(fe=>o.jsxs("button",{type:"button",onClick:ge=>{ge.stopPropagation(),fe.action()},style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.875rem",backgroundColor:"rgba(255, 255, 255, 0.08)",border:"none",borderRadius:"20px",color:"rgba(255, 255, 255, 0.5)",fontSize:"0.875rem",fontWeight:"500",whiteSpace:"nowrap",flexShrink:0,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:ge=>{ge.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.12)"},onMouseLeave:ge=>{ge.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},onTouchStart:ge=>{ge.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.15)"},onTouchEnd:ge=>{setTimeout(()=>{ge.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},150)},onTouchCancel:ge=>{ge.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},children:[fe.icon&&(typeof fe.icon=="string"&&fe.icon.startsWith("bi-")?o.jsx("i",{className:`bi ${fe.icon}`,style:{fontSize:"0.875rem",fontWeight:"bold"}}):o.jsx("span",{style:{fontSize:"0.875rem"},children:fe.icon})),o.jsx("span",{children:fe.label})]},fe.id))]});if(S&&de)return null;if(le){const fe=new URLSearchParams(typeof window<"u"?window.location.search:"").get("scenario")||"anticipation",ge=[{id:"scan-qr",label:"Scan QR",icon:"bi-qr-code-scan",action:()=>{if(g&&F("scan-qr")&&!F("check-in")){r==null||r("scan-qr",{source:"suggested-pill"});return}c!=="check-in"&&y("check-in"),Ze(!0)}},{id:"check-in",label:"Check-in",icon:"bi-person-check",action:()=>{c!=="check-in"&&(c==="pos"&&(U([]),X(null)),y("check-in")),Ze(!0)}},{id:"pos",label:"POS",icon:"bi-cash-stack",action:()=>{c!=="pos"&&(c==="check-in"&&ve(!1),y("pos")),Ge(!0)}},{id:"assign",label:"Assign",icon:"bi-check-square",action:()=>{S||((c==="check-in"||c==="pos")&&(y(null),c==="pos"&&(U([]),X(null))),D(!0))}},{id:"people",label:"People",icon:"bi-people",action:()=>{ne(!0)}}];if(Array.isArray(v==null?void 0:v.suggestedPrompts)&&v.suggestedPrompts.length>0){const Y=(v==null?void 0:v.pillIds)||[],ke=v.suggestedPrompts.map((we,R)=>({id:Y[R]||`prompt-${R}`,label:we,icon:null,action:()=>{var Oe;const L=Y[R]||`prompt-${R}`;console.log("[Composer] Pill tapped:",L,we),v!=null&&v.onPillTap?(console.log("[Composer] Calling onPillTap callback"),v.onPillTap(L,we)):console.warn("[Composer] No onPillTap callback found in config"),te(we),(Oe=P.current)==null||Oe.focus()}}));w.push(...ke)}fe==="handoff"?["pos","assign","people","scan-qr","check-in"].forEach(ke=>{if(!F(ke))return;const we=ge.find(R=>R.id===ke);we&&w.push(we)}):ge.forEach(Y=>{F(Y.id)&&w.push(Y)})}else ie&&!c&&h.length===0?[{id:"ai-concierge",label:"Canyon Concierge",icon:"AI",action:()=>{wo({id:"ai",name:"Canyon Concierge",avatar:"AI",type:"ai",isSpecial:!0})}},{id:"choose-guest",label:"Choose guest",icon:"bi-people",action:()=>{ne(!0)}},{id:"scan-qr",label:"Scan QR",icon:"bi-qr-code-scan",action:()=>{if(g&&F("scan-qr")&&!F("check-in")){r==null||r("scan-qr",{source:"suggested-pill"});return}c!=="check-in"&&y("check-in"),Ze(!0)}},{id:"check-in",label:"Check-in",icon:"bi-person-check",action:()=>{c!=="check-in"&&(c==="pos"&&(U([]),X(null)),y("check-in")),Ze(!0)}},{id:"pos",label:"POS",icon:"bi-cash-stack",action:()=>{c!=="pos"&&(c==="check-in"&&ve(!1),y("pos")),Ge(!0)}}].forEach(fe=>{F(fe.id)&&w.push(fe)}):K?w.push({id:"check-in",label:"Check-in",icon:"bi-person-check",action:()=>{c!=="check-in"&&(c==="pos"&&(U([]),X(null)),y("check-in")),Ze(!0)}},{id:"pos",label:"POS",icon:"bi-cash-stack",action:()=>{c!=="pos"&&(c==="check-in"&&ve(!1),y("pos")),Ge(!0)}},{id:"message-guest",label:"Message guest",icon:"bi-chat",action:()=>{var ue;(ue=P.current)==null||ue.focus()}},{id:"assign",label:"Assign",icon:"bi-check-square",action:()=>{S||((c==="check-in"||c==="pos")&&(y(null),c==="pos"&&(U([]),X(null))),D(!0))}}):c==="pos"?w.push({id:"add-item",label:"Add item",icon:"bi-plus",action:()=>{Ge(!0)}},{id:"payment",label:"Payment",icon:"bi-credit-card",action:()=>{Ge(!0)}},{id:"assign",label:"Assign",icon:"bi-check-square",action:()=>{S||D(!0)}}):c==="check-in"&&w.push({id:"scan-qr",label:"Scan QR",icon:"bi-qr-code-scan",action:()=>{Ze(!0)}},{id:"choose-guest",label:"Choose guest",icon:"bi-people",action:()=>{ne(!0)}});return w.length===0?null:o.jsxs("div",{style:{display:"flex",gap:"0.5rem",padding:"0.5rem 1rem",paddingBottom:"0.75rem",overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},className:"suggested-pills-rail",onWheel:ue=>{ue.deltaY!==0&&(ue.currentTarget.scrollLeft+=ue.deltaY,ue.preventDefault())},children:[o.jsx("style",{children:`
          .suggested-pills-rail::-webkit-scrollbar {
            display: none;
          }
        `}),w.map(ue=>o.jsxs("button",{type:"button",onClick:fe=>{fe.stopPropagation(),ue.action()},style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.875rem",backgroundColor:"rgba(255, 255, 255, 0.08)",border:"none",borderRadius:"20px",color:"rgba(255, 255, 255, 0.9)",fontSize:"0.875rem",fontWeight:"500",whiteSpace:"nowrap",flexShrink:0,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:fe=>{fe.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.12)"},onMouseLeave:fe=>{fe.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},onTouchStart:fe=>{fe.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.15)"},onTouchEnd:fe=>{setTimeout(()=>{fe.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},150)},onTouchCancel:fe=>{fe.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},children:[ue.icon&&(ue.icon.startsWith("bi-")?o.jsx("i",{className:`bi ${ue.icon}`,style:{fontSize:"0.875rem",fontWeight:"bold"}}):o.jsx("span",{style:{fontSize:"0.875rem"},children:ue.icon})),o.jsx("span",{children:ue.label})]},ue.id))]})},Dd=()=>{if(!oe)return null;const w=[{id:"people",label:"People",icon:"bi-people",description:"Select guests, staff, or AI",onClick:()=>{be(!1),ne(!0)}},{id:"check-in",label:"Check-in",icon:"bi-person-check",description:"Check in guests",onClick:()=>{be(!1),Ze(!0)}},{id:"pos",label:"POS",icon:"bi-cash-stack",description:"Add items to cart",onClick:()=>{be(!1),Ge(!0)}},{id:"assign",label:"Assign",icon:"bi-check-square",description:"Create a task",onClick:()=>{S?D(!1):c==="check-in"||c==="pos"?(y(null),c==="pos"&&(U([]),X(null),se(!1)),c==="check-in"&&ve(!1),D(!0),ce("Switched to Assign")):D(!0),be(!1)}}];return o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:99999,animation:_n?"fadeOut 0.3s ease-out":"fadeIn 0.2s ease-out",pointerEvents:"auto"},onClick:()=>{oe&&(mr(!0),setTimeout(()=>{be(!1),mr(!1),document.body.removeAttribute("data-bottom-sheet-open"),document.body.style.overscrollBehaviorY="",document.documentElement.style.overscrollBehaviorY="",document.body.style.overflow="",document.documentElement.style.overflow=""},300)),Te&&(Mt(!0),setTimeout(()=>{ne(!1),Mt(!1),document.body.removeAttribute("data-bottom-sheet-open"),document.body.style.overscrollBehaviorY="",document.documentElement.style.overscrollBehaviorY="",document.body.style.overflow="",document.documentElement.style.overflow=""},300)),Fe&&($t(!0),setTimeout(()=>{Ze(!1),$t(!1),document.body.removeAttribute("data-bottom-sheet-open"),document.body.style.overscrollBehaviorY="",document.documentElement.style.overscrollBehaviorY="",document.body.style.overflow="",document.documentElement.style.overflow=""},300)),pt&&(Zt(!0),setTimeout(()=>{Ge(!1),Zt(!1),document.body.removeAttribute("data-bottom-sheet-open"),document.body.style.overscrollBehaviorY="",document.documentElement.style.overscrollBehaviorY="",document.body.style.overflow="",document.documentElement.style.overflow=""},300))}}),o.jsxs("div",{ref:T,"data-bottom-sheet":!0,onTouchStart:z=>{const F=z.target;F.tagName==="BUTTON"||F.closest("button")||F.tagName==="INPUT"||F.closest("input")||(z.stopPropagation(),Pe(!0),B(z.touches[0].clientY))},onTouchMove:z=>{if(he&&T.current){z.preventDefault(),z.stopPropagation();const K=z.touches[0].clientY-W;K>0&&(T.current.style.transform=`translateX(-50%) translateY(${K}px)`)}},onTouchEnd:z=>{var F;if(he&&T.current){z.preventDefault(),z.stopPropagation();const K=T.current.style.transform;parseInt(((F=K.match(/translateY\((\d+)px\)/))==null?void 0:F[1])||"0")>100&&be(!1),T.current.style.transform="translateX(-50%)",T.current.style.touchAction=""}Pe(!1),B(0)},onMouseDown:z=>{const F=z.target;F.tagName==="BUTTON"||F.closest("button")||(z.stopPropagation(),Pe(!0),B(z.clientY))},style:{position:"fixed",bottom:0,left:"50%",transform:"translateX(-50%)",width:"100%",maxWidth:"600px",backgroundColor:"#0a0a0a",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem",padding:"1.5rem 1rem",paddingTop:"0.75rem",paddingBottom:"calc(1.5rem + env(safe-area-inset-bottom, 0))",zIndex:1e5,pointerEvents:"auto",boxShadow:"0 -4px 20px rgba(0, 0, 0, 0.3)",animation:he?"none":_n?"slideDown 0.3s ease-out":"slideUp 0.3s ease-out",maxHeight:"70vh",overflowY:"auto",transition:he?"none":"transform 0.2s ease-out",cursor:he?"grabbing":"default",touchAction:he?"none":"pan-y",userSelect:"none",overscrollBehavior:"contain"},onClick:z=>{z.target.tagName!=="BUTTON"&&!z.target.closest("button")&&z.stopPropagation()},children:[o.jsx("div",{style:{width:"40px",height:"4px",backgroundColor:"rgba(255, 255, 255, 0.3)",borderRadius:"2px",margin:"0 auto 0.75rem",pointerEvents:"none"}}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:w.map(z=>{const F=z.id==="people"&&h.length>0||z.id==="check-in"&&c==="check-in"||z.id==="pos"&&c==="pos"||z.id==="assign"&&S;return o.jsxs("button",{type:"button",className:"btn",onClick:z.onClick,style:{display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start",gap:"1rem",padding:"1rem",backgroundColor:"transparent",border:"none",borderRadius:"0.5rem",color:"rgba(255, 255, 255, 0.5)",transition:"all 0.2s",textAlign:"left",width:"100%"},onMouseEnter:K=>{K.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)"},onMouseLeave:K=>{K.currentTarget.style.backgroundColor="transparent"},onTouchStart:K=>{K.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.15)"},onTouchEnd:K=>{setTimeout(()=>{K.currentTarget.style.backgroundColor="transparent"},150)},onTouchCancel:K=>{K.currentTarget.style.backgroundColor="transparent"},children:[o.jsx("i",{className:`bi ${z.icon}`,style:{fontSize:"1.5rem",flexShrink:0,marginTop:"0.125rem",color:F?"#0d6efd":"rgba(255, 255, 255, 0.9)"}}),o.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"0.25rem"},children:[o.jsx("span",{style:{fontSize:"1rem",fontWeight:"500",color:F?"#0d6efd":"rgba(255, 255, 255, 0.9)"},children:z.label}),z.description&&o.jsx("span",{style:{fontSize:"0.875rem",color:F?"#0d6efd":"rgba(255, 255, 255, 0.6)",fontWeight:"400"},children:z.description})]}),F&&o.jsx("i",{className:"bi bi-check",style:{fontSize:"1.5rem",color:"#0d6efd",flexShrink:0,marginTop:"0.125rem",fontWeight:"bold"}})]},z.id)})})]})]})};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"composer-bar",style:{position:"relative",padding:"0.25rem 1rem 0.75rem 1rem",zIndex:100},children:[o.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(to top, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 0.8) 40%, rgba(0, 0, 0, 0) 100%)",pointerEvents:"none",zIndex:-1}}),o.jsx("div",{style:{position:"absolute",top:"-2rem",left:0,right:0,height:"2rem",background:"linear-gradient(to top, rgba(0, 0, 0, 0.8) 0%, rgba(0, 0, 0, 0) 100%)",pointerEvents:"none",zIndex:-1}}),o.jsxs("div",{style:{position:"relative",zIndex:1},children:[Md(),Pd()]})]}),Dd(),Ad(),Rd(),zd()]})}function gm({thread:e,onReply:t}){const[n,r]=j.useState(""),[s,i]=j.useState(null),a=(g,f)=>{g==="thread-reply"&&t?t(e.id,f.message):(console.log("Tool action:",g,f),alert(`Action: ${g}
Data: ${JSON.stringify(f,null,2)}`),i(null))},l=()=>o.jsx("div",{className:"tool-composer",children:o.jsxs("div",{className:"d-flex gap-2",children:[o.jsxs("button",{className:"btn btn-primary flex-grow-1",onClick:()=>a("scan-ticket",{method:"scanner"}),children:[o.jsx("i",{className:"bi bi-qr-code-scan"})," Open Scanner"]}),o.jsxs("button",{className:"btn btn-outline-primary flex-grow-1",onClick:()=>a("scan-ticket",{method:"manual"}),children:[o.jsx("i",{className:"bi bi-keyboard"})," Manual Entry"]}),o.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>i(null),children:o.jsx("i",{className:"bi bi-x"})})]})}),u=()=>{const[g,f]=j.useState(1),[k,b]=j.useState(25);return o.jsxs("div",{className:"tool-composer",children:[o.jsxs("div",{className:"d-flex gap-2 mb-2",children:[o.jsxs("div",{className:"flex-grow-1",children:[o.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.8)"},children:"Quantity"}),o.jsx("input",{type:"number",className:"form-control bg-dark text-white border-secondary",min:"1",value:g,onChange:h=>f(parseInt(h.target.value)||1)})]}),o.jsxs("div",{className:"flex-grow-1",children:[o.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.8)"},children:"Price"}),o.jsx("input",{type:"number",className:"form-control bg-dark text-white border-secondary",min:"0",step:"0.01",value:k,onChange:h=>b(parseFloat(h.target.value)||0)})]})]}),o.jsxs("div",{className:"d-flex gap-2",children:[o.jsxs("button",{className:"btn btn-success flex-grow-1",onClick:()=>a("sell-ticket",{quantity:g,price:k,method:"charge"}),children:[o.jsx("i",{className:"bi bi-credit-card"})," Charge $",(g*k).toFixed(2)]}),o.jsxs("button",{className:"btn btn-outline-warning flex-grow-1",onClick:()=>a("sell-ticket",{quantity:g,price:k,method:"comp"}),children:[o.jsx("i",{className:"bi bi-gift"})," Comp"]}),o.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>i(null),children:o.jsx("i",{className:"bi bi-x"})})]})]})},d=()=>{const g=["Wine","Beer","Cocktail","Soft Drink"],[f,k]=j.useState("");return o.jsxs("div",{className:"tool-composer",children:[o.jsxs("div",{className:"mb-2",children:[o.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.8)"},children:"Select Drink"}),o.jsxs("select",{className:"form-select bg-dark text-white border-secondary",value:f,onChange:b=>k(b.target.value),children:[o.jsx("option",{value:"",children:"Choose..."}),g.map(b=>o.jsx("option",{value:b,children:b},b))]})]}),o.jsxs("div",{className:"d-flex gap-2",children:[o.jsxs("button",{className:"btn btn-primary flex-grow-1",disabled:!f,onClick:()=>a("order-drink",{drink:f}),children:[o.jsx("i",{className:"bi bi-send"})," Send Order"]}),o.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>i(null),children:o.jsx("i",{className:"bi bi-x"})})]})]})},v=()=>{if(s==="ticket-scan")return l();if(s==="sell-ticket")return u();if(s==="order-drink")return d();if(s==="checkin")return o.jsx("div",{className:"tool-composer",children:o.jsxs("div",{className:"d-flex gap-2",children:[o.jsxs("button",{className:"btn btn-primary flex-grow-1",onClick:()=>a("checkin",{threadId:e.id}),children:[o.jsx("i",{className:"bi bi-person-check"})," Check-in Guest"]}),o.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>i(null),children:o.jsx("i",{className:"bi bi-x"})})]})});const g=n.trim();return o.jsx("div",{style:{display:"flex",alignItems:"flex-end",gap:"0.5rem"},children:o.jsxs("div",{style:{flex:1,backgroundColor:"#0a0a0a",border:"none",borderRadius:"20px",padding:"0.5rem 0.75rem",paddingRight:"2.75rem",minHeight:"45px",display:"flex",flexDirection:"row",alignItems:n.trim()?"flex-end":"center",cursor:"text",position:"relative",overflow:"visible"},children:[o.jsx("textarea",{className:"form-control bg-transparent text-white border-0 p-0",placeholder:"Ask or act",value:n,onChange:f=>{if(r(f.target.value),f.target){f.target.style.height="auto";const k=Math.min(f.target.scrollHeight,200);f.target.style.height=`${k}px`}},onKeyPress:f=>{f.key==="Enter"&&!f.shiftKey&&g&&(f.preventDefault(),a("thread-reply",{message:n}),r(""))},rows:1,style:{flex:1,width:"100%",border:"none",outline:"none",boxShadow:"none",fontSize:"16px",background:"transparent",padding:"0",paddingTop:(n.trim(),"calc((45px - 1.5 * 16px) / 2)"),lineHeight:"1.5",resize:"none",overflow:"hidden",maxHeight:"200px",fontFamily:"inherit",margin:0,height:n.trim()?"auto":"calc(1.5 * 16px)",minHeight:"calc(1.5 * 16px)",display:"block",boxSizing:"border-box",verticalAlign:"top",alignSelf:n.trim()?"flex-end":"center"}}),o.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:f=>{f.stopPropagation(),f.preventDefault(),g&&(a("thread-reply",{message:n}),r(""))},disabled:!g,style:{position:"absolute",right:"0.5rem",top:n.trim()?"auto":"50%",bottom:n.trim()?"0.5rem":"auto",transform:n.trim()?"none":"translateY(-50%)",width:"32px",height:"32px",borderRadius:"50%",backgroundColor:g?"#ffffff":"rgba(255, 255, 255, 0.1)",border:"none",display:"flex",alignItems:"center",justifyContent:"center",color:g?"#000000":"rgba(255, 255, 255, 0.5)",cursor:g?"pointer":"not-allowed",flexShrink:0,zIndex:10},title:"Send",children:o.jsx("i",{className:"bi bi-arrow-up-short",style:{fontSize:"1.125rem",fontWeight:"bold",transform:"scale(1.3)"}})})]})})};return o.jsxs("div",{className:"composer-bar",style:{position:"relative",padding:"0.75rem 1rem",zIndex:100},children:[o.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(to top, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 0.8) 40%, rgba(0, 0, 0, 0) 100%)",pointerEvents:"none",zIndex:-1}}),o.jsx("div",{style:{position:"absolute",top:"-2rem",left:0,right:0,height:"2rem",background:"linear-gradient(to top, rgba(0, 0, 0, 0.8) 0%, rgba(0, 0, 0, 0) 100%)",pointerEvents:"none",zIndex:-1}}),o.jsx("div",{style:{position:"relative",zIndex:1},children:v()})]})}function hm({thread:e,onBack:t,onReply:n,participantMap:r={},currentUserId:s}){var k,b;const i=h=>{const q=["#0d6efd","#6f42c1","#d63384","#dc3545","#fd7e14","#ffc107","#20c997","#198754"],m=h.charCodeAt(0)%q.length;return q[m]},a=h=>{const q=new Date(h),p=new Date-q,c=Math.floor(p/6e4);if(c<1)return"Just now";if(c<60)return`${c}m ago`;const y=Math.floor(c/60);return y<24?`${y}h ago`:q.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};console.log("ThreadView received thread:",e),console.log("Thread messages:",e.messages),console.log("Thread participants:",e.participants),console.log("Participant map:",r);const l=((k=e.participants)==null?void 0:k.find(h=>h.type!=="ai"))||((b=e.participants)==null?void 0:b[0]),u=[...e.messages||[]].sort((h,q)=>h.createdAt-q.createdAt);console.log("Sorted messages:",u);const[d,v]=j.useState(!1),[g,f]=j.useState(null);return o.jsxs("div",{className:"thread-view",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#000000",zIndex:1e3,display:"flex",flexDirection:"column",animation:"slideIn 0.3s ease-out"},children:[o.jsxs("div",{className:"thread-header",style:{backgroundColor:"#0a0a0a",padding:"1rem",display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx("button",{className:"btn btn-link p-0",onClick:t,style:{color:"#ffffff",fontSize:"1.25rem"},children:o.jsx("i",{className:"bi bi-chevron-left"})}),o.jsxs("div",{className:"flex-grow-1",children:[o.jsx("h5",{className:"mb-0",style:{color:"#ffffff"},children:"Thread"}),o.jsx("small",{style:{color:"rgba(255, 255, 255, 0.6)"},children:(l==null?void 0:l.name)||"Unknown"})]})]}),o.jsx("div",{className:"thread-content flex-grow-1 overflow-auto",style:{padding:"1rem",paddingBottom:"8rem"},children:o.jsx("div",{className:"thread-messages",children:u.length===0?o.jsx("div",{style:{color:"rgba(255, 255, 255, 0.5)",textAlign:"center",padding:"2rem"},children:"No messages in this thread"}):u.map((h,q)=>{var U,pe;console.log(`Rendering message ${q}:`,h);const m=h.senderId||((U=h.sender)==null?void 0:U.id),p=r[m]||h.sender,c=m==="ai"||((pe=h.sender)==null?void 0:pe.type)==="ai",y=c?"Canyon Concierge":(p==null?void 0:p.name)||"Unknown",S=c?"AI":(p==null?void 0:p.avatar)||"?",D=c?"#3B31FF":i(S),O=h.text||h.message||"";return o.jsx("div",{className:"thread-message mb-3",children:o.jsxs("div",{className:"d-flex align-items-start gap-2",children:[o.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"40px",height:"40px",backgroundColor:D,color:"#ffffff",fontSize:"0.875rem",fontWeight:"600",flexShrink:0},children:S}),o.jsxs("div",{className:"flex-grow-1",children:[o.jsxs("div",{className:"d-flex align-items-center gap-2 mb-1",children:[o.jsx("strong",{style:{color:c?"rgba(130, 170, 210, 1)":"#ffffff",fontSize:"0.875rem"},children:y}),o.jsx("small",{style:{color:"rgba(255, 255, 255, 0.6)"},children:a(h.createdAt||h.timestamp)})]}),o.jsx("p",{className:"mb-0",style:{color:"#ffffff"},children:O})]})]})},h.id||`msg-${q}`)})})}),o.jsx("div",{style:{position:"sticky",bottom:0,zIndex:100},children:o.jsx(gm,{thread:e,onReply:n})})]})}function ym({feedItems:e,visibleFeedItems:t,activeFilter:n,onFilterChange:r,starredIds:s,onToggleStar:i,selectedContext:a,onItemClick:l,onOpenThread:u,onClearSelectedContext:d,itemRefs:v,onUpdateTaskLocation:g,onCompleteTask:f,currentUserId:k,highlightedItemId:b,atBottom:h,isBottomSheetOpen:q,scrollToBottom:m,composerHeight:p,feedRef:c,composerRef:y,toolMode:S,onToolModeChange:D,onToolAction:O,onReassignTask:U,onSendMessage:pe}){return o.jsxs("div",{className:"app-container d-flex flex-column",style:{height:"100dvh",backgroundColor:"lch(4.8% 0.7 272)",color:"#ffffff",position:"relative",overflow:"hidden"},children:[o.jsx("div",{style:{position:"sticky",top:0,left:0,right:0,zIndex:100},children:o.jsx(cm,{feedItems:e,activeFilter:n,onFilterChange:r,starredIds:s})}),o.jsxs("div",{className:"flex-grow-1 overflow-auto",ref:c,style:{height:"100%",position:"relative",backgroundColor:"#000"},onClick:X=>{(X.target===X.currentTarget||X.target.closest(".feed-container"))&&(X.target.closest(".feed-item")||d==null||d())},children:[o.jsx(yd,{items:t,allItems:e,activeFilter:n,onItemClick:l,onOpenThread:u,selectedContext:a,starredIds:s,onToggleStar:i,itemRefs:v,onUpdateTaskLocation:g,onCompleteTask:f,currentUserId:k,highlightedItemId:b}),!h&&!q&&o.jsx("button",{onClick:m,className:"btn btn-sm btn-primary rounded-pill",style:{position:"fixed",bottom:`${p+8}px`,left:"50%",transform:"translateX(-50%)",zIndex:200,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"none",padding:"0.5rem",width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},onMouseEnter:X=>{X.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.2)",X.currentTarget.style.transform="translateX(-50%) scale(1.05)"},onMouseLeave:X=>{X.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)",X.currentTarget.style.transform="translateX(-50%) scale(1)"},children:o.jsx("i",{className:"bi bi-arrow-down",style:{fontSize:"1rem"}})})]}),o.jsx("div",{ref:y,style:{position:"sticky",bottom:0,left:0,right:0,zIndex:100,paddingBottom:"env(safe-area-inset-bottom, 0)"},children:o.jsx(vd,{selectedContext:a,toolMode:S,onToolModeChange:D,onToolAction:O,onCompleteTask:f,onReassignTask:U,feedItems:t,onSendMessage:pe})})]})}const xd="canyon_test_events",Hi=1e3;let Ui=null,Jn=[];if(typeof window<"u"){Ui=sessionStorage.getItem("canyon_test_session_id")||`test_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sessionStorage.setItem("canyon_test_session_id",Ui);try{const e=localStorage.getItem(xd);e&&(Jn=JSON.parse(e),Jn.length>Hi&&(Jn=Jn.slice(-Hi)))}catch(e){console.warn("Failed to load test events from localStorage",e)}}function Gi(e,t={}){const n={name:e,payload:t,timestamp:Date.now(),sessionId:Ui,stage:t.stage||null};if(Jn.push(n),typeof window<"u")try{const r=Jn.slice(-Hi);localStorage.setItem(xd,JSON.stringify(r))}catch(r){console.warn("Failed to save test events to localStorage",r)}return n}const nu={id:"artist_lu_yang",name:"Lu Yang",subhead:"Contemporary artist (Shanghai)  video, digital bodies, Buddhism + gaming aesthetics",imageUrl:"https://www.aros.dk/media/3885/luyang_02.png?height=1600&widthratio=1.641025641025641&mode=crop&center=0.30964467005076141,0.50666666666666671&rnd=132822238650000000&format=webp",bullets:["Works with video, animation, and digital installations exploring identity and technology","Bridges Buddhist philosophy with gaming aesthetics and neuroscience","Known for creating digital avatars that transcend physical body constraints"],whyItMatters:`Lu Yang's work challenges traditional notions of identity and embodiment, treating technology and contemporary spirituality as the same emotional space. Their exploration of "digital bodies" reflects how we construct identity in an increasingly virtual world.`,links:{website:"http://luyang.asia/"},teaser:"Digital bodies, myth, and performance avatars"},xe={ARRIVAL:"arrival",ORIENT:"orient",EXPLORE:"explore",TRANSITION:"transition",WRAP:"wrap"},ru=1500,vm=2500,xm=1e4;function km({appendFeedItem:e,setSuggestedPills:t,setCardExpanded:n,getState:r,logEvent:s=Gi}){let i=xe.ARRIVAL,a={},l=null,u=null,d=!1,v=new Set,g=new Set;const f=()=>ru+Math.random()*(vm-ru),k=()=>{l&&(clearTimeout(l),l=null)},b=()=>{u&&(clearTimeout(u),u=null)},h=(G,ee=null)=>{k();const N=ee!==null?ee:f();console.log("[ScenarioDirector] Scheduling advancement with delay:",N),l=setTimeout(()=>{console.log("[ScenarioDirector] Executing scheduled advancement");try{G()}catch(Q){console.error("[ScenarioDirector] Error in scheduled advancement:",Q)}l=null},N)},q=()=>{b(),u=setTimeout(()=>{Se()},xm)},m=()=>[{id:"whats-on-tonight",text:"What's on tonight?"},{id:"what-to-see-first",text:"What should I see first?"},{id:"coat",text:"Where do I put my coat?"},{id:"washrooms",text:"Where are the washrooms?"},{id:"order-from-bar",text:"Can I order a drink?"},{id:"who-is-lu-yang",text:"Who is Lu Yang?"},{id:"souvenir",text:"Can I take a souvenir home with me?"},{id:"whats-next",text:"What's next?"}].filter(G=>!g.has(G.id)),p=G=>m(),c=(G,ee)=>({washrooms:"The washrooms are past the gift shop, to the right. There are also lockers available in the same area if you need to store your coat.",coat:"You can use the lockers past the gift shop, to the right. They're free to use during your visit.","who-is-lu-yang":"Lu Yang is a multimedia artist known for exploring themes of technology, identity, and the digital body. Their work DOKU is currently showing in the Cinemateque.","whats-on-tonight":"Tonight we have DOKU by Lu Yang at 8pm in the Cinemateque, Pulse by Rafael Lozano-Hemmer in the Main Hall, and Centers by Vito Acconci in Gallery 1. Check the schedule card for details.","order-from-bar":"You can order drinks from the bar menu - just tap the items you want and choose your delivery location","what-to-see-first":"I'd recommend using the time before DOKU at 8pm to check out Pulse in the Main Hall, then see Vito Acconci's Centers in Gallery 1 when it loops in about 10 minutes.","drinks-allowed":"Yes! Drinks from the bar are welcome in all galleries. Just be mindful of the artwork and use the provided coasters.",souvenir:"Absolutely! The gift shop has books, prints, and other items related to our current exhibitions. They're open until 9pm.","whats-next":"Thanks for visiting CANYON tonight! We hope you enjoyed your experience. Before you go, we'd love to hear your feedback.","this-week":"This week we have DOKU by Lu Yang, Pulse by Rafael Lozano-Hemmer, and Centers by Vito Acconci. Check the schedule card for times and locations.",members:"Members get priority access to exhibitions, discounts at the gift shop and bar, and invitations to special events. Would you like to learn more about membership?"})[G]||"Thanks for asking! How else can I help you?",y=(G,ee={})=>{const N=Date.now();switch(G){case xe.ORIENT:const Q=N+72e4,$=N+45*60*1e3,J=N+60*60*1e3;return{id:`moment-schedule-${N}`,type:"moment",momentType:"schedule",title:"Schedule",events:[{image:"https://leanartist.org/images/acconci_centers_xl.jpg",title:"Centers",artist:"Vito Acconci",location:"Gallery 1",startTime:"Ongoing",startsAt:Q},{image:"https://www.lozano-hemmer.com/image_sets/pulse_topology/pulse_topology.jpg",title:"Pulse",artist:"Rafael Lozano-Hemmer",location:"Main Hall",startTime:"Ongoing",startsAt:$},{image:"https://www.aros.dk/media/3885/luyang_02.png?height=1600&widthratio=1.641025641025641&mode=crop&center=0.30964467005076141,0.50666666666666671&rnd=132822238650000000&format=webp",title:"DOKU",artist:"Lu Yang",location:"Cinemateque",startTime:"8:00pm",startsAt:J}],timestamp:N};case xe.EXPLORE:return{id:`moment-bar-menu-${N}`,type:"moment",momentType:"bar-menu",title:"Bar Menu",mostPopular:[{name:"White Wine",description:"pinot project, italy 2022",price:12},{name:"Red Wine",description:"pasqua veneto rosso, veneto",price:12},{name:"Lager",description:"Sunday beer",price:10}],deliveryLocation:"Deliver here",paymentMethod:"Mastercard  3245",total:0,showActions:!0,timestamp:N};case xe.TRANSITION:return{id:`moment-gift-shop-${N}`,type:"moment",momentType:"gift-shop",title:"Gift Shop",products:[{image:"https://draw-down.com/cdn/shop/products/TheArtHappensHereNetArtAnthology_19s.jpg",title:"The Art Happens Here: Net Art Anthology",author:"Josephine Bosma",contributors:3,price:50},{image:"https://boutique.centrepompidou.fr/files/products/38226/66338-86c5e96a-xl/products-66338.jpg",title:"China: A new generation of artists",author:"Lu Yang (contributor)",contributors:10,price:70}],timestamp:N};case xe.WRAP:return{id:`moment-feedback-${N}`,type:"moment",momentType:"feedback",title:"Feedback",question:"How likely are you to recommend CANYON to a friend or colleague?",showScale:!0,timestamp:N};default:return null}},S=G=>{if(G===i)return;const ee=i;i=G,s("stage_start",{stage:G,previousStage:ee});const N=p(),Q=r(),$=Q.allPills||Q.suggestedPills||[],J=new Set($.map(ye=>ye.id)),se=N.filter(ye=>!J.has(ye.id));se.length>0&&t([...$,...se])},D=G=>{if(console.log("[ScenarioDirector] onUserAction called:",G.type,G.payload),!d){console.warn("[ScenarioDirector] Director is not active!");return}switch(k(),b(),s(G.type,{...G.payload,stage:i}),G.type){case"pill_tap":O(G.payload);break;case"message_send":U(G.payload);break;case"card_expand":G.payload.reason==="manual"&&(a[G.payload.cardId]=Date.now());break;case"card_collapse":break;case"qr_scan":pe(G.payload);break}G.type!=="pill_tap"&&G.type!=="message_send"&&h(()=>{X(G)}),q()},O=G=>{const{pillId:ee,pillText:N}=G||{};if(console.log("[ScenarioDirector] handlePillTap called:",ee,N),!ee){console.warn("[ScenarioDirector] No pillId in payload:",G);return}v.add(ee),g.add(ee);const J=(r().suggestedPills||[]).filter(ye=>ye.id!==ee);t(J);const se=c(ee);console.log("[ScenarioDirector] Got reply:",se),h(()=>{console.log("[ScenarioDirector] Scheduling reply addition");const ye=Date.now();if(e({id:`concierge-reply-${ye}`,type:"concierge",sender:{name:"Canyon Concierge",avatar:"AI",type:"ai"},message:se,timestamp:ye}),ee==="washrooms"||ee==="coat")r().items.some(V=>V.id==="moment-amenities-1")?n("moment-amenities-1",!0,{reason:"auto"}):setTimeout(()=>{const V=Date.now();e({id:"moment-amenities-1",type:"moment",momentType:"amenities",title:"Amenities",subtitle:"Find your way around",items:[{icon:"washroom",label:"Washrooms",hint:"Past gift shop, to the right"},{icon:"locker",label:"Lockers",hint:"Past gift shop, to the right"},{icon:"cinema",label:"Cinemateque",hint:"Near Delancey entrance"}],timestamp:V}),n("moment-amenities-1",!0,{reason:"auto"}),s("feed_item_added",{stage:i,itemId:"moment-amenities-1",itemType:"moment",momentType:"amenities"})},f());else if(ee==="whats-on-tonight"){const ve=r();if(!ve.items.some(V=>V.momentType==="schedule"))setTimeout(()=>{const V=Date.now(),oe=y(xe.ORIENT);oe&&(e(oe),n(oe.id,!0,{reason:"auto"}),s("feed_item_added",{stage:i,itemId:oe.id,itemType:oe.type}))},f());else{const V=ve.items.find(oe=>oe.momentType==="schedule");V&&n(V.id,!0,{reason:"auto"})}}else if(ee==="order-from-bar"){const ve=r();if(!ve.items.some(V=>V.momentType==="bar-menu"))setTimeout(()=>{const V=y(xe.EXPLORE);V&&(e(V),n(V.id,!0,{reason:"auto"}),s("feed_item_added",{stage:i,itemId:V.id,itemType:V.type}))},f());else{const V=ve.items.find(oe=>oe.momentType==="bar-menu");V&&n(V.id,!0,{reason:"auto"})}}else if(ee==="who-is-lu-yang")ae({artistId:"lu_yang",source:"pill"});else if(ee==="what-to-see-first")r().items.some(V=>V.momentType==="schedule")?n("moment-ticket-1",!0,{reason:"auto"}):setTimeout(()=>{const V=Date.now(),oe=y(xe.ORIENT);oe&&(e(oe),n(oe.id,!0,{reason:"auto"}),s("feed_item_added",{stage:i,itemId:oe.id,itemType:oe.type}))},f());else if(ee==="drinks-allowed"){const ve=r();if(!ve.items.some(V=>V.momentType==="bar-menu"))setTimeout(()=>{const V=y(xe.EXPLORE);V&&(e(V),n(V.id,!0,{reason:"auto"}),s("feed_item_added",{stage:i,itemId:V.id,itemType:V.type}),setTimeout(()=>{i===xe.ORIENT?(console.log("[ScenarioDirector] Advancing stage after bar menu card added (from ORIENT to TRANSITION via pill)"),S(xe.TRANSITION)):i===xe.EXPLORE&&(console.log("[ScenarioDirector] Advancing stage after bar menu card added (from EXPLORE via pill)"),S(xe.TRANSITION))},f()))},f());else{const V=ve.items.find(oe=>oe.momentType==="bar-menu");V&&n(V.id,!0,{reason:"auto"}),i===xe.ORIENT?setTimeout(()=>{console.log("[ScenarioDirector] Advancing stage after bar menu (already exists, from ORIENT to TRANSITION via pill)"),S(xe.TRANSITION)},f()):i===xe.EXPLORE&&setTimeout(()=>{console.log("[ScenarioDirector] Advancing stage after bar menu (already exists, from EXPLORE via pill)"),S(xe.TRANSITION)},f())}}else if(ee==="souvenir"){const ve=r();if(!ve.items.some(V=>V.momentType==="gift-shop"))setTimeout(()=>{const V=Date.now(),oe=y(xe.TRANSITION);oe&&(e(oe),n(oe.id,!0,{reason:"auto"}),s("feed_item_added",{stage:i,itemId:oe.id,itemType:oe.type}))},f());else{const V=ve.items.find(oe=>oe.momentType==="gift-shop");V&&n(V.id,!0,{reason:"auto"})}}else if(ee==="whats-next"){const ve=r();if(!ve.items.some(V=>V.momentType==="feedback"))setTimeout(()=>{const V=y(xe.WRAP);V&&(e(V),n(V.id,!0,{reason:"auto"}),s("feed_item_added",{stage:i,itemId:V.id,itemType:V.type}),setTimeout(()=>{console.log("[ScenarioDirector] Advancing stage after feedback card added (to WRAP)"),S(xe.WRAP)},f()))},f());else{const V=ve.items.find(oe=>oe.momentType==="feedback");V&&n(V.id,!0,{reason:"auto"}),setTimeout(()=>{console.log("[ScenarioDirector] Advancing stage after feedback (already exists, to WRAP)"),S(xe.WRAP)},f())}}setTimeout(()=>{X({type:"pill_tap",payload:{pillId:ee,pillText:N}})},f())})},U=G=>{const{text:ee}=G;console.log("[ScenarioDirector] handleMessageSend called with:",ee);let N="Thanks for your message! How else can I help you?";const Q=ee.toLowerCase().replace(/['']/g,"'");let $=!1,J=!1,se=!1,ye=!1,ve=!1;const Ne=V=>V.some(oe=>Q.includes(oe));if(Ne(["lu yang","doku","who is lu yang","lu yang","luyang"])){g.add("who-is-lu-yang");const be=(r().suggestedPills||[]).filter(Te=>Te.id!=="who-is-lu-yang");t(be),ae({artistId:"lu_yang",source:"message"});return}else if(Ne(["what's on tonight","whats on tonight","what is on tonight","whats on","what's on","tonight","schedule","events tonight","whats happening","what's happening"])){g.add("whats-on-tonight");const V=p();t(V),N=c("whats-on-tonight"),J=!0}else if(Ne(["washroom","bathroom","washrooms","restroom","restrooms","toilet","toilets","where bathroom","where washroom"])){g.add("washrooms");const V=r(),be=(V.allPills||V.suggestedPills||[]).filter(Te=>Te.id!=="washrooms");t(be),N=c("washrooms"),$=!0}else if(Ne(["coat","locker","lockers","jacket","where coat","where locker","store coat","store jacket","coat check"])){g.add("coat");const V=r(),be=(V.allPills||V.suggestedPills||[]).filter(Te=>Te.id!=="coat");t(be),N="You can use the lockers past the gift shop, to the right. They're free to use during your visit.",$=!0}else if(Ne(["what should i see","what to see","see first","recommend","what do you recommend","what should i visit","what to visit","suggestions","what to check out"])){g.add("what-to-see-first");const V=r(),be=(V.allPills||V.suggestedPills||[]).filter(Te=>Te.id!=="what-to-see-first");t(be),N="I'd recommend using the time before DOKU at 8pm to check out Pulse in the Main Hall, then see Vito Acconci's Centers in Gallery 1 when it loops in about 10 minutes.",J=!0,v.add("what-to-see-first")}else if(Ne(["drinks allowed","can i bring","bring drinks","drinks in gallery","can i drink","drinks welcome"]))N="Yes! Drinks from the bar are welcome in all galleries. Just be mindful of the artwork and use the provided coasters.",se=!0;else if(Ne(["order from the bar","order from bar","order drink","order drinks","can i order","get a drink","get drinks","buy drink","buy drinks"])){g.add("order-from-bar");const V=r(),be=(V.allPills||V.suggestedPills||[]).filter(Te=>Te.id!=="order-from-bar");t(be),N=c("order-from-bar"),se=!0}else Ne(["order a drink","how do i order","what can i order","bar menu","menu","drink menu","what drinks","what can i get"])?(N="You can order drinks from the bar menu - just tap the items you want and choose your delivery location",se=!0):Ne(["souvenir","gift shop","take home","gifts","shop","merchandise","store","gift store"])?(N="Absolutely! The gift shop has books, prints, and other items related to our current exhibitions. They're open until 9pm.",ye=!0):Ne(["what's next","whats next","closing","wrap up","what happens next","after this","end of night","leaving"])&&(N="Thanks for visiting CANYON tonight! We hope you enjoyed your experience. Before you go, we'd love to hear your feedback.",ve=!0);h(()=>{console.log("[ScenarioDirector] Inside scheduleAdvancement callback"),console.log("[ScenarioDirector] Adding concierge reply:",N),console.log("[ScenarioDirector] shouldAddAmenities:",$),console.log("[ScenarioDirector] currentStage:",i),console.log("[ScenarioDirector] STAGES.ARRIVAL:",xe.ARRIVAL);const V=Date.now();console.log("[ScenarioDirector] Calling appendFeedItem for concierge reply"),e({id:`concierge-reply-${V}`,type:"concierge",sender:{name:"Canyon Concierge",avatar:"AI",type:"ai"},message:N,timestamp:V}),console.log("[ScenarioDirector] Concierge reply item added");const oe=r();if(J)if(!oe.items.some(ne=>ne.momentType==="schedule"))setTimeout(()=>{const ne=y(xe.ORIENT);ne&&(e(ne),n(ne.id,!0,{reason:"auto"}),s("feed_item_added",{stage:i,itemId:ne.id,itemType:ne.type}))},f());else{const ne=oe.items.find(Fe=>Fe.momentType==="schedule");ne&&n(ne.id,!0,{reason:"auto"})}if(se)if(!oe.items.some(ne=>ne.momentType==="bar-menu"))setTimeout(()=>{const ne=y(xe.EXPLORE);ne&&(e(ne),n(ne.id,!0,{reason:"auto"}),s("feed_item_added",{stage:i,itemId:ne.id,itemType:ne.type}))},f());else{const ne=oe.items.find(Fe=>Fe.momentType==="bar-menu");ne&&n(ne.id,!0,{reason:"auto"})}if(ye)if(!oe.items.some(ne=>ne.momentType==="gift-shop"))setTimeout(()=>{const ne=y(xe.TRANSITION);ne&&(e(ne),n(ne.id,!0,{reason:"auto"}),s("feed_item_added",{stage:i,itemId:ne.id,itemType:ne.type}))},f());else{const ne=oe.items.find(Fe=>Fe.momentType==="gift-shop");ne&&n(ne.id,!0,{reason:"auto"})}if(ve)if(!oe.items.some(ne=>ne.momentType==="feedback"))setTimeout(()=>{const ne=y(xe.WRAP);ne&&(e(ne),n(ne.id,!0,{reason:"auto"}),s("feed_item_added",{stage:i,itemId:ne.id,itemType:ne.type}))},f());else{const ne=oe.items.find(Fe=>Fe.momentType==="feedback");ne&&n(ne.id,!0,{reason:"auto"})}if($){console.log("[ScenarioDirector] Should add amenities card, checking if exists..."),console.log("[ScenarioDirector] Current state items:",oe.items.map(ne=>ne.id));const Te=oe.items.some(ne=>ne.id==="moment-amenities-1");console.log("[ScenarioDirector] Amenities exists?",Te),Te?(console.log("[ScenarioDirector] Amenities card already exists, expanding..."),n("moment-amenities-1",!0,{reason:"auto"})):(console.log("[ScenarioDirector] Adding amenities card"),setTimeout(()=>{const ne=Date.now();e({id:"moment-amenities-1",type:"moment",momentType:"amenities",title:"Amenities",subtitle:"Find your way around",items:[{icon:"washroom",label:"Washrooms",hint:"Past gift shop, to the right"},{icon:"locker",label:"Lockers",hint:"Past gift shop, to the right"},{icon:"cinema",label:"Cinemateque",hint:"Near Delancey entrance"}],timestamp:ne}),console.log("[ScenarioDirector] Amenities card added, expanding..."),n("moment-amenities-1",!0,{reason:"auto"}),s("feed_item_added",{stage:i,itemId:"moment-amenities-1",itemType:"moment",momentType:"amenities"})},f()))}let be=!1;(i===xe.ARRIVAL&&$||i===xe.ORIENT&&(J||se)||i===xe.EXPLORE&&se||i===xe.TRANSITION&&(ye||ve))&&(be=!0),be&&setTimeout(()=>{X({type:"message_send",payload:{text:ee,shouldAddSchedule:J,shouldAddBarMenu:se,shouldAddGiftShop:ye,shouldAddFeedback:ve,shouldAddAmenities:$}})},f())})},pe=G=>{h(()=>{i===xe.ARRIVAL&&S(xe.ORIENT)})},X=G=>{var ee,N,Q,$,J,se;switch(i){case xe.ARRIVAL:(G.type==="message_send"&&((ee=G.payload)!=null&&ee.shouldAddAmenities)||G.type==="pill_tap")&&S(xe.ORIENT);break;case xe.ORIENT:G.type==="message_send"?(N=G.payload)!=null&&N.shouldAddSchedule?S(xe.EXPLORE):(Q=G.payload)!=null&&Q.shouldAddBarMenu&&S(xe.TRANSITION):G.type==="pill_tap"&&S(xe.EXPLORE);break;case xe.EXPLORE:G.type==="message_send"&&(($=G.payload)!=null&&$.shouldAddBarMenu)&&S(xe.TRANSITION);break;case xe.TRANSITION:G.type==="message_send"?((J=G.payload)!=null&&J.shouldAddGiftShop||(se=G.payload)!=null&&se.shouldAddFeedback)&&S(xe.WRAP):G.type==="pill_tap"&&(G.payload.pillId==="souvenir"||G.payload.pillId==="whats-next")&&S(xe.WRAP);break}},Se=()=>{d&&(s("idle_nudge",{stage:i}),q())},ce=G=>{},A=(G="arrival")=>{if(d)return;d=!0,i=xe.ARRIVAL;const ee=m();console.log("[ScenarioDirector] Starting, setting initial pills:",ee),t(ee),s("scenario_start",{mode:G,stage:i}),q()},te=()=>{d&&(d=!1,k(),b(),s("scenario_stop",{stage:i}))},ae=async({artistId:G="lu_yang",source:ee="unknown"})=>{const N=r(),Q=`moment-artist-${G}`;if(N.items.find(J=>J.id===Q)){s("artist_card_focused_existing",{artistId:G,source:ee,cardId:Q}),n(Q,!0,{reason:"manual"});return}s("artist_card_requested",{artistId:G,source:ee}),h(()=>{e({id:`concierge-${Date.now()}`,type:"concierge",sender:{name:"Canyon Concierge",avatar:"AI",type:"ai"},message:"Here's a quick intro to Lu Yang.",timestamp:Date.now()}),h(()=>{const J=nu,se={id:Q,type:"moment",momentType:"artist",title:J.name,subhead:J.subhead,imageUrl:J.imageUrl,bullets:J.bullets,whyItMatters:J.whyItMatters,links:J.links,teaser:J.teaser,timestamp:Date.now()};e(se),n(Q,!0,{reason:"auto"}),s("artist_card_inserted",{artistId:G,source:ee,cardId:Q})},f())},f())};return{onUserAction:D,onIdle:Se,onScroll:ce,start:A,stop:te,getCurrentStage:()=>i,isActive:()=>d,revealArtistCard:ae}}function bm({itemRefs:e,currentUserId:t,highlightedItemId:n,feedRef:r,composerRef:s}){const i=()=>typeof window>"u"?"arrival":new URLSearchParams(window.location.search).get("scenario")||"arrival",a=j.useMemo(()=>{const A=Date.now();return[{id:"moment-ticket-1",type:"moment",momentType:"ticket",title:"DOKU by Lu Yang",locationLabel:"Cinematheque",startsAt:A+60*60*1e3,heroImage:"https://www.aros.dk/media/3885/luyang_02.png?height=1600&widthratio=1.641025641025641&mode=crop&center=0.30964467005076141,0.50666666666666671&rnd=132822238650000000&format=webp",heroImageFallback:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ6crUzfZ7ak2LjN_qjOsgrKkkNbrJ8q2G1hA&s",qrCode:!0,description:"DOKU is a digital shell that can exist without the constraints of a physical body, time, or space, embodying the artist's exploration of a post-human or digital self.",timestamp:A}]},[]),[l,u]=j.useState(()=>a),[d,v]=j.useState([]),[g,f]=j.useState([]),[k,b]=j.useState({"moment-ticket-1":!0}),[h,q]=j.useState(!0),[m,p]=j.useState(0),c=j.useRef(null);j.useRef(null);const y=j.useRef(l),S=j.useRef(k),D=j.useRef(d),O=j.useRef(g);j.useEffect(()=>{y.current=l},[l]),j.useEffect(()=>{S.current=k},[k]),j.useEffect(()=>{D.current=d},[d]),j.useEffect(()=>{O.current=g},[g]);const U=i();j.useEffect(()=>{const A=km({appendFeedItem:te=>{console.log("[VisitorShell] appendFeedItem called with:",te.id,te.type),u(ae=>{const G=[...ae,te];return console.log("[VisitorShell] New items count:",G.length),setTimeout(()=>{if(r.current)if(te.type==="concierge"){const ee=document.getElementById(`feed-item-${te.id}`);ee&&ee.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})}else{const ee=G.filter(N=>N.type==="concierge").sort((N,Q)=>Q.timestamp-N.timestamp);if(ee.length>0){const N=ee[0].id,Q=document.getElementById(`feed-item-${N}`);Q&&r.current&&(Q.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"}),setTimeout(()=>{if(r.current){const $=r.current.scrollTop;r.current.scrollTo({top:$+120,behavior:"smooth"})}},300))}}},100),G})},setSuggestedPills:te=>{v(te),f(ae=>{const G=new Set(te.map(N=>N.id));if(ae.filter(N=>!G.has(N.id)).map(N=>N.id).length>0){const N=ae.filter(se=>G.has(se.id)),Q=new Set(N.map(se=>se.id)),$=te.filter(se=>!Q.has(se.id)),J=[...N,...$];return console.log("[VisitorShell] Updated allPills (removed pills):",J.map(se=>se.text)),J}else{const N=new Set(ae.map($=>$.id)),Q=te.filter($=>!N.has($.id));if(Q.length>0){const $=[...ae,...Q];return console.log("[VisitorShell] Updated allPills (added pills):",$.map(J=>J.text)),$}return ae}})},setCardExpanded:(te,ae,G={})=>{b(ee=>({...ee,[te]:ae})),G.reason==="auto"&&Gi("card_expand",{cardId:te,reason:"auto",stage:A.getCurrentStage()})},getState:()=>({items:y.current,expandedCards:S.current,suggestedPills:D.current,allPills:O.current||[]}),logEvent:Gi});return c.current=A,setTimeout(()=>{A.start(U),console.log("[VisitorShell] Director started with mode:",U)},100),()=>{c.current&&c.current.stop()}},[]),j.useEffect(()=>{const A=r.current;if(!A)return;const te=()=>{const ae=A.scrollTop,G=A.scrollHeight,ee=A.clientHeight,Q=G-ee-ae<150;Q!==h&&q(Q),c.current&&Object.keys(k).forEach($=>{if(!k[$])return;const J=document.getElementById(`feed-item-${$}`);if(!J)return;const se=J.getBoundingClientRect(),ye=r.current.getBoundingClientRect(),ve=se.top-ye.top,Ne=se.bottom-ye.top,V=ye.height,oe=Math.max(0,-ve),be=Math.min(V,Ne),ne=Math.max(0,be-oe)/se.height;c.current.onScroll({cardId:$,visibilityRatio:ne})})};return A.addEventListener("scroll",te,{passive:!0}),()=>{A.removeEventListener("scroll",te)}},[k,h]),j.useEffect(()=>{if(!s.current)return;const A=()=>{s.current&&p(s.current.offsetHeight)};A();const te=new ResizeObserver(A);return s.current&&te.observe(s.current),()=>{te.disconnect()}},[]);const pe=j.useCallback(()=>{r.current&&(r.current.scrollTo({top:r.current.scrollHeight,behavior:"smooth"}),setTimeout(()=>{if(s.current){const A=s.current.querySelector("input, textarea");A&&A.focus()}},300))},[]),X=A=>{const te=k[A];b(ae=>({...ae,[A]:!te})),c.current&&c.current.onUserAction({type:te?"card_collapse":"card_expand",payload:{cardId:A,reason:"manual"}})},Se=A=>{console.log("[VisitorShell] handleSendVisitorMessage called with:",A);const te=Date.now(),ae=`visitor-msg-${te}`;return u(G=>[...G,{id:ae,type:"guest",name:"You",avatar:"Y",message:A,timestamp:te}]),setTimeout(()=>{const G=document.getElementById(`feed-item-${ae}`);G&&r.current&&G.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})},100),c.current?(console.log("[VisitorShell] Notifying director of message_send"),c.current.onUserAction({type:"message_send",payload:{text:A}})):console.warn("[VisitorShell] Director ref is null when sending message!"),{success:!0}},ce=(A,te)=>{console.log("[VisitorShell] Pill tapped:",A,te),c.current?(console.log("[VisitorShell] Director exists, calling onUserAction"),c.current.onUserAction({type:"pill_tap",payload:{pillId:A,pillText:te}})):console.warn("[VisitorShell] Director ref is null!")};return o.jsxs("div",{className:"app-container d-flex flex-column",style:{height:"100dvh",backgroundColor:"#000",color:"#ffffff",position:"relative",overflow:"hidden"},children:[o.jsxs("div",{className:"flex-grow-1 overflow-auto",ref:r,style:{height:"100%",position:"relative",backgroundColor:"#000"},children:[o.jsx(yd,{items:l,allItems:l,activeFilter:"all",onItemClick:()=>{},onOpenThread:void 0,onToggleMoment:X,selectedContext:null,starredIds:new Set,onToggleStar:void 0,itemRefs:e,onUpdateTaskLocation:void 0,onCompleteTask:void 0,currentUserId:t,highlightedItemId:n,collapseVariant:"visitor",expandedCards:k,onCardExpandChange:(A,te,ae)=>{b(G=>({...G,[A]:te})),c.current&&c.current.onUserAction({type:te?"card_expand":"card_collapse",payload:{cardId:A,reason:(ae==null?void 0:ae.reason)||"manual"}})},onRevealArtist:A=>{c.current&&c.current.revealArtistCard&&c.current.revealArtistCard(A)}}),!h&&o.jsx("button",{onClick:pe,className:"btn btn-sm btn-primary rounded-pill",style:{position:"fixed",bottom:`${m+8}px`,left:"50%",transform:"translateX(-50%)",zIndex:200,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"none",padding:"0.5rem",width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},onMouseEnter:A=>{A.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.2)",A.currentTarget.style.transform="translateX(-50%) scale(1.05)"},onMouseLeave:A=>{A.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)",A.currentTarget.style.transform="translateX(-50%) scale(1)"},children:o.jsx("i",{className:"bi bi-arrow-down",style:{fontSize:"1rem"}})})]}),o.jsx("div",{ref:s,style:{position:"sticky",bottom:0,left:0,right:0,zIndex:100,paddingBottom:"env(safe-area-inset-bottom, 0)"},children:o.jsx(vd,{selectedContext:null,toolMode:null,onToolModeChange:()=>{},onToolAction:()=>{},onCompleteTask:()=>{},onReassignTask:()=>{},feedItems:l,onSendMessage:A=>(console.log("[VisitorShell] Message sent via Composer:",A),Se(A)),config:{mode:"visitor",suggestedPrompts:g.length>0?g.map(A=>A.text):d.length>0?d.map(A=>A.text):["Where are the washrooms?","Where do I put my coat?"],pillIds:g.length>0?g.map(A=>A.id):d.length>0?d.map(A=>A.id):["washrooms","coat"],onPillTap:ce},readOnly:!1,placeholderOverride:"Ask anything",showRecipientPill:!1})})]})}function wm({onEnterFeed:e}){j.useEffect(()=>{const y=document.createElement("link");return y.href="https://fonts.googleapis.com/css2?family=Archivo+Black&display=swap",y.rel="stylesheet",document.head.appendChild(y),()=>{document.head.removeChild(y)}},[]);const[t,n]=j.useState(!1),r=j.useRef(null),s=j.useRef(null),i=j.useRef(null),a=j.useRef(null),[l,u]=j.useState(null),[d,v]=j.useState(null),g=y=>{t||u(y.touches[0].clientY)},f=y=>{if(l===null||t)return;v(y.touches[0].clientY);const S=l-y.touches[0].clientY;if(S>0&&a.current){const D=Math.min(S*.5,50);a.current.style.transform=`translateY(-${D}px)`}},k=()=>{l!==null&&d!==null&&!t&&(l-d>50?b():a.current&&(a.current.style.transform="translateY(0)")),u(null),v(null)},b=()=>{t||(n(!0),setTimeout(()=>{e()},600))},q=Date.now()+60*60*1e3,m=y=>{const S=y-Date.now();if(S<=0)return"0:00";const D=Math.floor(S/1e3),O=Math.floor(D/60),U=D%60;return`${O}:${U.toString().padStart(2,"0")}`},[p,c]=j.useState(m(q));return j.useEffect(()=>{const y=setInterval(()=>{c(m(q))},1e3);return()=>clearInterval(y)},[q]),j.useEffect(()=>{if(!window.YT){const D=document.createElement("script");D.src="https://www.youtube.com/iframe_api";const O=document.getElementsByTagName("script")[0];O.parentNode.insertBefore(D,O)}const y=setInterval(()=>{window.YT&&window.YT.Player&&(clearInterval(y),S())},100);function S(){r.current&&(s.current=new window.YT.Player(r.current,{videoId:"jLMIh5mfaRY",playerVars:{autoplay:1,mute:1,controls:0,showinfo:0,rel:0,modestbranding:1,playsinline:1,start:0,end:30,iv_load_policy:3,fs:0,cc_load_policy:0,branding:0},events:{onReady:D=>{D.target.playVideo()},onStateChange:D=>{if(D.data===window.YT.PlayerState.ENDED&&(D.target.seekTo(0,!0),D.target.playVideo()),D.data===window.YT.PlayerState.PLAYING){const O=setInterval(()=>{s.current&&s.current.getCurrentTime()>=30&&(s.current.seekTo(0,!0),clearInterval(O))},100)}}}}))}return()=>{if(s.current)try{s.current.destroy()}catch{}clearInterval(y)}},[]),o.jsxs("div",{ref:i,style:{position:"fixed",top:0,left:0,right:0,bottom:0,overflow:"hidden",backgroundColor:"#000000",transform:t?"translateY(-100%)":"translateY(0)",transition:"transform 0.6s cubic-bezier(0.4, 0, 0.2, 1)",zIndex:1e3},children:[o.jsxs("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",zIndex:1},children:[o.jsx("div",{ref:r,style:{position:"absolute",top:"50%",left:"50%",width:"120vw",height:"67.5vw",minHeight:"120vh",minWidth:"213.34vh",transform:"translate(-50%, -50%) translateX(2%) translateY(-2%)",pointerEvents:"none"}}),o.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"linear-gradient(to bottom, rgba(0, 0, 0, 0.3) 0%, rgba(0, 0, 0, 0.6) 100%)",zIndex:2}})]}),o.jsxs("div",{style:{position:"relative",zIndex:3,height:"100%",display:"flex",flexDirection:"column",paddingBottom:"1rem"},children:[o.jsxs("div",{style:{position:"absolute",top:"2rem",left:0,right:0,display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:10},children:[o.jsxs("div",{style:{width:"18px",height:"18px",display:"flex",flexDirection:"column",justifyContent:"space-between",cursor:"pointer"},children:[o.jsx("div",{style:{width:"100%",height:"1.5px",backgroundColor:"#ffffff",borderRadius:"1px"}}),o.jsx("div",{style:{width:"100%",height:"1.5px",backgroundColor:"#ffffff",borderRadius:"1px"}}),o.jsx("div",{style:{width:"100%",height:"1.5px",backgroundColor:"#ffffff",borderRadius:"1px"}})]}),o.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)"},children:o.jsx("img",{src:"https://www.dropbox.com/scl/fi/xqcgumrwqmjrs6zb51qfv/Canyon_FullLockup_White_RGB_S.png?rlkey=a4ivnr9r1k53wr58iy67ho0ic&dl=1&raw=1",alt:"Canyon",style:{height:"24px",width:"auto"},onError:y=>{if(y.target.style.display="none",!y.target.nextSibling){const S=document.createElement("div");S.textContent="CANYON",S.style.cssText="color: white; font-size: 1.25rem; font-weight: 600;",y.target.parentNode.appendChild(S)}}})}),o.jsx("div",{style:{width:"18px"}})]}),o.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",width:"100%",padding:"0 1rem"},children:[o.jsx("h1",{style:{color:"#ffffff",fontSize:"clamp(3rem, 8vw, 5rem)",fontFamily:'"Archivo Black", sans-serif',fontWeight:"400",lineHeight:"1.2",marginBottom:"2rem",textShadow:"0 2px 10px rgba(0, 0, 0, 0.5)"},children:"Art that invites you to stay awhile"}),o.jsx("button",{onClick:b,style:{backgroundColor:"#3B31FF",color:"#ffffff",border:"none",borderRadius:"0.5rem",padding:"1rem 2rem",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)"},onMouseEnter:y=>{y.currentTarget.style.backgroundColor="#2d25e6",y.currentTarget.style.transform="scale(1.05)"},onMouseLeave:y=>{y.currentTarget.style.backgroundColor="#3B31FF",y.currentTarget.style.transform="scale(1)"},children:"Buy Tickets Now"})]}),o.jsxs("div",{style:{position:"relative",marginTop:"auto",padding:"2rem 1rem 1rem 1rem"},children:[o.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.25rem",marginBottom:"1rem"},children:[o.jsx("div",{style:{animation:"bounce 2s infinite"},children:o.jsx("i",{className:"bi bi-chevron-up",style:{color:"#ffffff",fontSize:"1.25rem",opacity:.4}})}),o.jsx("div",{style:{animation:"pulse 2s infinite"},children:o.jsx("p",{style:{color:"#ffffff",fontSize:"0.875rem",fontWeight:"600",letterSpacing:"0.05em",textTransform:"uppercase",textShadow:"0 2px 4px rgba(0, 0, 0, 0.5)",opacity:.4},children:"Pick up where you left off"})})]}),o.jsxs("div",{ref:a,onClick:b,onTouchStart:g,onTouchMove:f,onTouchEnd:k,style:{backgroundColor:"rgba(20, 20, 20, 0.95)",borderRadius:"0.75rem",padding:"1rem",display:"flex",gap:"1rem",cursor:"pointer",transition:"transform 0.3s ease, box-shadow 0.3s ease",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)"},onMouseEnter:y=>{t||(y.currentTarget.style.boxShadow="0 6px 16px rgba(0, 0, 0, 0.5)",y.currentTarget.style.transform="translateY(-4px)")},onMouseLeave:y=>{t||(y.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.4)",y.currentTarget.style.transform="translateY(0)")},children:[o.jsx("img",{src:"https://www.aros.dk/media/3885/luyang_02.png?height=1600&widthratio=1.641025641025641&mode=crop&center=0.30964467005076141,0.50666666666666671&rnd=132822238650000000&format=webp",alt:"DOKU by Lu Yang",style:{width:"80px",height:"80px",borderRadius:"0.5rem",objectFit:"cover",flexShrink:0}}),o.jsxs("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column",gap:"0.5rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"0.5rem"},children:[o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#ffffff",marginBottom:"0.25rem"},children:"DOKU by Lu Yang"}),o.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.6)"},children:"Performance"})]}),o.jsxs("span",{className:"badge bg-danger rounded-pill",style:{fontSize:"0.75rem",padding:"0.375rem 0.75rem",fontWeight:"600",whiteSpace:"nowrap",flexShrink:0},children:["STARTS ",p]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flexWrap:"wrap"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[o.jsx("i",{className:"bi bi-geo-alt-fill",style:{fontSize:"0.625rem",color:"rgba(255, 255, 255, 0.5)"}}),o.jsx("span",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)"},children:"Cinemateque"})]}),o.jsx("span",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)"},children:"Tonight at 8:00pm"})]})]})]})]})]}),o.jsx("style",{children:`
          @keyframes bounce {
            0%, 100% {
              transform: translateY(0);
            }
            50% {
              transform: translateY(-8px);
            }
          }
          @keyframes pulse {
            0%, 100% {
              opacity: 0.8;
            }
            50% {
              opacity: 1;
            }
          }
        `})]})}const E=e=>Date.now()-e*6e4,$a=(e,t=60)=>({id:"sys-2",type:"system",title:"Performance starting soon",message:"DOKU performance begins in 60 minutes",timestamp:e,performanceStartTime:e+t*6e4});function Sm(){const e=[];return e.push({id:"sys-shift-start",type:"system",title:"Shift started",message:"You're 15 minutes into your shift. Peak arrival window approaching.",timestamp:E(15)}),e.push($a(E(3),60)),e.push({id:"concierge-3-followup",type:"concierge",message:"Tickets are $25 each. You can pay at the Gallery 4 entrance with cash or card.",timestamp:E(.5),threadId:"thread-3",parentId:"guest-3-followup"}),e.push({id:"sys-shift-briefing",type:"system",title:"Shift briefing",message:` Next: DOKU starts soon (Cinemateque)
 Heads up: arrivals trending higher than usual
 Watch for: ticket scanning + drink delivery requests
 First move: keep Cinemateque entry moving`,timestamp:E(.1),briefingData:{schedule:[{title:"DOKU",artist:"Lu Yang",location:"Cinemateque",image:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ6crUzfZ7ak2LjN_qjOsgrKkkNbrJ8q2G1hA&s",startTime:"8:00pm",performanceStartTime:Date.now()+60*6e4}],visitors:{current:30,expected:150,trend:[{value:15,time:"7pm"},{value:20,time:"8pm"},{value:45,time:"9pm"},{value:30,time:"10pm"},{value:25,time:"11pm"}],avatars:[{name:"Sarah Chen",avatar:"SC"},{name:"Marcus Johnson",avatar:"MJ"},{name:"Emma Rodriguez",avatar:"ER"},{name:"David Kim",avatar:"DK"}]},staff:{current:4,expected:5,avatars:[{name:"Jeremy Bailey",avatar:"JB"},{name:"Alex Rivera",avatar:"AR"},{name:"Jordan Kim",avatar:"JK"},{name:"Casey Lee",avatar:"CL"}]},tasks:{incomplete:6}}}),e.push({id:"guest-3-followup",type:"guest",name:"Emma Rodriguez",avatar:"ER",message:"Great! How much are tickets?",timestamp:E(1),threadId:"thread-3"}),e.push({id:"concierge-3",type:"concierge",message:"Performance starts in 12 minutes. You can purchase tickets at the Gallery 4 entrance or use the ticket scanner.",timestamp:E(2),threadId:"thread-3",parentId:"guest-3"}),e.push({id:"task-4",type:"task",category:"service",title:"Drink order for Gallery 4",description:"Wine order for Gallery 4 - Zone 2",location:"gallery-4",status:"pending",timestamp:E(2),assignedTo:{name:"Emma Rodriguez",avatar:"ER",type:"guest"}}),e.push({id:"sys-1",type:"system",title:"Arrivals spike: +12 in 10m",message:"Unusual increase in arrivals detected",timestamp:E(5)}),e.push({id:"guest-3",type:"guest",name:"Emma Rodriguez",avatar:"ER",message:"Is the performance still happening? We want to buy tickets.",timestamp:E(3),threadId:"thread-3"}),e.push({id:"task-1",type:"task",category:"ticket",title:"Scan Ticket for Cinemateque",description:"Guest at entrance needs ticket validation",location:"cinemateque",status:"pending",timestamp:E(3),assignedTo:{name:"Sarah Chen",avatar:"SC",type:"guest"}}),e.push({id:"guest-2-followup",type:"guest",name:"Marcus Johnson",avatar:"MJ",message:"Perfect, found it. Thanks!",timestamp:E(4),threadId:"thread-2"}),e.push({id:"concierge-2",type:"concierge",message:"Restrooms are located on the second floor, near the main staircase. There are also facilities on the ground floor near Gallery 2.",timestamp:E(5),threadId:"thread-2",parentId:"guest-2"}),e.push({id:"guest-2",type:"guest",name:"Marcus Johnson",avatar:"MJ",message:"Where is the restroom?",timestamp:E(6),threadId:"thread-2"}),e.push({id:"task-7",type:"task",category:"service",title:"Assist guest with accessibility needs",description:"Guest requested wheelchair access information",status:"pending",timestamp:E(6),assignedTo:{name:"David Kim",avatar:"DK",type:"guest"}}),e.push({id:"concierge-1-followup",type:"concierge",message:"Of course! I'll add water to your order. It will be brought with your drinks.",timestamp:E(7),threadId:"thread-1",parentId:"guest-1-followup"}),e.push({id:"guest-1-followup",type:"guest",name:"Sarah Chen",avatar:"SC",message:"Thank you! Can we also get some water?",timestamp:E(8),threadId:"thread-1"}),e.push({id:"task-2",type:"task",category:"ticket",title:"Ticket scan failed - manual entry required",description:"QR code unreadable, need to enter ticket number manually",status:"pending",timestamp:E(8),assignedTo:{name:"Marcus Johnson",avatar:"MJ",type:"guest"}}),e.push({id:"sys-3",type:"system",title:"High service demand",message:"3 active drink orders pending",timestamp:E(9)}),e.push({id:"concierge-1",type:"concierge",message:"I've notified the service team about your drink order. It should arrive at table 5 within 5-7 minutes.",timestamp:E(9),threadId:"thread-1",parentId:"guest-1"}),e.push({id:"guest-1",type:"guest",name:"Sarah Chen",avatar:"SC",message:"Can we get another drink? We're at table 5 in Gallery 3.",timestamp:E(10),threadId:"thread-1"}),e.push({id:"sys-4",type:"system",title:"Ticket sales update",message:"139 tickets sold out of 150 capacity",timestamp:E(11)}),e.push({id:"task-3",type:"task",category:"ticket",title:"Walk-up ticket sale completed",description:"Sold 2 tickets at Gallery 1 entrance",status:"completed",timestamp:E(12),assignedTo:{name:"Alex Rivera",avatar:"AR",type:"staff"}}),e.push({id:"task-8",type:"task",category:"ticket",title:"Process group booking",description:"Party of 8 needs tickets for tonight's performance",status:"pending",timestamp:E(13),assignedTo:{name:"Priya Patel",avatar:"PP",type:"guest"}}),e.push({id:"guest-5",type:"guest",name:"Alex Thompson",avatar:"AT",message:"Can someone help us find the exit? We're near Gallery 2.",timestamp:E(14)}),e.push({id:"guest-4",type:"guest",name:"David Kim",avatar:"DK",message:"The audio in Gallery 1 seems too loud. Can someone check?",timestamp:E(15)}),e.push({id:"guest-6",type:"guest",name:"Priya Patel",avatar:"PP",message:"The artwork description card is missing in Gallery 1. Can it be replaced?",timestamp:E(16)}),e.push({id:"task-5",type:"task",category:"service",title:"Restock bar supplies",description:"Low on wine glasses and napkins",status:"pending",timestamp:E(18),assignedTo:{name:"Jordan Kim",avatar:"JK",type:"staff"}}),e.push({id:"task-9",type:"task",category:"service",title:"Check temperature in Gallery 3",description:"Guest reported it feels too warm",status:"completed",timestamp:E(20),assignedTo:{name:"Casey Lee",avatar:"CL",type:"staff"}}),e.push({id:"task-6",type:"task",category:"service",title:"Clean up Gallery 2",description:"Spill reported near installation",status:"completed",timestamp:E(25),assignedTo:{name:"Taylor Morgan",avatar:"TM",type:"staff"}}),e.sort((t,n)=>n.timestamp-t.timestamp)}function Cm(){const e=[];return e.push({id:"concierge-3-followup",type:"concierge",message:"Tickets are $25 each. You can pay at the Gallery 4 entrance with cash or card.",timestamp:E(.5),threadId:"thread-3",parentId:"guest-3-followup"}),e.push({id:"guest-3-followup",type:"guest",name:"Emma Rodriguez",avatar:"ER",message:"Great! How much are tickets?",timestamp:E(1),threadId:"thread-3"}),e.push({id:"concierge-3",type:"concierge",message:"Performance starts in 12 minutes. You can purchase tickets at the Gallery 4 entrance or use the ticket scanner.",timestamp:E(2),threadId:"thread-3",parentId:"guest-3"}),e.push({id:"task-4",type:"task",category:"service",title:"Drink order for Gallery 4",description:"Wine order for Gallery 4 - Zone 2",location:"gallery-4",status:"pending",timestamp:E(2),assignedTo:{name:"Emma Rodriguez",avatar:"ER",type:"guest"}}),e.push($a(E(4),10)),e.push({id:"sys-1",type:"system",title:"Arrivals spike: +12 in 10m",message:"Unusual increase in arrivals detected",timestamp:E(5)}),e.push({id:"guest-3",type:"guest",name:"Emma Rodriguez",avatar:"ER",message:"Is the performance still happening? We want to buy tickets.",timestamp:E(3),threadId:"thread-3"}),e.push({id:"task-1",type:"task",category:"ticket",title:"Scan Ticket for Cinemateque",description:"Guest at entrance needs ticket validation",location:"cinemateque",status:"pending",timestamp:E(3),assignedTo:{name:"Sarah Chen",avatar:"SC",type:"guest"}}),e.push({id:"guest-2-followup",type:"guest",name:"Marcus Johnson",avatar:"MJ",message:"Perfect, found it. Thanks!",timestamp:E(4),threadId:"thread-2"}),e.push({id:"concierge-2",type:"concierge",message:"Restrooms are located on the second floor, near the main staircase. There are also facilities on the ground floor near Gallery 2.",timestamp:E(5),threadId:"thread-2",parentId:"guest-2"}),e.push({id:"guest-2",type:"guest",name:"Marcus Johnson",avatar:"MJ",message:"Where is the restroom?",timestamp:E(6),threadId:"thread-2"}),e.push({id:"task-7",type:"task",category:"service",title:"Assist guest with accessibility needs",description:"Guest requested wheelchair access information",status:"pending",timestamp:E(6),assignedTo:{name:"David Kim",avatar:"DK",type:"guest"}}),e.push({id:"concierge-1-followup",type:"concierge",message:"Of course! I'll add water to your order. It will be brought with your drinks.",timestamp:E(7),threadId:"thread-1",parentId:"guest-1-followup"}),e.push({id:"guest-1-followup",type:"guest",name:"Sarah Chen",avatar:"SC",message:"Thank you! Can we also get some water?",timestamp:E(8),threadId:"thread-1"}),e.push({id:"task-2",type:"task",category:"ticket",title:"Ticket scan failed - manual entry required",description:"QR code unreadable, need to enter ticket number manually",status:"pending",timestamp:E(8),assignedTo:{name:"Marcus Johnson",avatar:"MJ",type:"guest"}}),e.push({id:"sys-3",type:"system",title:"High service demand",message:"3 active drink orders pending",timestamp:E(9)}),e.push({id:"concierge-1",type:"concierge",message:"I've notified the service team about your drink order. It should arrive at table 5 within 5-7 minutes.",timestamp:E(9),threadId:"thread-1",parentId:"guest-1"}),e.push({id:"guest-1",type:"guest",name:"Sarah Chen",avatar:"SC",message:"Can we get another drink? We're at table 5 in Gallery 3.",timestamp:E(10),threadId:"thread-1"}),e.push({id:"sys-4",type:"system",title:"Ticket sales update",message:"139 tickets sold out of 150 capacity",timestamp:E(11)}),e.push({id:"task-3",type:"task",category:"ticket",title:"Walk-up ticket sale completed",description:"Sold 2 tickets at Gallery 1 entrance",status:"completed",timestamp:E(12),assignedTo:{name:"Alex Rivera",avatar:"AR",type:"staff"}}),e.push({id:"task-8",type:"task",category:"ticket",title:"Process group booking",description:"Party of 8 needs tickets for tonight's performance",status:"pending",timestamp:E(13),assignedTo:{name:"Priya Patel",avatar:"PP",type:"guest"}}),e.push({id:"guest-5",type:"guest",name:"Alex Thompson",avatar:"AT",message:"Can someone help us find the exit? We're near Gallery 2.",timestamp:E(14)}),e.push({id:"guest-4",type:"guest",name:"David Kim",avatar:"DK",message:"The audio in Gallery 1 seems too loud. Can someone check?",timestamp:E(16)}),e.push({id:"task-audio",type:"task",category:"service",title:"Check audio level in Gallery 1",description:"Guest reported audio too loud in Gallery 1.",location:"gallery-1",status:"pending",timestamp:E(14),assignedTo:{name:"Alex Rivera",avatar:"AR",type:"staff"}}),e.push({id:"guest-6",type:"guest",name:"Priya Patel",avatar:"PP",message:"The artwork description card is missing in Gallery 1. Can it be replaced?",timestamp:E(16)}),e.push({id:"task-5",type:"task",category:"service",title:"Restock bar supplies",description:"Low on wine glasses and napkins",status:"pending",timestamp:E(18),assignedTo:{name:"Jordan Kim",avatar:"JK",type:"staff"}}),e.push({id:"task-9",type:"task",category:"service",title:"Check temperature in Gallery 3",description:"Guest reported it feels too warm",status:"completed",timestamp:E(20),assignedTo:{name:"Casey Lee",avatar:"CL",type:"staff"}}),e.push({id:"task-6",type:"task",category:"service",title:"Clean up Gallery 2",description:"Spill reported near installation",status:"completed",timestamp:E(25),assignedTo:{name:"Taylor Morgan",avatar:"TM",type:"staff"}}),e.sort((t,n)=>n.timestamp-t.timestamp)}function Tm(){const e=[];return e.push({id:"concierge-3-followup",type:"concierge",message:"Tickets are $25 each. You can pay at the Gallery 4 entrance with cash or card.",timestamp:E(.5),threadId:"thread-3",parentId:"guest-3-followup"}),e.push({id:"guest-3-followup",type:"guest",name:"Emma Rodriguez",avatar:"ER",message:"Great! How much are tickets?",timestamp:E(1),threadId:"thread-3"}),e.push({id:"concierge-3",type:"concierge",message:"Performance starts in 12 minutes. You can purchase tickets at the Gallery 4 entrance or use the ticket scanner.",timestamp:E(2),threadId:"thread-3",parentId:"guest-3"}),e.push({id:"task-4",type:"task",category:"service",title:"Drink order for Gallery 4",description:"Wine order for Gallery 4 - Zone 2",location:"gallery-4",status:"pending",timestamp:E(2),assignedTo:{name:"Emma Rodriguez",avatar:"ER",type:"guest"}}),e.push({id:"sys-1",type:"system",title:"Arrivals spike: +12 in 10m",message:"Unusual increase in arrivals detected",timestamp:E(5)}),e.push({id:"guest-3",type:"guest",name:"Emma Rodriguez",avatar:"ER",message:"Is the performance still happening? We want to buy tickets.",timestamp:E(3),threadId:"thread-3"}),e.push({id:"task-1",type:"task",category:"ticket",title:"Scan ticket for Gallery 4",description:"Guest at entrance needs ticket validation",status:"pending",timestamp:E(3),assignedTo:{name:"Sarah Chen",avatar:"SC",type:"guest"}}),e.push({id:"guest-2-followup",type:"guest",name:"Marcus Johnson",avatar:"MJ",message:"Perfect, found it. Thanks!",timestamp:E(4),threadId:"thread-2"}),e.push({id:"concierge-2",type:"concierge",message:"Restrooms are located on the second floor, near the main staircase. There are also facilities on the ground floor near Gallery 2.",timestamp:E(5),threadId:"thread-2",parentId:"guest-2"}),e.push({id:"guest-2",type:"guest",name:"Marcus Johnson",avatar:"MJ",message:"Where is the restroom?",timestamp:E(6),threadId:"thread-2"}),e.push({id:"concierge-lu-yang",type:"concierge",message:`Lu Yang is a Shanghai-based artist known for blending gaming aesthetics, pop performance, Buddhism, and neuroscience.

DOKU explores the idea of a 'digital body'an identity that can be rebuilt, remixed, and transcended.

It's significant because it treats technology and contemporary spirituality as the same emotional space.`,timestamp:E(7.5),threadId:"thread-lu-yang",parentId:"guest-lu-yang"}),e.push({id:"guest-lu-yang",type:"guest",name:"Ava Park",avatar:"AP",message:"Who is Lu Yang, and why is DOKU important?",timestamp:E(8),threadId:"thread-lu-yang"}),e.push({id:"guest-shop-pending",type:"guest",name:"Lisa Park",avatar:"LP",message:"Is the gift shop still open?",timestamp:E(3),threadId:"thread-shop-pending"}),e.push({id:"guest-accessibility",type:"guest",name:"Michael Chen",avatar:"MC",message:"Where's wheelchair access?",timestamp:E(7),threadId:"thread-accessibility"}),e.push({id:"concierge-accessibility",type:"concierge",message:"Elevator access is available near Gallery 2.",timestamp:E(6),threadId:"thread-accessibility",parentId:"guest-accessibility"}),e.push({id:"sys-elevator",type:"system",title:"Notice: Elevator temporarily offline",message:"Use ramp at entrance (elevator temporarily offline).",timestamp:E(5)}),e.push({id:"task-7",type:"task",category:"service",title:"Assist guest with accessibility needs",description:"Guest requested wheelchair access information",status:"pending",timestamp:E(6),assignedTo:{name:"David Kim",avatar:"DK",type:"guest"}}),e.push({id:"concierge-1-followup",type:"concierge",message:"Of course! I'll add water to your order. It will be brought with your drinks.",timestamp:E(7),threadId:"thread-1",parentId:"guest-1-followup"}),e.push({id:"guest-1-followup",type:"guest",name:"Sarah Chen",avatar:"SC",message:"Thank you! Can we also get some water?",timestamp:E(8),threadId:"thread-1"}),e.push({id:"task-2",type:"task",category:"ticket",title:"Ticket scan failed - manual entry required",description:"QR code unreadable, need to enter ticket number manually",status:"pending",timestamp:E(8),assignedTo:{name:"Marcus Johnson",avatar:"MJ",type:"guest"}}),e.push({id:"sys-3",type:"system",title:"High service demand",message:"3 active drink orders pending",timestamp:E(9)}),e.push({id:"concierge-1",type:"concierge",message:"I've notified the service team about your drink order. It should arrive at table 5 within 5-7 minutes.",timestamp:E(9),threadId:"thread-1",parentId:"guest-1"}),e.push({id:"guest-1",type:"guest",name:"Sarah Chen",avatar:"SC",message:"Can we get another drink? We're at table 5 in Gallery 3.",timestamp:E(10),threadId:"thread-1"}),e.push({id:"sys-4",type:"system",title:"Ticket sales update",message:"139 tickets sold out of 150 capacity",timestamp:E(11)}),e.push({id:"task-3",type:"task",category:"ticket",title:"Walk-up ticket sale completed",description:"Sold 2 tickets at Gallery 1 entrance",status:"completed",timestamp:E(12),assignedTo:{name:"Alex Rivera",avatar:"AR",type:"staff"}}),e.push({id:"task-8",type:"task",category:"ticket",title:"Process group booking",description:"Party of 8 needs tickets for tonight's performance",status:"pending",timestamp:E(13),assignedTo:{name:"Priya Patel",avatar:"PP",type:"guest"}}),e.push({id:"guest-5",type:"guest",name:"Alex Thompson",avatar:"AT",message:"Can someone help us find the exit? We're near Gallery 2.",timestamp:E(14)}),e.push({id:"guest-4",type:"guest",name:"David Kim",avatar:"DK",message:"The audio in Gallery 1 seems too loud. Can someone check?",timestamp:E(15)}),e.push({id:"guest-6",type:"guest",name:"Priya Patel",avatar:"PP",message:"The artwork description card is missing in Gallery 1. Can it be replaced?",timestamp:E(16)}),e.push({id:"task-5",type:"task",category:"service",title:"Restock bar supplies",description:"Low on wine glasses and napkins",status:"pending",timestamp:E(18),assignedTo:{name:"Jordan Kim",avatar:"JK",type:"staff"}}),e.push({id:"task-9",type:"task",category:"service",title:"Check temperature in Gallery 3",description:"Guest reported it feels too warm",status:"completed",timestamp:E(20),assignedTo:{name:"Casey Lee",avatar:"CL",type:"staff"}}),e.push({id:"task-6",type:"task",category:"service",title:"Clean up Gallery 2",description:"Spill reported near installation",status:"completed",timestamp:E(25),assignedTo:{name:"Taylor Morgan",avatar:"TM",type:"staff"}}),e.sort((t,n)=>n.timestamp-t.timestamp)}function jm(){const e=[];return e.push({id:"guest-shop-inquiry",type:"guest",name:"Lisa Park",avatar:"LP",message:"Is the gift shop still open? Anything related to Lu Yang?",timestamp:E(.5),threadId:"thread-shop"}),e.push({id:"concierge-shop-response",type:"concierge",message:"Yes, the gift shop is open for another 10 minutes. We have Lu Yang's exhibition catalogue available, plus limited edition prints. Would you like me to help you with a purchase?",timestamp:E(.3),threadId:"thread-shop",parentId:"guest-shop-inquiry"}),e.push({id:"sys-closing-soon",type:"system",title:"Closing soon",message:`Gift shop closes in 10m
Galleries close in 20m
Last call at bar in 15m`,timestamp:E(1)}),e.push({id:"sys-transition-1",type:"system",title:"Transition moment",message:"Post-performance drift: visitors moving toward exit + gift shop.",timestamp:E(1.5)}),e.push({id:"guest-urgent-exit",type:"guest",name:"Michael Chen",avatar:"MC",message:"We're trying to leave quicklywhere's the exit?",timestamp:E(2),threadId:"thread-exit"}),e.push({id:"sys-nudge-suggestion",type:"system",title:"Suggested nudge",message:"If guests are lingering near the shop: mention the Lu Yang catalog + limited prints.",timestamp:E(3)}),e.push({id:"sys-transition-2",type:"system",title:"Transition moment",message:"Dwell slowing in Gallery 3; many guests heading to bar.",timestamp:E(4)}),e.push({id:"sys-pos-confirmation",type:"system",title:"POS completed",message:"Gift shop purchase: Lu Yang catalog + print ($45)",timestamp:E(12)}),e.push({id:"task-4",type:"task",category:"service",title:"Drink order for Gallery 4",description:"Wine order for Gallery 4 - Zone 2",location:"gallery-4",status:"pending",timestamp:E(5),assignedTo:{name:"Emma Rodriguez",avatar:"ER",type:"guest"}}),e.push({id:"sys-1",type:"system",title:"Arrivals spike: +12 in 10m",message:"Unusual increase in arrivals detected",timestamp:E(6)}),e.push({id:"task-1",type:"task",category:"ticket",title:"Scan ticket for Gallery 4",description:"Guest at entrance needs ticket validation",status:"pending",timestamp:E(3),assignedTo:{name:"Sarah Chen",avatar:"SC",type:"guest"}}),e.push({id:"guest-2-followup",type:"guest",name:"Marcus Johnson",avatar:"MJ",message:"Perfect, found it. Thanks!",timestamp:E(4),threadId:"thread-2"}),e.push({id:"concierge-2",type:"concierge",message:"Restrooms are located on the second floor, near the main staircase. There are also facilities on the ground floor near Gallery 2.",timestamp:E(5),threadId:"thread-2",parentId:"guest-2"}),e.push({id:"guest-2",type:"guest",name:"Marcus Johnson",avatar:"MJ",message:"Where is the restroom?",timestamp:E(6),threadId:"thread-2"}),e.push({id:"task-7",type:"task",category:"service",title:"Assist guest with accessibility needs",description:"Guest requested wheelchair access information",status:"pending",timestamp:E(6),assignedTo:{name:"David Kim",avatar:"DK",type:"guest"}}),e.push({id:"concierge-1-followup",type:"concierge",message:"Of course! I'll add water to your order. It will be brought with your drinks.",timestamp:E(7),threadId:"thread-1",parentId:"guest-1-followup"}),e.push({id:"guest-1-followup",type:"guest",name:"Sarah Chen",avatar:"SC",message:"Thank you! Can we also get some water?",timestamp:E(8),threadId:"thread-1"}),e.push({id:"task-2",type:"task",category:"ticket",title:"Ticket scan failed - manual entry required",description:"QR code unreadable, need to enter ticket number manually",status:"pending",timestamp:E(8),assignedTo:{name:"Marcus Johnson",avatar:"MJ",type:"guest"}}),e.push({id:"sys-3",type:"system",title:"High service demand",message:"3 active drink orders pending",timestamp:E(9)}),e.push({id:"concierge-1",type:"concierge",message:"I've notified the service team about your drink order. It should arrive at table 5 within 5-7 minutes.",timestamp:E(9),threadId:"thread-1",parentId:"guest-1"}),e.push({id:"guest-1",type:"guest",name:"Sarah Chen",avatar:"SC",message:"Can we get another drink? We're at table 5 in Gallery 3.",timestamp:E(10),threadId:"thread-1"}),e.push({id:"sys-4",type:"system",title:"Ticket sales update",message:"139 tickets sold out of 150 capacity",timestamp:E(11)}),e.push({id:"task-3",type:"task",category:"ticket",title:"Walk-up ticket sale completed",description:"Sold 2 tickets at Gallery 1 entrance",status:"completed",timestamp:E(12),assignedTo:{name:"Alex Rivera",avatar:"AR",type:"staff"}}),e.push({id:"task-8",type:"task",category:"ticket",title:"Process group booking",description:"Party of 8 needs tickets for tonight's performance",status:"pending",timestamp:E(13),assignedTo:{name:"Priya Patel",avatar:"PP",type:"guest"}}),e.push({id:"guest-5",type:"guest",name:"Alex Thompson",avatar:"AT",message:"Can someone help us find the exit? We're near Gallery 2.",timestamp:E(14)}),e.push({id:"guest-4",type:"guest",name:"David Kim",avatar:"DK",message:"The audio in Gallery 1 seems too loud. Can someone check?",timestamp:E(15)}),e.push({id:"guest-6",type:"guest",name:"Priya Patel",avatar:"PP",message:"The artwork description card is missing in Gallery 1. Can it be replaced?",timestamp:E(16)}),e.push({id:"task-5",type:"task",category:"service",title:"Restock bar supplies",description:"Low on wine glasses and napkins",status:"pending",timestamp:E(18),assignedTo:{name:"Jordan Kim",avatar:"JK",type:"staff"}}),e.push({id:"task-9",type:"task",category:"service",title:"Check temperature in Gallery 3",description:"Guest reported it feels too warm",status:"completed",timestamp:E(20),assignedTo:{name:"Casey Lee",avatar:"CL",type:"staff"}}),e.push({id:"task-6",type:"task",category:"service",title:"Clean up Gallery 2",description:"Spill reported near installation",status:"completed",timestamp:E(25),assignedTo:{name:"Taylor Morgan",avatar:"TM",type:"staff"}}),e.push({id:"task-handoff",type:"task",category:"ticket",title:"Follow up: group booking question",description:"Needs a response before 7pm; unclear who owns.",status:"pending",timestamp:E(45),assignedTo:null}),e.push($a(E(60),0)),e.sort((t,n)=>n.timestamp-t.timestamp)}function Im(){const e=[];return e.push({id:"sys-post-shift-summary",type:"system",title:"Post-shift summary",message:`Ask: "What confused first-time visitors tonight?"
Ask: "Were drink delays worse than usual?"`,summaryData:{attendance:{actual:139,expected:150,percentage:93},peakPressure:{start:"6:45pm",end:"7:30pm"},requestThemes:[{label:"Ticket scan",count:24,color:"rgba(59, 49, 255, 0.8)"},{label:"Washrooms",count:18,color:"rgba(80, 100, 240, 0.8)"},{label:"Drink order",count:15,color:"rgba(100, 120, 230, 0.8)"},{label:"Artist info",count:9,color:"rgba(120, 140, 220, 0.8)"}],frictionSignals:[{label:"Drink delays",count:12,color:"rgba(255, 80, 80, 0.8)"},{label:"Ticket lookup failures",count:6,color:"rgba(240, 100, 100, 0.8)"}],win:"Visitors found DOKU timing easy to follow",opportunity:"Drink delivery ETAs caused repeat questions",nextTime:"Proactively announce gift shop closing at 9:50pm",nextTimeLabel:"Next Time"},timestamp:E(.5)}),e.push({id:"guest-washroom",type:"guest",name:"Sarah Chen",avatar:"SC",message:"Where is the restroom?",timestamp:E(45),threadId:"thread-washroom"}),e.push({id:"concierge-washroom",type:"concierge",message:"Restrooms are located on the second floor, near the main staircase. There are also facilities on the ground floor near Gallery 2.",timestamp:E(44),threadId:"thread-washroom",parentId:"guest-washroom"}),e.push({id:"guest-artist",type:"guest",name:"Marcus Johnson",avatar:"MJ",message:"Can you tell me more about Lu Yang?",timestamp:E(50),threadId:"thread-artist"}),e.push({id:"concierge-artist",type:"concierge",message:"Lu Yang is a multimedia artist known for exploring themes of technology, identity, and the digital body. Their work DOKU is currently showing in the Cinemateque.",timestamp:E(49),threadId:"thread-artist",parentId:"guest-artist"}),e.push({id:"task-drink-delay",type:"task",category:"service",title:"Drink order for Gallery 4",description:"Wine order delayed - bar backed up",location:"gallery-4",status:"completed",timestamp:E(55),assignedTo:{name:"Emma Rodriguez",avatar:"ER",type:"guest"}}),e.push({id:"task-ticket-scan",type:"task",category:"ticket",title:"Ticket scan failed - manual entry required",description:"QR code unreadable, need to enter ticket number manually",status:"completed",timestamp:E(60),assignedTo:{name:"Alex Rivera",avatar:"AR",type:"staff"}}),e.push({id:"sys-arrivals-spike",type:"system",title:"Arrivals spike: +12 in 10m",message:"Unusual increase in arrivals detected",timestamp:E(70)}),e.push({id:"sys-performance-start",type:"system",title:"Performance starting soon",message:"DOKU performance begins in 60 minutes",timestamp:E(120),performanceStartTime:E(60)}),e.push({id:"task-completed-1",type:"task",category:"service",title:"Check temperature in Gallery 3",description:"Guest reported it feels too warm",status:"completed",timestamp:E(75),assignedTo:{name:"Casey Lee",avatar:"CL",type:"staff"}}),e.push({id:"task-completed-2",type:"task",category:"ticket",title:"Walk-up ticket sale completed",description:"Sold 2 tickets at Gallery 1 entrance",status:"completed",timestamp:E(80),assignedTo:{name:"Alex Rivera",avatar:"AR",type:"staff"}}),e.sort((t,n)=>n.timestamp-t.timestamp)}function Nm(){switch(new URLSearchParams(typeof window<"u"?window.location.search:"").get("scenario")||"anticipation"){case"arrival":return Cm();case"during_visit":return Tm();case"handoff":return jm();case"reflection":return Im();case"anticipation":default:return Sm()}}function Yi(e){return`thread-${e.sort().join("-")}`}function Vi(e){return`thread-staff-ai-${e}`}function Em(e,t,n="direct"){let r;if(n==="ai"){const a=t.find(l=>l!=="ai");r=Vi(a)}else r=Yi(t);if(e[r])return e[r];const s=Date.now(),i={id:r,kind:n,participantIds:[...t].sort(),messages:[],lastMessageAt:s,createdAt:s,unreadCount:0,unread:!1};return e[r]=i,i}function Pm(e,t,n,r=Date.now()){const s={id:`msg-${r}-${Math.random().toString(36).substr(2,9)}`,senderId:t,text:n,createdAt:r};return e.messages.push(s),e.lastMessageAt=r,s}function zm(e,t){const r=[...new Set(e.participantIds)].map(l=>{const u=t[l];if(!u){if(console.warn("Participant not found in map:",l,"Available keys:",Object.keys(t),"Map:",t),l==="ai")return{id:"ai",type:"ai",name:"Canyon Concierge",avatar:"AI"};if(l.includes("jeremy")||l.includes("staff"))return{id:l,type:"staff",name:"Jeremy Bailey",avatar:"JB"};const d=Object.values(t).find(v=>v.type==="guest"&&(v.id===l||v.id.startsWith(l)||l.startsWith(v.id)));return d?(console.log("Found guest by partial match:",l,"->",d),d):(console.error("Could not find participant, using fallback:",l),{id:l,type:"guest",name:"Guest",avatar:"?"})}return u}).filter(Boolean),s=new Set,i=r.filter(l=>s.has(l.id)?!1:(s.add(l.id),!0));if(i.length===0)return console.error("Thread has no participants:",e),null;i.find(l=>l.type!=="ai")||i[0],e.messages[e.messages.length-1];const a=e.lastMessageAt||e.createdAt||Date.now();return{type:"thread",id:e.id,thread:{id:e.id,participants:i,messages:e.messages.map(l=>{var u;return{id:l.id,type:l.senderId==="ai"?"concierge":((u=t[l.senderId])==null?void 0:u.type)||"guest",sender:l.senderId==="ai"?{type:"ai",name:"Canyon Concierge",avatar:"AI"}:t[l.senderId]||{id:l.senderId,type:"guest",name:"Guest",avatar:"?"},message:l.text,timestamp:l.createdAt}}),lastActivity:a,unreadCount:e.unreadCount,unread:e.unread},timestamp:a}}function Rm(){const e=(C,I)=>{try{const _=typeof window<"u"?window.location.search:"",x=new URLSearchParams(_),P=x.get(C);if(P)return P;for(const[T]of x.entries())if(typeof T=="string"&&T.startsWith(`${C}=`))return T.slice(`${C}=`.length)||I;const Z=decodeURIComponent(_||"").match(new RegExp(`[?&]${C}=([^&]+)`));if(Z&&Z[1])return Z[1]}catch{}return I},[t,n]=j.useState([]),[r,s]=j.useState("all"),[i,a]=j.useState(null),[l,u]=j.useState(null),[d,v]=j.useState(null),[g,f]=j.useState(null),k=j.useRef(null),b=j.useRef(null),[h,q]=j.useState(0),[m,p]=j.useState({}),c="jeremy-bailey",[y,S]=j.useState(!1);j.useEffect(()=>{const C=()=>{S(document.body.hasAttribute("data-bottom-sheet-open"))};C();const I=new MutationObserver(C);return I.observe(document.body,{attributes:!0,attributeFilter:["data-bottom-sheet-open"]}),()=>I.disconnect()},[]),j.useEffect(()=>{const C=()=>{if(b.current){const _=b.current.offsetHeight;q(_)}};C();const I=new ResizeObserver(C);return b.current&&I.observe(b.current),()=>{I.disconnect()}},[]);const D=j.useRef(new Map),[O,U]=j.useState(null),pe=j.useRef(0),X=j.useRef(!1),[Se,ce]=j.useState(!0),[A,te]=j.useState(0);j.useRef(0);const[ae,G]=j.useState(()=>{try{const C=localStorage.getItem("canyon-starred-ids");if(C)return new Set(JSON.parse(C))}catch(C){console.error("Failed to load starred ids from localStorage:",C)}return new Set});j.useEffect(()=>{try{localStorage.setItem("canyon-starred-ids",JSON.stringify(Array.from(ae)))}catch(C){console.error("Failed to save starred ids to localStorage:",C)}},[ae]);const ee=j.useRef(!1),[N,Q]=j.useState(()=>e("scenario","anticipation")),[$,J]=j.useState(()=>e("mode","staff")),[se,ye]=j.useState(()=>{if(!(e("mode","staff")==="visitor"))return!1;const I=e("skipHomepage","false")==="true",_=e("direct","false")==="true";return!(I||_)});j.useEffect(()=>{const C=()=>{const _=e("scenario","anticipation"),x=e("mode","staff");_!==N&&Q(_),x!==$&&J(x)};C(),window.addEventListener("popstate",C);const I=setInterval(C,100);return()=>{window.removeEventListener("popstate",C),clearInterval(I)}},[N,$]),j.useEffect(()=>{const C=Nm();n(C);const I={},_={};_[c]={id:c,type:"staff",name:"Jeremy Bailey",avatar:"JB"},_.ai={id:"ai",type:"ai",name:"Canyon Concierge",avatar:"AI"};const x=new Map;C.forEach(M=>{M.type==="guest"&&M.id&&(x.has(M.name)||x.set(M.name,M.id),_[M.id]={id:M.id,type:"guest",name:M.name,avatar:M.avatar})}),x.forEach((M,Z)=>{if(!_[M]){const T=C.find(W=>W.type==="guest"&&W.name===Z);T&&(_[M]={id:M,type:"guest",name:Z,avatar:T.avatar})}}),console.log("Participant map built:",_);const P=fm(C);console.log("Grouped threads:",P.length,P),P.forEach(M=>{var je;let Z=M.participants.map(me=>me.type==="guest"?me.id:me.type==="staff"?c:me.type==="ai"?"ai":null).filter(Boolean);const T=M.participants.some(me=>me.type==="guest");T&&!Z.includes(c)&&Z.push(c);const W=[...Z].sort();let B;const he=M.participants.some(me=>me.type==="ai"),Pe=Z.includes(c);M.id&&typeof M.id=="string"&&(M.id.startsWith("thread-")||M.id.startsWith("thread-staff-ai-"))?B=M.id:he&&Pe&&!T?B=Vi(c):B=Yi(W),I[B]={id:B,kind:he?"ai":"direct",participantIds:W,messages:M.messages.map((me,kt)=>{let Ye;return kt<3&&console.log(`Mapping message ${kt}:`,{msgId:me.id,senderType:me.sender.type,senderId:me.sender.id,senderName:me.sender.name,message:me.message.substring(0,30)}),me.sender.type==="ai"?Ye="ai":me.sender.type==="guest"?me.sender.id?Ye=me.sender.id:(Ye=W.find(gr=>{const wn=_[gr];return wn&&wn.type==="guest"&&wn.name===me.sender.name}),console.warn("Guest message missing sender.id, using fallback:",me,"found:",Ye)):(me.sender.type,Ye=me.sender.id||c),Ye||(console.error("Could not determine senderId for message:",me,"thread:",M.id),Ye=c),kt<3&&console.log(`Mapped to senderId: ${Ye}`),{id:me.id,senderId:Ye,text:me.text||me.message,createdAt:me.timestamp}}),lastMessageAt:M.lastActivity,createdAt:((je=M.messages[0])==null?void 0:je.timestamp)||M.lastActivity,unreadCount:M.unreadCount||0,unread:M.unread||!1}}),console.log("Initialized threads:",Object.keys(I).length),console.log("Thread IDs:",Object.keys(I)),console.log("Thread details:",Object.values(I).map(M=>({id:M.id,participantIds:M.participantIds,messageCount:M.messages.length,lastMessageAt:M.lastMessageAt}))),p(I),ee.current=!1},[N]),j.useEffect(()=>{t.length>0&&k.current&&!ee.current&&setTimeout(()=>{k.current&&(k.current.scrollTop=k.current.scrollHeight,ee.current=!0)},100)},[t]),j.useEffect(()=>{r!=="all"&&i===null&&a(60)},[r]),j.useEffect(()=>{if(i===null||i<=0){i===0&&s("all");return}const C=setInterval(()=>{a(I=>I<=1?(s("all"),null):I-1)},1e3);return()=>clearInterval(C)},[i]),j.useEffect(()=>{r==="all"&&a(null)},[r]),j.useEffect(()=>{const C=k.current;if(!C)return;const I=()=>{const _=C.scrollTop,x=C.scrollHeight,P=C.clientHeight,Z=x-P-_<120;Z!==Se&&(ce(Z),Z&&te(0))};return C.addEventListener("scroll",I,{passive:!0}),()=>{C.removeEventListener("scroll",I)}},[Se]);const ve=C=>{r===C?(s("all"),a(null)):(s(C),a(C==="all"||C==="starred"?null:60))},Ne=C=>{G(I=>{const _=new Set(I);return _.has(C)?_.delete(C):_.add(C),_})},V=C=>{u(C)},oe=C=>{n(I=>I.map(_=>_.id===C?{..._,status:"completed"}:_)),u(null)},be=C=>{alert(`Task ${C} reassigned`),u(null)},Te=(C,I)=>{n(_=>_.map(P=>P.id===C?{...P,location:I||null}:P))},ne=C=>{v(C)},Fe=(C,I)=>{if(!(C!=null&&C.trim()))return{success:!1,error:"Message cannot be empty"};if(!I)return{success:!1,error:"Select someone to message"};const{type:_,participantIds:x,kind:P}=I;console.log("sendChatMessage:",{text:C,chatTarget:I,participantIds:x,kind:P});let M;if(P==="ai"){const W=x.find(B=>B!=="ai");M=Vi(W)}else{const W=[...x].sort();M=Yi(W)}const Z=m[M]!==void 0;let T=null;return p(W=>{const B={...W},he=Em(B,x,P);Z||(T=he.id),console.log("Thread found/created:",he.id,he,"isNewThread:",!Z);const Pe=Date.now();return Pm(he,c,C,Pe),console.log("Message added, thread now has",he.messages.length,"messages"),B[he.id]={...he,messages:[...he.messages],lastMessageAt:Pe},{...B}}),T&&setTimeout(()=>{Ge(T)},150),{success:!0}},Ze=(C,I,_=null)=>{if(console.log("handleSendMessage called with:",{message:C,recipients:I,primaryAction:_}),!_){if(!I||I.length===0)return{success:!1,error:"Select someone to message"};if(I.length>1)return{success:!1,error:"Only one recipient allowed"};const W=I[0];let B=[c],he="direct";return W.type==="ai"?(he="ai",B=[c,"ai"]):W.type==="guest"?B=[c,W.id]:W.type==="staff"&&(B=[c,W.id]),Fe(C,{type:"direct",participantIds:B,kind:he})}if(!(C!=null&&C.trim())&&(!I||I.length===0))return console.log("No message or recipients, skipping"),{success:!1};const x=I==null?void 0:I.find(W=>W.type==="guest"),P=I==null?void 0:I.find(W=>W.type==="staff");let M=null,Z=null;if(x){const W=t.find(B=>B.type==="guest"&&B.id===x.id);M=(W==null?void 0:W.threadId)||`thread-${x.id}`,Z=x.id}else P&&(M=`thread-staff-${P.id}`);const T={id:`message-${Date.now()}`,type:"concierge",message:(C==null?void 0:C.trim())||"No message",timestamp:Date.now(),sender:{name:"Jeremy Bailey",avatar:"JB",type:"staff"},recipients:(I||[]).map(W=>({id:W.id,name:W.name,type:W.type})),threadId:M,parentId:Z};console.log("Creating new item:",T),n(W=>{const B=[...W,T];return console.log("Updated feed items count:",B.length),console.log("New item in array:",B.find(he=>he.id===T.id)),B}),Ge(T.id),te(0),ce(!0)},pt=()=>{k.current&&(k.current.scrollTo({top:k.current.scrollHeight,behavior:"smooth"}),te(0),ce(!0))},Ge=C=>{if(!(!k.current||!C))try{setTimeout(()=>{var I;try{const _=(I=D.current)==null?void 0:I.get(C);if(_&&k.current){const x=k.current,P=_.getBoundingClientRect(),M=x.getBoundingClientRect(),Z=x.scrollTop,B=P.top-M.top+Z-20;x.scrollTo({top:Math.max(0,B),behavior:"smooth"}),U(C),setTimeout(()=>{U(null)},2e3)}else pt()}catch(_){console.error("Error in scrollToItemAndHighlight:",_),pt()}},100)}catch(I){console.error("Error setting up scrollToItemAndHighlight:",I)}},_n=(C,I)=>{if(console.log("Tool action:",C,I),C==="create-task"){const _=I.assignee||{name:"Jeremy Bailey",avatar:"JB",type:"staff"},x=I.posPayload?"Complete purchase":I.description||"New Task",P=I.posPayload?I.description&&I.description!=="Complete purchase"?I.description:null:I.description,M={id:`task-${Date.now()}`,type:"task",category:"service",title:x,description:P,status:"assigned",timestamp:Date.now(),assignedTo:_,forGuest:I.forGuest||null,location:I.location||null,posPayload:I.posPayload||null};n(Z=>[...Z,M]),Ge(M.id),v(null),u(null);return}if(C==="execute-pos"){const _=I.cart.reduce((Z,T)=>Z+T.quantity*T.price,0),x=I.cart.map(Z=>`${Z.quantity} ${Z.name}`).join(", "),P=I.paymentMethod==="cash"?"Cash":I.paymentMethod==="card"?"Card":"Card on File",M={id:`pos-${Date.now()}`,type:"system",title:`POS completed: ${x}  $${_.toFixed(2)}  ${P}`,note:I.note||null,timestamp:Date.now(),posReceipt:{cart:I.cart,paymentMethod:I.paymentMethod,total:_,forGuest:I.forGuest}};n(Z=>[...Z,M]),Ge(M.id),te(0),ce(!0);return}if(C==="check-in"){const _={id:`checkin-${Date.now()}`,type:"system",title:`Checked in: ${I.guest.name}`,note:I.note||null,timestamp:Date.now()};n(x=>[...x,_]),Ge(_.id),te(0),ce(!0);return}alert(`Action: ${C}
Data: ${JSON.stringify(I,null,2)}`),v(null),u(null)},mr=C=>{f(C)},bn=()=>{f(null)},Mt=j.useMemo(()=>{const C={};return C[c]={id:c,type:"staff",name:"Jeremy Bailey",avatar:"JB"},C.ai={id:"ai",type:"ai",name:"Canyon Concierge",avatar:"AI"},t.forEach(I=>{if(I.type==="guest"&&I.id&&(C[I.id]={id:I.id,type:"guest",name:I.name,avatar:I.avatar}),I.type==="task"&&I.assignedTo&&I.assignedTo.type==="staff"){const _=`staff-${I.assignedTo.name}`;C[_]||(C[_]={id:_,type:"staff",name:I.assignedTo.name,avatar:I.assignedTo.avatar||I.assignedTo.name.charAt(0)})}}),Object.values(m).forEach(I=>{I.participantIds.forEach(_=>{if(!C[_])if(I.messages.find(x=>x.senderId===_),_==="ai")C[_]={id:"ai",type:"ai",name:"Canyon Concierge",avatar:"AI"};else if(_===c)C[_]={id:c,type:"staff",name:"Jeremy Bailey",avatar:"JB"};else{const x=t.find(P=>P.id===_);if(x&&x.type==="guest")C[_]={id:_,type:"guest",name:x.name,avatar:x.avatar};else if(_.startsWith("staff-")){const P=t.find(M=>M.type==="task"&&M.assignedTo&&M.assignedTo.type==="staff"&&`staff-${M.assignedTo.name}`===_);P&&P.assignedTo&&(C[_]={id:_,type:"staff",name:P.assignedTo.name,avatar:P.assignedTo.avatar||P.assignedTo.name.charAt(0)})}}})}),C},[t,c,m]),Ft=j.useMemo(()=>{const C=Object.values(m).map(P=>{try{return zm(P,Mt)}catch(M){return console.error("Error converting thread to feed item:",P,M),null}}).filter(Boolean),I=t.filter(P=>P.type==="task"||P.type==="system"),x=[...C,...I].sort((P,M)=>P.timestamp-M.timestamp);return console.log("visibleFeedItems:",{threadCount:C.length,nonThreadCount:I.length,total:x.length,threadsByIdKeys:Object.keys(m).length}),x},[m,t,Mt]),$t=(C,I)=>I==="all"?!0:I==="starred"?ae&&ae instanceof Set&&ae.has(C.id):I==="service"?C.type==="task":I==="guests"?C.type==="guest"||C.type==="concierge":I==="system"?C.type==="system":I==="pending"?C.type==="pending_draft"||C.status==="pending_review":!1,Dt=j.useRef(r);j.useEffect(()=>{var C,I;if(Dt.current==="all"&&r!=="all"){if(pe.current=0,d||((C=document.activeElement)==null?void 0:C.tagName)==="INPUT"||((I=document.activeElement)==null?void 0:I.tagName)==="TEXTAREA"){Dt.current=r;return}const _=Ft.filter(M=>$t(M,r));if(console.log("Auto-scroll: Filter activated",{filter:r,matchingItemsCount:_.length,allItemsCount:Ft.length,starredIdsSize:(ae==null?void 0:ae.size)||0}),_.length===0){console.log("Auto-scroll: No matching items found"),Dt.current=r;return}const x=_[_.length-1];console.log("Auto-scroll: Target item",{itemId:x.id,itemType:x.type,timestamp:x.timestamp});const P=D.current.get(x.id);console.log("Auto-scroll: Element lookup",{hasElement:!!P,refsMapSize:D.current.size,allRefIds:Array.from(D.current.keys())}),P&&k.current?requestAnimationFrame(()=>{requestAnimationFrame(()=>{const M=D.current.get(x.id);if(!M||!k.current){console.log("Auto-scroll: Element not found or container missing",{itemId:x.id});return}const Z=Date.now()-pe.current;if(Z<200&&Z>0){console.log("Auto-scroll: User scrolled after filter activation, aborting");return}const T=k.current,W=T.getBoundingClientRect(),B=M.getBoundingClientRect(),he=T.scrollTop,Pe=B.top-W.top+he,kt=60+12+12,Ye=Pe-kt;console.log("Auto-scroll: Scrolling to item",{itemId:x.id,currentScrollTop:he,elementTopRelativeToContainer:Pe,targetScrollTop:Ye,offset:kt}),T.scrollTo({top:Math.max(0,Ye),behavior:"smooth"})})}):console.log("Auto-scroll: Target element or container not found",{hasTargetElement:!!P,hasFeedRef:!!k.current,targetItemId:x==null?void 0:x.id})}Dt.current=r},[r,Ft,ae,d]),j.useEffect(()=>{const C=k.current;if(!C)return;const I=()=>{pe.current=Date.now(),X.current=!0,clearTimeout(X.timeout),X.timeout=setTimeout(()=>{X.current=!1},300)};return C.addEventListener("scroll",I,{passive:!0}),()=>{C.removeEventListener("scroll",I),X.timeout&&clearTimeout(X.timeout)}},[]);const Zt=(C,I)=>{var x;if(!C||!I||!I.trim()){console.warn("Invalid thread reply:",{threadId:C,message:I});return}const _=Fe(I.trim(),{type:"direct",participantIds:((x=m[C])==null?void 0:x.participantIds)||[]});_.success?console.log("Thread reply sent successfully"):console.error("Failed to send thread reply:",_.error)};if($!=="visitor"&&g){let C,I;if(g.threadId){if(C=g.threadId,I=m[C],!I){const _=Object.values(m).find(x=>{var P;return x.id===C||((P=x.id)==null?void 0:P.toLowerCase())===(C==null?void 0:C.toLowerCase())});_&&(I=_,C=_.id)}if(!I&&g.thread){const _=g.thread;I={id:_.id,participantIds:_.participants.map(x=>x.id),participants:_.participants,messages:_.messages.map(x=>{var P,M,Z;return{id:x.id,senderId:((P=x.sender)==null?void 0:P.id)||(((M=x.sender)==null?void 0:M.type)==="ai"?"ai":(Z=x.sender)==null?void 0:Z.id),text:x.message||x.text,createdAt:x.timestamp||x.createdAt}}),lastMessageAt:_.lastActivity,createdAt:_.lastActivity,unreadCount:_.unreadCount||0,unread:_.unread||!1}}}else if(g.thread){if(C=g.thread.id||g.id,I=m[C],!I){const _=Object.values(m).find(x=>{var P;return x.id===C||((P=x.id)==null?void 0:P.toLowerCase())===(C==null?void 0:C.toLowerCase())});_&&(I=_,C=_.id)}if(!I&&g.thread){const _=g.thread;I={id:_.id,participantIds:_.participants.map(x=>x.id),participants:_.participants,messages:_.messages.map(x=>{var P,M,Z;return{id:x.id,senderId:((P=x.sender)==null?void 0:P.id)||(((M=x.sender)==null?void 0:M.type)==="ai"?"ai":(Z=x.sender)==null?void 0:Z.id),text:x.message||x.text,createdAt:x.timestamp||x.createdAt}}),lastMessageAt:_.lastActivity,createdAt:_.lastActivity,unreadCount:_.unreadCount||0,unread:_.unread||!1}}}else g.id&&(C=g.id,I=Object.values(m).find(_=>_.participantIds&&_.participantIds.includes(C)));return I?o.jsx(hm,{thread:I,onBack:bn,onReply:Zt,participantMap:Mt,currentUserId:c}):(console.error("Thread not found:",{openThread:g,threadId:C,availableThreads:Object.keys(m)}),null)}return $==="visitor"?o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:se?1:2},children:o.jsx(bm,{itemRefs:D,currentUserId:c,highlightedItemId:O,feedRef:k,composerRef:b})}),se&&o.jsx(wm,{onEnterFeed:()=>ye(!1)})]}):o.jsx(ym,{feedItems:t,visibleFeedItems:Ft,activeFilter:r,onFilterChange:ve,starredIds:ae,onToggleStar:Ne,selectedContext:l,onItemClick:V,onOpenThread:mr,onClearSelectedContext:()=>u(null),itemRefs:D,onUpdateTaskLocation:Te,onCompleteTask:oe,currentUserId:c,highlightedItemId:O,atBottom:Se,isBottomSheetOpen:y,scrollToBottom:pt,composerHeight:h,feedRef:k,composerRef:b,toolMode:d,onToolModeChange:ne,onToolAction:_n,onReassignTask:be,onSendMessage:(C,I,_)=>Ze(C,I,_)})}const Am=qo.createRoot(document.getElementById("root"));Am.render(o.jsx(mu.StrictMode,{children:o.jsx(Rm,{})}));
