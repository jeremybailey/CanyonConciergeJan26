(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Md(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var nu={exports:{}},so={},ru={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var es=Symbol.for("react.element"),Dd=Symbol.for("react.portal"),_d=Symbol.for("react.fragment"),Ld=Symbol.for("react.strict_mode"),Bd=Symbol.for("react.profiler"),Od=Symbol.for("react.provider"),Wd=Symbol.for("react.context"),Fd=Symbol.for("react.forward_ref"),$d=Symbol.for("react.suspense"),Hd=Symbol.for("react.memo"),Ud=Symbol.for("react.lazy"),Ua=Symbol.iterator;function Gd(e){return e===null||typeof e!="object"?null:(e=Ua&&e[Ua]||e["@@iterator"],typeof e=="function"?e:null)}var su={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ou=Object.assign,iu={};function fr(e,t,n){this.props=e,this.context=t,this.refs=iu,this.updater=n||su}fr.prototype.isReactComponent={};fr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};fr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function au(){}au.prototype=fr.prototype;function Vi(e,t,n){this.props=e,this.context=t,this.refs=iu,this.updater=n||su}var Ki=Vi.prototype=new au;Ki.constructor=Vi;ou(Ki,fr.prototype);Ki.isPureReactComponent=!0;var Ga=Array.isArray,lu=Object.prototype.hasOwnProperty,Qi={current:null},uu={key:!0,ref:!0,__self:!0,__source:!0};function cu(e,t,n){var r,s={},i=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)lu.call(t,r)&&!uu.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),f=0;f<l;f++)u[f]=arguments[f+2];s.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:es,type:e,key:i,ref:a,props:s,_owner:Qi.current}}function Yd(e,t){return{$$typeof:es,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function qi(e){return typeof e=="object"&&e!==null&&e.$$typeof===es}function Vd(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ya=/\/+/g;function So(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Vd(""+e.key):t.toString(36)}function ws(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case es:case Dd:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+So(a,0):r,Ga(s)?(n="",e!=null&&(n=e.replace(Ya,"$&/")+"/"),ws(s,t,n,"",function(f){return f})):s!=null&&(qi(s)&&(s=Yd(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Ya,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",Ga(e))for(var l=0;l<e.length;l++){i=e[l];var u=r+So(i,l);a+=ws(i,t,n,u,s)}else if(u=Gd(e),typeof u=="function")for(e=u.call(e),l=0;!(i=e.next()).done;)i=i.value,u=r+So(i,l++),a+=ws(i,t,n,u,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function os(e,t,n){if(e==null)return e;var r=[],s=0;return ws(e,r,"","",function(i){return t.call(n,i,s++)}),r}function Kd(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ot={current:null},Ss={transition:null},Qd={ReactCurrentDispatcher:ot,ReactCurrentBatchConfig:Ss,ReactCurrentOwner:Qi};function du(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:os,forEach:function(e,t,n){os(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return os(e,function(){t++}),t},toArray:function(e){return os(e,function(t){return t})||[]},only:function(e){if(!qi(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ve.Component=fr;ve.Fragment=_d;ve.Profiler=Bd;ve.PureComponent=Vi;ve.StrictMode=Ld;ve.Suspense=$d;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qd;ve.act=du;ve.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=ou({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=Qi.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)lu.call(t,u)&&!uu.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&l!==void 0?l[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var f=0;f<u;f++)l[f]=arguments[f+2];r.children=l}return{$$typeof:es,type:e.type,key:s,ref:i,props:r,_owner:a}};ve.createContext=function(e){return e={$$typeof:Wd,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Od,_context:e},e.Consumer=e};ve.createElement=cu;ve.createFactory=function(e){var t=cu.bind(null,e);return t.type=e,t};ve.createRef=function(){return{current:null}};ve.forwardRef=function(e){return{$$typeof:Fd,render:e}};ve.isValidElement=qi;ve.lazy=function(e){return{$$typeof:Ud,_payload:{_status:-1,_result:e},_init:Kd}};ve.memo=function(e,t){return{$$typeof:Hd,type:e,compare:t===void 0?null:t}};ve.startTransition=function(e){var t=Ss.transition;Ss.transition={};try{e()}finally{Ss.transition=t}};ve.unstable_act=du;ve.useCallback=function(e,t){return ot.current.useCallback(e,t)};ve.useContext=function(e){return ot.current.useContext(e)};ve.useDebugValue=function(){};ve.useDeferredValue=function(e){return ot.current.useDeferredValue(e)};ve.useEffect=function(e,t){return ot.current.useEffect(e,t)};ve.useId=function(){return ot.current.useId()};ve.useImperativeHandle=function(e,t,n){return ot.current.useImperativeHandle(e,t,n)};ve.useInsertionEffect=function(e,t){return ot.current.useInsertionEffect(e,t)};ve.useLayoutEffect=function(e,t){return ot.current.useLayoutEffect(e,t)};ve.useMemo=function(e,t){return ot.current.useMemo(e,t)};ve.useReducer=function(e,t,n){return ot.current.useReducer(e,t,n)};ve.useRef=function(e){return ot.current.useRef(e)};ve.useState=function(e){return ot.current.useState(e)};ve.useSyncExternalStore=function(e,t,n){return ot.current.useSyncExternalStore(e,t,n)};ve.useTransition=function(){return ot.current.useTransition()};ve.version="18.3.1";ru.exports=ve;var j=ru.exports;const fu=Md(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qd=j,Jd=Symbol.for("react.element"),Xd=Symbol.for("react.fragment"),Zd=Object.prototype.hasOwnProperty,ef=qd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tf={key:!0,ref:!0,__self:!0,__source:!0};function pu(e,t,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)Zd.call(t,r)&&!tf.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:Jd,type:e,key:i,ref:a,props:s,_owner:ef.current}}so.Fragment=Xd;so.jsx=pu;so.jsxs=pu;nu.exports=so;var o=nu.exports,Qo={},mu={exports:{}},yt={},gu={exports:{}},hu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(_,D){var Z=_.length;_.push(D);e:for(;0<Z;){var Q=Z-1>>>1,ue=_[Q];if(0<s(ue,D))_[Q]=D,_[Z]=ue,Z=Q;else break e}}function n(_){return _.length===0?null:_[0]}function r(_){if(_.length===0)return null;var D=_[0],Z=_.pop();if(Z!==D){_[0]=Z;e:for(var Q=0,ue=_.length,Se=ue>>>1;Q<Se;){var Ne=2*(Q+1)-1,_e=_[Ne],Ce=Ne+1,ne=_[Ce];if(0>s(_e,Z))Ce<ue&&0>s(ne,_e)?(_[Q]=ne,_[Ce]=Z,Q=Ce):(_[Q]=_e,_[Ne]=Z,Q=Ne);else if(Ce<ue&&0>s(ne,Z))_[Q]=ne,_[Ce]=Z,Q=Ce;else break e}}return D}function s(_,D){var Z=_.sortIndex-D.sortIndex;return Z!==0?Z:_.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],f=[],k=1,m=null,p=3,w=!1,h=!1,T=!1,X=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,c=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function d(_){for(var D=n(f);D!==null;){if(D.callback===null)r(f);else if(D.startTime<=_)r(f),D.sortIndex=D.expirationTime,t(u,D);else break;D=n(f)}}function v(_){if(T=!1,d(_),!h)if(n(u)!==null)h=!0,J(A);else{var D=n(f);D!==null&&$(v,D.startTime-_)}}function A(_,D){h=!1,T&&(T=!1,g(K),K=-1),w=!0;var Z=p;try{for(d(D),m=n(u);m!==null&&(!(m.expirationTime>D)||_&&!V());){var Q=m.callback;if(typeof Q=="function"){m.callback=null,p=m.priorityLevel;var ue=Q(m.expirationTime<=D);D=e.unstable_now(),typeof ue=="function"?m.callback=ue:m===n(u)&&r(u),d(D)}else r(u);m=n(u)}if(m!==null)var Se=!0;else{var Ne=n(f);Ne!==null&&$(v,Ne.startTime-D),Se=!1}return Se}finally{m=null,p=Z,w=!1}}var R=!1,L=null,K=-1,oe=5,te=-1;function V(){return!(e.unstable_now()-te<oe)}function U(){if(L!==null){var _=e.unstable_now();te=_;var D=!0;try{D=L(!0,_)}finally{D?G():(R=!1,L=null)}}else R=!1}var G;if(typeof c=="function")G=function(){c(U)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,q=W.port2;W.port1.onmessage=U,G=function(){q.postMessage(null)}}else G=function(){X(U,0)};function J(_){L=_,R||(R=!0,G())}function $(_,D){K=X(function(){_(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(_){_.callback=null},e.unstable_continueExecution=function(){h||w||(h=!0,J(A))},e.unstable_forceFrameRate=function(_){0>_||125<_?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):oe=0<_?Math.floor(1e3/_):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(_){switch(p){case 1:case 2:case 3:var D=3;break;default:D=p}var Z=p;p=D;try{return _()}finally{p=Z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(_,D){switch(_){case 1:case 2:case 3:case 4:case 5:break;default:_=3}var Z=p;p=_;try{return D()}finally{p=Z}},e.unstable_scheduleCallback=function(_,D,Z){var Q=e.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?Q+Z:Q):Z=Q,_){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=Z+ue,_={id:k++,callback:D,priorityLevel:_,startTime:Z,expirationTime:ue,sortIndex:-1},Z>Q?(_.sortIndex=Z,t(f,_),n(u)===null&&_===n(f)&&(T?(g(K),K=-1):T=!0,$(v,Z-Q))):(_.sortIndex=ue,t(u,_),h||w||(h=!0,J(A))),_},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(_){var D=p;return function(){var Z=p;p=D;try{return _.apply(this,arguments)}finally{p=Z}}}})(hu);gu.exports=hu;var nf=gu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rf=j,ht=nf;function F(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yu=new Set,Lr={};function Dn(e,t){or(e,t),or(e+"Capture",t)}function or(e,t){for(Lr[e]=t,e=0;e<t.length;e++)yu.add(t[e])}var Qt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qo=Object.prototype.hasOwnProperty,sf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Va={},Ka={};function of(e){return qo.call(Ka,e)?!0:qo.call(Va,e)?!1:sf.test(e)?Ka[e]=!0:(Va[e]=!0,!1)}function af(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function lf(e,t,n,r){if(t===null||typeof t>"u"||af(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function it(e,t,n,r,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Je[e]=new it(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Je[t]=new it(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Je[e]=new it(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Je[e]=new it(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Je[e]=new it(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Je[e]=new it(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Je[e]=new it(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Je[e]=new it(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Je[e]=new it(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ji=/[\-:]([a-z])/g;function Xi(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ji,Xi);Je[t]=new it(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ji,Xi);Je[t]=new it(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ji,Xi);Je[t]=new it(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Je[e]=new it(e,1,!1,e.toLowerCase(),null,!1,!1)});Je.xlinkHref=new it("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Je[e]=new it(e,1,!1,e.toLowerCase(),null,!0,!0)});function Zi(e,t,n,r){var s=Je.hasOwnProperty(t)?Je[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(lf(t,n,s,r)&&(n=null),r||s===null?of(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Zt=rf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,is=Symbol.for("react.element"),Wn=Symbol.for("react.portal"),Fn=Symbol.for("react.fragment"),ea=Symbol.for("react.strict_mode"),Jo=Symbol.for("react.profiler"),vu=Symbol.for("react.provider"),xu=Symbol.for("react.context"),ta=Symbol.for("react.forward_ref"),Xo=Symbol.for("react.suspense"),Zo=Symbol.for("react.suspense_list"),na=Symbol.for("react.memo"),nn=Symbol.for("react.lazy"),ku=Symbol.for("react.offscreen"),Qa=Symbol.iterator;function hr(e){return e===null||typeof e!="object"?null:(e=Qa&&e[Qa]||e["@@iterator"],typeof e=="function"?e:null)}var De=Object.assign,Co;function Cr(e){if(Co===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Co=t&&t[1]||""}return`
`+Co+e}var To=!1;function jo(e,t){if(!e||To)return"";To=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var r=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){r=f}e.call(t.prototype)}else{try{throw Error()}catch(f){r=f}e()}}catch(f){if(f&&r&&typeof f.stack=="string"){for(var s=f.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var u=`
`+s[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=a&&0<=l);break}}}finally{To=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Cr(e):""}function uf(e){switch(e.tag){case 5:return Cr(e.type);case 16:return Cr("Lazy");case 13:return Cr("Suspense");case 19:return Cr("SuspenseList");case 0:case 2:case 15:return e=jo(e.type,!1),e;case 11:return e=jo(e.type.render,!1),e;case 1:return e=jo(e.type,!0),e;default:return""}}function ei(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Fn:return"Fragment";case Wn:return"Portal";case Jo:return"Profiler";case ea:return"StrictMode";case Xo:return"Suspense";case Zo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case xu:return(e.displayName||"Context")+".Consumer";case vu:return(e._context.displayName||"Context")+".Provider";case ta:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case na:return t=e.displayName||null,t!==null?t:ei(e.type)||"Memo";case nn:t=e._payload,e=e._init;try{return ei(e(t))}catch{}}return null}function cf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ei(t);case 8:return t===ea?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function yn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function bu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function df(e){var t=bu(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function as(e){e._valueTracker||(e._valueTracker=df(e))}function wu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=bu(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ms(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ti(e,t){var n=t.checked;return De({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function qa(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=yn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Su(e,t){t=t.checked,t!=null&&Zi(e,"checked",t,!1)}function ni(e,t){Su(e,t);var n=yn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ri(e,t.type,n):t.hasOwnProperty("defaultValue")&&ri(e,t.type,yn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ja(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ri(e,t,n){(t!=="number"||Ms(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Tr=Array.isArray;function Zn(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+yn(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function si(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(F(91));return De({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Xa(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(F(92));if(Tr(n)){if(1<n.length)throw Error(F(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:yn(n)}}function Cu(e,t){var n=yn(t.value),r=yn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Za(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Tu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oi(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Tu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ls,ju=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ls=ls||document.createElement("div"),ls.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ls.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Br(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Nr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ff=["Webkit","ms","Moz","O"];Object.keys(Nr).forEach(function(e){ff.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Nr[t]=Nr[e]})});function Iu(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Nr.hasOwnProperty(e)&&Nr[e]?(""+t).trim():t+"px"}function Nu(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Iu(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var pf=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ii(e,t){if(t){if(pf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(F(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(F(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(F(61))}if(t.style!=null&&typeof t.style!="object")throw Error(F(62))}}function ai(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var li=null;function ra(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ui=null,er=null,tr=null;function el(e){if(e=rs(e)){if(typeof ui!="function")throw Error(F(280));var t=e.stateNode;t&&(t=uo(t),ui(e.stateNode,e.type,t))}}function Eu(e){er?tr?tr.push(e):tr=[e]:er=e}function zu(){if(er){var e=er,t=tr;if(tr=er=null,el(e),t)for(e=0;e<t.length;e++)el(t[e])}}function Ru(e,t){return e(t)}function Pu(){}var Io=!1;function Au(e,t,n){if(Io)return e(t,n);Io=!0;try{return Ru(e,t,n)}finally{Io=!1,(er!==null||tr!==null)&&(Pu(),zu())}}function Or(e,t){var n=e.stateNode;if(n===null)return null;var r=uo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(F(231,t,typeof n));return n}var ci=!1;if(Qt)try{var yr={};Object.defineProperty(yr,"passive",{get:function(){ci=!0}}),window.addEventListener("test",yr,yr),window.removeEventListener("test",yr,yr)}catch{ci=!1}function mf(e,t,n,r,s,i,a,l,u){var f=Array.prototype.slice.call(arguments,3);try{t.apply(n,f)}catch(k){this.onError(k)}}var Er=!1,Ds=null,_s=!1,di=null,gf={onError:function(e){Er=!0,Ds=e}};function hf(e,t,n,r,s,i,a,l,u){Er=!1,Ds=null,mf.apply(gf,arguments)}function yf(e,t,n,r,s,i,a,l,u){if(hf.apply(this,arguments),Er){if(Er){var f=Ds;Er=!1,Ds=null}else throw Error(F(198));_s||(_s=!0,di=f)}}function _n(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Mu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function tl(e){if(_n(e)!==e)throw Error(F(188))}function vf(e){var t=e.alternate;if(!t){if(t=_n(e),t===null)throw Error(F(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return tl(s),e;if(i===r)return tl(s),t;i=i.sibling}throw Error(F(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?e:t}function Du(e){return e=vf(e),e!==null?_u(e):null}function _u(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=_u(e);if(t!==null)return t;e=e.sibling}return null}var Lu=ht.unstable_scheduleCallback,nl=ht.unstable_cancelCallback,xf=ht.unstable_shouldYield,kf=ht.unstable_requestPaint,Be=ht.unstable_now,bf=ht.unstable_getCurrentPriorityLevel,sa=ht.unstable_ImmediatePriority,Bu=ht.unstable_UserBlockingPriority,Ls=ht.unstable_NormalPriority,wf=ht.unstable_LowPriority,Ou=ht.unstable_IdlePriority,oo=null,Ot=null;function Sf(e){if(Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(oo,e,void 0,(e.current.flags&128)===128)}catch{}}var Rt=Math.clz32?Math.clz32:jf,Cf=Math.log,Tf=Math.LN2;function jf(e){return e>>>=0,e===0?32:31-(Cf(e)/Tf|0)|0}var us=64,cs=4194304;function jr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Bs(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=jr(l):(i&=a,i!==0&&(r=jr(i)))}else a=n&~s,a!==0?r=jr(a):i!==0&&(r=jr(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Rt(t),s=1<<n,r|=e[n],t&=~s;return r}function If(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nf(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-Rt(i),l=1<<a,u=s[a];u===-1?(!(l&n)||l&r)&&(s[a]=If(l,t)):u<=t&&(e.expiredLanes|=l),i&=~l}}function fi(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Wu(){var e=us;return us<<=1,!(us&4194240)&&(us=64),e}function No(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ts(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Rt(t),e[t]=n}function Ef(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-Rt(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function oa(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Rt(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var Te=0;function Fu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var $u,ia,Hu,Uu,Gu,pi=!1,ds=[],un=null,cn=null,dn=null,Wr=new Map,Fr=new Map,sn=[],zf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rl(e,t){switch(e){case"focusin":case"focusout":un=null;break;case"dragenter":case"dragleave":cn=null;break;case"mouseover":case"mouseout":dn=null;break;case"pointerover":case"pointerout":Wr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fr.delete(t.pointerId)}}function vr(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=rs(t),t!==null&&ia(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function Rf(e,t,n,r,s){switch(t){case"focusin":return un=vr(un,e,t,n,r,s),!0;case"dragenter":return cn=vr(cn,e,t,n,r,s),!0;case"mouseover":return dn=vr(dn,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Wr.set(i,vr(Wr.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Fr.set(i,vr(Fr.get(i)||null,e,t,n,r,s)),!0}return!1}function Yu(e){var t=Tn(e.target);if(t!==null){var n=_n(t);if(n!==null){if(t=n.tag,t===13){if(t=Mu(n),t!==null){e.blockedOn=t,Gu(e.priority,function(){Hu(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Cs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=mi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);li=r,n.target.dispatchEvent(r),li=null}else return t=rs(n),t!==null&&ia(t),e.blockedOn=n,!1;t.shift()}return!0}function sl(e,t,n){Cs(e)&&n.delete(t)}function Pf(){pi=!1,un!==null&&Cs(un)&&(un=null),cn!==null&&Cs(cn)&&(cn=null),dn!==null&&Cs(dn)&&(dn=null),Wr.forEach(sl),Fr.forEach(sl)}function xr(e,t){e.blockedOn===t&&(e.blockedOn=null,pi||(pi=!0,ht.unstable_scheduleCallback(ht.unstable_NormalPriority,Pf)))}function $r(e){function t(s){return xr(s,e)}if(0<ds.length){xr(ds[0],e);for(var n=1;n<ds.length;n++){var r=ds[n];r.blockedOn===e&&(r.blockedOn=null)}}for(un!==null&&xr(un,e),cn!==null&&xr(cn,e),dn!==null&&xr(dn,e),Wr.forEach(t),Fr.forEach(t),n=0;n<sn.length;n++)r=sn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<sn.length&&(n=sn[0],n.blockedOn===null);)Yu(n),n.blockedOn===null&&sn.shift()}var nr=Zt.ReactCurrentBatchConfig,Os=!0;function Af(e,t,n,r){var s=Te,i=nr.transition;nr.transition=null;try{Te=1,aa(e,t,n,r)}finally{Te=s,nr.transition=i}}function Mf(e,t,n,r){var s=Te,i=nr.transition;nr.transition=null;try{Te=4,aa(e,t,n,r)}finally{Te=s,nr.transition=i}}function aa(e,t,n,r){if(Os){var s=mi(e,t,n,r);if(s===null)Bo(e,t,r,Ws,n),rl(e,r);else if(Rf(s,e,t,n,r))r.stopPropagation();else if(rl(e,r),t&4&&-1<zf.indexOf(e)){for(;s!==null;){var i=rs(s);if(i!==null&&$u(i),i=mi(e,t,n,r),i===null&&Bo(e,t,r,Ws,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Bo(e,t,r,null,n)}}var Ws=null;function mi(e,t,n,r){if(Ws=null,e=ra(r),e=Tn(e),e!==null)if(t=_n(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Mu(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ws=e,null}function Vu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bf()){case sa:return 1;case Bu:return 4;case Ls:case wf:return 16;case Ou:return 536870912;default:return 16}default:return 16}}var an=null,la=null,Ts=null;function Ku(){if(Ts)return Ts;var e,t=la,n=t.length,r,s="value"in an?an.value:an.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[i-r];r++);return Ts=s.slice(e,1<r?1-r:void 0)}function js(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function fs(){return!0}function ol(){return!1}function vt(e){function t(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?fs:ol,this.isPropagationStopped=ol,this}return De(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fs)},persist:function(){},isPersistent:fs}),t}var pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ua=vt(pr),ns=De({},pr,{view:0,detail:0}),Df=vt(ns),Eo,zo,kr,io=De({},ns,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ca,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==kr&&(kr&&e.type==="mousemove"?(Eo=e.screenX-kr.screenX,zo=e.screenY-kr.screenY):zo=Eo=0,kr=e),Eo)},movementY:function(e){return"movementY"in e?e.movementY:zo}}),il=vt(io),_f=De({},io,{dataTransfer:0}),Lf=vt(_f),Bf=De({},ns,{relatedTarget:0}),Ro=vt(Bf),Of=De({},pr,{animationName:0,elapsedTime:0,pseudoElement:0}),Wf=vt(Of),Ff=De({},pr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),$f=vt(Ff),Hf=De({},pr,{data:0}),al=vt(Hf),Uf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Yf[e])?!!t[e]:!1}function ca(){return Vf}var Kf=De({},ns,{key:function(e){if(e.key){var t=Uf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=js(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Gf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ca,charCode:function(e){return e.type==="keypress"?js(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?js(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Qf=vt(Kf),qf=De({},io,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ll=vt(qf),Jf=De({},ns,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ca}),Xf=vt(Jf),Zf=De({},pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),ep=vt(Zf),tp=De({},io,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),np=vt(tp),rp=[9,13,27,32],da=Qt&&"CompositionEvent"in window,zr=null;Qt&&"documentMode"in document&&(zr=document.documentMode);var sp=Qt&&"TextEvent"in window&&!zr,Qu=Qt&&(!da||zr&&8<zr&&11>=zr),ul=" ",cl=!1;function qu(e,t){switch(e){case"keyup":return rp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ju(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $n=!1;function op(e,t){switch(e){case"compositionend":return Ju(t);case"keypress":return t.which!==32?null:(cl=!0,ul);case"textInput":return e=t.data,e===ul&&cl?null:e;default:return null}}function ip(e,t){if($n)return e==="compositionend"||!da&&qu(e,t)?(e=Ku(),Ts=la=an=null,$n=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Qu&&t.locale!=="ko"?null:t.data;default:return null}}var ap={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ap[e.type]:t==="textarea"}function Xu(e,t,n,r){Eu(r),t=Fs(t,"onChange"),0<t.length&&(n=new ua("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Rr=null,Hr=null;function lp(e){uc(e,0)}function ao(e){var t=Gn(e);if(wu(t))return e}function up(e,t){if(e==="change")return t}var Zu=!1;if(Qt){var Po;if(Qt){var Ao="oninput"in document;if(!Ao){var fl=document.createElement("div");fl.setAttribute("oninput","return;"),Ao=typeof fl.oninput=="function"}Po=Ao}else Po=!1;Zu=Po&&(!document.documentMode||9<document.documentMode)}function pl(){Rr&&(Rr.detachEvent("onpropertychange",ec),Hr=Rr=null)}function ec(e){if(e.propertyName==="value"&&ao(Hr)){var t=[];Xu(t,Hr,e,ra(e)),Au(lp,t)}}function cp(e,t,n){e==="focusin"?(pl(),Rr=t,Hr=n,Rr.attachEvent("onpropertychange",ec)):e==="focusout"&&pl()}function dp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ao(Hr)}function fp(e,t){if(e==="click")return ao(t)}function pp(e,t){if(e==="input"||e==="change")return ao(t)}function mp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var At=typeof Object.is=="function"?Object.is:mp;function Ur(e,t){if(At(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!qo.call(t,s)||!At(e[s],t[s]))return!1}return!0}function ml(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gl(e,t){var n=ml(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ml(n)}}function tc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?tc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function nc(){for(var e=window,t=Ms();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ms(e.document)}return t}function fa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function gp(e){var t=nc(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&tc(n.ownerDocument.documentElement,n)){if(r!==null&&fa(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=gl(n,i);var a=gl(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var hp=Qt&&"documentMode"in document&&11>=document.documentMode,Hn=null,gi=null,Pr=null,hi=!1;function hl(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;hi||Hn==null||Hn!==Ms(r)||(r=Hn,"selectionStart"in r&&fa(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Pr&&Ur(Pr,r)||(Pr=r,r=Fs(gi,"onSelect"),0<r.length&&(t=new ua("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Hn)))}function ps(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Un={animationend:ps("Animation","AnimationEnd"),animationiteration:ps("Animation","AnimationIteration"),animationstart:ps("Animation","AnimationStart"),transitionend:ps("Transition","TransitionEnd")},Mo={},rc={};Qt&&(rc=document.createElement("div").style,"AnimationEvent"in window||(delete Un.animationend.animation,delete Un.animationiteration.animation,delete Un.animationstart.animation),"TransitionEvent"in window||delete Un.transitionend.transition);function lo(e){if(Mo[e])return Mo[e];if(!Un[e])return e;var t=Un[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in rc)return Mo[e]=t[n];return e}var sc=lo("animationend"),oc=lo("animationiteration"),ic=lo("animationstart"),ac=lo("transitionend"),lc=new Map,yl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xn(e,t){lc.set(e,t),Dn(t,[e])}for(var Do=0;Do<yl.length;Do++){var _o=yl[Do],yp=_o.toLowerCase(),vp=_o[0].toUpperCase()+_o.slice(1);xn(yp,"on"+vp)}xn(sc,"onAnimationEnd");xn(oc,"onAnimationIteration");xn(ic,"onAnimationStart");xn("dblclick","onDoubleClick");xn("focusin","onFocus");xn("focusout","onBlur");xn(ac,"onTransitionEnd");or("onMouseEnter",["mouseout","mouseover"]);or("onMouseLeave",["mouseout","mouseover"]);or("onPointerEnter",["pointerout","pointerover"]);or("onPointerLeave",["pointerout","pointerover"]);Dn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ir="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xp=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ir));function vl(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,yf(r,t,void 0,e),e.currentTarget=null}function uc(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],u=l.instance,f=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;vl(s,l,f),i=u}else for(a=0;a<r.length;a++){if(l=r[a],u=l.instance,f=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;vl(s,l,f),i=u}}}if(_s)throw e=di,_s=!1,di=null,e}function Ee(e,t){var n=t[bi];n===void 0&&(n=t[bi]=new Set);var r=e+"__bubble";n.has(r)||(cc(t,e,2,!1),n.add(r))}function Lo(e,t,n){var r=0;t&&(r|=4),cc(n,e,r,t)}var ms="_reactListening"+Math.random().toString(36).slice(2);function Gr(e){if(!e[ms]){e[ms]=!0,yu.forEach(function(n){n!=="selectionchange"&&(xp.has(n)||Lo(n,!1,e),Lo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ms]||(t[ms]=!0,Lo("selectionchange",!1,t))}}function cc(e,t,n,r){switch(Vu(t)){case 1:var s=Af;break;case 4:s=Mf;break;default:s=aa}n=s.bind(null,t,n,e),s=void 0,!ci||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Bo(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Tn(l),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}l=l.parentNode}}r=r.return}Au(function(){var f=i,k=ra(n),m=[];e:{var p=lc.get(e);if(p!==void 0){var w=ua,h=e;switch(e){case"keypress":if(js(n)===0)break e;case"keydown":case"keyup":w=Qf;break;case"focusin":h="focus",w=Ro;break;case"focusout":h="blur",w=Ro;break;case"beforeblur":case"afterblur":w=Ro;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=il;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=Lf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=Xf;break;case sc:case oc:case ic:w=Wf;break;case ac:w=ep;break;case"scroll":w=Df;break;case"wheel":w=np;break;case"copy":case"cut":case"paste":w=$f;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=ll}var T=(t&4)!==0,X=!T&&e==="scroll",g=T?p!==null?p+"Capture":null:p;T=[];for(var c=f,d;c!==null;){d=c;var v=d.stateNode;if(d.tag===5&&v!==null&&(d=v,g!==null&&(v=Or(c,g),v!=null&&T.push(Yr(c,v,d)))),X)break;c=c.return}0<T.length&&(p=new w(p,h,null,n,k),m.push({event:p,listeners:T}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",p&&n!==li&&(h=n.relatedTarget||n.fromElement)&&(Tn(h)||h[qt]))break e;if((w||p)&&(p=k.window===k?k:(p=k.ownerDocument)?p.defaultView||p.parentWindow:window,w?(h=n.relatedTarget||n.toElement,w=f,h=h?Tn(h):null,h!==null&&(X=_n(h),h!==X||h.tag!==5&&h.tag!==6)&&(h=null)):(w=null,h=f),w!==h)){if(T=il,v="onMouseLeave",g="onMouseEnter",c="mouse",(e==="pointerout"||e==="pointerover")&&(T=ll,v="onPointerLeave",g="onPointerEnter",c="pointer"),X=w==null?p:Gn(w),d=h==null?p:Gn(h),p=new T(v,c+"leave",w,n,k),p.target=X,p.relatedTarget=d,v=null,Tn(k)===f&&(T=new T(g,c+"enter",h,n,k),T.target=d,T.relatedTarget=X,v=T),X=v,w&&h)t:{for(T=w,g=h,c=0,d=T;d;d=On(d))c++;for(d=0,v=g;v;v=On(v))d++;for(;0<c-d;)T=On(T),c--;for(;0<d-c;)g=On(g),d--;for(;c--;){if(T===g||g!==null&&T===g.alternate)break t;T=On(T),g=On(g)}T=null}else T=null;w!==null&&xl(m,p,w,T,!1),h!==null&&X!==null&&xl(m,X,h,T,!0)}}e:{if(p=f?Gn(f):window,w=p.nodeName&&p.nodeName.toLowerCase(),w==="select"||w==="input"&&p.type==="file")var A=up;else if(dl(p))if(Zu)A=pp;else{A=dp;var R=cp}else(w=p.nodeName)&&w.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(A=fp);if(A&&(A=A(e,f))){Xu(m,A,n,k);break e}R&&R(e,p,f),e==="focusout"&&(R=p._wrapperState)&&R.controlled&&p.type==="number"&&ri(p,"number",p.value)}switch(R=f?Gn(f):window,e){case"focusin":(dl(R)||R.contentEditable==="true")&&(Hn=R,gi=f,Pr=null);break;case"focusout":Pr=gi=Hn=null;break;case"mousedown":hi=!0;break;case"contextmenu":case"mouseup":case"dragend":hi=!1,hl(m,n,k);break;case"selectionchange":if(hp)break;case"keydown":case"keyup":hl(m,n,k)}var L;if(da)e:{switch(e){case"compositionstart":var K="onCompositionStart";break e;case"compositionend":K="onCompositionEnd";break e;case"compositionupdate":K="onCompositionUpdate";break e}K=void 0}else $n?qu(e,n)&&(K="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(K="onCompositionStart");K&&(Qu&&n.locale!=="ko"&&($n||K!=="onCompositionStart"?K==="onCompositionEnd"&&$n&&(L=Ku()):(an=k,la="value"in an?an.value:an.textContent,$n=!0)),R=Fs(f,K),0<R.length&&(K=new al(K,e,null,n,k),m.push({event:K,listeners:R}),L?K.data=L:(L=Ju(n),L!==null&&(K.data=L)))),(L=sp?op(e,n):ip(e,n))&&(f=Fs(f,"onBeforeInput"),0<f.length&&(k=new al("onBeforeInput","beforeinput",null,n,k),m.push({event:k,listeners:f}),k.data=L))}uc(m,t)})}function Yr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fs(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Or(e,n),i!=null&&r.unshift(Yr(e,i,s)),i=Or(e,t),i!=null&&r.push(Yr(e,i,s))),e=e.return}return r}function On(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function xl(e,t,n,r,s){for(var i=t._reactName,a=[];n!==null&&n!==r;){var l=n,u=l.alternate,f=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&f!==null&&(l=f,s?(u=Or(n,i),u!=null&&a.unshift(Yr(n,u,l))):s||(u=Or(n,i),u!=null&&a.push(Yr(n,u,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var kp=/\r\n?/g,bp=/\u0000|\uFFFD/g;function kl(e){return(typeof e=="string"?e:""+e).replace(kp,`
`).replace(bp,"")}function gs(e,t,n){if(t=kl(t),kl(e)!==t&&n)throw Error(F(425))}function $s(){}var yi=null,vi=null;function xi(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ki=typeof setTimeout=="function"?setTimeout:void 0,wp=typeof clearTimeout=="function"?clearTimeout:void 0,bl=typeof Promise=="function"?Promise:void 0,Sp=typeof queueMicrotask=="function"?queueMicrotask:typeof bl<"u"?function(e){return bl.resolve(null).then(e).catch(Cp)}:ki;function Cp(e){setTimeout(function(){throw e})}function Oo(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),$r(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);$r(t)}function fn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function wl(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var mr=Math.random().toString(36).slice(2),Bt="__reactFiber$"+mr,Vr="__reactProps$"+mr,qt="__reactContainer$"+mr,bi="__reactEvents$"+mr,Tp="__reactListeners$"+mr,jp="__reactHandles$"+mr;function Tn(e){var t=e[Bt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[qt]||n[Bt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=wl(e);e!==null;){if(n=e[Bt])return n;e=wl(e)}return t}e=n,n=e.parentNode}return null}function rs(e){return e=e[Bt]||e[qt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Gn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(F(33))}function uo(e){return e[Vr]||null}var wi=[],Yn=-1;function kn(e){return{current:e}}function ze(e){0>Yn||(e.current=wi[Yn],wi[Yn]=null,Yn--)}function Ie(e,t){Yn++,wi[Yn]=e.current,e.current=t}var vn={},tt=kn(vn),ut=kn(!1),zn=vn;function ir(e,t){var n=e.type.contextTypes;if(!n)return vn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function ct(e){return e=e.childContextTypes,e!=null}function Hs(){ze(ut),ze(tt)}function Sl(e,t,n){if(tt.current!==vn)throw Error(F(168));Ie(tt,t),Ie(ut,n)}function dc(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(F(108,cf(e)||"Unknown",s));return De({},n,r)}function Us(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||vn,zn=tt.current,Ie(tt,e),Ie(ut,ut.current),!0}function Cl(e,t,n){var r=e.stateNode;if(!r)throw Error(F(169));n?(e=dc(e,t,zn),r.__reactInternalMemoizedMergedChildContext=e,ze(ut),ze(tt),Ie(tt,e)):ze(ut),Ie(ut,n)}var Gt=null,co=!1,Wo=!1;function fc(e){Gt===null?Gt=[e]:Gt.push(e)}function Ip(e){co=!0,fc(e)}function bn(){if(!Wo&&Gt!==null){Wo=!0;var e=0,t=Te;try{var n=Gt;for(Te=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Gt=null,co=!1}catch(s){throw Gt!==null&&(Gt=Gt.slice(e+1)),Lu(sa,bn),s}finally{Te=t,Wo=!1}}return null}var Vn=[],Kn=0,Gs=null,Ys=0,xt=[],kt=0,Rn=null,Yt=1,Vt="";function Sn(e,t){Vn[Kn++]=Ys,Vn[Kn++]=Gs,Gs=e,Ys=t}function pc(e,t,n){xt[kt++]=Yt,xt[kt++]=Vt,xt[kt++]=Rn,Rn=e;var r=Yt;e=Vt;var s=32-Rt(r)-1;r&=~(1<<s),n+=1;var i=32-Rt(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Yt=1<<32-Rt(t)+s|n<<s|r,Vt=i+e}else Yt=1<<i|n<<s|r,Vt=e}function pa(e){e.return!==null&&(Sn(e,1),pc(e,1,0))}function ma(e){for(;e===Gs;)Gs=Vn[--Kn],Vn[Kn]=null,Ys=Vn[--Kn],Vn[Kn]=null;for(;e===Rn;)Rn=xt[--kt],xt[kt]=null,Vt=xt[--kt],xt[kt]=null,Yt=xt[--kt],xt[kt]=null}var gt=null,mt=null,Pe=!1,zt=null;function mc(e,t){var n=bt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Tl(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,gt=e,mt=fn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,gt=e,mt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Rn!==null?{id:Yt,overflow:Vt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=bt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,gt=e,mt=null,!0):!1;default:return!1}}function Si(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ci(e){if(Pe){var t=mt;if(t){var n=t;if(!Tl(e,t)){if(Si(e))throw Error(F(418));t=fn(n.nextSibling);var r=gt;t&&Tl(e,t)?mc(r,n):(e.flags=e.flags&-4097|2,Pe=!1,gt=e)}}else{if(Si(e))throw Error(F(418));e.flags=e.flags&-4097|2,Pe=!1,gt=e}}}function jl(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;gt=e}function hs(e){if(e!==gt)return!1;if(!Pe)return jl(e),Pe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!xi(e.type,e.memoizedProps)),t&&(t=mt)){if(Si(e))throw gc(),Error(F(418));for(;t;)mc(e,t),t=fn(t.nextSibling)}if(jl(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(F(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){mt=fn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}mt=null}}else mt=gt?fn(e.stateNode.nextSibling):null;return!0}function gc(){for(var e=mt;e;)e=fn(e.nextSibling)}function ar(){mt=gt=null,Pe=!1}function ga(e){zt===null?zt=[e]:zt.push(e)}var Np=Zt.ReactCurrentBatchConfig;function br(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,e))}return e}function ys(e,t){throw e=Object.prototype.toString.call(t),Error(F(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Il(e){var t=e._init;return t(e._payload)}function hc(e){function t(g,c){if(e){var d=g.deletions;d===null?(g.deletions=[c],g.flags|=16):d.push(c)}}function n(g,c){if(!e)return null;for(;c!==null;)t(g,c),c=c.sibling;return null}function r(g,c){for(g=new Map;c!==null;)c.key!==null?g.set(c.key,c):g.set(c.index,c),c=c.sibling;return g}function s(g,c){return g=hn(g,c),g.index=0,g.sibling=null,g}function i(g,c,d){return g.index=d,e?(d=g.alternate,d!==null?(d=d.index,d<c?(g.flags|=2,c):d):(g.flags|=2,c)):(g.flags|=1048576,c)}function a(g){return e&&g.alternate===null&&(g.flags|=2),g}function l(g,c,d,v){return c===null||c.tag!==6?(c=Vo(d,g.mode,v),c.return=g,c):(c=s(c,d),c.return=g,c)}function u(g,c,d,v){var A=d.type;return A===Fn?k(g,c,d.props.children,v,d.key):c!==null&&(c.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===nn&&Il(A)===c.type)?(v=s(c,d.props),v.ref=br(g,c,d),v.return=g,v):(v=As(d.type,d.key,d.props,null,g.mode,v),v.ref=br(g,c,d),v.return=g,v)}function f(g,c,d,v){return c===null||c.tag!==4||c.stateNode.containerInfo!==d.containerInfo||c.stateNode.implementation!==d.implementation?(c=Ko(d,g.mode,v),c.return=g,c):(c=s(c,d.children||[]),c.return=g,c)}function k(g,c,d,v,A){return c===null||c.tag!==7?(c=En(d,g.mode,v,A),c.return=g,c):(c=s(c,d),c.return=g,c)}function m(g,c,d){if(typeof c=="string"&&c!==""||typeof c=="number")return c=Vo(""+c,g.mode,d),c.return=g,c;if(typeof c=="object"&&c!==null){switch(c.$$typeof){case is:return d=As(c.type,c.key,c.props,null,g.mode,d),d.ref=br(g,null,c),d.return=g,d;case Wn:return c=Ko(c,g.mode,d),c.return=g,c;case nn:var v=c._init;return m(g,v(c._payload),d)}if(Tr(c)||hr(c))return c=En(c,g.mode,d,null),c.return=g,c;ys(g,c)}return null}function p(g,c,d,v){var A=c!==null?c.key:null;if(typeof d=="string"&&d!==""||typeof d=="number")return A!==null?null:l(g,c,""+d,v);if(typeof d=="object"&&d!==null){switch(d.$$typeof){case is:return d.key===A?u(g,c,d,v):null;case Wn:return d.key===A?f(g,c,d,v):null;case nn:return A=d._init,p(g,c,A(d._payload),v)}if(Tr(d)||hr(d))return A!==null?null:k(g,c,d,v,null);ys(g,d)}return null}function w(g,c,d,v,A){if(typeof v=="string"&&v!==""||typeof v=="number")return g=g.get(d)||null,l(c,g,""+v,A);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case is:return g=g.get(v.key===null?d:v.key)||null,u(c,g,v,A);case Wn:return g=g.get(v.key===null?d:v.key)||null,f(c,g,v,A);case nn:var R=v._init;return w(g,c,d,R(v._payload),A)}if(Tr(v)||hr(v))return g=g.get(d)||null,k(c,g,v,A,null);ys(c,v)}return null}function h(g,c,d,v){for(var A=null,R=null,L=c,K=c=0,oe=null;L!==null&&K<d.length;K++){L.index>K?(oe=L,L=null):oe=L.sibling;var te=p(g,L,d[K],v);if(te===null){L===null&&(L=oe);break}e&&L&&te.alternate===null&&t(g,L),c=i(te,c,K),R===null?A=te:R.sibling=te,R=te,L=oe}if(K===d.length)return n(g,L),Pe&&Sn(g,K),A;if(L===null){for(;K<d.length;K++)L=m(g,d[K],v),L!==null&&(c=i(L,c,K),R===null?A=L:R.sibling=L,R=L);return Pe&&Sn(g,K),A}for(L=r(g,L);K<d.length;K++)oe=w(L,g,K,d[K],v),oe!==null&&(e&&oe.alternate!==null&&L.delete(oe.key===null?K:oe.key),c=i(oe,c,K),R===null?A=oe:R.sibling=oe,R=oe);return e&&L.forEach(function(V){return t(g,V)}),Pe&&Sn(g,K),A}function T(g,c,d,v){var A=hr(d);if(typeof A!="function")throw Error(F(150));if(d=A.call(d),d==null)throw Error(F(151));for(var R=A=null,L=c,K=c=0,oe=null,te=d.next();L!==null&&!te.done;K++,te=d.next()){L.index>K?(oe=L,L=null):oe=L.sibling;var V=p(g,L,te.value,v);if(V===null){L===null&&(L=oe);break}e&&L&&V.alternate===null&&t(g,L),c=i(V,c,K),R===null?A=V:R.sibling=V,R=V,L=oe}if(te.done)return n(g,L),Pe&&Sn(g,K),A;if(L===null){for(;!te.done;K++,te=d.next())te=m(g,te.value,v),te!==null&&(c=i(te,c,K),R===null?A=te:R.sibling=te,R=te);return Pe&&Sn(g,K),A}for(L=r(g,L);!te.done;K++,te=d.next())te=w(L,g,K,te.value,v),te!==null&&(e&&te.alternate!==null&&L.delete(te.key===null?K:te.key),c=i(te,c,K),R===null?A=te:R.sibling=te,R=te);return e&&L.forEach(function(U){return t(g,U)}),Pe&&Sn(g,K),A}function X(g,c,d,v){if(typeof d=="object"&&d!==null&&d.type===Fn&&d.key===null&&(d=d.props.children),typeof d=="object"&&d!==null){switch(d.$$typeof){case is:e:{for(var A=d.key,R=c;R!==null;){if(R.key===A){if(A=d.type,A===Fn){if(R.tag===7){n(g,R.sibling),c=s(R,d.props.children),c.return=g,g=c;break e}}else if(R.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===nn&&Il(A)===R.type){n(g,R.sibling),c=s(R,d.props),c.ref=br(g,R,d),c.return=g,g=c;break e}n(g,R);break}else t(g,R);R=R.sibling}d.type===Fn?(c=En(d.props.children,g.mode,v,d.key),c.return=g,g=c):(v=As(d.type,d.key,d.props,null,g.mode,v),v.ref=br(g,c,d),v.return=g,g=v)}return a(g);case Wn:e:{for(R=d.key;c!==null;){if(c.key===R)if(c.tag===4&&c.stateNode.containerInfo===d.containerInfo&&c.stateNode.implementation===d.implementation){n(g,c.sibling),c=s(c,d.children||[]),c.return=g,g=c;break e}else{n(g,c);break}else t(g,c);c=c.sibling}c=Ko(d,g.mode,v),c.return=g,g=c}return a(g);case nn:return R=d._init,X(g,c,R(d._payload),v)}if(Tr(d))return h(g,c,d,v);if(hr(d))return T(g,c,d,v);ys(g,d)}return typeof d=="string"&&d!==""||typeof d=="number"?(d=""+d,c!==null&&c.tag===6?(n(g,c.sibling),c=s(c,d),c.return=g,g=c):(n(g,c),c=Vo(d,g.mode,v),c.return=g,g=c),a(g)):n(g,c)}return X}var lr=hc(!0),yc=hc(!1),Vs=kn(null),Ks=null,Qn=null,ha=null;function ya(){ha=Qn=Ks=null}function va(e){var t=Vs.current;ze(Vs),e._currentValue=t}function Ti(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function rr(e,t){Ks=e,ha=Qn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(lt=!0),e.firstContext=null)}function St(e){var t=e._currentValue;if(ha!==e)if(e={context:e,memoizedValue:t,next:null},Qn===null){if(Ks===null)throw Error(F(308));Qn=e,Ks.dependencies={lanes:0,firstContext:e}}else Qn=Qn.next=e;return t}var jn=null;function xa(e){jn===null?jn=[e]:jn.push(e)}function vc(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,xa(t)):(n.next=s.next,s.next=n),t.interleaved=n,Jt(e,r)}function Jt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var rn=!1;function ka(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Kt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function pn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ke&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Jt(e,n)}return s=r.interleaved,s===null?(t.next=t,xa(r)):(t.next=s.next,s.next=t),r.interleaved=t,Jt(e,n)}function Is(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,oa(e,n)}}function Nl(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Qs(e,t,n,r){var s=e.updateQueue;rn=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,f=u.next;u.next=null,a===null?i=f:a.next=f,a=u;var k=e.alternate;k!==null&&(k=k.updateQueue,l=k.lastBaseUpdate,l!==a&&(l===null?k.firstBaseUpdate=f:l.next=f,k.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;a=0,k=f=u=null,l=i;do{var p=l.lane,w=l.eventTime;if((r&p)===p){k!==null&&(k=k.next={eventTime:w,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var h=e,T=l;switch(p=t,w=n,T.tag){case 1:if(h=T.payload,typeof h=="function"){m=h.call(w,m,p);break e}m=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=T.payload,p=typeof h=="function"?h.call(w,m,p):h,p==null)break e;m=De({},m,p);break e;case 2:rn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else w={eventTime:w,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},k===null?(f=k=w,u=m):k=k.next=w,a|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(k===null&&(u=m),s.baseState=u,s.firstBaseUpdate=f,s.lastBaseUpdate=k,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);An|=a,e.lanes=a,e.memoizedState=m}}function El(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(F(191,s));s.call(r)}}}var ss={},Wt=kn(ss),Kr=kn(ss),Qr=kn(ss);function In(e){if(e===ss)throw Error(F(174));return e}function ba(e,t){switch(Ie(Qr,t),Ie(Kr,e),Ie(Wt,ss),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:oi(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=oi(t,e)}ze(Wt),Ie(Wt,t)}function ur(){ze(Wt),ze(Kr),ze(Qr)}function kc(e){In(Qr.current);var t=In(Wt.current),n=oi(t,e.type);t!==n&&(Ie(Kr,e),Ie(Wt,n))}function wa(e){Kr.current===e&&(ze(Wt),ze(Kr))}var Ae=kn(0);function qs(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Fo=[];function Sa(){for(var e=0;e<Fo.length;e++)Fo[e]._workInProgressVersionPrimary=null;Fo.length=0}var Ns=Zt.ReactCurrentDispatcher,$o=Zt.ReactCurrentBatchConfig,Pn=0,Me=null,Fe=null,Ue=null,Js=!1,Ar=!1,qr=0,Ep=0;function Xe(){throw Error(F(321))}function Ca(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!At(e[n],t[n]))return!1;return!0}function Ta(e,t,n,r,s,i){if(Pn=i,Me=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ns.current=e===null||e.memoizedState===null?Ap:Mp,e=n(r,s),Ar){i=0;do{if(Ar=!1,qr=0,25<=i)throw Error(F(301));i+=1,Ue=Fe=null,t.updateQueue=null,Ns.current=Dp,e=n(r,s)}while(Ar)}if(Ns.current=Xs,t=Fe!==null&&Fe.next!==null,Pn=0,Ue=Fe=Me=null,Js=!1,t)throw Error(F(300));return e}function ja(){var e=qr!==0;return qr=0,e}function Lt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ue===null?Me.memoizedState=Ue=e:Ue=Ue.next=e,Ue}function Ct(){if(Fe===null){var e=Me.alternate;e=e!==null?e.memoizedState:null}else e=Fe.next;var t=Ue===null?Me.memoizedState:Ue.next;if(t!==null)Ue=t,Fe=e;else{if(e===null)throw Error(F(310));Fe=e,e={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},Ue===null?Me.memoizedState=Ue=e:Ue=Ue.next=e}return Ue}function Jr(e,t){return typeof t=="function"?t(e):t}function Ho(e){var t=Ct(),n=t.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=e;var r=Fe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,u=null,f=i;do{var k=f.lane;if((Pn&k)===k)u!==null&&(u=u.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),r=f.hasEagerState?f.eagerState:e(r,f.action);else{var m={lane:k,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};u===null?(l=u=m,a=r):u=u.next=m,Me.lanes|=k,An|=k}f=f.next}while(f!==null&&f!==i);u===null?a=r:u.next=l,At(r,t.memoizedState)||(lt=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,Me.lanes|=i,An|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Uo(e){var t=Ct(),n=t.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);At(i,t.memoizedState)||(lt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function bc(){}function wc(e,t){var n=Me,r=Ct(),s=t(),i=!At(r.memoizedState,s);if(i&&(r.memoizedState=s,lt=!0),r=r.queue,Ia(Tc.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Ue!==null&&Ue.memoizedState.tag&1){if(n.flags|=2048,Xr(9,Cc.bind(null,n,r,s,t),void 0,null),Ge===null)throw Error(F(349));Pn&30||Sc(n,t,s)}return s}function Sc(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Me.updateQueue,t===null?(t={lastEffect:null,stores:null},Me.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Cc(e,t,n,r){t.value=n,t.getSnapshot=r,jc(t)&&Ic(e)}function Tc(e,t,n){return n(function(){jc(t)&&Ic(e)})}function jc(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!At(e,n)}catch{return!0}}function Ic(e){var t=Jt(e,1);t!==null&&Pt(t,e,1,-1)}function zl(e){var t=Lt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jr,lastRenderedState:e},t.queue=e,e=e.dispatch=Pp.bind(null,Me,e),[t.memoizedState,e]}function Xr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Me.updateQueue,t===null?(t={lastEffect:null,stores:null},Me.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Nc(){return Ct().memoizedState}function Es(e,t,n,r){var s=Lt();Me.flags|=e,s.memoizedState=Xr(1|t,n,void 0,r===void 0?null:r)}function fo(e,t,n,r){var s=Ct();r=r===void 0?null:r;var i=void 0;if(Fe!==null){var a=Fe.memoizedState;if(i=a.destroy,r!==null&&Ca(r,a.deps)){s.memoizedState=Xr(t,n,i,r);return}}Me.flags|=e,s.memoizedState=Xr(1|t,n,i,r)}function Rl(e,t){return Es(8390656,8,e,t)}function Ia(e,t){return fo(2048,8,e,t)}function Ec(e,t){return fo(4,2,e,t)}function zc(e,t){return fo(4,4,e,t)}function Rc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Pc(e,t,n){return n=n!=null?n.concat([e]):null,fo(4,4,Rc.bind(null,t,e),n)}function Na(){}function Ac(e,t){var n=Ct();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ca(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Mc(e,t){var n=Ct();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Ca(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Dc(e,t,n){return Pn&21?(At(n,t)||(n=Wu(),Me.lanes|=n,An|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,lt=!0),e.memoizedState=n)}function zp(e,t){var n=Te;Te=n!==0&&4>n?n:4,e(!0);var r=$o.transition;$o.transition={};try{e(!1),t()}finally{Te=n,$o.transition=r}}function _c(){return Ct().memoizedState}function Rp(e,t,n){var r=gn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Lc(e))Bc(t,n);else if(n=vc(e,t,n,r),n!==null){var s=st();Pt(n,e,r,s),Oc(n,t,r)}}function Pp(e,t,n){var r=gn(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Lc(e))Bc(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,At(l,a)){var u=t.interleaved;u===null?(s.next=s,xa(t)):(s.next=u.next,u.next=s),t.interleaved=s;return}}catch{}finally{}n=vc(e,t,s,r),n!==null&&(s=st(),Pt(n,e,r,s),Oc(n,t,r))}}function Lc(e){var t=e.alternate;return e===Me||t!==null&&t===Me}function Bc(e,t){Ar=Js=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Oc(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,oa(e,n)}}var Xs={readContext:St,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useInsertionEffect:Xe,useLayoutEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useMutableSource:Xe,useSyncExternalStore:Xe,useId:Xe,unstable_isNewReconciler:!1},Ap={readContext:St,useCallback:function(e,t){return Lt().memoizedState=[e,t===void 0?null:t],e},useContext:St,useEffect:Rl,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Es(4194308,4,Rc.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Es(4194308,4,e,t)},useInsertionEffect:function(e,t){return Es(4,2,e,t)},useMemo:function(e,t){var n=Lt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Lt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Rp.bind(null,Me,e),[r.memoizedState,e]},useRef:function(e){var t=Lt();return e={current:e},t.memoizedState=e},useState:zl,useDebugValue:Na,useDeferredValue:function(e){return Lt().memoizedState=e},useTransition:function(){var e=zl(!1),t=e[0];return e=zp.bind(null,e[1]),Lt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Me,s=Lt();if(Pe){if(n===void 0)throw Error(F(407));n=n()}else{if(n=t(),Ge===null)throw Error(F(349));Pn&30||Sc(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Rl(Tc.bind(null,r,i,e),[e]),r.flags|=2048,Xr(9,Cc.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Lt(),t=Ge.identifierPrefix;if(Pe){var n=Vt,r=Yt;n=(r&~(1<<32-Rt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=qr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Ep++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Mp={readContext:St,useCallback:Ac,useContext:St,useEffect:Ia,useImperativeHandle:Pc,useInsertionEffect:Ec,useLayoutEffect:zc,useMemo:Mc,useReducer:Ho,useRef:Nc,useState:function(){return Ho(Jr)},useDebugValue:Na,useDeferredValue:function(e){var t=Ct();return Dc(t,Fe.memoizedState,e)},useTransition:function(){var e=Ho(Jr)[0],t=Ct().memoizedState;return[e,t]},useMutableSource:bc,useSyncExternalStore:wc,useId:_c,unstable_isNewReconciler:!1},Dp={readContext:St,useCallback:Ac,useContext:St,useEffect:Ia,useImperativeHandle:Pc,useInsertionEffect:Ec,useLayoutEffect:zc,useMemo:Mc,useReducer:Uo,useRef:Nc,useState:function(){return Uo(Jr)},useDebugValue:Na,useDeferredValue:function(e){var t=Ct();return Fe===null?t.memoizedState=e:Dc(t,Fe.memoizedState,e)},useTransition:function(){var e=Uo(Jr)[0],t=Ct().memoizedState;return[e,t]},useMutableSource:bc,useSyncExternalStore:wc,useId:_c,unstable_isNewReconciler:!1};function Nt(e,t){if(e&&e.defaultProps){t=De({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ji(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:De({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var po={isMounted:function(e){return(e=e._reactInternals)?_n(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=st(),s=gn(e),i=Kt(r,s);i.payload=t,n!=null&&(i.callback=n),t=pn(e,i,s),t!==null&&(Pt(t,e,s,r),Is(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=st(),s=gn(e),i=Kt(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=pn(e,i,s),t!==null&&(Pt(t,e,s,r),Is(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=st(),r=gn(e),s=Kt(n,r);s.tag=2,t!=null&&(s.callback=t),t=pn(e,s,r),t!==null&&(Pt(t,e,r,n),Is(t,e,r))}};function Pl(e,t,n,r,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,a):t.prototype&&t.prototype.isPureReactComponent?!Ur(n,r)||!Ur(s,i):!0}function Wc(e,t,n){var r=!1,s=vn,i=t.contextType;return typeof i=="object"&&i!==null?i=St(i):(s=ct(t)?zn:tt.current,r=t.contextTypes,i=(r=r!=null)?ir(e,s):vn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=po,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Al(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&po.enqueueReplaceState(t,t.state,null)}function Ii(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},ka(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=St(i):(i=ct(t)?zn:tt.current,s.context=ir(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(ji(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&po.enqueueReplaceState(s,s.state,null),Qs(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function cr(e,t){try{var n="",r=t;do n+=uf(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Go(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Ni(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var _p=typeof WeakMap=="function"?WeakMap:Map;function Fc(e,t,n){n=Kt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){eo||(eo=!0,Bi=r),Ni(e,t)},n}function $c(e,t,n){n=Kt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){Ni(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Ni(e,t),typeof r!="function"&&(mn===null?mn=new Set([this]):mn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Ml(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new _p;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=qp.bind(null,e,t,n),t.then(e,e))}function Dl(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function _l(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Kt(-1,1),t.tag=2,pn(n,t,1))),n.lanes|=1),e)}var Lp=Zt.ReactCurrentOwner,lt=!1;function rt(e,t,n,r){t.child=e===null?yc(t,null,n,r):lr(t,e.child,n,r)}function Ll(e,t,n,r,s){n=n.render;var i=t.ref;return rr(t,s),r=Ta(e,t,n,r,i,s),n=ja(),e!==null&&!lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Xt(e,t,s)):(Pe&&n&&pa(t),t.flags|=1,rt(e,t,r,s),t.child)}function Bl(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!_a(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,Hc(e,t,i,r,s)):(e=As(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ur,n(a,r)&&e.ref===t.ref)return Xt(e,t,s)}return t.flags|=1,e=hn(i,r),e.ref=t.ref,e.return=t,t.child=e}function Hc(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(Ur(i,r)&&e.ref===t.ref)if(lt=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(lt=!0);else return t.lanes=e.lanes,Xt(e,t,s)}return Ei(e,t,n,r,s)}function Uc(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(Jn,pt),pt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ie(Jn,pt),pt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ie(Jn,pt),pt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ie(Jn,pt),pt|=r;return rt(e,t,s,n),t.child}function Gc(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ei(e,t,n,r,s){var i=ct(n)?zn:tt.current;return i=ir(t,i),rr(t,s),n=Ta(e,t,n,r,i,s),r=ja(),e!==null&&!lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Xt(e,t,s)):(Pe&&r&&pa(t),t.flags|=1,rt(e,t,n,s),t.child)}function Ol(e,t,n,r,s){if(ct(n)){var i=!0;Us(t)}else i=!1;if(rr(t,s),t.stateNode===null)zs(e,t),Wc(t,n,r),Ii(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var u=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=St(f):(f=ct(n)?zn:tt.current,f=ir(t,f));var k=n.getDerivedStateFromProps,m=typeof k=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||u!==f)&&Al(t,a,r,f),rn=!1;var p=t.memoizedState;a.state=p,Qs(t,r,a,s),u=t.memoizedState,l!==r||p!==u||ut.current||rn?(typeof k=="function"&&(ji(t,n,k,r),u=t.memoizedState),(l=rn||Pl(t,n,l,r,p,u,f))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=f,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,xc(e,t),l=t.memoizedProps,f=t.type===t.elementType?l:Nt(t.type,l),a.props=f,m=t.pendingProps,p=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=St(u):(u=ct(n)?zn:tt.current,u=ir(t,u));var w=n.getDerivedStateFromProps;(k=typeof w=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==m||p!==u)&&Al(t,a,r,u),rn=!1,p=t.memoizedState,a.state=p,Qs(t,r,a,s);var h=t.memoizedState;l!==m||p!==h||ut.current||rn?(typeof w=="function"&&(ji(t,n,w,r),h=t.memoizedState),(f=rn||Pl(t,n,f,r,p,h,u)||!1)?(k||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,h,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,h,u)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),a.props=r,a.state=h,a.context=u,r=f):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return zi(e,t,n,r,i,s)}function zi(e,t,n,r,s,i){Gc(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&Cl(t,n,!1),Xt(e,t,i);r=t.stateNode,Lp.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=lr(t,e.child,null,i),t.child=lr(t,null,l,i)):rt(e,t,l,i),t.memoizedState=r.state,s&&Cl(t,n,!0),t.child}function Yc(e){var t=e.stateNode;t.pendingContext?Sl(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Sl(e,t.context,!1),ba(e,t.containerInfo)}function Wl(e,t,n,r,s){return ar(),ga(s),t.flags|=256,rt(e,t,n,r),t.child}var Ri={dehydrated:null,treeContext:null,retryLane:0};function Pi(e){return{baseLanes:e,cachePool:null,transitions:null}}function Vc(e,t,n){var r=t.pendingProps,s=Ae.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Ie(Ae,s&1),e===null)return Ci(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,i?(r=t.mode,i=t.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=ho(a,r,0,null),e=En(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Pi(n),t.memoizedState=Ri,e):Ea(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Bp(e,t,a,r,l,s,n);if(i){i=r.fallback,a=t.mode,s=e.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=hn(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=hn(l,i):(i=En(i,a,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,a=e.child.memoizedState,a=a===null?Pi(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=Ri,r}return i=e.child,e=i.sibling,r=hn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Ea(e,t){return t=ho({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function vs(e,t,n,r){return r!==null&&ga(r),lr(t,e.child,null,n),e=Ea(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Bp(e,t,n,r,s,i,a){if(n)return t.flags&256?(t.flags&=-257,r=Go(Error(F(422))),vs(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=ho({mode:"visible",children:r.children},s,0,null),i=En(i,s,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&lr(t,e.child,null,a),t.child.memoizedState=Pi(a),t.memoizedState=Ri,i);if(!(t.mode&1))return vs(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(F(419)),r=Go(i,r,void 0),vs(e,t,a,r)}if(l=(a&e.childLanes)!==0,lt||l){if(r=Ge,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Jt(e,s),Pt(r,e,s,-1))}return Da(),r=Go(Error(F(421))),vs(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Jp.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,mt=fn(s.nextSibling),gt=t,Pe=!0,zt=null,e!==null&&(xt[kt++]=Yt,xt[kt++]=Vt,xt[kt++]=Rn,Yt=e.id,Vt=e.overflow,Rn=t),t=Ea(t,r.children),t.flags|=4096,t)}function Fl(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ti(e.return,t,n)}function Yo(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Kc(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(rt(e,t,r.children,n),r=Ae.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Fl(e,n,t);else if(e.tag===19)Fl(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ie(Ae,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&qs(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Yo(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&qs(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Yo(t,!0,n,null,i);break;case"together":Yo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zs(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Xt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),An|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(F(153));if(t.child!==null){for(e=t.child,n=hn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=hn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Op(e,t,n){switch(t.tag){case 3:Yc(t),ar();break;case 5:kc(t);break;case 1:ct(t.type)&&Us(t);break;case 4:ba(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Ie(Vs,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ie(Ae,Ae.current&1),t.flags|=128,null):n&t.child.childLanes?Vc(e,t,n):(Ie(Ae,Ae.current&1),e=Xt(e,t,n),e!==null?e.sibling:null);Ie(Ae,Ae.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Kc(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ie(Ae,Ae.current),r)break;return null;case 22:case 23:return t.lanes=0,Uc(e,t,n)}return Xt(e,t,n)}var Qc,Ai,qc,Jc;Qc=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ai=function(){};qc=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,In(Wt.current);var i=null;switch(n){case"input":s=ti(e,s),r=ti(e,r),i=[];break;case"select":s=De({},s,{value:void 0}),r=De({},r,{value:void 0}),i=[];break;case"textarea":s=si(e,s),r=si(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=$s)}ii(n,r);var a;n=null;for(f in s)if(!r.hasOwnProperty(f)&&s.hasOwnProperty(f)&&s[f]!=null)if(f==="style"){var l=s[f];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Lr.hasOwnProperty(f)?i||(i=[]):(i=i||[]).push(f,null));for(f in r){var u=r[f];if(l=s!=null?s[f]:void 0,r.hasOwnProperty(f)&&u!==l&&(u!=null||l!=null))if(f==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(f,n)),n=u;else f==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(f,u)):f==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(f,""+u):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Lr.hasOwnProperty(f)?(u!=null&&f==="onScroll"&&Ee("scroll",e),i||l===u||(i=[])):(i=i||[]).push(f,u))}n&&(i=i||[]).push("style",n);var f=i;(t.updateQueue=f)&&(t.flags|=4)}};Jc=function(e,t,n,r){n!==r&&(t.flags|=4)};function wr(e,t){if(!Pe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ze(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wp(e,t,n){var r=t.pendingProps;switch(ma(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(t),null;case 1:return ct(t.type)&&Hs(),Ze(t),null;case 3:return r=t.stateNode,ur(),ze(ut),ze(tt),Sa(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(hs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,zt!==null&&(Fi(zt),zt=null))),Ai(e,t),Ze(t),null;case 5:wa(t);var s=In(Qr.current);if(n=t.type,e!==null&&t.stateNode!=null)qc(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(F(166));return Ze(t),null}if(e=In(Wt.current),hs(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Bt]=t,r[Vr]=i,e=(t.mode&1)!==0,n){case"dialog":Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":case"embed":Ee("load",r);break;case"video":case"audio":for(s=0;s<Ir.length;s++)Ee(Ir[s],r);break;case"source":Ee("error",r);break;case"img":case"image":case"link":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"input":qa(r,i),Ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ee("invalid",r);break;case"textarea":Xa(r,i),Ee("invalid",r)}ii(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&gs(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&gs(r.textContent,l,e),s=["children",""+l]):Lr.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Ee("scroll",r)}switch(n){case"input":as(r),Ja(r,i,!0);break;case"textarea":as(r),Za(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=$s)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Tu(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Bt]=t,e[Vr]=r,Qc(e,t,!1,!1),t.stateNode=e;e:{switch(a=ai(n,r),n){case"dialog":Ee("cancel",e),Ee("close",e),s=r;break;case"iframe":case"object":case"embed":Ee("load",e),s=r;break;case"video":case"audio":for(s=0;s<Ir.length;s++)Ee(Ir[s],e);s=r;break;case"source":Ee("error",e),s=r;break;case"img":case"image":case"link":Ee("error",e),Ee("load",e),s=r;break;case"details":Ee("toggle",e),s=r;break;case"input":qa(e,r),s=ti(e,r),Ee("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=De({},r,{value:void 0}),Ee("invalid",e);break;case"textarea":Xa(e,r),s=si(e,r),Ee("invalid",e);break;default:s=r}ii(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Nu(e,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&ju(e,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Br(e,u):typeof u=="number"&&Br(e,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Lr.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ee("scroll",e):u!=null&&Zi(e,i,u,a))}switch(n){case"input":as(e),Ja(e,r,!1);break;case"textarea":as(e),Za(e);break;case"option":r.value!=null&&e.setAttribute("value",""+yn(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Zn(e,!!r.multiple,i,!1):r.defaultValue!=null&&Zn(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=$s)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ze(t),null;case 6:if(e&&t.stateNode!=null)Jc(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(F(166));if(n=In(Qr.current),In(Wt.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[Bt]=t,(i=r.nodeValue!==n)&&(e=gt,e!==null))switch(e.tag){case 3:gs(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&gs(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bt]=t,t.stateNode=r}return Ze(t),null;case 13:if(ze(Ae),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Pe&&mt!==null&&t.mode&1&&!(t.flags&128))gc(),ar(),t.flags|=98560,i=!1;else if(i=hs(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(F(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[Bt]=t}else ar(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ze(t),i=!1}else zt!==null&&(Fi(zt),zt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ae.current&1?$e===0&&($e=3):Da())),t.updateQueue!==null&&(t.flags|=4),Ze(t),null);case 4:return ur(),Ai(e,t),e===null&&Gr(t.stateNode.containerInfo),Ze(t),null;case 10:return va(t.type._context),Ze(t),null;case 17:return ct(t.type)&&Hs(),Ze(t),null;case 19:if(ze(Ae),i=t.memoizedState,i===null)return Ze(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)wr(i,!1);else{if($e!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=qs(e),a!==null){for(t.flags|=128,wr(i,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ie(Ae,Ae.current&1|2),t.child}e=e.sibling}i.tail!==null&&Be()>dr&&(t.flags|=128,r=!0,wr(i,!1),t.lanes=4194304)}else{if(!r)if(e=qs(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),wr(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Pe)return Ze(t),null}else 2*Be()-i.renderingStartTime>dr&&n!==1073741824&&(t.flags|=128,r=!0,wr(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Be(),t.sibling=null,n=Ae.current,Ie(Ae,r?n&1|2:n&1),t):(Ze(t),null);case 22:case 23:return Ma(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?pt&1073741824&&(Ze(t),t.subtreeFlags&6&&(t.flags|=8192)):Ze(t),null;case 24:return null;case 25:return null}throw Error(F(156,t.tag))}function Fp(e,t){switch(ma(t),t.tag){case 1:return ct(t.type)&&Hs(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ur(),ze(ut),ze(tt),Sa(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return wa(t),null;case 13:if(ze(Ae),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(F(340));ar()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ze(Ae),null;case 4:return ur(),null;case 10:return va(t.type._context),null;case 22:case 23:return Ma(),null;case 24:return null;default:return null}}var xs=!1,et=!1,$p=typeof WeakSet=="function"?WeakSet:Set,re=null;function qn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Le(e,t,r)}else n.current=null}function Mi(e,t,n){try{n()}catch(r){Le(e,t,r)}}var $l=!1;function Hp(e,t){if(yi=Os,e=nc(),fa(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,u=-1,f=0,k=0,m=e,p=null;t:for(;;){for(var w;m!==n||s!==0&&m.nodeType!==3||(l=a+s),m!==i||r!==0&&m.nodeType!==3||(u=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(w=m.firstChild)!==null;)p=m,m=w;for(;;){if(m===e)break t;if(p===n&&++f===s&&(l=a),p===i&&++k===r&&(u=a),(w=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=w}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(vi={focusedElem:e,selectionRange:n},Os=!1,re=t;re!==null;)if(t=re,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,re=e;else for(;re!==null;){t=re;try{var h=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var T=h.memoizedProps,X=h.memoizedState,g=t.stateNode,c=g.getSnapshotBeforeUpdate(t.elementType===t.type?T:Nt(t.type,T),X);g.__reactInternalSnapshotBeforeUpdate=c}break;case 3:var d=t.stateNode.containerInfo;d.nodeType===1?d.textContent="":d.nodeType===9&&d.documentElement&&d.removeChild(d.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(v){Le(t,t.return,v)}if(e=t.sibling,e!==null){e.return=t.return,re=e;break}re=t.return}return h=$l,$l=!1,h}function Mr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Mi(t,n,i)}s=s.next}while(s!==r)}}function mo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Di(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Xc(e){var t=e.alternate;t!==null&&(e.alternate=null,Xc(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Bt],delete t[Vr],delete t[bi],delete t[Tp],delete t[jp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Zc(e){return e.tag===5||e.tag===3||e.tag===4}function Hl(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Zc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _i(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=$s));else if(r!==4&&(e=e.child,e!==null))for(_i(e,t,n),e=e.sibling;e!==null;)_i(e,t,n),e=e.sibling}function Li(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Li(e,t,n),e=e.sibling;e!==null;)Li(e,t,n),e=e.sibling}var Qe=null,Et=!1;function tn(e,t,n){for(n=n.child;n!==null;)ed(e,t,n),n=n.sibling}function ed(e,t,n){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(oo,n)}catch{}switch(n.tag){case 5:et||qn(n,t);case 6:var r=Qe,s=Et;Qe=null,tn(e,t,n),Qe=r,Et=s,Qe!==null&&(Et?(e=Qe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Qe.removeChild(n.stateNode));break;case 18:Qe!==null&&(Et?(e=Qe,n=n.stateNode,e.nodeType===8?Oo(e.parentNode,n):e.nodeType===1&&Oo(e,n),$r(e)):Oo(Qe,n.stateNode));break;case 4:r=Qe,s=Et,Qe=n.stateNode.containerInfo,Et=!0,tn(e,t,n),Qe=r,Et=s;break;case 0:case 11:case 14:case 15:if(!et&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Mi(n,t,a),s=s.next}while(s!==r)}tn(e,t,n);break;case 1:if(!et&&(qn(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Le(n,t,l)}tn(e,t,n);break;case 21:tn(e,t,n);break;case 22:n.mode&1?(et=(r=et)||n.memoizedState!==null,tn(e,t,n),et=r):tn(e,t,n);break;default:tn(e,t,n)}}function Ul(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new $p),t.forEach(function(r){var s=Xp.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function It(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:Qe=l.stateNode,Et=!1;break e;case 3:Qe=l.stateNode.containerInfo,Et=!0;break e;case 4:Qe=l.stateNode.containerInfo,Et=!0;break e}l=l.return}if(Qe===null)throw Error(F(160));ed(i,a,s),Qe=null,Et=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(f){Le(s,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)td(t,e),t=t.sibling}function td(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(It(t,e),_t(e),r&4){try{Mr(3,e,e.return),mo(3,e)}catch(T){Le(e,e.return,T)}try{Mr(5,e,e.return)}catch(T){Le(e,e.return,T)}}break;case 1:It(t,e),_t(e),r&512&&n!==null&&qn(n,n.return);break;case 5:if(It(t,e),_t(e),r&512&&n!==null&&qn(n,n.return),e.flags&32){var s=e.stateNode;try{Br(s,"")}catch(T){Le(e,e.return,T)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,l=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Su(s,i),ai(l,a);var f=ai(l,i);for(a=0;a<u.length;a+=2){var k=u[a],m=u[a+1];k==="style"?Nu(s,m):k==="dangerouslySetInnerHTML"?ju(s,m):k==="children"?Br(s,m):Zi(s,k,m,f)}switch(l){case"input":ni(s,i);break;case"textarea":Cu(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?Zn(s,!!i.multiple,w,!1):p!==!!i.multiple&&(i.defaultValue!=null?Zn(s,!!i.multiple,i.defaultValue,!0):Zn(s,!!i.multiple,i.multiple?[]:"",!1))}s[Vr]=i}catch(T){Le(e,e.return,T)}}break;case 6:if(It(t,e),_t(e),r&4){if(e.stateNode===null)throw Error(F(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(T){Le(e,e.return,T)}}break;case 3:if(It(t,e),_t(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{$r(t.containerInfo)}catch(T){Le(e,e.return,T)}break;case 4:It(t,e),_t(e);break;case 13:It(t,e),_t(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Pa=Be())),r&4&&Ul(e);break;case 22:if(k=n!==null&&n.memoizedState!==null,e.mode&1?(et=(f=et)||k,It(t,e),et=f):It(t,e),_t(e),r&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!k&&e.mode&1)for(re=e,k=e.child;k!==null;){for(m=re=k;re!==null;){switch(p=re,w=p.child,p.tag){case 0:case 11:case 14:case 15:Mr(4,p,p.return);break;case 1:qn(p,p.return);var h=p.stateNode;if(typeof h.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,h.props=t.memoizedProps,h.state=t.memoizedState,h.componentWillUnmount()}catch(T){Le(r,n,T)}}break;case 5:qn(p,p.return);break;case 22:if(p.memoizedState!==null){Yl(m);continue}}w!==null?(w.return=p,re=w):Yl(m)}k=k.sibling}e:for(k=null,m=e;;){if(m.tag===5){if(k===null){k=m;try{s=m.stateNode,f?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Iu("display",a))}catch(T){Le(e,e.return,T)}}}else if(m.tag===6){if(k===null)try{m.stateNode.nodeValue=f?"":m.memoizedProps}catch(T){Le(e,e.return,T)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;k===m&&(k=null),m=m.return}k===m&&(k=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:It(t,e),_t(e),r&4&&Ul(e);break;case 21:break;default:It(t,e),_t(e)}}function _t(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Zc(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Br(s,""),r.flags&=-33);var i=Hl(e);Li(e,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Hl(e);_i(e,l,a);break;default:throw Error(F(161))}}catch(u){Le(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Up(e,t,n){re=e,nd(e)}function nd(e,t,n){for(var r=(e.mode&1)!==0;re!==null;){var s=re,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||xs;if(!a){var l=s.alternate,u=l!==null&&l.memoizedState!==null||et;l=xs;var f=et;if(xs=a,(et=u)&&!f)for(re=s;re!==null;)a=re,u=a.child,a.tag===22&&a.memoizedState!==null?Vl(s):u!==null?(u.return=a,re=u):Vl(s);for(;i!==null;)re=i,nd(i),i=i.sibling;re=s,xs=l,et=f}Gl(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,re=i):Gl(e)}}function Gl(e){for(;re!==null;){var t=re;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:et||mo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!et)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Nt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&El(t,i,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}El(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var k=f.memoizedState;if(k!==null){var m=k.dehydrated;m!==null&&$r(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}et||t.flags&512&&Di(t)}catch(p){Le(t,t.return,p)}}if(t===e){re=null;break}if(n=t.sibling,n!==null){n.return=t.return,re=n;break}re=t.return}}function Yl(e){for(;re!==null;){var t=re;if(t===e){re=null;break}var n=t.sibling;if(n!==null){n.return=t.return,re=n;break}re=t.return}}function Vl(e){for(;re!==null;){var t=re;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{mo(4,t)}catch(u){Le(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(u){Le(t,s,u)}}var i=t.return;try{Di(t)}catch(u){Le(t,i,u)}break;case 5:var a=t.return;try{Di(t)}catch(u){Le(t,a,u)}}}catch(u){Le(t,t.return,u)}if(t===e){re=null;break}var l=t.sibling;if(l!==null){l.return=t.return,re=l;break}re=t.return}}var Gp=Math.ceil,Zs=Zt.ReactCurrentDispatcher,za=Zt.ReactCurrentOwner,wt=Zt.ReactCurrentBatchConfig,ke=0,Ge=null,We=null,qe=0,pt=0,Jn=kn(0),$e=0,Zr=null,An=0,go=0,Ra=0,Dr=null,at=null,Pa=0,dr=1/0,Ut=null,eo=!1,Bi=null,mn=null,ks=!1,ln=null,to=0,_r=0,Oi=null,Rs=-1,Ps=0;function st(){return ke&6?Be():Rs!==-1?Rs:Rs=Be()}function gn(e){return e.mode&1?ke&2&&qe!==0?qe&-qe:Np.transition!==null?(Ps===0&&(Ps=Wu()),Ps):(e=Te,e!==0||(e=window.event,e=e===void 0?16:Vu(e.type)),e):1}function Pt(e,t,n,r){if(50<_r)throw _r=0,Oi=null,Error(F(185));ts(e,n,r),(!(ke&2)||e!==Ge)&&(e===Ge&&(!(ke&2)&&(go|=n),$e===4&&on(e,qe)),dt(e,r),n===1&&ke===0&&!(t.mode&1)&&(dr=Be()+500,co&&bn()))}function dt(e,t){var n=e.callbackNode;Nf(e,t);var r=Bs(e,e===Ge?qe:0);if(r===0)n!==null&&nl(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&nl(n),t===1)e.tag===0?Ip(Kl.bind(null,e)):fc(Kl.bind(null,e)),Sp(function(){!(ke&6)&&bn()}),n=null;else{switch(Fu(r)){case 1:n=sa;break;case 4:n=Bu;break;case 16:n=Ls;break;case 536870912:n=Ou;break;default:n=Ls}n=cd(n,rd.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rd(e,t){if(Rs=-1,Ps=0,ke&6)throw Error(F(327));var n=e.callbackNode;if(sr()&&e.callbackNode!==n)return null;var r=Bs(e,e===Ge?qe:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=no(e,r);else{t=r;var s=ke;ke|=2;var i=od();(Ge!==e||qe!==t)&&(Ut=null,dr=Be()+500,Nn(e,t));do try{Kp();break}catch(l){sd(e,l)}while(!0);ya(),Zs.current=i,ke=s,We!==null?t=0:(Ge=null,qe=0,t=$e)}if(t!==0){if(t===2&&(s=fi(e),s!==0&&(r=s,t=Wi(e,s))),t===1)throw n=Zr,Nn(e,0),on(e,r),dt(e,Be()),n;if(t===6)on(e,r);else{if(s=e.current.alternate,!(r&30)&&!Yp(s)&&(t=no(e,r),t===2&&(i=fi(e),i!==0&&(r=i,t=Wi(e,i))),t===1))throw n=Zr,Nn(e,0),on(e,r),dt(e,Be()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(F(345));case 2:Cn(e,at,Ut);break;case 3:if(on(e,r),(r&130023424)===r&&(t=Pa+500-Be(),10<t)){if(Bs(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){st(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=ki(Cn.bind(null,e,at,Ut),t);break}Cn(e,at,Ut);break;case 4:if(on(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-Rt(r);i=1<<a,a=t[a],a>s&&(s=a),r&=~i}if(r=s,r=Be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Gp(r/1960))-r,10<r){e.timeoutHandle=ki(Cn.bind(null,e,at,Ut),r);break}Cn(e,at,Ut);break;case 5:Cn(e,at,Ut);break;default:throw Error(F(329))}}}return dt(e,Be()),e.callbackNode===n?rd.bind(null,e):null}function Wi(e,t){var n=Dr;return e.current.memoizedState.isDehydrated&&(Nn(e,t).flags|=256),e=no(e,t),e!==2&&(t=at,at=n,t!==null&&Fi(t)),e}function Fi(e){at===null?at=e:at.push.apply(at,e)}function Yp(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!At(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function on(e,t){for(t&=~Ra,t&=~go,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Rt(t),r=1<<n;e[n]=-1,t&=~r}}function Kl(e){if(ke&6)throw Error(F(327));sr();var t=Bs(e,0);if(!(t&1))return dt(e,Be()),null;var n=no(e,t);if(e.tag!==0&&n===2){var r=fi(e);r!==0&&(t=r,n=Wi(e,r))}if(n===1)throw n=Zr,Nn(e,0),on(e,t),dt(e,Be()),n;if(n===6)throw Error(F(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cn(e,at,Ut),dt(e,Be()),null}function Aa(e,t){var n=ke;ke|=1;try{return e(t)}finally{ke=n,ke===0&&(dr=Be()+500,co&&bn())}}function Mn(e){ln!==null&&ln.tag===0&&!(ke&6)&&sr();var t=ke;ke|=1;var n=wt.transition,r=Te;try{if(wt.transition=null,Te=1,e)return e()}finally{Te=r,wt.transition=n,ke=t,!(ke&6)&&bn()}}function Ma(){pt=Jn.current,ze(Jn)}function Nn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,wp(n)),We!==null)for(n=We.return;n!==null;){var r=n;switch(ma(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Hs();break;case 3:ur(),ze(ut),ze(tt),Sa();break;case 5:wa(r);break;case 4:ur();break;case 13:ze(Ae);break;case 19:ze(Ae);break;case 10:va(r.type._context);break;case 22:case 23:Ma()}n=n.return}if(Ge=e,We=e=hn(e.current,null),qe=pt=t,$e=0,Zr=null,Ra=go=An=0,at=Dr=null,jn!==null){for(t=0;t<jn.length;t++)if(n=jn[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}jn=null}return e}function sd(e,t){do{var n=We;try{if(ya(),Ns.current=Xs,Js){for(var r=Me.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Js=!1}if(Pn=0,Ue=Fe=Me=null,Ar=!1,qr=0,za.current=null,n===null||n.return===null){$e=1,Zr=t,We=null;break}e:{var i=e,a=n.return,l=n,u=t;if(t=qe,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var f=u,k=l,m=k.tag;if(!(k.mode&1)&&(m===0||m===11||m===15)){var p=k.alternate;p?(k.updateQueue=p.updateQueue,k.memoizedState=p.memoizedState,k.lanes=p.lanes):(k.updateQueue=null,k.memoizedState=null)}var w=Dl(a);if(w!==null){w.flags&=-257,_l(w,a,l,i,t),w.mode&1&&Ml(i,f,t),t=w,u=f;var h=t.updateQueue;if(h===null){var T=new Set;T.add(u),t.updateQueue=T}else h.add(u);break e}else{if(!(t&1)){Ml(i,f,t),Da();break e}u=Error(F(426))}}else if(Pe&&l.mode&1){var X=Dl(a);if(X!==null){!(X.flags&65536)&&(X.flags|=256),_l(X,a,l,i,t),ga(cr(u,l));break e}}i=u=cr(u,l),$e!==4&&($e=2),Dr===null?Dr=[i]:Dr.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var g=Fc(i,u,t);Nl(i,g);break e;case 1:l=u;var c=i.type,d=i.stateNode;if(!(i.flags&128)&&(typeof c.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(mn===null||!mn.has(d)))){i.flags|=65536,t&=-t,i.lanes|=t;var v=$c(i,l,t);Nl(i,v);break e}}i=i.return}while(i!==null)}ad(n)}catch(A){t=A,We===n&&n!==null&&(We=n=n.return);continue}break}while(!0)}function od(){var e=Zs.current;return Zs.current=Xs,e===null?Xs:e}function Da(){($e===0||$e===3||$e===2)&&($e=4),Ge===null||!(An&268435455)&&!(go&268435455)||on(Ge,qe)}function no(e,t){var n=ke;ke|=2;var r=od();(Ge!==e||qe!==t)&&(Ut=null,Nn(e,t));do try{Vp();break}catch(s){sd(e,s)}while(!0);if(ya(),ke=n,Zs.current=r,We!==null)throw Error(F(261));return Ge=null,qe=0,$e}function Vp(){for(;We!==null;)id(We)}function Kp(){for(;We!==null&&!xf();)id(We)}function id(e){var t=ud(e.alternate,e,pt);e.memoizedProps=e.pendingProps,t===null?ad(e):We=t,za.current=null}function ad(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Fp(n,t),n!==null){n.flags&=32767,We=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{$e=6,We=null;return}}else if(n=Wp(n,t,pt),n!==null){We=n;return}if(t=t.sibling,t!==null){We=t;return}We=t=e}while(t!==null);$e===0&&($e=5)}function Cn(e,t,n){var r=Te,s=wt.transition;try{wt.transition=null,Te=1,Qp(e,t,n,r)}finally{wt.transition=s,Te=r}return null}function Qp(e,t,n,r){do sr();while(ln!==null);if(ke&6)throw Error(F(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(F(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Ef(e,i),e===Ge&&(We=Ge=null,qe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ks||(ks=!0,cd(Ls,function(){return sr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=wt.transition,wt.transition=null;var a=Te;Te=1;var l=ke;ke|=4,za.current=null,Hp(e,n),td(n,e),gp(vi),Os=!!yi,vi=yi=null,e.current=n,Up(n),kf(),ke=l,Te=a,wt.transition=i}else e.current=n;if(ks&&(ks=!1,ln=e,to=s),i=e.pendingLanes,i===0&&(mn=null),Sf(n.stateNode),dt(e,Be()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(eo)throw eo=!1,e=Bi,Bi=null,e;return to&1&&e.tag!==0&&sr(),i=e.pendingLanes,i&1?e===Oi?_r++:(_r=0,Oi=e):_r=0,bn(),null}function sr(){if(ln!==null){var e=Fu(to),t=wt.transition,n=Te;try{if(wt.transition=null,Te=16>e?16:e,ln===null)var r=!1;else{if(e=ln,ln=null,to=0,ke&6)throw Error(F(331));var s=ke;for(ke|=4,re=e.current;re!==null;){var i=re,a=i.child;if(re.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var f=l[u];for(re=f;re!==null;){var k=re;switch(k.tag){case 0:case 11:case 15:Mr(8,k,i)}var m=k.child;if(m!==null)m.return=k,re=m;else for(;re!==null;){k=re;var p=k.sibling,w=k.return;if(Xc(k),k===f){re=null;break}if(p!==null){p.return=w,re=p;break}re=w}}}var h=i.alternate;if(h!==null){var T=h.child;if(T!==null){h.child=null;do{var X=T.sibling;T.sibling=null,T=X}while(T!==null)}}re=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,re=a;else e:for(;re!==null;){if(i=re,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Mr(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,re=g;break e}re=i.return}}var c=e.current;for(re=c;re!==null;){a=re;var d=a.child;if(a.subtreeFlags&2064&&d!==null)d.return=a,re=d;else e:for(a=c;re!==null;){if(l=re,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:mo(9,l)}}catch(A){Le(l,l.return,A)}if(l===a){re=null;break e}var v=l.sibling;if(v!==null){v.return=l.return,re=v;break e}re=l.return}}if(ke=s,bn(),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(oo,e)}catch{}r=!0}return r}finally{Te=n,wt.transition=t}}return!1}function Ql(e,t,n){t=cr(n,t),t=Fc(e,t,1),e=pn(e,t,1),t=st(),e!==null&&(ts(e,1,t),dt(e,t))}function Le(e,t,n){if(e.tag===3)Ql(e,e,n);else for(;t!==null;){if(t.tag===3){Ql(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mn===null||!mn.has(r))){e=cr(n,e),e=$c(t,e,1),t=pn(t,e,1),e=st(),t!==null&&(ts(t,1,e),dt(t,e));break}}t=t.return}}function qp(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=st(),e.pingedLanes|=e.suspendedLanes&n,Ge===e&&(qe&n)===n&&($e===4||$e===3&&(qe&130023424)===qe&&500>Be()-Pa?Nn(e,0):Ra|=n),dt(e,t)}function ld(e,t){t===0&&(e.mode&1?(t=cs,cs<<=1,!(cs&130023424)&&(cs=4194304)):t=1);var n=st();e=Jt(e,t),e!==null&&(ts(e,t,n),dt(e,n))}function Jp(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ld(e,n)}function Xp(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(t),ld(e,n)}var ud;ud=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ut.current)lt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return lt=!1,Op(e,t,n);lt=!!(e.flags&131072)}else lt=!1,Pe&&t.flags&1048576&&pc(t,Ys,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zs(e,t),e=t.pendingProps;var s=ir(t,tt.current);rr(t,n),s=Ta(null,t,r,e,s,n);var i=ja();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ct(r)?(i=!0,Us(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ka(t),s.updater=po,t.stateNode=s,s._reactInternals=t,Ii(t,r,e,n),t=zi(null,t,r,!0,i,n)):(t.tag=0,Pe&&i&&pa(t),rt(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(zs(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=em(r),e=Nt(r,e),s){case 0:t=Ei(null,t,r,e,n);break e;case 1:t=Ol(null,t,r,e,n);break e;case 11:t=Ll(null,t,r,e,n);break e;case 14:t=Bl(null,t,r,Nt(r.type,e),n);break e}throw Error(F(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Nt(r,s),Ei(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Nt(r,s),Ol(e,t,r,s,n);case 3:e:{if(Yc(t),e===null)throw Error(F(387));r=t.pendingProps,i=t.memoizedState,s=i.element,xc(e,t),Qs(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=cr(Error(F(423)),t),t=Wl(e,t,r,n,s);break e}else if(r!==s){s=cr(Error(F(424)),t),t=Wl(e,t,r,n,s);break e}else for(mt=fn(t.stateNode.containerInfo.firstChild),gt=t,Pe=!0,zt=null,n=yc(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ar(),r===s){t=Xt(e,t,n);break e}rt(e,t,r,n)}t=t.child}return t;case 5:return kc(t),e===null&&Ci(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,xi(r,s)?a=null:i!==null&&xi(r,i)&&(t.flags|=32),Gc(e,t),rt(e,t,a,n),t.child;case 6:return e===null&&Ci(t),null;case 13:return Vc(e,t,n);case 4:return ba(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=lr(t,null,r,n):rt(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Nt(r,s),Ll(e,t,r,s,n);case 7:return rt(e,t,t.pendingProps,n),t.child;case 8:return rt(e,t,t.pendingProps.children,n),t.child;case 12:return rt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,Ie(Vs,r._currentValue),r._currentValue=a,i!==null)if(At(i.value,a)){if(i.children===s.children&&!ut.current){t=Xt(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Kt(-1,n&-n),u.tag=2;var f=i.updateQueue;if(f!==null){f=f.shared;var k=f.pending;k===null?u.next=u:(u.next=k.next,k.next=u),f.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Ti(i.return,n,t),l.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(F(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Ti(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}rt(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,rr(t,n),s=St(s),r=r(s),t.flags|=1,rt(e,t,r,n),t.child;case 14:return r=t.type,s=Nt(r,t.pendingProps),s=Nt(r.type,s),Bl(e,t,r,s,n);case 15:return Hc(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Nt(r,s),zs(e,t),t.tag=1,ct(r)?(e=!0,Us(t)):e=!1,rr(t,n),Wc(t,r,s),Ii(t,r,s,n),zi(null,t,r,!0,e,n);case 19:return Kc(e,t,n);case 22:return Uc(e,t,n)}throw Error(F(156,t.tag))};function cd(e,t){return Lu(e,t)}function Zp(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bt(e,t,n,r){return new Zp(e,t,n,r)}function _a(e){return e=e.prototype,!(!e||!e.isReactComponent)}function em(e){if(typeof e=="function")return _a(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ta)return 11;if(e===na)return 14}return 2}function hn(e,t){var n=e.alternate;return n===null?(n=bt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function As(e,t,n,r,s,i){var a=2;if(r=e,typeof e=="function")_a(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Fn:return En(n.children,s,i,t);case ea:a=8,s|=8;break;case Jo:return e=bt(12,n,t,s|2),e.elementType=Jo,e.lanes=i,e;case Xo:return e=bt(13,n,t,s),e.elementType=Xo,e.lanes=i,e;case Zo:return e=bt(19,n,t,s),e.elementType=Zo,e.lanes=i,e;case ku:return ho(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case vu:a=10;break e;case xu:a=9;break e;case ta:a=11;break e;case na:a=14;break e;case nn:a=16,r=null;break e}throw Error(F(130,e==null?e:typeof e,""))}return t=bt(a,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function En(e,t,n,r){return e=bt(7,e,r,t),e.lanes=n,e}function ho(e,t,n,r){return e=bt(22,e,r,t),e.elementType=ku,e.lanes=n,e.stateNode={isHidden:!1},e}function Vo(e,t,n){return e=bt(6,e,null,t),e.lanes=n,e}function Ko(e,t,n){return t=bt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function tm(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=No(0),this.expirationTimes=No(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=No(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function La(e,t,n,r,s,i,a,l,u){return e=new tm(e,t,n,l,u),t===1?(t=1,i===!0&&(t|=8)):t=0,i=bt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ka(i),e}function nm(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function dd(e){if(!e)return vn;e=e._reactInternals;e:{if(_n(e)!==e||e.tag!==1)throw Error(F(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ct(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(F(171))}if(e.tag===1){var n=e.type;if(ct(n))return dc(e,n,t)}return t}function fd(e,t,n,r,s,i,a,l,u){return e=La(n,r,!0,e,s,i,a,l,u),e.context=dd(null),n=e.current,r=st(),s=gn(n),i=Kt(r,s),i.callback=t??null,pn(n,i,s),e.current.lanes=s,ts(e,s,r),dt(e,r),e}function yo(e,t,n,r){var s=t.current,i=st(),a=gn(s);return n=dd(n),t.context===null?t.context=n:t.pendingContext=n,t=Kt(i,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=pn(s,t,a),e!==null&&(Pt(e,s,a,i),Is(e,s,a)),a}function ro(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ql(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ba(e,t){ql(e,t),(e=e.alternate)&&ql(e,t)}function rm(){return null}var pd=typeof reportError=="function"?reportError:function(e){console.error(e)};function Oa(e){this._internalRoot=e}vo.prototype.render=Oa.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(F(409));yo(e,t,null,null)};vo.prototype.unmount=Oa.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Mn(function(){yo(null,e,null,null)}),t[qt]=null}};function vo(e){this._internalRoot=e}vo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Uu();e={blockedOn:null,target:e,priority:t};for(var n=0;n<sn.length&&t!==0&&t<sn[n].priority;n++);sn.splice(n,0,e),n===0&&Yu(e)}};function Wa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function xo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Jl(){}function sm(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var f=ro(a);i.call(f)}}var a=fd(t,r,e,0,null,!1,!1,"",Jl);return e._reactRootContainer=a,e[qt]=a.current,Gr(e.nodeType===8?e.parentNode:e),Mn(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var f=ro(u);l.call(f)}}var u=La(e,0,!1,null,null,!1,!1,"",Jl);return e._reactRootContainer=u,e[qt]=u.current,Gr(e.nodeType===8?e.parentNode:e),Mn(function(){yo(t,u,n,r)}),u}function ko(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var u=ro(a);l.call(u)}}yo(t,a,e,s)}else a=sm(n,t,e,s,r);return ro(a)}$u=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=jr(t.pendingLanes);n!==0&&(oa(t,n|1),dt(t,Be()),!(ke&6)&&(dr=Be()+500,bn()))}break;case 13:Mn(function(){var r=Jt(e,1);if(r!==null){var s=st();Pt(r,e,1,s)}}),Ba(e,1)}};ia=function(e){if(e.tag===13){var t=Jt(e,134217728);if(t!==null){var n=st();Pt(t,e,134217728,n)}Ba(e,134217728)}};Hu=function(e){if(e.tag===13){var t=gn(e),n=Jt(e,t);if(n!==null){var r=st();Pt(n,e,t,r)}Ba(e,t)}};Uu=function(){return Te};Gu=function(e,t){var n=Te;try{return Te=e,t()}finally{Te=n}};ui=function(e,t,n){switch(t){case"input":if(ni(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=uo(r);if(!s)throw Error(F(90));wu(r),ni(r,s)}}}break;case"textarea":Cu(e,n);break;case"select":t=n.value,t!=null&&Zn(e,!!n.multiple,t,!1)}};Ru=Aa;Pu=Mn;var om={usingClientEntryPoint:!1,Events:[rs,Gn,uo,Eu,zu,Aa]},Sr={findFiberByHostInstance:Tn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},im={bundleType:Sr.bundleType,version:Sr.version,rendererPackageName:Sr.rendererPackageName,rendererConfig:Sr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Du(e),e===null?null:e.stateNode},findFiberByHostInstance:Sr.findFiberByHostInstance||rm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bs.isDisabled&&bs.supportsFiber)try{oo=bs.inject(im),Ot=bs}catch{}}yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=om;yt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wa(t))throw Error(F(200));return nm(e,t,null,n)};yt.createRoot=function(e,t){if(!Wa(e))throw Error(F(299));var n=!1,r="",s=pd;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=La(e,1,!1,null,null,n,!1,r,s),e[qt]=t.current,Gr(e.nodeType===8?e.parentNode:e),new Oa(t)};yt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(F(188)):(e=Object.keys(e).join(","),Error(F(268,e)));return e=Du(t),e=e===null?null:e.stateNode,e};yt.flushSync=function(e){return Mn(e)};yt.hydrate=function(e,t,n){if(!xo(t))throw Error(F(200));return ko(null,e,t,!0,n)};yt.hydrateRoot=function(e,t,n){if(!Wa(e))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=pd;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=fd(t,null,e,1,n??null,s,!1,i,a),e[qt]=t.current,Gr(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new vo(t)};yt.render=function(e,t,n){if(!xo(t))throw Error(F(200));return ko(null,e,t,!1,n)};yt.unmountComponentAtNode=function(e){if(!xo(e))throw Error(F(40));return e._reactRootContainer?(Mn(function(){ko(null,null,e,!1,function(){e._reactRootContainer=null,e[qt]=null})}),!0):!1};yt.unstable_batchedUpdates=Aa;yt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!xo(n))throw Error(F(200));if(e==null||e._reactInternals===void 0)throw Error(F(38));return ko(e,t,n,!1,r)};yt.version="18.3.1-next-f1338f8080-20240426";function md(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(md)}catch(e){console.error(e)}}md(),mu.exports=yt;var am=mu.exports,Xl=am;Qo.createRoot=Xl.createRoot,Qo.hydrateRoot=Xl.hydrateRoot;function lm({feedItems:e,activeFilter:t,onFilterChange:n,starredIds:r=new Set,config:s}){const i=e.filter(h=>h.type==="guest"&&h.threadId).length,a=e.filter(h=>h.type==="task"&&h.status!=="completed").length;e.filter(h=>h.type==="task").length;const l=a;let u=0;r&&r instanceof Set&&r.size>0&&(u=Array.from(r).filter(T=>e.some(X=>X.id===T)).length);const f=u>0?u:null,k=[{key:"guests",filterKey:"guests",label:"Threads",value:"",icon:"bi-chat-dots",badge:i>0?i:null},{key:"service",filterKey:"service",label:"Tasks",value:"",icon:"bi-check-square",badge:l>0?l:null},{key:"system",filterKey:"system",label:"AI",value:"",icon:"bi-stars",badge:null},{key:"starred",filterKey:"starred",label:"Starred",value:"",icon:"bi-star",badge:f}],m=Array.isArray(s==null?void 0:s.visibleFilters)?s.visibleFilters:null,p=m?k.filter(h=>m.includes(h.filterKey)):k,w=h=>{t===h.filterKey?n("all"):n(h.filterKey)};return o.jsxs("div",{className:"today-bar",style:{position:"relative",padding:"0.375rem 1rem",display:"flex",gap:"0.75rem",alignItems:"center",flexWrap:"nowrap",overflowX:"auto",overflowY:"hidden",WebkitOverflowScrolling:"touch",scrollbarWidth:"none",msOverflowStyle:"none",zIndex:10},children:[o.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(to bottom, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 0.8) 40%, rgba(0, 0, 0, 0) 100%)",pointerEvents:"none",zIndex:-1}}),o.jsx("div",{style:{position:"absolute",bottom:"-2rem",left:0,right:0,height:"2rem",background:"linear-gradient(to bottom, rgba(0, 0, 0, 0.8) 0%, rgba(0, 0, 0, 0) 100%)",pointerEvents:"none",zIndex:-1}}),p.map(h=>{const T=t===h.filterKey;return o.jsxs("div",{className:"metric-item rounded-pill d-flex align-items-center",style:{cursor:"pointer",padding:"0.5rem 0.875rem",transition:"all 0.2s",position:"relative",zIndex:1,flexShrink:0,whiteSpace:"nowrap",backgroundColor:T?"rgba(13, 110, 253, 0.25)":"rgba(255, 255, 255, 0.05)",border:T?"1px solid rgba(13, 110, 253, 0.3)":"1px solid rgba(255, 255, 255, 0.1)",boxShadow:T?"0 0 8px rgba(13, 110, 253, 0.3), 0 0 4px rgba(13, 110, 253, 0.2)":"none",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",height:"40px",borderRadius:"20px"},onClick:()=>w(h),onMouseEnter:X=>{T||(X.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)",X.currentTarget.style.borderColor="rgba(255, 255, 255, 0.15)")},onMouseLeave:X=>{T||(X.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)",X.currentTarget.style.borderColor="rgba(255, 255, 255, 0.1)")},children:[o.jsx("i",{className:`bi ${h.icon}`,style:{fontSize:"1.25rem",color:T?"rgba(255, 255, 255, 0.95)":"rgba(255, 255, 255, 0.5)",fontWeight:"bold"}}),o.jsx("span",{style:{fontSize:"0.875rem",color:T?"rgba(255, 255, 255, 0.95)":"rgba(255, 255, 255, 0.5)",fontWeight:"500"},children:h.label}),h.badge&&o.jsx("span",{className:`badge rounded-pill ${h.key==="starred"||h.key==="guests"?"bg-secondary":"bg-danger"}`,style:{position:"absolute",top:"-6px",right:"-6px",fontSize:"0.75rem",fontWeight:"600",minWidth:"22px",height:"22px",display:"flex",alignItems:"center",justifyContent:"center",padding:"0 6px",fontFamily:"inherit",lineHeight:"1",backgroundColor:h.key==="starred"||h.key==="guests"?"rgba(255, 255, 255, 0.25)":"#dc3545",color:"#ffffff",border:"2px solid #000000",boxSizing:"border-box"},children:h.badge})]},h.key)})]})}function Zl({event:e}){const[t,n]=j.useState(null),[r,s]=j.useState(null),i=e.title==="Pulse",a=e.title==="Centers";return j.useEffect(()=>{if(i)return;const l=e.startsAt||e.performanceStartTime;if(!l){if(a){const u=()=>{const k=new Date,m=k.getHours().toString().padStart(2,"0"),p=k.getMinutes().toString().padStart(2,"0");s(`${m}:${p}`)};u();const f=setInterval(u,6e4);return()=>clearInterval(f)}return}if(a){const u=()=>{const k=Date.now(),p=(typeof l=="number"?l:new Date(l).getTime())-k;if(p<=0){s("00:00");return}const w=Math.floor(p/1e3),h=Math.floor(w/60),T=w%60;s(`${h.toString().padStart(2,"0")}:${T.toString().padStart(2,"0")}`)};u();const f=setInterval(u,1e3);return()=>clearInterval(f)}else{const u=()=>{const k=Date.now(),m=l-k;if(m<=0){n("0:00");return}const p=Math.floor(m/1e3),w=Math.floor(p/60),h=p%60;n(`${w}:${h.toString().padStart(2,"0")}`)};u();const f=setInterval(u,1e3);return()=>clearInterval(f)}},[e.startsAt,e.performanceStartTime,i,a]),o.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"flex-start"},children:[e.image&&o.jsx("img",{src:e.image,alt:e.title,style:{width:"80px",height:"80px",borderRadius:"0.5rem",objectFit:"cover",flexShrink:0}}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"500",color:"rgba(255, 255, 255, 0.9)",marginBottom:"0.125rem"},children:e.title}),o.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",marginBottom:"0.125rem"},children:e.artist}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap",marginBottom:"0.25rem"},children:[e.startTime&&o.jsx("span",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)"},children:e.startTime}),a&&r&&o.jsxs("span",{className:"badge rounded-pill",style:{fontSize:"0.65rem",padding:"0.2rem 0.5rem",fontWeight:"600",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"rgba(255, 255, 255, 0.9)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:["LOOPS ",r]}),!i&&!a&&t&&o.jsxs("span",{className:"badge bg-danger rounded-pill",style:{fontSize:"0.65rem",padding:"0.2rem 0.5rem",fontWeight:"600"},children:["STARTS ",t]})]}),e.location&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[o.jsx("i",{className:"bi bi-geo-alt-fill",style:{fontSize:"0.625rem",color:"rgba(255, 255, 255, 0.5)"}}),o.jsx("span",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)"},children:e.location})]})]})]})}function um({item:e,allItems:t,isEmphasized:n,isSelected:r,isHighlighted:s=!1,onClick:i,onOpenThread:a,onToggleMoment:l,isStarred:u=!1,onToggleStar:f,onUpdateTaskLocation:k,onCompleteTask:m,itemRef:p,collapseVariant:w="staff",expandedCards:h,onCardExpandChange:T,onRevealArtist:X}){const[g,c]=j.useState(!1),d=j.useRef(null),[v,A]=j.useState(null),[R,L]=j.useState(!1),K=j.useRef(null),[oe,te]=j.useState(!1),V=f===void 0,U=w==="visitor",[G,W]=j.useState(null),q=h&&h[e.id]!==void 0,J=e.type==="concierge"&&e.sender&&e.sender.type==="ai",$=e.type==="guest",D=J||$?!1:q?!h[e.id]:U?G!==null?G:!0:G!==null?G:!n,Z=j.useRef(null),Q=j.useRef(null);j.useEffect(()=>{const O=()=>{te(document.body.hasAttribute("data-bottom-sheet-open"))};O();const y=new MutationObserver(O);return y.observe(document.body,{attributes:!0,attributeFilter:["data-bottom-sheet-open"]}),()=>y.disconnect()},[]);const ue=j.useRef(D);j.useEffect(()=>{if(ue.current===!0&&D===!1&&Q.current){const O=setTimeout(()=>{Q.current&&Q.current.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},50);return()=>clearTimeout(O)}ue.current=D},[D]);const Se=O=>{const y=new Date(O),I=new Date-y,x=Math.floor(I/6e4);if(x<1)return"Just now";if(x<60)return`${x}m ago`;const P=Math.floor(x/60);return P<24?`${P}h ago`:y.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},Ne=()=>{const O=e.assignedTo,y=O?_e(O.avatar):null,b=(O==null?void 0:O.type)==="staff"?"Staff":(O==null?void 0:O.type)==="ai"?"AI":"Guest",I=e.forGuest,x=e.posPayload&&e.posPayload.cart&&e.posPayload.cart.length>0,P=x?e.posPayload.cart.reduce((C,ee)=>C+ee.quantity*ee.price,0):0;return o.jsx("div",{className:"d-flex justify-content-between align-items-start",children:o.jsxs("div",{className:"flex-grow-1",children:[o.jsxs("div",{onClick:C=>{C.target.closest('button, a, [role="button"]')||(C.stopPropagation(),!J&&!$&&ft())},style:{cursor:!J&&!$?"pointer":"default",userSelect:"none"},children:[O&&o.jsxs("div",{className:"d-flex align-items-center gap-2 mb-2",children:[o.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"40px",height:"40px",backgroundColor:O.type==="ai"?"#3B31FF":y,color:"#ffffff",fontSize:"0.875rem",fontWeight:"600",flexShrink:0},children:O.avatar}),o.jsxs("div",{children:[o.jsx("strong",{style:{color:"#ffffff",display:"block",marginBottom:"0",lineHeight:"1.2"},children:O.name}),o.jsx("small",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem",marginTop:"0",lineHeight:"1.2"},children:b})]})]}),o.jsx("div",{className:"d-flex align-items-center gap-2 mb-1",style:{marginLeft:O?"52px":"0"},children:o.jsx("strong",{style:{color:"#ffffff"},children:x?"Complete purchase":e.title})})]}),o.jsx("div",{style:{display:"grid",gridTemplateRows:D?"0fr":"1fr",transition:"grid-template-rows 0.2s ease-in-out"},children:o.jsxs("div",{style:{overflow:"hidden",minHeight:0},children:[I&&o.jsx("div",{className:"d-flex align-items-center gap-2 mb-2",style:{marginLeft:O?"52px":"0"},children:o.jsxs("small",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"},children:["for ",I.name]})}),o.jsx("div",{className:"d-flex align-items-center gap-2 mb-2",style:{marginLeft:O?"52px":"0"},children:o.jsxs("div",{className:"position-relative",ref:K,children:[o.jsxs("button",{type:"button",className:"btn btn-link p-0 text-decoration-none",onClick:C=>{C.stopPropagation(),L(!R)},style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem",padding:"0",border:"none",background:"none",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.25rem"},children:[o.jsxs("span",{children:["Location: ",(()=>{const C=e.location;return C==="lobby"?"Lobby":C==="bar"?"Bar":C==="bathroom"?"Bathroom":C==="gallery-1"?"Gallery 1":C==="gallery-2"?"Gallery 2":C==="gallery-3"?"Gallery 3":C==="gallery-4"?"Gallery 4":C==="gift-shop"?"Gift Shop":C==="cinemateque"?"Cinemateque":"Not specified"})()]}),o.jsx("i",{className:"bi bi-chevron-down",style:{fontSize:"0.625rem",fontWeight:"bold"}})]}),R&&o.jsx("div",{className:"dropdown-menu show",style:{position:"absolute",top:"100%",left:0,marginTop:"0.25rem",backgroundColor:"#0a0a0a",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"0.375rem",minWidth:"150px",zIndex:1001,boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",padding:"0.25rem"},onClick:C=>C.stopPropagation(),children:["","lobby","bar","bathroom","gallery-1","gallery-2","gallery-3","gallery-4","gift-shop","cinemateque"].map(C=>{const ee=C===""?"Not specified":C==="lobby"?"Lobby":C==="bar"?"Bar":C==="bathroom"?"Bathroom":C==="gallery-1"?"Gallery 1":C==="gallery-2"?"Gallery 2":C==="gallery-3"?"Gallery 3":C==="gallery-4"?"Gallery 4":C==="gift-shop"?"Gift Shop":C==="cinemateque"?"Cinemateque":C,ge=(e.location||"")===C;return o.jsx("button",{className:"dropdown-item",style:{color:ge?"#0d6efd":"rgba(255, 255, 255, 0.8)",backgroundColor:ge?"rgba(13, 110, 253, 0.1)":"transparent",fontSize:"0.75rem",padding:"0.375rem 0.75rem",border:"none",width:"100%",textAlign:"left",cursor:"pointer"},onClick:ce=>{ce.stopPropagation(),ce.preventDefault(),k&&k(e.id,C||null),L(!1)},onMouseEnter:ce=>{ge||(ce.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)")},onMouseLeave:ce=>{ge||(ce.currentTarget.style.backgroundColor="transparent")},children:ee},C)})})]})}),x&&o.jsxs("div",{style:{marginLeft:O?"52px":"0",marginBottom:"0.5rem"},children:[o.jsxs("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",marginBottom:"0.25rem"},children:["Complete purchase: ",e.posPayload.cart.map(C=>`${C.quantity} ${C.name}`).join(", ")]}),P>0&&e.posPayload.paymentMethod&&o.jsxs("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",fontWeight:"600"},children:["Settlement: $",P.toFixed(2),"  ",e.posPayload.paymentMethod==="cash"?"Cash":e.posPayload.paymentMethod==="card"?"Card":"Card on File"]})]}),e.description&&e.description.trim()&&(!x||x&&e.description!=="Complete purchase")&&o.jsxs("div",{style:{marginLeft:O?"52px":"0",marginTop:x?"0.5rem":"0",marginBottom:"1.5rem"},children:[o.jsx("span",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",fontWeight:"500"},children:"Note: "}),o.jsx("span",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)"},children:e.description})]}),x&&o.jsxs("div",{style:{marginLeft:O?"52px":"0",marginTop:"0.75rem",display:"flex",gap:"0.5rem"},children:[o.jsx("button",{className:"btn btn-primary btn-sm",onClick:C=>{C.stopPropagation(),alert("Complete in Square (stub)")},style:{fontSize:"0.75rem",padding:"0.25rem 0.75rem"},children:"Complete in Square"}),o.jsx("button",{className:"btn btn-outline-secondary btn-sm",onClick:C=>{C.stopPropagation(),i()},style:{fontSize:"0.75rem",padding:"0.25rem 0.75rem"},children:"Mark done"})]})]})})]})})},_e=O=>{const y=["#0d6efd","#6f42c1","#d63384","#dc3545","#fd7e14","#ffc107","#20c997","#198754"],b=O.charCodeAt(0)%y.length;return y[b]};j.useEffect(()=>{const O=y=>{d.current&&!d.current.contains(y.target)&&c(!1),K.current&&!K.current.contains(y.target)&&L(!1)};if(g||R)return document.addEventListener("mousedown",O),()=>{document.removeEventListener("mousedown",O)}},[g,R]),j.useEffect(()=>{const O=e.type==="system"&&e.performanceStartTime?e.performanceStartTime:e.type==="moment"&&e.momentType==="ticket"&&e.startsAt?e.startsAt:null;if(!O){A(null);return}const y=()=>{const I=Date.now(),x=O-I;if(x<=0){A("0:00");return}const P=Math.floor(x/1e3),C=Math.floor(P/60),ee=P%60;A(`${C}:${ee.toString().padStart(2,"0")}`)};y();const b=setInterval(y,1e3);return()=>clearInterval(b)},[e.type,e.performanceStartTime,e.momentType,e.startsAt]);const Ce=()=>{const O=e.name||"Guest",y=e.avatar||O.split(" ").map(C=>C[0]).join("").toUpperCase().slice(0,2),b=_e(y),I=e.threadId?t.filter(C=>C.threadId===e.threadId&&C.type==="concierge").sort((C,ee)=>ee.timestamp-C.timestamp):[],x=I.length,P=x>0?I[0]:null;return o.jsxs("div",{children:[o.jsxs("div",{className:"d-flex align-items-start gap-3 mb-2",onClick:C=>{C.target.closest('button, a, [role="button"]')||(C.stopPropagation(),!J&&!$&&ft())},style:{cursor:!J&&!$?"pointer":"default",userSelect:"none"},children:[o.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"48px",height:"48px",backgroundColor:b,color:"#ffffff",fontSize:"1rem",fontWeight:"600"},children:y}),o.jsxs("div",{className:"flex-grow-1",style:{minWidth:0},children:[o.jsxs("div",{className:"d-flex align-items-center gap-2 mb-1",children:[o.jsx("strong",{style:{color:"#ffffff",fontSize:"0.875rem"},children:O}),o.jsx("small",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"},children:"Guest"})]}),o.jsx("p",{className:"mb-0",style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)"},children:e.message})]})]}),o.jsx("div",{style:{display:"grid",gridTemplateRows:D?"0fr":"1fr",transition:"grid-template-rows 0.2s ease-in-out"},children:o.jsxs("div",{style:{overflow:"hidden",minHeight:0},children:[P&&o.jsxs("div",{className:"d-flex align-items-start",style:{marginLeft:"64px",marginTop:"0.5rem",cursor:"pointer",padding:"8px",marginBottom:"1.5rem"},onClick:C=>{C.stopPropagation(),a(e)},onMouseEnter:C=>{C.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)",C.currentTarget.style.borderRadius="0.25rem"},onMouseLeave:C=>{C.currentTarget.style.backgroundColor="transparent"},children:[o.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"32px",height:"32px",backgroundColor:"#3B31FF",color:"#ffffff",fontSize:"0.75rem",fontWeight:"600",marginRight:"0.75rem"},children:"AI"}),o.jsxs("div",{className:"flex-grow-1",style:{minWidth:0,padding:"0.25rem 0"},children:[o.jsxs("div",{className:"d-flex align-items-center gap-2 mb-1",children:[o.jsx("strong",{style:{color:"rgba(130, 170, 210, 1)",fontSize:"0.875rem"},children:"Canyon Concierge"}),x>1&&o.jsxs("span",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"},children:["+",x-1," more"]})]}),o.jsx("p",{className:"mb-0",style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)"},children:P.message})]})]}),!P&&e.threadId&&o.jsxs("div",{className:"thread-indicator d-flex align-items-center gap-2",style:{marginLeft:"60px",cursor:"pointer",padding:"0.25rem 0.5rem",borderRadius:"0.25rem",transition:"background-color 0.2s"},onClick:C=>{C.stopPropagation(),a(e)},onMouseEnter:C=>C.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)",onMouseLeave:C=>C.currentTarget.style.backgroundColor="transparent",children:[o.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"24px",height:"24px",backgroundColor:"#3B31FF",color:"#ffffff",fontSize:"0.625rem",fontWeight:"600"},children:"AI"}),o.jsx("span",{style:{color:"rgba(255, 255, 255, 0.8)",fontSize:"0.875rem"},children:"View thread"})]})]})})]})},ne=()=>{const O=e.recipients||[],y=e.sender&&e.sender.type==="staff",b=y?e.sender:{name:"Canyon Concierge",avatar:"AI"},I=y?_e(b.avatar):"#3B31FF";return o.jsxs("div",{className:"d-flex align-items-start gap-2",children:[o.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center flex-shrink-0",onClick:x=>{x.target.closest('button, a, [role="button"]')||(x.stopPropagation(),!J&&!$&&ft())},style:{width:"48px",height:"48px",backgroundColor:I,color:"#ffffff",fontSize:"1rem",fontWeight:"600",cursor:!J&&!$?"pointer":"default",userSelect:"none"},children:b.avatar}),o.jsxs("div",{className:"flex-grow-1",style:{minWidth:0},children:[o.jsx("div",{className:"mb-1",onClick:x=>{x.target.closest('button, a, [role="button"]')||(x.stopPropagation(),!J&&!$&&ft())},style:{cursor:!J&&!$?"pointer":"default",userSelect:"none"},children:o.jsx("strong",{style:{color:"#ffffff",fontSize:"0.875rem"},children:b.name})}),o.jsx("div",{style:{display:"grid",gridTemplateRows:D?"0fr":"1fr",transition:"grid-template-rows 0.2s ease-in-out"},children:o.jsxs("div",{style:{overflow:"hidden",minHeight:0},children:[O.length>0&&o.jsxs("div",{className:"mb-1 d-flex align-items-center gap-1 flex-wrap",children:[o.jsx("i",{className:"bi bi-arrow-right",style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem",fontWeight:"bold"}}),O.map((x,P)=>{const C=x.isSpecial&&x.type==="ai"?"#3B31FF":_e(x.name),ee=x.name.split(" ").map(ge=>ge[0]).join("").toUpperCase().slice(0,2);return o.jsxs("div",{className:"d-flex align-items-center gap-1",children:[o.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"16px",height:"16px",backgroundColor:C,color:"#ffffff",fontSize:"0.5rem",fontWeight:"600",flexShrink:0},children:x.isSpecial?x.type==="ai"?"AI":"S":ee}),o.jsx("small",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"},children:x.name}),P<O.length-1&&o.jsx("span",{style:{color:"rgba(255, 255, 255, 0.4)",fontSize:"0.75rem"},children:","})]},x.id)})]}),o.jsx("p",{className:"mb-0",style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)"},children:e.message}),e.posReceipt&&o.jsxs("div",{style:{marginTop:"0.5rem",padding:"0.5rem",backgroundColor:"rgba(255, 193, 7, 0.1)",borderRadius:"0.25rem",border:"1px solid rgba(255, 193, 7, 0.2)"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.7)",marginBottom:"0.25rem",fontWeight:"500"},children:"Receipt"}),e.posReceipt.cart.map(x=>o.jsxs("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",display:"flex",justifyContent:"space-between"},children:[o.jsxs("span",{children:[x.quantity," ",x.name]}),o.jsxs("span",{children:["$",(x.quantity*x.price).toFixed(2)]})]},x.id)),o.jsxs("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",display:"flex",justifyContent:"space-between",marginTop:"0.25rem",paddingTop:"0.25rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)",fontWeight:"600"},children:[o.jsx("span",{children:"Settlement"}),o.jsxs("span",{children:["$",e.posReceipt.total.toFixed(2),"  ",e.posReceipt.paymentMethod==="cash"?"Cash":e.posReceipt.paymentMethod==="card"?"Card":"Card on File"]})]})]})]})})]})]})},be=()=>{const O=e.type==="system"&&e.title==="Performance starting soon";return o.jsxs("div",{children:[o.jsxs("div",{onClick:y=>{y.target.closest('button, a, [role="button"]')||(y.stopPropagation(),!J&&!$&&ft())},style:{cursor:!J&&!$?"pointer":"default",userSelect:"none"},children:[o.jsxs("div",{className:"d-flex align-items-center gap-2 mb-2",children:[o.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"40px",height:"40px",backgroundColor:"#3B31FF",color:"#ffffff",fontSize:"0.875rem",fontWeight:"600",flexShrink:0},children:"AI"}),o.jsxs("div",{children:[o.jsx("strong",{style:{color:"rgba(130, 170, 210, 1)",display:"block",marginBottom:"0",lineHeight:"1.2"},children:"Canyon Concierge"}),o.jsx("small",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem",marginTop:"0",lineHeight:"1.2"},children:"System"})]})]}),o.jsx("div",{className:"d-flex align-items-center gap-2 mb-1",style:{marginLeft:"52px"},children:o.jsx("strong",{style:{color:e.title==="Shift briefing"||e.title==="Post-shift summary"?"rgba(255, 255, 255, 1)":"rgba(130, 170, 210, 1)",fontSize:e.title==="Shift briefing"||e.title==="Post-shift summary"?"24px":"inherit"},children:e.title})})]}),o.jsx("div",{style:{display:"grid",gridTemplateRows:D?"0fr":"1fr",transition:"grid-template-rows 0.2s ease-in-out"},children:o.jsxs("div",{style:{overflow:"hidden",minHeight:0},children:[O&&o.jsxs("div",{style:{marginLeft:"52px",marginTop:"0.5rem",display:"flex",gap:"0.75rem",alignItems:"flex-start"},children:[o.jsx("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ6crUzfZ7ak2LjN_qjOsgrKkkNbrJ8q2G1hA&s",alt:"DOKU by Lu Yang",style:{width:"80px",height:"80px",borderRadius:"0.5rem",objectFit:"cover",flexShrink:0}}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("div",{style:{marginBottom:"0.25rem"},children:o.jsx("small",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.875rem",fontWeight:"500"},children:"DOKU by Lu Yang"})}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[o.jsx("small",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"},children:"8:00pm"}),v&&o.jsx("span",{className:"badge bg-danger rounded-pill",style:{fontSize:"0.65rem",padding:"0.2rem 0.5rem",fontWeight:"600"},children:v})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.375rem"},children:[o.jsx("i",{className:"bi bi-geo-alt-fill",style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)"}}),o.jsx("small",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"},children:"Cinemateque"})]})]})]}),!O&&v&&o.jsx("div",{style:{marginLeft:"52px",marginTop:"0.25rem"},children:o.jsx("span",{className:"badge bg-danger rounded-pill",style:{fontSize:"0.65rem",padding:"0.2rem 0.5rem",fontWeight:"600"},children:v})}),e.type==="system"&&e.note&&o.jsxs("p",{className:"mb-0",style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.6)",fontStyle:"italic",marginLeft:"52px",marginTop:"0.25rem"},children:["Note: ",e.note]}),e.type==="system"&&e.title==="Shift briefing"&&e.briefingData&&o.jsxs("div",{style:{marginLeft:"52px",marginTop:"0.75rem"},children:[o.jsxs("div",{style:{marginBottom:"1rem"},children:[o.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"rgba(255, 255, 255, 0.9)",marginBottom:"0.5rem"},children:"Schedule"}),e.briefingData.schedule&&e.briefingData.schedule.map((y,b)=>o.jsx(Zl,{event:y},b))]}),e.briefingData.visitors&&o.jsxs("div",{style:{marginBottom:"1rem"},children:[o.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"rgba(255, 255, 255, 0.9)",marginBottom:"0.5rem"},children:"Visitors"}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{display:"flex",alignItems:"center",gap:"-0.25rem"},children:e.briefingData.visitors&&e.briefingData.visitors.avatars&&e.briefingData.visitors.avatars.slice(0,4).map((y,b)=>o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:_e(y.avatar||y.name),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"500",color:"#ffffff",marginLeft:b>0?"-0.5rem":"0",border:"2px solid rgba(20, 20, 20, 1)",zIndex:4-b},children:y.avatar||(y.name?y.name.charAt(0):"?")},b))}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)"},children:[e.briefingData.visitors.current,"/",e.briefingData.visitors.expected," Expected"]})]}),e.briefingData.visitors.trend&&e.briefingData.visitors.trend.length>0&&o.jsxs("div",{style:{marginTop:"0.5rem"},children:[o.jsxs("svg",{width:"100%",height:"50",viewBox:"0 0 100 50",preserveAspectRatio:"none",style:{marginBottom:"0.25rem"},children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:`visitorGradient-${e.id}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"rgba(59, 49, 255, 0.4)"}),o.jsx("stop",{offset:"100%",stopColor:"rgba(59, 49, 255, 0.05)"})]})}),(()=>{const y=e.briefingData.visitors.trend.map(le=>typeof le=="object"?le.value:le),b=Math.max(...y),I=Math.min(...y),x=b-I||1,P=50,C=100,ge=e.briefingData.visitors.trend.map((le,je)=>{const we=typeof le=="object"?le.value:le,$t=je/(e.briefingData.visitors.trend.length-1)*C,xe=P-(we-I)/x*P;return{x:$t,y:xe}}).map((le,je)=>je===0?`M${le.x},${le.y}`:`L${le.x},${le.y}`).join(" "),ce=`${ge}L${C},${P}L0,${P}Z`;return o.jsxs(o.Fragment,{children:[o.jsx("path",{d:ce,fill:`url(#visitorGradient-${e.id})`,fillOpacity:"1"}),o.jsx("path",{d:ge,stroke:"rgba(59, 49, 255, 0.8)",strokeWidth:"1.5",fill:"none"})]})})()]}),o.jsx("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.625rem",color:"rgba(255, 255, 255, 0.5)"},children:e.briefingData.visitors.trend.map((y,b)=>typeof y=="object"&&y.time?o.jsx("span",{children:y.time},b):null)})]})]}),e.briefingData.staff&&o.jsxs("div",{style:{marginBottom:"1rem"},children:[o.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"rgba(255, 255, 255, 0.9)",marginBottom:"0.5rem"},children:"Staff"}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{display:"flex",alignItems:"center",gap:"-0.25rem"},children:e.briefingData.staff.avatars&&e.briefingData.staff.avatars.slice(0,4).map((y,b)=>o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:_e(y.avatar),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"500",color:"#ffffff",marginLeft:b>0?"-0.5rem":"0",border:"2px solid rgba(20, 20, 20, 1)",zIndex:4-b},children:y.avatar},b))}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)"},children:[e.briefingData.staff.current,"/",e.briefingData.staff.expected," Expected"]})]})]}),e.briefingData.tasks&&o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"rgba(255, 255, 255, 0.9)",marginBottom:"0.5rem"},children:"Tasks"}),o.jsxs("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)"},children:[e.briefingData.tasks.incomplete," incomplete"]})]})]}),e.type==="system"&&e.title==="Post-shift summary"&&e.summaryData&&o.jsxs("div",{style:{marginLeft:"52px",marginTop:"0.75rem"},children:[o.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.25rem",flexWrap:"wrap"},children:[o.jsxs("div",{style:{flex:"1 1 200px",padding:"0.875rem",backgroundColor:"rgba(255, 255, 255, 0.03)",borderRadius:"0.5rem",border:"1px solid rgba(255, 255, 255, 0.08)"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",marginBottom:"0.25rem",fontWeight:"500"},children:"Attendance"}),o.jsxs("div",{style:{display:"flex",alignItems:"baseline",gap:"0.5rem"},children:[o.jsx("span",{style:{fontSize:"1.5rem",fontWeight:"700",color:"#ffffff"},children:e.summaryData.attendance.actual}),o.jsxs("span",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.5)"},children:["/ ",e.summaryData.attendance.expected]})]}),o.jsx("div",{style:{marginTop:"0.5rem",height:"4px",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"2px",overflow:"hidden"},children:o.jsx("div",{style:{height:"100%",width:`${e.summaryData.attendance.percentage}%`,backgroundColor:"rgba(59, 49, 255, 0.8)",borderRadius:"2px",transition:"width 0.3s ease"}})})]}),o.jsxs("div",{style:{flex:"1 1 200px",padding:"0.875rem",backgroundColor:"rgba(255, 255, 255, 0.03)",borderRadius:"0.5rem",border:"1px solid rgba(255, 255, 255, 0.08)"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",marginBottom:"0.25rem",fontWeight:"500"},children:"Peak Pressure"}),o.jsxs("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#ffffff"},children:[e.summaryData.peakPressure.start,"  ",e.summaryData.peakPressure.end]})]})]}),o.jsxs("div",{style:{marginBottom:"1.25rem"},children:[o.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"rgba(255, 255, 255, 0.9)",marginBottom:"0.75rem"},children:"Top Request Themes"}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.625rem"},children:e.summaryData.requestThemes.map((y,b)=>{const I=Math.max(...e.summaryData.requestThemes.map(P=>P.count)),x=y.count/I*100;return o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.7)",minWidth:"100px",fontWeight:"500"},children:y.label}),o.jsx("div",{style:{flex:1,height:"20px",backgroundColor:"rgba(255, 255, 255, 0.08)",borderRadius:"10px",overflow:"hidden",position:"relative"},children:o.jsx("div",{style:{height:"100%",width:`${x}%`,backgroundColor:y.color,borderRadius:"10px",transition:"width 0.4s ease",display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:"0.5rem"},children:o.jsx("span",{style:{fontSize:"0.625rem",fontWeight:"600",color:"#ffffff",textShadow:"0 1px 2px rgba(0, 0, 0, 0.3)"},children:y.count})})})]},b)})})]}),o.jsxs("div",{style:{marginBottom:"1.25rem"},children:[o.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"rgba(255, 255, 255, 0.9)",marginBottom:"0.75rem"},children:"Friction Signals"}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.625rem"},children:e.summaryData.frictionSignals.map((y,b)=>{const I=Math.max(...e.summaryData.frictionSignals.map(P=>P.count)),x=y.count/I*100;return o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.7)",minWidth:"140px",fontWeight:"500"},children:y.label}),o.jsx("div",{style:{flex:1,height:"20px",backgroundColor:"rgba(255, 255, 255, 0.08)",borderRadius:"10px",overflow:"hidden",position:"relative"},children:o.jsx("div",{style:{height:"100%",width:`${x}%`,backgroundColor:y.color,borderRadius:"10px",transition:"width 0.4s ease",display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:"0.5rem"},children:o.jsx("span",{style:{fontSize:"0.625rem",fontWeight:"600",color:"#ffffff",textShadow:"0 1px 2px rgba(0, 0, 0, 0.3)"},children:y.count})})})]},b)})})]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.875rem",marginBottom:"1.25rem"},children:[o.jsxs("div",{style:{padding:"0.875rem",backgroundColor:"rgba(98, 200, 163, 0.1)",borderRadius:"0.5rem",border:"1px solid rgba(98, 200, 163, 0.2)"},children:[o.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",color:"rgba(98, 200, 163, 1)",marginBottom:"0.375rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Win"}),o.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.9)",lineHeight:"1.4"},children:e.summaryData.win})]}),o.jsxs("div",{style:{padding:"0.875rem",backgroundColor:"rgba(255, 200, 87, 0.1)",borderRadius:"0.5rem",border:"1px solid rgba(255, 200, 87, 0.2)"},children:[o.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",color:"rgba(255, 200, 87, 1)",marginBottom:"0.375rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Opportunity"}),o.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.9)",lineHeight:"1.4"},children:e.summaryData.opportunity})]}),o.jsxs("div",{style:{padding:"0.875rem",backgroundColor:"rgba(130, 170, 210, 0.1)",borderRadius:"0.5rem",border:"1px solid rgba(130, 170, 210, 0.2)"},children:[o.jsx("div",{style:{fontSize:"0.75rem",fontWeight:"600",color:"rgba(130, 170, 210, 1)",marginBottom:"0.375rem",textTransform:"uppercase",letterSpacing:"0.5px"},children:e.summaryData.nextTimeLabel||"Next Time"}),o.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.9)",lineHeight:"1.4"},children:e.summaryData.nextTime})]})]}),e.message&&o.jsx("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:o.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.7)",whiteSpace:"pre-line",lineHeight:"1.6",fontStyle:"italic"},children:e.message})})]}),e.type==="system"&&e.message&&!O&&e.title!=="Shift briefing"&&e.title!=="Post-shift summary"&&o.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",marginLeft:"52px",marginTop:"0.25rem",whiteSpace:"pre-line",lineHeight:"1.5"},children:e.message}),e.type!=="system"&&e.message&&o.jsx("p",{className:"mb-0",style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",marginLeft:"52px"},children:e.message})]})})]})},Ye=()=>{const O=e.momentType==="arrival",y=!O||e.state!=="collapsed",b=()=>{if(!e.startsAt)return e.subtitle||"";const x=e.startsAt-Date.now();if(x<=0)return`${e.subtitlePrefix||""}Starts now`.trim();const P=Math.floor(x/1e3),C=Math.floor(P/60),ee=P%60;return`${e.locationLabel||""}${e.locationLabel?"  ":""}Starts in ${C}:${ee.toString().padStart(2,"0")}`},I=x=>{switch(x){case"washroom":return"bi-badge-wc";case"locker":return"bi-file-lock";case"cinema":return"bi-person-video";default:return"bi-info-circle"}};return o.jsxs("div",{children:[e.momentType==="arrival"?o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",cursor:"pointer",userSelect:"none"},onClick:x=>{x.target.closest('button, a, [role="button"]')||(x.stopPropagation(),!J&&!$&&ft())},children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"0.75rem",backgroundColor:"rgba(255, 255, 255, 0.06)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:o.jsx("i",{className:`bi ${y?"bi-chevron-down":"bi-chevron-right"}`,style:{fontSize:"1.125rem",color:"rgba(255,255,255,0.75)"}})}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("div",{style:{fontSize:"0.95rem",fontWeight:600,color:"rgba(255,255,255,0.95)"},children:e.title}),o.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.6)"},children:b()})]})]}):o.jsxs("div",{onClick:x=>{x.target.closest('button, a, [role="button"]')||(x.stopPropagation(),!J&&!$&&ft())},style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:e.momentType==="ticket"?"1rem":"0",paddingBottom:e.momentType==="ticket"?"0.5rem":"0",cursor:!J&&!$?"pointer":"default",userSelect:"none"},children:[o.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"0.75rem",backgroundColor:"rgba(255, 255, 255, 0.06)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:o.jsx("i",{className:`bi ${e.momentType==="ticket"?"bi-qr-code":e.momentType==="amenities"?"bi-signpost-split":e.momentType==="schedule"?"bi-calendar-event":e.momentType==="bar-menu"?"bi-cup-straw":e.momentType==="gift-shop"?"bi-bag":e.momentType==="feedback"?"bi-chat-left-text":e.momentType==="artist"?"bi-person-badge":"bi-info-circle"}`,style:{fontSize:"1.125rem",color:"rgba(255,255,255,0.75)"}})}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("div",{style:{fontSize:"0.95rem",fontWeight:600,color:"rgba(255,255,255,0.95)"},children:e.title}),e.momentType==="amenities"&&e.subtitle&&o.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",marginTop:"0.25rem"},children:e.subtitle}),e.momentType==="ticket"&&(e.locationLabel||e.startsAt)&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap",marginTop:"0.25rem"},children:[e.locationLabel&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[o.jsx("i",{className:"bi bi-geo-alt-fill",style:{fontSize:"0.625rem",color:"rgba(255, 255, 255, 0.7)"}}),o.jsx("span",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.85)"},children:e.locationLabel})]}),e.startsAt&&(()=>{const P=e.title&&e.title.includes("DOKU")?"8:00pm":(()=>{const C=new Date(e.startsAt),ee=C.getHours(),ge=ee>=12?"pm":"am",ce=ee%12||12,le=C.getMinutes();return le===0?`${ce}:00${ge}`:`${ce}:${le.toString().padStart(2,"0")}${ge}`})();return o.jsx("span",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.85)"},children:P})})(),v&&o.jsx("span",{className:"badge bg-danger rounded-pill",style:{fontSize:"0.65rem",padding:"0.2rem 0.5rem",fontWeight:"600"},children:v})]})]})]}),O&&!y&&e.collapsedSummary&&o.jsx("div",{style:{marginTop:"0.75rem",color:"rgba(255,255,255,0.75)",fontSize:"0.875rem"},children:e.collapsedSummary}),o.jsx("div",{style:{display:"grid",gridTemplateRows:D?"0fr":"1fr",transition:"grid-template-rows 0.2s ease-in-out"},children:o.jsx("div",{style:{overflow:"hidden",minHeight:0},children:o.jsxs("div",{style:{marginTop:e.momentType==="ticket"?"4rem":"0.75rem"},children:[e.momentType==="arrival"&&o.jsxs("div",{style:{position:"relative",width:"100%",height:"220px",borderRadius:"1.25rem",overflow:"hidden",backgroundColor:"rgba(255, 255, 255, 0.06)",border:"1px solid rgba(255, 255, 255, 0.08)"},children:[e.heroImage?o.jsx("img",{src:e.heroImage,alt:e.title,style:{width:"100%",height:"100%",objectFit:"cover",display:"block"},onError:x=>{const P=e.heroImageFallback;if(P&&x.currentTarget.src!==P){x.currentTarget.src=P;return}x.currentTarget.style.display="none"}}):null,e.startsAt&&o.jsx("div",{style:{position:"absolute",top:"12px",left:"12px",backgroundColor:"rgba(0, 0, 0, 0.55)",color:"rgba(255, 255, 255, 0.95)",padding:"0.4rem 0.6rem",borderRadius:"999px",fontSize:"0.8rem",fontWeight:700,letterSpacing:"0.02em",backdropFilter:"blur(6px)"},children:(()=>{const P=b().match(/Starts in\\s+(\\d+:\\d{2})/i);return P?`STARTS ${P[1]}`:"STARTS SOON"})()})]}),e.momentType==="ticket"&&o.jsxs("div",{style:{position:"relative",width:"100%",minHeight:"350px",overflow:"hidden",zIndex:2,display:"flex",flexDirection:"column"},children:[o.jsx("div",{style:{flex:1,position:"relative"},children:e.qrCode&&o.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:2,width:"180px",height:"180px",backgroundColor:"#ffffff",borderRadius:"24px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 10px 30px rgba(0,0,0,0.5)"},children:o.jsx("img",{src:"https://www.youar.org/images/qr.gif",alt:"Ticket QR code",style:{width:"150px",height:"150px",borderRadius:"18px",objectFit:"contain"},onError:x=>{console.error("QR code image failed to load:",x)}})})}),e.description&&o.jsx("div",{style:{padding:"1.25rem",fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.95)",lineHeight:1.6},children:e.description}),V&&e.momentType==="ticket"&&e.title&&(e.title.includes("DOKU")||e.title.includes("Lu Yang"))&&X&&o.jsx("div",{style:{padding:"0 1.25rem 1.25rem 1.25rem"},children:o.jsx("button",{onClick:x=>{x.stopPropagation(),X({artistId:"lu_yang",source:"doku_cta"})},style:{background:"none",border:"none",color:"rgba(255, 255, 255, 0.7)",fontSize:"0.875rem",textDecoration:"underline",cursor:"pointer",padding:"0",fontFamily:"inherit"},children:"More about the artist"})})]}),e.momentType==="amenities"&&Array.isArray(e.items)&&o.jsx("div",{style:{marginTop:"25px",marginBottom:"25px",textAlign:"left"},children:o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:e.items.map((x,P)=>o.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"flex-start"},children:[o.jsx("i",{className:`bi ${I(x.icon)}`,style:{color:"rgba(255,255,255,0.7)",marginTop:"0.1rem",fontSize:"19px"}}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("div",{style:{fontSize:"19px",color:"rgba(255,255,255,0.85)"},children:x.label}),x.hint&&o.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.6)"},children:x.hint})]})]},`amenity-${P}`))})}),e.momentType==="schedule"&&Array.isArray(e.events)&&o.jsx("div",{style:{marginTop:"25px",marginBottom:"25px"},children:o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:e.events.map((x,P)=>o.jsx(Zl,{event:x},P))})}),e.momentType==="bar-menu"&&o.jsxs("div",{style:{marginTop:"25px",marginBottom:"25px"},children:[e.mostPopular&&e.mostPopular.length>0&&o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.6)",marginBottom:"0.75rem"},children:"Most Popular"}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:e.mostPopular.map((x,P)=>o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"1rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flex:1,minWidth:0},children:[o.jsx("button",{style:{width:"32px",height:"32px",borderRadius:"50%",border:"1px solid rgba(255, 255, 255, 0.3)",backgroundColor:"transparent",color:"rgba(255, 255, 255, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",flexShrink:0},children:o.jsx("i",{className:"bi bi-plus",style:{fontSize:"0.875rem"}})}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("div",{style:{fontSize:"0.875rem",fontWeight:600,color:"rgba(255, 255, 255, 0.95)"},children:x.name}),x.description&&o.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)"},children:x.description})]})]}),o.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:600,color:"rgba(255, 255, 255, 0.95)",flexShrink:0},children:["$",x.price]})]},`drink-${P}`))})]}),e.deliveryLocation&&o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{height:"1px",backgroundColor:"rgba(255, 255, 255, 0.1)",marginBottom:"1rem"}}),o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem",cursor:"pointer"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flex:1},children:[o.jsx("i",{className:"bi bi-geo-alt",style:{fontSize:"1rem",color:"rgba(255, 255, 255, 0.6)"}}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.625rem",color:"rgba(255, 255, 255, 0.6)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"DELIVERY LOCATION"}),o.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.95)",marginTop:"0.125rem"},children:e.deliveryLocation})]})]}),o.jsx("i",{className:"bi bi-chevron-right",style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)"}})]})]}),e.paymentMethod&&o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{height:"1px",backgroundColor:"rgba(255, 255, 255, 0.1)",marginBottom:"1rem"}}),o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem",cursor:"pointer"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flex:1},children:[o.jsx("i",{className:"bi bi-credit-card",style:{fontSize:"1rem",color:"rgba(255, 255, 255, 0.6)"}}),o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"0.625rem",color:"rgba(255, 255, 255, 0.6)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"PAYMENT METHOD"}),o.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.95)",marginTop:"0.125rem"},children:e.paymentMethod})]})]}),o.jsx("i",{className:"bi bi-chevron-right",style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)"}})]})]}),e.total!==void 0&&o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{height:"1px",backgroundColor:"rgba(255, 255, 255, 0.1)",marginBottom:"1rem"}}),o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1.5rem"},children:[o.jsx("div",{style:{fontSize:"0.875rem",fontWeight:600,color:"rgba(255, 255, 255, 0.95)"},children:"TOTAL"}),o.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:600,color:"rgba(255, 255, 255, 0.95)"},children:["$",e.total.toFixed(2)]})]})]}),e.showActions&&o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[o.jsx("button",{style:{width:"100%",padding:"0.75rem",borderRadius:"0.5rem",backgroundColor:"#0d6efd",color:"#ffffff",border:"none",fontSize:"0.875rem",fontWeight:600,cursor:"pointer"},children:"Confirm Order"}),o.jsx("div",{style:{textAlign:"center"},children:o.jsx("span",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.6)",cursor:"pointer"},children:"Full Menu"})})]})]}),e.momentType==="gift-shop"&&Array.isArray(e.products)&&o.jsxs("div",{style:{marginTop:"25px",marginBottom:"25px"},children:[o.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.6)",marginBottom:"0.75rem"},children:"Featured"}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:e.products.map((x,P)=>o.jsxs("div",{style:{display:"flex",gap:"0.75rem",alignItems:"flex-start"},children:[x.image&&o.jsx("img",{src:x.image,alt:x.title,style:{width:"80px",height:"80px",borderRadius:"0.5rem",objectFit:"cover",flexShrink:0}}),o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("div",{style:{fontSize:"0.875rem",fontWeight:500,color:"rgba(255, 255, 255, 0.95)",marginBottom:"0.25rem"},children:x.title}),x.author&&o.jsxs("div",{style:{fontSize:"0.75rem",fontStyle:"italic",color:"rgba(255, 255, 255, 0.6)",textDecoration:"underline",marginBottom:"0.125rem"},children:["by ",x.author]}),x.contributors&&o.jsxs("div",{style:{fontSize:"0.75rem",fontStyle:"italic",color:"rgba(255, 255, 255, 0.6)"},children:["and ",x.contributors," more"]})]}),x.price&&o.jsxs("div",{style:{fontSize:"0.875rem",fontWeight:500,color:"rgba(255, 255, 255, 0.95)",flexShrink:0},children:["$",x.price]})]},`product-${P}`))})]}),e.momentType==="artist"&&o.jsxs("div",{style:{marginTop:"25px",marginBottom:"25px"},children:[e.subhead&&o.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.7)",marginBottom:"1rem",lineHeight:1.5},children:e.subhead}),e.imageUrl&&o.jsx("div",{style:{marginBottom:"1.5rem"},children:o.jsx("img",{src:e.imageUrl,alt:e.title,style:{width:"100%",borderRadius:"0.75rem",objectFit:"cover",maxHeight:"300px"},onError:x=>{x.currentTarget.style.display="none"}})}),e.bullets&&Array.isArray(e.bullets)&&e.bullets.length>0&&o.jsx("div",{style:{marginBottom:"1.5rem",display:"flex",flexDirection:"column",gap:"0.75rem"},children:e.bullets.map((x,P)=>o.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"flex-start"},children:[o.jsx("span",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.875rem",marginTop:"0.125rem"},children:""}),o.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.9)",lineHeight:1.5,flex:1},children:x})]},P))}),e.whyItMatters&&o.jsxs("div",{style:{marginBottom:"1.5rem"},children:[o.jsx("div",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)",marginBottom:"0.5rem",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Why it matters"}),o.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.9)",lineHeight:1.6},children:e.whyItMatters})]}),e.links&&o.jsx("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap",paddingTop:"1rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:e.links.website&&o.jsx("a",{href:e.links.website,target:"_blank",rel:"noopener noreferrer",onClick:x=>x.stopPropagation(),style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem",textDecoration:"underline",cursor:"pointer"},children:"Visit artist website"})})]}),e.momentType==="feedback"&&o.jsxs("div",{style:{marginTop:"25px",marginBottom:"25px"},children:[e.question&&o.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.95)",marginBottom:"1rem",lineHeight:1.5},children:e.question}),e.showScale&&o.jsxs("div",{children:[o.jsx("div",{style:{display:"flex",gap:"0.25rem",justifyContent:"space-between",flexWrap:"nowrap",marginBottom:"0.5rem"},children:Array.from({length:11},(x,P)=>P).map(x=>o.jsx("button",{style:{flex:"1 1 0",minWidth:0,height:"36px",borderRadius:"0.375rem",backgroundColor:"rgba(255, 255, 255, 0.08)",color:"rgba(255, 255, 255, 0.95)",border:"none",fontSize:"0.75rem",fontWeight:500,cursor:"pointer",transition:"background-color 0.2s",padding:"0",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:P=>{P.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.15)"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},children:x},x))}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"0.7rem",color:"rgba(255, 255, 255, 0.6)",marginTop:"0.25rem"},children:[o.jsx("span",{children:"Not at all likely"}),o.jsx("span",{children:"Extremely likely"})]})]})]})]})})}),!U&&o.jsx("div",{style:{display:"grid",gridTemplateRows:D?"1fr":"0fr",transition:"grid-template-rows 0.2s ease-in-out"},children:o.jsx("div",{style:{overflow:"hidden",minHeight:0},children:o.jsx("div",{style:{padding:Re?"1rem":"0.75rem",marginTop:Re?"25px":"0",marginBottom:Re?"25px":"0",backgroundColor:Re?"rgba(0, 0, 0, 0.6)":"transparent",backdropFilter:Re?"blur(8px)":"none",fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.75)"},children:Ve()})})})]})},Tt=()=>{switch(e.type){case"task":return Ne();case"guest":return Ce();case"concierge":return ne();case"system":return be();case"moment":return Ye();default:return o.jsx("div",{children:e.message||e.title})}},Ve=()=>{var O,y,b;if(!U)switch(e.type){case"task":const I=e.description?`${e.description.substring(0,60)}...`:"";return o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:600,marginBottom:"0.25rem"},children:e.title}),I&&o.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.7)"},children:I})]});case"guest":const x=e.name||"Guest";return o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:600,marginBottom:"0.25rem"},children:x}),o.jsxs("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.7)"},children:[(O=e.message)==null?void 0:O.substring(0,50),"..."]})]});case"concierge":return o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:600,marginBottom:"0.25rem"},children:"Canyon Concierge"}),o.jsxs("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.7)"},children:[(y=e.message)==null?void 0:y.substring(0,50),"..."]})]});case"system":const P=e.message?`${e.message.substring(0,60)}...`:"";return o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:600,marginBottom:"0.25rem"},children:e.title}),P&&o.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.7)"},children:P})]});case"moment":return o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:600,marginBottom:"0.25rem"},children:e.title||"Moment"}),(e.collapsedSummary||e.description)&&o.jsxs("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.7)"},children:[e.collapsedSummary||((b=e.description)==null?void 0:b.substring(0,50)),"..."]})]});default:return o.jsx("div",{children:o.jsx("div",{style:{fontWeight:600},children:e.title||"Item"})})}return null},Ke=(()=>{if(e.type==="task"){if(e.status==="completed"||e.completed)return"#198754";if(e.assignedTo)return"#dc3545"}else if(e.type==="system")return"#3B31FF";return null})(),Dt=e.type==="guest",Ln=e.type==="concierge"&&e.sender&&e.sender.type==="staff",Bn=e.type==="concierge"&&e.sender&&e.sender.type==="ai",Ft=Dt||Ln||Bn,en=Ft?r?"rgba(13, 110, 253, 0.15)":"transparent":r?"rgba(13, 110, 253, 0.15)":"rgba(20, 20, 20, 1)",Re=!D&&(e.type==="moment"&&e.momentType==="ticket"&&e.heroImage||e.type==="system"&&e.title==="Performance starting soon"),ft=()=>{const O=D;q&&T?T(e.id,O,{reason:"manual"}):W(!D)},jt=O=>{Q.current=O,p&&p(O)};return o.jsxs("div",{id:`feed-item-${e.id}`,ref:jt,className:"feed-item position-relative",style:{position:"relative",backgroundColor:s?"rgba(13, 110, 253, 0.2)":en,border:"none",borderLeft:Ke?`4px solid ${Ke}`:"none",opacity:n?1:.4,cursor:"pointer",transition:s?"background-color 0.3s ease-out":"all 0.2s",padding:e.type==="moment"&&e.momentType==="ticket"?"0":n?"1rem":"0.5rem 1rem",borderRadius:"0.5rem",boxShadow:s?"0 0 0 2px rgba(13, 110, 253, 0.3)":"none",marginBottom:"1rem",overflow:"hidden"},onClick:O=>{e.threadId&&a?(O.stopPropagation(),a({threadId:e.threadId,thread:e.thread||null})):i()},onMouseEnter:O=>{n&&(O.currentTarget.style.backgroundColor=r?"rgba(13, 110, 253, 0.2)":"rgba(255, 255, 255, 0.05)")},onMouseLeave:O=>{Ft?O.currentTarget.style.backgroundColor=r?"rgba(13, 110, 253, 0.15)":"transparent":O.currentTarget.style.backgroundColor=r?"rgba(13, 110, 253, 0.15)":"rgba(20, 20, 20, 1)"},children:[e.heroImage&&o.jsxs(o.Fragment,{children:[o.jsx("img",{src:e.heroImage,alt:"",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",objectPosition:"top center",zIndex:0},onError:O=>{const y=e.heroImageFallback;y&&O.currentTarget.src!==y&&(O.currentTarget.src=y)}}),o.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:D?"linear-gradient(to bottom, rgba(0, 0, 0, 0.4) 0%, rgba(0, 0, 0, 0.7) 100%)":"linear-gradient(to bottom, rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0.85) 100%)",zIndex:1}})]}),!V&&!U&&n&&!D&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"position-absolute",style:{top:"0.5rem",right:"2.75rem",zIndex:g?1003:1001,display:oe?"none":"block"},ref:d,onClick:O=>O.stopPropagation(),children:[o.jsx("button",{className:"btn btn-link p-0",style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"1.25rem",zIndex:g?1:"auto",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",width:"26px",height:"26px",padding:"0",border:"none",background:"none",cursor:"pointer",transition:"all 0.2s"},onClick:O=>{O.stopPropagation(),c(!g)},title:"Actions",children:o.jsx("i",{className:"bi bi-three-dots-vertical"})}),g&&o.jsxs("div",{className:"actions-popover",style:{position:"absolute",top:"100%",right:"0",marginTop:"0.25rem",backgroundColor:"#0a0a0a",border:"none",borderRadius:"0.5rem",padding:"0.5rem",minWidth:"150px",zIndex:1003,boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)"},onClick:O=>O.stopPropagation(),children:[o.jsxs("button",{className:"btn btn-link text-start w-100 p-2",style:{color:e.status==="completed"||e.completed?"rgba(255, 255, 255, 0.4)":"#ffffff",fontSize:"0.875rem",textDecoration:"none",cursor:e.status==="completed"||e.completed?"not-allowed":"pointer"},disabled:e.status==="completed"||e.completed,onClick:()=>{c(!1),!(e.status==="completed"||e.completed)&&m&&m(e.id)},children:[o.jsx("i",{className:"bi bi-check-circle me-2",style:{fontWeight:"bold"}})," Complete"]}),o.jsxs("button",{className:"btn btn-link text-start w-100 p-2",style:{color:"#ffffff",fontSize:"0.875rem",textDecoration:"none"},onClick:()=>{c(!1),i()},children:[o.jsx("i",{className:"bi bi-chat me-2",style:{fontWeight:"bold"}})," Reply"]}),o.jsxs("button",{className:"btn btn-link text-start w-100 p-2",style:{color:"#ffffff",fontSize:"0.875rem",textDecoration:"none"},onClick:()=>{c(!1),i()},children:[o.jsx("i",{className:"bi bi-arrow-repeat me-2",style:{fontWeight:"bold"}})," Reassign"]})]})]}),o.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:O=>{O.stopPropagation(),f&&f()},"aria-pressed":u,"aria-label":u?"Unstar item":"Star item",style:{position:"absolute",top:"0.5rem",right:"5.5rem",zIndex:9,color:u?"#ffc107":"rgba(255, 255, 255, 0.4)",fontSize:"1.1rem",padding:"0",border:"none",background:"none",borderRadius:"50%",cursor:"pointer",transition:"all 0.2s",display:V||U?"none":"flex",alignItems:"center",justifyContent:"center",width:"26px",height:"26px"},onMouseEnter:O=>{O.currentTarget.style.color=u?"#ffd700":"rgba(255, 255, 255, 0.7)",O.currentTarget.style.transform="scale(1.1)",O.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)"},onMouseLeave:O=>{O.currentTarget.style.color=u?"#ffc107":"rgba(255, 255, 255, 0.4)",O.currentTarget.style.transform="scale(1)",O.currentTarget.style.backgroundColor="none"},children:u?o.jsx("i",{className:"bi bi-star-fill",style:{fontSize:"1.1rem",fontWeight:"bold"}}):o.jsx("i",{className:"bi bi-star",style:{fontSize:"1.1rem",fontWeight:"bold"}})})]}),!J&&!$&&o.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:O=>{O.stopPropagation(),ft()},"aria-label":D?"Expand card":"Collapse card",style:{position:"absolute",top:(()=>{const O=e.type==="moment"&&e.momentType==="ticket"?0:n?16:8,y=e.type==="moment"&&e.momentType==="ticket"?16:0;return`${O+y+20-14}px`})(),right:"1rem",zIndex:10,color:"rgba(255, 255, 255, 0.75)",fontSize:"1rem",padding:"0",border:"none",background:"rgba(255, 255, 255, 0.06)",borderRadius:"50%",cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",justifyContent:"center",width:"28px",height:"28px"},onMouseEnter:O=>{O.currentTarget.style.color="rgba(255, 255, 255, 1)",O.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)"},onMouseLeave:O=>{O.currentTarget.style.color="rgba(255, 255, 255, 0.75)",O.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.06)"},children:o.jsx("i",{className:"bi bi-chevron-down",style:{fontSize:"1rem",transform:D?"rotate(0deg)":"rotate(180deg)",transition:"transform 0.2s ease-in-out"}})}),o.jsx("div",{ref:Z,style:{minWidth:0,position:"relative",zIndex:2},children:o.jsx("div",{style:{padding:"0",position:"relative"},children:Tt()})}),!D&&!(e.type==="moment"&&e.momentType==="ticket")&&o.jsx("div",{className:"position-absolute",style:{bottom:Re?"1.25rem":"0.5rem",right:Re?"1.25rem":"0.5rem",fontSize:"0.75rem",color:Re?"rgba(255, 255, 255, 0.9)":"rgba(255, 255, 255, 0.7)",backgroundColor:"transparent",padding:"0",borderRadius:Re?"999px":"0",backdropFilter:"none",zIndex:Re?2:"auto"},children:Se(e.timestamp)})]})}function cm(e){const t=new Map,n=new Map;return e.forEach(r=>{if(r.type==="guest"){let s=r.threadId;if(!s){for(const[u,f]of t.entries())if(f.participants.some(m=>m.type==="guest"&&m.name===r.name)){s=u;break}s||(s=`thread-${r.id}`)}if(n.set(r.id,s),t.has(s)){const u=t.get(s);u.participants.some(k=>k.type==="guest"&&k.name===r.name)||u.participants.find(m=>m.type==="guest"&&m.name===r.name)||u.participants.push({type:"guest",name:r.name,avatar:r.avatar,id:r.id})}else{const u=[];u.push({type:"guest",name:r.name,avatar:r.avatar,id:r.id}),u.push({type:"ai",name:"Canyon Concierge",avatar:"AI",id:"ai"}),t.set(s,{id:s,participants:u,messages:[],lastActivity:r.timestamp,unreadCount:0,unread:!1})}const i=t.get(s),a=i.participants.find(u=>u.type==="guest"&&u.name===r.name),l=a?a.id:r.id;i.messages.push({id:r.id,type:r.type,sender:{type:"guest",name:r.name,avatar:r.avatar,id:l},message:r.message,timestamp:r.timestamp}),r.timestamp>i.lastActivity&&(i.lastActivity=r.timestamp)}}),e.forEach(r=>{if(r.type==="concierge"){let s=null;if(r.sender&&r.sender.type==="staff"){if(s=`thread-staff-${r.sender.id}`,!t.has(s)){const i=new Set;i.add({type:"staff",name:r.sender.name,avatar:r.sender.avatar,id:r.sender.id}),i.add({type:"ai",name:"Canyon Concierge",avatar:"AI"}),t.set(s,{id:s,participants:Array.from(i),messages:[],lastActivity:r.timestamp,unreadCount:0,unread:!1})}}else if(r.parentId&&n.has(r.parentId)?s=n.get(r.parentId):r.threadId&&(s=r.threadId),s&&t.has(s)){const i=t.get(s);i.messages.push({id:r.id,type:r.type,sender:{type:"ai",name:"Canyon Concierge",avatar:"AI",id:"ai"},message:r.message,timestamp:r.timestamp}),r.timestamp>i.lastActivity&&(i.lastActivity=r.timestamp)}if(r.sender&&r.sender.type==="staff"&&s){const i=t.get(s);i.messages.push({id:r.id,type:r.type,sender:{type:"staff",name:r.sender.name,avatar:r.sender.avatar,id:r.sender.id||"staff"},message:r.message,timestamp:r.timestamp}),r.timestamp>i.lastActivity&&(i.lastActivity=r.timestamp)}}}),t.forEach(r=>{r.messages.sort((s,i)=>s.timestamp-i.timestamp)}),Array.from(t.values()).sort((r,s)=>s.lastActivity-r.lastActivity)}function dm(e){var k,m;if(!e.messages||e.messages.length===0)return{preview:null,hasReply:!1};const t=[...e.messages].sort((p,w)=>{const h=p.timestamp||p.createdAt||0;return(w.timestamp||w.createdAt||0)-h}),n=t[0],r=p=>p.senderId?p.senderId==="ai"?"ai":p.senderId.includes("jeremy")||p.senderId.includes("staff")||p.senderId==="jeremy-bailey"?"staff":"guest":p.sender&&p.sender.type||"unknown",s=p=>p.text||p.message||"",i=(k=e.participants)==null?void 0:k.find(p=>p.type==="guest"),a=t.length>0?t[t.length-1]:null,l=a&&r(a)==="staff";if(i&&!l){const p=t.filter(d=>r(d)==="guest"),w=t.filter(d=>r(d)==="ai"),h=t.filter(d=>r(d)==="staff"||d.senderId&&(d.senderId.includes("jeremy")||d.senderId.includes("staff")||d.senderId==="jeremy-bailey")||d.sender&&d.sender.type==="staff"),T=p[0]?{message:s(p[0]),timestamp:p[0].timestamp||p[0].createdAt}:null,X=w[0]?{message:s(w[0]),timestamp:w[0].timestamp||w[0].createdAt,senderType:"ai"}:null,g=h[0]?{message:s(h[0]),timestamp:h[0].timestamp||h[0].createdAt,senderType:"staff",sender:h[0].sender||(h[0].senderId?{id:h[0].senderId,type:"staff"}:null)}:null;let c=null;return X&&g?c=X.timestamp>g.timestamp?X:g:c=X||g,{guestMessage:T,aiReply:X,staffReply:g,reply:c,hasReply:c!==null}}const f=((m=e.participants)==null?void 0:m.find(p=>p.type==="staff"))!==void 0;return f&&!i?{latestMessage:{message:s(n),timestamp:n.timestamp||n.createdAt},hasReply:!1}:f&&i?{latestMessage:{message:s(n),timestamp:n.timestamp||n.createdAt},hasReply:!1}:{latestMessage:{message:s(n),timestamp:n.timestamp||n.createdAt},hasReply:!1}}function fm({thread:e,isEmphasized:t=!0,isSelected:n,onClick:r,isInteractive:s=!0,formatTime:i,getAvatarColor:a,itemRef:l,currentUserId:u}){var A,R,L,K,oe,te,V,U;const f=dm(e),[k,m]=fu.useState(!1),p=e.participants.find(G=>G.id!==u&&G.type==="guest")||e.participants.find(G=>G.id!==u&&G.type==="staff")||e.participants.find(G=>G.type==="ai")||e.participants.find(G=>G.id!==u)||e.participants[0],w=e.messages&&e.messages.length>0?e.messages[e.messages.length-1]:null,h=w&&(w.senderId===u||w.sender&&w.sender.id===u||w.sender&&w.sender.type==="staff"&&w.sender.name==="Jeremy Bailey"||w.senderId&&(w.senderId.includes("jeremy")||w.senderId.includes("staff")||w.senderId==="jeremy-bailey")),T=e.messages&&e.messages.length>0?e.messages[0]:null,X=T&&(T.senderId===u||T.sender&&T.sender.id===u||T.sender&&T.sender.type==="staff"&&T.sender.name==="Jeremy Bailey"||T.senderId&&(T.senderId.includes("jeremy")||T.senderId.includes("staff")||T.senderId==="jeremy-bailey")),c=(p==null?void 0:p.type)==="guest"?"Guest":(p==null?void 0:p.type)==="staff"?"Staff":(p==null?void 0:p.type)==="ai"?"AI":"",v=((A=e.participants)==null?void 0:A.some(G=>G.type==="guest"))&&!X;return o.jsxs("div",{ref:l,className:"thread-row",onClick:r,onMouseEnter:()=>s&&m(!0),onMouseLeave:()=>s&&m(!1),style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",padding:t?"0.75rem":"0.5rem 1rem",paddingLeft:"1rem",paddingRight:"1rem",paddingBottom:t?"2rem":"0.5rem",marginTop:"0.75rem",marginBottom:"1.25rem",minHeight:t?"80px":"auto",borderRadius:"0.5rem",backgroundColor:n?"rgba(13, 110, 253, 0.15)":s&&k?"rgba(255, 255, 255, 0.05)":"transparent",borderLeft:n?"3px solid #0d6efd":"3px solid transparent",cursor:s?"pointer":"default",transition:"background-color 0.2s, border-color 0.2s, border-radius 0.2s, opacity 0.2s",position:"relative",opacity:t?1:.4},children:[t&&o.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"40px",height:"40px",backgroundColor:(p==null?void 0:p.type)==="ai"?"#3B31FF":(p==null?void 0:p.type)==="guest"||(p==null?void 0:p.type)==="staff"?a(p.avatar||p.name):"#3B31FF",color:"#ffffff",fontSize:"0.875rem",fontWeight:"600"},children:(p==null?void 0:p.type)==="ai"?"AI":(p==null?void 0:p.avatar)||(p!=null&&p.name?p.name.charAt(0):"?")}),o.jsx("div",{style:{flex:1,minWidth:0,paddingRight:t?0:"4rem"},children:t?o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:[o.jsx("strong",{style:{color:"#ffffff",fontSize:"0.875rem"},children:(p==null?void 0:p.name)||"Unknown"}),c&&o.jsx("small",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.75rem"},children:c})]}),f.guestMessage&&(f.aiReply||f.staffReply||f.reply)?o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{marginBottom:"0.25rem"},children:o.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:f.guestMessage.message})}),o.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:(()=>{const G=f.reply||f.aiReply||f.staffReply;if(!G)return null;const W=G.senderType==="staff"||f.staffReply&&(G===f.staffReply||G.message===f.staffReply.message)||G.sender&&G.sender.type==="staff"||G.senderId&&G.senderId!=="ai"&&G.senderId!==void 0&&(G.senderId===u||G.senderId.includes("jeremy")||G.senderId.includes("staff")),q=G.senderType==="ai"||f.aiReply&&(G===f.aiReply||G.message===f.aiReply.message)||G.sender&&G.sender.type==="ai"||G.senderId==="ai";return W?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"20px",height:"20px",backgroundColor:a("JB"),color:"#ffffff",fontSize:"0.625rem",fontWeight:"600"},children:"JB"}),o.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.6)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:G.message})]}):q?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"20px",height:"20px",backgroundColor:"#3B31FF",color:"#ffffff",fontSize:"0.625rem",fontWeight:"600"},children:"AI"}),o.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.6)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:G.message})]}):null})()})]}):f.guestMessage?h?o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"20px",height:"20px",backgroundColor:a("JB"),color:"#ffffff",fontSize:"0.625rem",fontWeight:"600"},children:"JB"}),o.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.6)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(w==null?void 0:w.text)||(w==null?void 0:w.message)||f.guestMessage.message})]}):o.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:f.guestMessage.message}):f.latestMessage?h&&!v?o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[o.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center flex-shrink-0",style:{width:"20px",height:"20px",backgroundColor:a("JB"),color:"#ffffff",fontSize:"0.625rem",fontWeight:"600"},children:"JB"}),o.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.6)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:f.latestMessage.message})]}):o.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:f.latestMessage.message}):e.messages&&e.messages.length>0&&o.jsx("p",{style:{margin:0,fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:((R=e.messages[e.messages.length-1])==null?void 0:R.text)||((L=e.messages[e.messages.length-1])==null?void 0:L.message)||""})]}):o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",minWidth:0,overflow:"hidden"},children:[o.jsxs("strong",{style:{color:"rgba(255, 255, 255, 0.75)",fontSize:"0.875rem",whiteSpace:"nowrap",flexShrink:0},children:[(p==null?void 0:p.name)||"Unknown",":"]}),o.jsx("span",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.875rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",minWidth:0,flex:1},children:((K=f.guestMessage)==null?void 0:K.message)||((oe=f.latestMessage)==null?void 0:oe.message)||((te=f.reply)==null?void 0:te.message)||e.messages&&e.messages.length>0&&(((V=e.messages[e.messages.length-1])==null?void 0:V.text)||((U=e.messages[e.messages.length-1])==null?void 0:U.message))||""})]})}),e.unread&&e.unreadCount>0&&o.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"#0d6efd",flexShrink:0,marginTop:"0.5rem"}}),o.jsx("div",{className:"position-absolute",style:{bottom:"0.5rem",right:"0.5rem",fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.7)"},children:i(e.lastActivity)})]})}function gd({items:e,allItems:t,activeFilter:n,onItemClick:r,onOpenThread:s,onToggleMoment:i,selectedContext:a,starredIds:l=new Set,onToggleStar:u,itemRefs:f,onUpdateTaskLocation:k,onCompleteTask:m,currentUserId:p,highlightedItemId:w,collapseVariant:h="staff",expandedCards:T,onCardExpandChange:X,onRevealArtist:g}){const c=U=>{switch(U.type){case"task":return"service";case"thread":return"guests";case"system":return"system";default:return"all"}},d=e,v=U=>n==="all"?!0:n==="starred"?l&&l instanceof Set&&l.has(U.id):c(U)===n,A=U=>{if(U.type==="thread"){const G=U.thread;return n==="all"?!0:n==="starred"?l&&l instanceof Set&&G.messages.some(W=>l.has(W.id)):n==="guests"}else return v(U)},L=d.filter(U=>A(U)).length>0,oe=n!=="all"&&!L,V=(()=>{switch(n){case"guests":return{message:"No active conversations",icon:"bi-chat-dots"};case"service":return{message:"No open tasks",icon:"bi-check-square"};case"system":return{message:"No system alerts",icon:"bi-lightning"};case"starred":return{message:"Nothing starred yet",icon:"bi-star"};default:return null}})();return o.jsx("div",{className:"feed-container",style:{padding:"0.75rem 1rem",paddingTop:"2rem",paddingBottom:"6rem",overflow:oe?"hidden":"visible",height:oe?"100%":"auto",minHeight:oe?"calc(100vh - 200px)":"auto",display:"flex",flexDirection:"column",position:"relative"},children:oe&&V?o.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem 1rem",color:"rgba(255, 255, 255, 0.4)",textAlign:"center",width:"100%",maxWidth:"100%"},children:[o.jsx("i",{className:`bi ${V.icon}`,style:{fontSize:"1.75rem",marginBottom:"0.75rem",color:"rgba(255, 255, 255, 0.3)",fontWeight:"normal"}}),o.jsx("div",{style:{fontSize:"0.875rem",fontWeight:"400",color:"rgba(255, 255, 255, 0.4)",lineHeight:"1.4"},children:V.message})]}):o.jsx("div",{className:"feed-items",children:d.map(U=>{const G=A(U);if(U.type==="thread"){const q=U.thread,J=(a==null?void 0:a.type)==="thread"&&(a==null?void 0:a.id)===q.id;return o.jsx(fm,{thread:q,isEmphasized:G,isSelected:J,isInteractive:!!s,onClick:s?()=>{s({threadId:q.id,thread:q})}:void 0,formatTime:$=>{const _=new Date($),Z=new Date-_,Q=Math.floor(Z/6e4);if(Q<1)return"Just now";if(Q<60)return`${Q}m ago`;const ue=Math.floor(Q/60);return ue<24?`${ue}h ago`:_.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},getAvatarColor:$=>{const _=["#0d6efd","#6f42c1","#d63384","#dc3545","#fd7e14","#ffc107","#20c997","#198754"],D=$.charCodeAt(0)%_.length;return _[D]},currentUserId:p,itemRef:$=>{$?f.current.set(q.id,$):f.current.delete(q.id)}},q.id)}const W=(a==null?void 0:a.id)===U.id;return o.jsx(um,{item:U,allItems:t,isEmphasized:G,isSelected:W,isHighlighted:w===U.id,onClick:()=>r(U),onOpenThread:s,onToggleMoment:i,isStarred:l&&l instanceof Set?l.has(U.id):!1,onToggleStar:()=>u&&u(U.id),onUpdateTaskLocation:k,onCompleteTask:m,collapseVariant:h,expandedCards:T,onCardExpandChange:X,onRevealArtist:g,itemRef:q=>{q?f.current.set(U.id,q):f.current.delete(U.id)}},U.id)})})})}function hd({selectedContext:e,toolMode:t,onToolModeChange:n,onToolAction:r,onCompleteTask:s,onReassignTask:i,isThreadMode:a=!1,feedItems:l=[],onSendMessage:u,onInputFocus:f,config:k,readOnly:m=!1,placeholderOverride:p}){const w=(k==null?void 0:k.mode)==="visitor",[h,T]=j.useState([]),[X,g]=j.useState(null),[c,d]=j.useState(null),[v,A]=j.useState(!1),[R,L]=j.useState([]),[K,oe]=j.useState(null),[te,V]=j.useState(null),[U,G]=j.useState(""),[W,q]=j.useState(!1),[J,$]=j.useState(""),[_,D]=j.useState(!1),[Z,Q]=j.useState(!1),[ue,Se]=j.useState(!1),[Ne,_e]=j.useState(!0),[Ce,ne]=j.useState(!1),[be,Ye]=j.useState(!1),[Tt,Ve]=j.useState(!1),[Mt,Ke]=j.useState(!1),[Dt,Ln]=j.useState(!1),[Bn,Ft]=j.useState(!1),[en,Re]=j.useState(!1),[ft,jt]=j.useState(!1),O=j.useRef(null),y=j.useRef(null),b=j.useRef(null),I=j.useRef(null),x=j.useRef(null),P=j.useRef(null),C=j.useRef(null),ee=j.useRef(null);j.useRef(null);const[ge,ce]=j.useState(0),[le,je]=j.useState(!1),we=()=>!U||typeof U!="string"?"":U.trim(),$t=S=>{if(!S||typeof S!="string"||S.length===0)return"#0d6efd";const E=["#0d6efd","#6f42c1","#d63384","#dc3545","#fd7e14","#ffc107","#20c997","#198754"],B=S.charCodeAt(0)%E.length;return E[B]},xe=()=>{const S=new Map;S.set("ai",{id:"ai",name:"Canyon Concierge",avatar:"AI",type:"ai",isSpecial:!0}),S.set("staff",{id:"staff",name:"Staff",avatar:"",type:"staff",isSpecial:!0}),l.forEach(se=>{if(se.type==="thread"&&se.thread&&se.thread.participants){const ie=new Set;se.thread.participants.forEach(de=>{if(de.type==="guest"&&de.id&&de.name){const ae=String(de.id);if(ie.has(ae))return;ie.add(ae),S.set(ae,{id:de.id,name:de.name,avatar:de.avatar||de.name.charAt(0),type:"guest",isSpecial:!1})}})}if(se.type==="task"&&se.assignedTo&&se.assignedTo.type==="staff"){const ie=`staff-${se.assignedTo.name}`;S.has(ie)||S.set(ie,{id:ie,name:se.assignedTo.name,avatar:se.assignedTo.avatar||se.assignedTo.name.charAt(0),type:"staff",isSpecial:!1})}});const E=Array.from(S.values()),B=E.filter(se=>se.type==="guest").map(se=>se.name),Y=new Set(B);return B.length!==Y.size&&console.warn("Duplicate guest names detected in people list:",{total:B.length,unique:Y.size,allNames:B,allPeople:E.filter(se=>se.type==="guest")}),E},Ht=()=>{const S=new Map;return l.forEach(E=>{if(E.type==="task"&&E.assignedTo&&E.assignedTo.type==="staff"){const B=`staff-${E.assignedTo.name}`;S.has(B)||S.set(B,{id:B,name:E.assignedTo.name,avatar:E.assignedTo.avatar||E.assignedTo.name.charAt(0),type:"staff",isSpecial:!1})}if(E.type==="concierge"&&E.sender&&E.sender.type==="staff"){const B=`staff-${E.sender.name}`;S.has(B)||S.set(B,{id:B,name:E.sender.name,avatar:E.sender.avatar||E.sender.name.charAt(0),type:"staff",isSpecial:!1})}}),Array.from(S.values())},nt=()=>{const S=xe();if(!J.trim())return S;const E=J.toLowerCase();return S.filter(B=>B.name.toLowerCase().includes(E))};j.useEffect(()=>{W&&y.current&&setTimeout(()=>{var S;(S=y.current)==null||S.focus()},100)},[W]),j.useEffect(()=>{const S=E=>{O.current&&!O.current.contains(E.target)&&(q(!1),$(""),D(!1)),b.current&&!b.current.contains(E.target)&&Q(!1),I.current&&!I.current.contains(E.target)&&Se(!1)};return(W||Z||ue)&&document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[W,Z,ue]),j.useEffect(()=>{c!=="pos"&&(L([]),oe(null),Q(!1))},[c]),j.useEffect(()=>{c!=="check-in"&&Se(!1)},[c]),j.useEffect(()=>{if(te){const S=setTimeout(()=>{V(null)},2e3);return()=>clearTimeout(S)}},[te]),j.useEffect(()=>{const S=Ce||be||Tt||Mt,E=()=>{S||(document.body.removeAttribute("data-bottom-sheet-open"),document.body.style.overscrollBehaviorY="",document.documentElement.style.overscrollBehaviorY="",document.body.style.overflow="",document.documentElement.style.overflow="")};if(S){document.body.setAttribute("data-bottom-sheet-open","true");const B=Y=>{const ie=Y.target.closest("[data-bottom-sheet]")!==null;(window.scrollY===0||window.scrollY<=10)&&!ie&&Y.preventDefault()};return document.addEventListener("touchmove",B,{passive:!1,capture:!0}),document.body.style.overscrollBehaviorY="none",document.documentElement.style.overscrollBehaviorY="none",()=>{document.body.removeAttribute("data-bottom-sheet-open"),document.removeEventListener("touchmove",B,{capture:!0}),document.body.style.overscrollBehaviorY="",document.documentElement.style.overscrollBehaviorY="",document.body.style.overflow="",document.documentElement.style.overflow=""}}else E();return()=>{E()}},[Ce,be,Tt,Mt]),j.useEffect(()=>{if(!(Ce||be||Tt||Mt)){const E=setTimeout(()=>{document.body.removeAttribute("data-bottom-sheet-open"),document.body.style.overscrollBehaviorY="",document.documentElement.style.overscrollBehaviorY="",document.body.style.overflow="",document.documentElement.style.overflow=""},100);return()=>clearTimeout(E)}},[Ce,be,Tt,Mt]),j.useEffect(()=>{const S=setTimeout(()=>{Ce||be||Tt||Mt||(document.body.removeAttribute("data-bottom-sheet-open"),document.body.style.overscrollBehaviorY="",document.documentElement.style.overscrollBehaviorY="",document.body.style.overflow="",document.documentElement.style.overflow="")},0);return()=>clearTimeout(S)},[]),j.useEffect(()=>{if(!le)return;const S=B=>{if(le&&ee.current){B.preventDefault();const se=B.clientY-ge;se>0&&(ee.current.style.transform=`translateX(-50%) translateY(${se}px)`)}},E=()=>{var B;if(le&&ee.current){const Y=ee.current.style.transform;parseInt(((B=Y.match(/translateY\((\d+)px\)/))==null?void 0:B[1])||"0")>100&&ne(!1),ee.current.style.transform="translateX(-50%)"}je(!1),ce(0)};return document.addEventListener("mousemove",S,{passive:!1}),document.addEventListener("mouseup",E),()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",E)}},[le,ge]),j.useEffect(()=>{const E=we().length>0,B=!c&&!v,Y=h.length===0,se=h.some(ie=>ie.id==="ai");E&&B&&Y&&!se&&T([{id:"ai",name:"Canyon Concierge",avatar:"AI",type:"ai",isSpecial:!0}])},[U,c,v,h]),j.useEffect(()=>{if(!C.current||!P.current)return;if(!(h.length>0||c!==null||v||R.length>0)){C.current&&(C.current.style.paddingTop="0.5rem");return}const E=()=>{if(P.current&&C.current){const Y=P.current.scrollHeight,se=12,ie=8;C.current.style.paddingTop=`${se+Y+ie}px`}};E();const B=new ResizeObserver(E);return B.observe(P.current),()=>{B.disconnect()}},[h,c,v,R]);const bo=S=>{T(E=>E.filter(B=>B.id!==S))},wn=S=>{if(!S||!S.id){console.error("addRecipient: Invalid person object",S);return}T(E=>{if(E.some(ie=>ie.id===S.id))return E;if(!c&&!v&&E.length>=1)return[S];const Y=E.filter(ie=>ie.type==="staff"||ie.type==="ai"),se=E.filter(ie=>ie.type==="guest");return S.type==="staff"||S.type==="ai"?[...Y,S,...se]:S.type==="guest"?[...Y,...se,S]:[...E,S]}),q(!1),D(!1),$(""),setTimeout(()=>{x.current&&x.current.focus()},100)},wo=S=>{T(E=>{if(E.some(ie=>ie.id===S.id))return E.filter(ie=>ie.id!==S.id);if(!c&&!v&&E.length>=1)return[S];const Y=E.filter(ie=>ie.type==="staff"||ie.type==="ai"),se=E.filter(ie=>ie.type==="guest");return S.type==="staff"||S.type==="ai"?[...Y,S,...se]:S.type==="guest"?[...Y,...se,S]:[...E,S]})},gr=S=>{let E;return S.type==="ai"||S.type==="staff"?E="rgba(13, 110, 253, 0.3)":S.type==="guest"?E="rgba(216, 51, 132, 0.3)":E="rgba(13, 110, 253, 0.3)",o.jsxs("span",{className:"badge",style:{backgroundColor:E,color:"#ffffff",padding:"0.5rem 0.75rem",fontSize:"0.875rem",display:"inline-flex",alignItems:"center",gap:"0.5rem",borderRadius:"20px",border:"none",whiteSpace:"nowrap",height:"32px",lineHeight:"1",flexShrink:0},children:[o.jsx("span",{style:{fontSize:"1rem"},children:S.avatar}),o.jsx("span",{style:{fontWeight:"500"},children:S.name}),o.jsx("button",{type:"button",className:"btn-close btn-close-white",style:{fontSize:"0.75rem",marginLeft:"0.25rem",padding:"0",width:"1rem",height:"1rem",opacity:.8,flexShrink:0},onClick:B=>{B.stopPropagation(),B.preventDefault(),bo(S.id)},onMouseEnter:B=>{B.currentTarget.style.opacity="1"},onMouseLeave:B=>{B.currentTarget.style.opacity="0.8"},"aria-label":"Remove"})]},S.id)},vd=()=>v?o.jsxs("span",{className:"badge",style:{backgroundColor:"rgba(255, 255, 255, 0.08)",color:"rgba(255, 255, 255, 0.7)",padding:"0.5rem 0.75rem",fontSize:"0.875rem",display:"inline-flex",alignItems:"center",gap:"0.5rem",borderRadius:"20px",border:"none",whiteSpace:"nowrap",height:"32px",lineHeight:"1",flexShrink:0},children:[o.jsx("i",{className:"bi bi-check-square",style:{fontSize:"0.875rem",fontWeight:"bold"}}),o.jsx("span",{style:{fontWeight:"500"},children:"Assign"}),o.jsx("button",{type:"button",className:"btn-close btn-close-white",style:{fontSize:"0.75rem",marginLeft:"0.25rem",padding:"0",width:"1rem",height:"1rem",opacity:.8,flexShrink:0},onClick:S=>{S.stopPropagation(),S.preventDefault(),A(!1)},onMouseEnter:S=>{S.currentTarget.style.opacity="1"},onMouseLeave:S=>{S.currentTarget.style.opacity="0.8"},"aria-label":"Remove Task"})]}):null,xd=()=>c!=="pos"?null:o.jsxs("span",{className:"badge",style:{backgroundColor:"rgba(255, 193, 7, 0.3)",color:"#ffffff",padding:"0.5rem 0.75rem",fontSize:"0.875rem",display:"inline-flex",alignItems:"center",gap:"0.5rem",borderRadius:"20px",border:"none",whiteSpace:"nowrap",height:"32px",lineHeight:"1",flexShrink:0},children:[o.jsx("i",{className:"bi bi-cart",style:{fontSize:"0.875rem",fontWeight:"bold"}}),o.jsx("span",{style:{fontWeight:"500"},children:"POS"}),o.jsx("button",{type:"button",className:"btn-close btn-close-white",style:{fontSize:"0.75rem",marginLeft:"0.25rem",padding:"0",width:"1rem",height:"1rem",opacity:.8,flexShrink:0},onClick:S=>{S.stopPropagation(),S.preventDefault(),d(null),L([]),oe(null)},onMouseEnter:S=>{S.currentTarget.style.opacity="1"},onMouseLeave:S=>{S.currentTarget.style.opacity="0.8"},"aria-label":"Remove POS"})]}),kd=()=>c!=="check-in"?null:o.jsxs("span",{className:"badge",style:{backgroundColor:"rgba(25, 135, 84, 0.3)",color:"#ffffff",padding:"0.5rem 0.75rem",fontSize:"0.875rem",display:"inline-flex",alignItems:"center",gap:"0.5rem",borderRadius:"20px",border:"none",whiteSpace:"nowrap",height:"32px",lineHeight:"1",flexShrink:0},children:[o.jsx("i",{className:"bi bi-person-check",style:{fontSize:"0.875rem",fontWeight:"bold"}}),o.jsx("span",{style:{fontWeight:"500"},children:"Check-in"}),o.jsx("button",{type:"button",className:"btn-close btn-close-white",style:{fontSize:"0.75rem",marginLeft:"0.25rem",padding:"0",width:"1rem",height:"1rem",opacity:.8,flexShrink:0},onClick:S=>{S.stopPropagation(),S.preventDefault(),d(null),Se(!1)},onMouseEnter:S=>{S.currentTarget.style.opacity="1"},onMouseLeave:S=>{S.currentTarget.style.opacity="0.8"},"aria-label":"Remove Check-in"})]}),$a=(S,E,B,Y=!1)=>{const se=h.filter(z=>z.type==="guest").length,ie=c==="check-in"&&se>=1,de=!c&&!v,ae=!w&&de&&h.length>1,fe=!w&&de&&h.length===0,me=v&&h.some(z=>z.type==="staff"||z.type==="ai"),H=v?me:!0,he=w?!m&&!!we():!m&&(we()||h.length>0||c==="pos"||v&&H||ie),ye=()=>{if(!m){if(!he){console.log("handleSubmit: Cannot submit, canSubmit is false");return}if(w){const z=we();if(!z)return;const M=u==null?void 0:u(z,[],null);M&&M.success&&G("");return}if(de){if(ae){console.log("handleSubmit: Multiple recipients in CHAT mode, cannot submit");return}if(fe){console.log("handleSubmit: No recipients in CHAT mode, cannot submit");return}if(!we()){console.log("handleSubmit: No message text in CHAT mode, cannot submit");return}}if(console.log("handleSubmit: canSubmit is true, checking handlers...",{hasOnSend:!!B,hasOnSendMessage:!!u,hasOnKeyPress:!!E,inputValue:U,selectedRecipients:h.length,primaryAction:c,isChatMode:de}),B)console.log("handleSubmit: Calling onSend callback"),B();else if(u){console.log("handleSubmit: Calling onSendMessage with:",{inputValue:U,selectedRecipients:h,primaryAction:c});const z=u(U,h,c);z&&z.success?(G(""),de||(T([]),d(null),A(!1))):z&&z.error&&console.error("handleSubmit: Send failed:",z.error)}else if(E){console.log("handleSubmit: Simulating Enter key press");const z=new KeyboardEvent("keypress",{key:"Enter",bubbles:!0});E(z)}else console.log("handleSubmit: No handler available")}};return o.jsxs("div",{style:{display:"flex",alignItems:"flex-end",gap:"0.5rem"},children:[Y&&!m&&!w&&o.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:z=>{z.stopPropagation(),ne(!0)},"data-plus-button":!0,style:{width:"45px",height:"45px",borderRadius:"50%",backgroundColor:"rgba(20, 20, 20, 1)",border:"none",display:"flex",alignItems:"center",justifyContent:"center",color:"#ffffff",cursor:"pointer",transition:"all 0.2s",flexShrink:0},onMouseEnter:z=>{z.currentTarget.style.backgroundColor="#2a2a2a",z.currentTarget.style.transform="scale(1.05)"},onMouseLeave:z=>{z.currentTarget.style.backgroundColor="rgba(20, 20, 20, 1)",z.currentTarget.style.transform="scale(1)"},title:"Add action",children:o.jsx("i",{className:"bi bi-plus-lg",style:{fontSize:"1.25rem",fontWeight:"900",textShadow:"0.5px 0.5px 0px currentColor"}})}),o.jsxs("div",{ref:C,style:{flex:1,backgroundColor:"rgba(20, 20, 20, 1)",border:"none",borderRadius:"20px",borderTopLeftRadius:"20px",borderTopRightRadius:"20px",borderBottomLeftRadius:"20px",borderBottomRightRadius:"20px",padding:"0.5rem 0.75rem",paddingRight:"2.75rem",paddingTop:h.length>0||c!==null||v||R.length>0?"calc(0.75rem + 32px + 0.5rem)":"0.5rem",paddingBottom:"0.5rem",minHeight:"45px",display:"flex",flexDirection:"row",alignItems:h.length>0||c!==null||v||R.length>0||we()?"flex-end":"center",cursor:"text",position:"relative",overflow:"visible"},onClick:()=>{var z;(z=x.current)==null||z.focus(),f&&f()},children:[(h.length>0||c!==null||v||R.length>0)&&o.jsxs("div",{ref:P,style:{position:"absolute",top:"0.75rem",left:"0.75rem",right:"2.75rem",display:"flex",flexWrap:"wrap",alignItems:"flex-start",gap:"0.375rem",minHeight:"32px",zIndex:1},children:[vd(),v&&(()=>{const z=h.filter(M=>M.type==="staff"||M.type==="ai");return z.length>0?z.map(M=>gr(M)):o.jsx("span",{className:"badge",style:{backgroundColor:"rgba(255, 255, 255, 0.08)",color:"rgba(255, 255, 255, 0.7)",padding:"0.5rem 0.75rem",fontSize:"0.875rem",display:"inline-flex",alignItems:"center",gap:"0.5rem",borderRadius:"20px",border:"none",whiteSpace:"nowrap",height:"32px",lineHeight:"1",flexShrink:0,cursor:"pointer",transition:"all 0.2s"},onClick:M=>{M.stopPropagation(),Ye(!0)},onMouseEnter:M=>{M.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.12)"},onMouseLeave:M=>{M.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},onTouchStart:M=>{M.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.15)"},onTouchEnd:M=>{setTimeout(()=>{M.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},150)},onTouchCancel:M=>{M.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},children:o.jsx("span",{style:{fontWeight:"400"},children:"No staff"})},"no-staff")})(),!v&&h.filter(z=>z.type==="staff"||z.type==="ai").map(z=>gr(z)),kd(),xd(),!c&&h.filter(z=>z.type==="guest").map(z=>gr(z)),c==="check-in"&&(()=>{const z=h.filter(M=>M.type==="guest");return z[0],z.length>0?z.map(M=>gr(M)):o.jsx("span",{className:"badge",style:{backgroundColor:"rgba(255, 255, 255, 0.08)",color:"rgba(255, 255, 255, 0.7)",padding:"0.5rem 0.75rem",fontSize:"0.875rem",display:"inline-flex",alignItems:"center",gap:"0.5rem",borderRadius:"20px",border:"none",whiteSpace:"nowrap",height:"32px",lineHeight:"1",flexShrink:0,cursor:"pointer",transition:"all 0.2s"},onClick:M=>{M.stopPropagation(),Ye(!0)},onMouseEnter:M=>{M.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.12)"},onMouseLeave:M=>{M.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},onTouchStart:M=>{M.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.15)"},onTouchEnd:M=>{setTimeout(()=>{M.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},150)},onTouchCancel:M=>{M.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},children:o.jsx("span",{style:{fontWeight:"400"},children:"Guest optional"})},"guest-optional")})(),c==="pos"&&R.map(z=>o.jsxs("span",{className:"badge",style:{backgroundColor:"rgba(255, 193, 7, 0.25)",color:"#ffffff",padding:"0.5rem 0.75rem",fontSize:"0.875rem",display:"inline-flex",alignItems:"center",gap:"0.5rem",borderRadius:"20px",border:"none",whiteSpace:"nowrap",height:"32px",lineHeight:"1",flexShrink:0},children:[z.emoji&&o.jsx("span",{style:{fontSize:"0.875rem"},children:z.emoji}),o.jsxs("span",{style:{fontWeight:"500"},children:[z.name," ",z.quantity]}),o.jsx("button",{type:"button",className:"btn-close btn-close-white",style:{fontSize:"0.75rem",marginLeft:"0.25rem",padding:"0",width:"1rem",height:"1rem",opacity:.8,flexShrink:0},onClick:M=>{M.stopPropagation(),M.preventDefault(),L(Oe=>Oe.filter(He=>He.id!==z.id))},onMouseEnter:M=>{M.currentTarget.style.opacity="1"},onMouseLeave:M=>{M.currentTarget.style.opacity="0.8"},"aria-label":"Remove item"})]},z.id)),c==="pos"&&(()=>{const z=h.filter(M=>M.type==="guest");return z.length>0?z.map(M=>gr(M)):o.jsx("span",{className:"badge",style:{backgroundColor:"rgba(255, 255, 255, 0.08)",color:"rgba(255, 255, 255, 0.7)",padding:"0.5rem 0.75rem",fontSize:"0.875rem",display:"inline-flex",alignItems:"center",gap:"0.5rem",borderRadius:"20px",border:"none",whiteSpace:"nowrap",height:"32px",lineHeight:"1",flexShrink:0,cursor:"pointer",transition:"all 0.2s"},onClick:M=>{M.stopPropagation(),Ye(!0)},onMouseEnter:M=>{M.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.12)"},onMouseLeave:M=>{M.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},onTouchStart:M=>{M.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.15)"},onTouchEnd:M=>{setTimeout(()=>{M.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},150)},onTouchCancel:M=>{M.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},children:o.jsx("span",{style:{fontWeight:"400"},children:"No guest"})},"no-guest")})(),c==="pos"&&R.length>0&&K&&(()=>{const z=R.reduce((M,Oe)=>M+Oe.quantity*Oe.price,0);return z>0?o.jsxs("span",{className:"badge",style:{backgroundColor:"rgba(255, 193, 7, 0.3)",color:"#ffffff",padding:"0.5rem 0.75rem",fontSize:"0.875rem",display:"inline-flex",alignItems:"center",gap:"0.5rem",borderRadius:"20px",border:"none",whiteSpace:"nowrap",height:"32px",lineHeight:"1",flexShrink:0,fontWeight:"600",cursor:"pointer"},onClick:M=>{M.stopPropagation(),Q(!Z)},children:[o.jsxs("span",{children:["$",z.toFixed(2),"  ",K==="cash"?"Cash":K==="card"?"Card":"Card on File"]}),o.jsx("button",{type:"button",className:"btn-close btn-close-white",style:{fontSize:"0.75rem",marginLeft:"0.25rem",padding:"0",width:"1rem",height:"1rem",opacity:.8,flexShrink:0},onClick:M=>{M.stopPropagation(),M.preventDefault(),oe(null)},onMouseEnter:M=>{M.currentTarget.style.opacity="1"},onMouseLeave:M=>{M.currentTarget.style.opacity="0.8"},"aria-label":"Remove settlement"})]}):null})()]}),ae&&o.jsx("div",{style:{position:"absolute",top:"calc(0.75rem + 32px + 0.5rem)",left:"0.75rem",right:"2.75rem",fontSize:"0.75rem",color:"rgba(255, 193, 7, 0.9)",padding:"0.25rem 0.5rem",backgroundColor:"rgba(255, 193, 7, 0.1)",borderRadius:"0.25rem",marginTop:"0.25rem",zIndex:2},children:"Only one recipient allowed"}),h.length===0&&c===null&&!v&&R.length===0?o.jsx("textarea",{ref:x,className:"form-control bg-transparent text-white border-0 p-0",placeholder:S,value:U,readOnly:m,onChange:z=>{if(!m)try{if(G(z.target.value),z.target&&z.target.scrollHeight!==void 0){z.target.style.height="auto";const M=Math.min(z.target.scrollHeight,200);z.target.style.height=`${M}px`}}catch(M){console.error("Error in input onChange:",M),G(z.target.value)}},onFocus:()=>{f&&f()},onKeyPress:z=>{try{if(m)return;z.key==="Enter"&&!z.shiftKey&&he?(z.preventDefault(),ye&&ye()):E&&E(z)}catch(M){console.error("Error in onKeyPress:",M)}},rows:1,style:{flex:1,width:"100%",border:"none",outline:"none",boxShadow:"none",fontSize:"16px",background:"transparent",padding:"0",paddingTop:"calc((45px - 1.5 * 16px) / 2)",lineHeight:"1.5",resize:"none",overflow:"hidden",maxHeight:"200px",fontFamily:"inherit",margin:0,height:we()?"auto":"calc(1.5 * 16px)",minHeight:"calc(1.5 * 16px)",display:"block",boxSizing:"border-box",verticalAlign:"top"}}):o.jsx("textarea",{ref:x,className:"form-control bg-transparent text-white border-0 p-0",placeholder:h.length===0?S:"Add a message...",value:U,readOnly:m,onChange:z=>{if(!m)try{if(G(z.target.value),z.target&&z.target.scrollHeight!==void 0){z.target.style.height="auto";const M=Math.min(z.target.scrollHeight,200);z.target.style.height=`${M}px`}}catch(M){console.error("Error in textarea onChange:",M),G(z.target.value)}},onFocus:()=>{f&&f()},onKeyPress:z=>{try{if(m)return;z.key==="Enter"&&!z.shiftKey&&he?(z.preventDefault(),ye&&ye()):E&&E(z)}catch(M){console.error("Error in onKeyPress:",M)}},rows:1,style:{flex:1,width:"100%",border:"none",outline:"none",boxShadow:"none",fontSize:"16px",background:"transparent",padding:"0",paddingTop:"calc((45px - 1.5 * 16px) / 2)",lineHeight:"1.5",resize:"none",overflow:"hidden",maxHeight:"200px",fontFamily:"inherit",margin:0,height:we()?"auto":"calc(1.5 * 16px)",minHeight:"calc(1.5 * 16px)",display:"block",boxSizing:"border-box",verticalAlign:"top",alignSelf:"flex-end"}}),o.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:z=>{z.stopPropagation(),z.preventDefault(),m||ye()},disabled:m||!he,style:{position:"absolute",right:"0.5rem",top:h.length===0&&c===null&&!v&&R.length===0?"50%":"auto",bottom:h.length===0&&c===null&&!v&&R.length===0?"auto":"0.5rem",transform:h.length===0&&c===null&&!v&&R.length===0?"translateY(-50%)":"none",width:"32px",height:"32px",borderRadius:"50%",backgroundColor:he?"#ffffff":"rgba(255, 255, 255, 0.06)",border:"none",display:"flex",alignItems:"center",justifyContent:"center",color:he?"#000000":"rgba(255, 255, 255, 0.5)",cursor:m?"not-allowed":he?"pointer":"not-allowed",flexShrink:0,zIndex:10},title:"Send",children:o.jsx("i",{className:"bi bi-arrow-up-short",style:{fontSize:"1.125rem",fontWeight:"bold",transform:"scale(1.3)"}})})]})]})},Ha=()=>{const S=h.find(de=>de.type==="staff"||de.type==="ai"),E=S?{name:S.name,avatar:S.avatar,type:S.type}:{name:"Jeremy Bailey",avatar:"JB",type:"staff"},B=h.find(de=>de.type==="guest"),Y=B?{id:B.id,name:B.name,avatar:B.avatar}:null,se=()=>{const de=h.filter(he=>he.type==="guest").length,ae=c==="check-in"&&de>=1,fe=v&&h.some(he=>he.type==="staff"||he.type==="ai"),me=v?fe:!0;if(we()||h.length>0||c==="pos"||v&&me||ae){if(c==="check-in"&&ae){if(r){const he=h.filter(ye=>ye.type==="guest");if(v){const ye=we()||null;he.forEach(z=>{const M=ye?`Check-in ${z.name}${ye?` - ${ye}`:""}`:`Check-in ${z.name}`;r("create-task",{description:M,assignee:E,forGuest:{id:z.id,name:z.name,avatar:z.avatar},location:null})})}else{const ye=we()||null;he.forEach(z=>{r("check-in",{guest:{id:z.id,name:z.name,avatar:z.avatar},note:ye})})}}G(""),T([]),d(null),A(!1);return}if(c==="pos"){if(v)r&&r("create-task",{description:we()||"Complete purchase",assignee:E,forGuest:Y,location:null,posPayload:{cart:R,paymentMethod:K}}),G(""),T([]),d(null),A(!1),L([]),oe(null);else{if(r){const he=we()||null;r("execute-pos",{cart:R,paymentMethod:K,forGuest:Y,note:he})}G(""),T([]),d(null),L([]),oe(null)}return}if(v){r&&r("create-task",{description:we(),assignee:E,forGuest:Y,location:null}),G(""),T([]),A(!1);return}if(!c&&!v){if(h.length===0){console.log("Select someone to message");return}if(h.length>1){console.log("Only one recipient allowed");return}if(!we()){console.log("Message cannot be empty");return}if(u){const he=u(U,h,c);he&&he.success?G(""):he&&he.error&&console.log("Error:",he.error)}return}u&&(we()||h.length>0)&&(u(U,h,c),G(""),T([]))}};return(()=>{if(c==="check-in"){const de=h.find(me=>me.type==="guest"),ae=h.find(me=>me.type==="staff"||me.type==="ai"),fe=ae||{name:"Jeremy Bailey"};return v?`Assign  ${fe.name}  Check-in ${de?de.name:"guest"}`:de?`Check-in ${de.name}`:null}if(c==="pos"){const de=h.find(H=>H.type==="guest"),ae=h.find(H=>H.type==="staff"||H.type==="ai"),fe=ae||{name:"Jeremy Bailey"},me=de||null;return v?`Assign  ${fe.name}  POS for ${me?me.name:"no guest"}`:`POS for ${me?me.name:"no guest"}`}if(v){const de=h.find(H=>H.type==="guest"),ae=h.find(H=>H.type==="staff"||H.type==="ai"),fe=ae||{name:"Jeremy Bailey"},me=de||null;return`Assign  ${fe.name}  ${me?`for ${me.name}`:"task"}`}return null})(),o.jsxs("div",{style:{flex:1,position:"relative"},children:[te&&o.jsx("div",{style:{position:"absolute",top:"-2rem",left:"50%",transform:"translateX(-50%)",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"#ffffff",padding:"0.375rem 0.75rem",borderRadius:"20px",fontSize:"0.75rem",zIndex:1001,whiteSpace:"nowrap"},children:te}),$a(p||(v?"Task description":c==="pos"?"Add note (optional)":"Ask or act"),de=>{de.key==="Enter"&&(de.preventDefault(),se())},se,!w)]})},bd=()=>o.jsx("div",{className:"tool-composer",children:o.jsxs("div",{className:"d-flex gap-2",children:[o.jsxs("button",{className:"btn btn-primary flex-grow-1",onClick:()=>r("scan-ticket",{method:"scanner"}),children:[o.jsx("i",{className:"bi bi-qr-code-scan"})," Open Scanner"]}),o.jsxs("button",{className:"btn btn-outline-primary flex-grow-1",onClick:()=>r("scan-ticket",{method:"manual"}),children:[o.jsx("i",{className:"bi bi-keyboard"})," Manual Entry"]}),o.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>n(null),children:o.jsx("i",{className:"bi bi-x"})})]})}),wd=()=>{const[S,E]=j.useState(1),[B,Y]=j.useState(25);return o.jsxs("div",{className:"tool-composer",children:[o.jsxs("div",{className:"d-flex gap-2 mb-2",children:[o.jsxs("div",{className:"flex-grow-1",children:[o.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.8)"},children:"Quantity"}),o.jsx("input",{type:"number",className:"form-control bg-dark text-white border-secondary",min:"1",value:S,onChange:se=>E(parseInt(se.target.value)||1)})]}),o.jsxs("div",{className:"flex-grow-1",children:[o.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.8)"},children:"Price"}),o.jsx("input",{type:"number",className:"form-control bg-dark text-white border-secondary",min:"0",step:"0.01",value:B,onChange:se=>Y(parseFloat(se.target.value)||0)})]})]}),o.jsxs("div",{className:"d-flex gap-2",children:[o.jsxs("button",{className:"btn btn-success flex-grow-1",onClick:()=>r("sell-ticket",{quantity:S,price:B,method:"charge"}),children:[o.jsx("i",{className:"bi bi-credit-card"})," Charge $",(S*B).toFixed(2)]}),o.jsxs("button",{className:"btn btn-outline-warning flex-grow-1",onClick:()=>r("sell-ticket",{quantity:S,price:B,method:"comp"}),children:[o.jsx("i",{className:"bi bi-gift"})," Comp"]}),o.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>n(null),children:o.jsx("i",{className:"bi bi-x"})})]})]})},Sd=()=>{const S=["Wine","Beer","Cocktail","Soft Drink"],[E,B]=j.useState("");return o.jsxs("div",{className:"tool-composer",children:[o.jsxs("div",{className:"mb-2",children:[o.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.8)"},children:"Select Drink"}),o.jsxs("select",{className:"form-select bg-dark text-white border-secondary",value:E,onChange:Y=>B(Y.target.value),children:[o.jsx("option",{value:"",children:"Choose..."}),S.map(Y=>o.jsx("option",{value:Y,children:Y},Y))]})]}),o.jsxs("div",{className:"d-flex gap-2",children:[o.jsxs("button",{className:"btn btn-primary flex-grow-1",disabled:!E,onClick:()=>r("order-drink",{drink:E}),children:[o.jsx("i",{className:"bi bi-send"})," Send Order"]}),o.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>n(null),children:o.jsx("i",{className:"bi bi-x"})})]})]})},Cd=()=>o.jsx("div",{className:"tool-composer",children:o.jsxs("div",{className:"d-flex gap-2 align-items-center",children:[o.jsx("div",{style:{flex:1},children:$a("Type message to guest",S=>{S.key==="Enter"&&(we()||h.length>0)&&(r("message-guest",{message:U,recipients:h}),G(""),T([]))})}),o.jsxs("button",{className:"btn btn-primary",disabled:!we()&&h.length===0,onClick:()=>{r("message-guest",{message:U,recipients:h}),G(""),T([])},children:[o.jsx("i",{className:"bi bi-send"})," Send"]}),o.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>n(null),children:o.jsx("i",{className:"bi bi-x"})})]})}),Td=()=>o.jsxs("div",{className:"tools-palette",children:[o.jsxs("div",{className:"d-flex gap-2 mb-2 flex-wrap",children:[o.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>n("ticket-scan"),children:[o.jsx("i",{className:"bi bi-qr-code-scan"})," Ticket Scan"]}),o.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>n("sell-ticket"),children:[o.jsx("i",{className:"bi bi-ticket"})," Sell Ticket"]}),o.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>n("order-drink"),children:[o.jsx("i",{className:"bi bi-cup-straw"})," Order Drink"]}),o.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>n("message-guest"),children:[o.jsx("i",{className:"bi bi-chat"})," Message Guest"]})]}),o.jsx("button",{className:"btn btn-outline-secondary btn-sm w-100",onClick:()=>n(null),children:"Close Tools"})]}),jd=()=>a?Ha():null,Id=()=>{const[S,E]=j.useState("fob"),[B,Y]=j.useState("");return o.jsxs("div",{className:"tool-composer",children:[o.jsxs("div",{className:"mb-2",children:[o.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.8)"},children:"Purchase Type"}),o.jsxs("div",{className:"btn-group w-100",role:"group",children:[o.jsx("button",{type:"button",className:`btn ${S==="fob"?"btn-primary":"btn-outline-primary"}`,onClick:()=>E("fob"),children:"FOB"}),o.jsx("button",{type:"button",className:`btn ${S==="retail"?"btn-primary":"btn-outline-primary"}`,onClick:()=>E("retail"),children:"Retail"})]})]}),o.jsxs("div",{className:"mb-2",children:[o.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.8)"},children:"Amount"}),o.jsx("input",{type:"number",className:"form-control bg-dark text-white border-secondary",min:"0",step:"0.01",placeholder:"0.00",value:B,onChange:se=>Y(se.target.value)})]}),o.jsxs("div",{className:"d-flex gap-2",children:[o.jsxs("button",{className:"btn btn-success flex-grow-1",disabled:!B||parseFloat(B)<=0,onClick:()=>{r("fob-retail",{type:S,amount:parseFloat(B)}),Y(""),n(null)},children:[o.jsx("i",{className:"bi bi-credit-card"})," Process Payment"]}),o.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>n(null),children:o.jsx("i",{className:"bi bi-x"})})]})]})},Nd=()=>t==="ticket-scan"?bd():t==="sell-ticket"?wd():t==="fob-retail"?Id():t==="order-drink"?Sd():t==="message-guest"?Cd():t==="checkin"?o.jsx("div",{className:"tool-composer",children:o.jsxs("div",{className:"d-flex gap-2",children:[o.jsxs("button",{className:"btn btn-primary flex-grow-1",onClick:()=>r("checkin",{guestId:e==null?void 0:e.id}),children:[o.jsx("i",{className:"bi bi-person-check"})," Check-in Guest"]}),o.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>n(null),children:o.jsx("i",{className:"bi bi-x"})})]})}):t==="tools"?Td():a?jd():Ha(),Ed=()=>{if(!Mt)return null;const S=[{id:"ticket",name:"Ticket",price:25,emoji:""},{id:"wine",name:"Wine",price:12,emoji:""},{id:"beer",name:"Beer",price:8,emoji:""},{id:"cocktail",name:"Cocktail",price:15,emoji:""},{id:"soft-drink",name:"Soft Drink",price:5,emoji:""},{id:"gift-shop",name:"Gift Shop Item",price:20,emoji:""}],E=R.reduce((Y,se)=>Y+se.quantity,0),B=E>0?`Add ${E} ${E===1?"item":"items"}`:null;return o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:99999,animation:ft?"fadeOut 0.3s ease-out":"fadeIn 0.2s ease-out",pointerEvents:"auto"},onClick:()=>{jt(!0),setTimeout(()=>{Ke(!1),ne(!1),jt(!1),document.body.removeAttribute("data-bottom-sheet-open"),document.body.style.overscrollBehaviorY="",document.documentElement.style.overscrollBehaviorY="",document.body.style.overflow="",document.documentElement.style.overflow=""},300)}}),o.jsxs("div",{"data-bottom-sheet":!0,style:{position:"fixed",bottom:0,left:"50%",transform:"translateX(-50%)",width:"100%",maxWidth:"600px",backgroundColor:"#0a0a0a",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem",padding:"1rem",paddingBottom:B?"calc(5.5rem + env(safe-area-inset-bottom, 0))":"calc(1rem + env(safe-area-inset-bottom, 0))",zIndex:1e5,pointerEvents:"auto",boxShadow:"0 -4px 20px rgba(0, 0, 0, 0.3)",animation:ft?"slideDown 0.3s ease-out":"slideUp 0.3s ease-out",maxHeight:"80vh",display:"flex",flexDirection:"column"},onClick:Y=>Y.stopPropagation(),children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[o.jsx("h6",{style:{margin:0,color:"#ffffff",fontWeight:"600"},children:"Add Items"}),o.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:()=>{Ke(!1),ne(!0)},style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"1.25rem",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx("i",{className:"bi bi-x-lg"})})]}),o.jsx("div",{style:{flex:1,overflowY:"auto",minHeight:0,marginBottom:B||c==="pos"&&R.length>0?"1rem":"0"},children:o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:S.map(Y=>{const se=R.find(de=>de.id===Y.id),ie=se?se.quantity:0;return o.jsxs("button",{className:"btn w-100",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem",backgroundColor:ie>0?"rgba(255, 193, 7, 0.2)":"rgba(255, 255, 255, 0.05)",border:"none",borderRadius:"0.5rem",color:"#ffffff",textAlign:"left"},onClick:de=>{de.stopPropagation(),c!=="pos"&&(c==="check-in"||v?(c==="check-in"&&Se(!1),A(!1),d("pos"),V("Switched to POS")):d("pos")),L(ae=>ae.find(me=>me.id===Y.id)?ae.map(me=>me.id===Y.id?{...me,quantity:me.quantity+1}:me):[...ae,{...Y,quantity:1}])},onTouchStart:de=>{de.currentTarget.style.backgroundColor=ie>0?"rgba(255, 193, 7, 0.3)":"rgba(255, 255, 255, 0.15)"},onTouchEnd:de=>{setTimeout(()=>{de.currentTarget.style.backgroundColor=ie>0?"rgba(255, 193, 7, 0.2)":"rgba(255, 255, 255, 0.05)"},150)},onTouchCancel:de=>{de.currentTarget.style.backgroundColor=ie>0?"rgba(255, 193, 7, 0.2)":"rgba(255, 255, 255, 0.05)"},children:[o.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[Y.emoji&&o.jsx("span",{style:{fontSize:"1.25rem"},children:Y.emoji}),o.jsx("span",{style:{fontWeight:"500"},children:Y.name})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[ie>0&&o.jsxs("span",{style:{color:"rgba(255, 193, 7, 0.9)",fontSize:"0.875rem",fontWeight:"600"},children:["",ie]}),o.jsxs("span",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.875rem"},children:["$",Y.price]})]})]},Y.id)})})}),c==="pos"&&R.length>0&&o.jsxs("div",{style:{paddingTop:"1rem",marginTop:"auto",marginBottom:B?"1rem":"0",borderTop:"1px solid rgba(255, 255, 255, 0.1)",flexShrink:0},children:[o.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.8)",marginBottom:"0.75rem",fontWeight:"500"},children:"Payment"}),o.jsx("div",{style:{display:"flex",gap:"0.5rem"},children:["cash","card","card-on-file"].map(Y=>{const se=K===Y;return o.jsx("button",{className:"btn flex-grow-1",style:{fontSize:"0.875rem",padding:"0.5rem",backgroundColor:se?"rgba(255, 193, 7, 0.2)":"rgba(255, 255, 255, 0.05)",border:"none",borderRadius:"0.5rem",color:"#ffffff",fontWeight:"500"},onClick:ie=>{ie.stopPropagation(),oe(Y)},onTouchStart:ie=>{ie.currentTarget.style.backgroundColor=se?"rgba(255, 193, 7, 0.3)":"rgba(255, 255, 255, 0.15)"},onTouchEnd:ie=>{setTimeout(()=>{ie.currentTarget.style.backgroundColor=se?"rgba(255, 193, 7, 0.2)":"rgba(255, 255, 255, 0.05)"},150)},onTouchCancel:ie=>{ie.currentTarget.style.backgroundColor=se?"rgba(255, 193, 7, 0.2)":"rgba(255, 255, 255, 0.05)"},children:Y==="cash"?"Cash":Y==="card"?"Card":"Card on File"},Y)})})]}),B&&o.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,padding:"1rem",paddingBottom:"calc(1rem + env(safe-area-inset-bottom, 0))",borderTop:"1px solid rgba(255, 255, 255, 0.1)",backgroundColor:"#0a0a0a",zIndex:10},children:o.jsx("button",{className:"btn btn-primary w-100",style:{padding:"0.875rem",fontSize:"0.875rem",fontWeight:"500",borderRadius:"0.5rem"},onClick:Y=>{Y.stopPropagation(),c!=="pos"&&(c==="check-in"||v?(c==="check-in"&&Se(!1),A(!1),d("pos"),V("Switched to POS")):d("pos")),Ke(!1),ne(!1)},onTouchStart:Y=>{Y.currentTarget.style.opacity="0.8",Y.currentTarget.style.transform="scale(0.98)"},onTouchEnd:Y=>{setTimeout(()=>{Y.currentTarget.style.opacity="1",Y.currentTarget.style.transform="scale(1)"},150)},onTouchCancel:Y=>{Y.currentTarget.style.opacity="1",Y.currentTarget.style.transform="scale(1)"},children:B})})]})]})},zd=()=>Tt?o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:99999,animation:en?"fadeOut 0.3s ease-out":"fadeIn 0.2s ease-out",pointerEvents:"auto"},onClick:()=>{Re(!0),setTimeout(()=>{Ve(!1),ne(!1),Re(!1),document.body.removeAttribute("data-bottom-sheet-open"),document.body.style.overscrollBehaviorY="",document.documentElement.style.overscrollBehaviorY="",document.body.style.overflow="",document.documentElement.style.overflow=""},300)}}),o.jsxs("div",{"data-bottom-sheet":!0,style:{position:"fixed",bottom:0,left:"50%",transform:"translateX(-50%)",width:"100%",maxWidth:"600px",backgroundColor:"#0a0a0a",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem",padding:"1rem",paddingBottom:"calc(1rem + env(safe-area-inset-bottom, 0))",zIndex:1e5,pointerEvents:"auto",boxShadow:"0 -4px 20px rgba(0, 0, 0, 0.3)",animation:en?"slideDown 0.3s ease-out":"slideUp 0.3s ease-out",maxHeight:"80vh",overflowY:"auto"},onClick:S=>S.stopPropagation(),children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[o.jsx("h6",{style:{margin:0,color:"#ffffff",fontWeight:"600"},children:"Check-in Guest"}),o.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:()=>{Ve(!1),ne(!0)},style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"1.25rem",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx("i",{className:"bi bi-x-lg"})})]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:[o.jsxs("button",{type:"button",className:"btn btn-primary w-100",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",padding:"1rem",fontSize:"1rem",fontWeight:"500"},onClick:S=>{S.stopPropagation(),c!=="check-in"&&(v||c==="pos"?(A(!1),c==="pos"&&(L([]),oe(null),Q(!1)),d("check-in"),V("Switched to Check-in")):d("check-in"));const E={id:`scanned-${Date.now()}`,name:"Scanned Guest",avatar:"SG",type:"guest",isSpecial:!1};T(B=>B.find(ie=>ie.type==="guest"&&ie.id===E.id)?B:[...B.filter(ie=>ie.type!=="guest"),E]),Ve(!1),ne(!1)},onTouchStart:S=>{S.currentTarget.style.opacity="0.8",S.currentTarget.style.transform="scale(0.98)"},onTouchEnd:S=>{setTimeout(()=>{S.currentTarget.style.opacity="1",S.currentTarget.style.transform="scale(1)"},150)},onTouchCancel:S=>{S.currentTarget.style.opacity="1",S.currentTarget.style.transform="scale(1)"},children:[o.jsx("i",{className:"bi bi-qr-code-scan",style:{fontSize:"1.25rem"}}),o.jsx("span",{children:"Scan QR"})]}),o.jsxs("button",{type:"button",className:"btn w-100",style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem",padding:"1rem",fontSize:"1rem",fontWeight:"500",backgroundColor:"rgba(255, 255, 255, 0.05)",border:"none",borderRadius:"0.5rem",color:"#ffffff"},onClick:S=>{S.stopPropagation(),c!=="check-in"&&(v||c==="pos"?(A(!1),c==="pos"&&(L([]),oe(null),Q(!1)),d("check-in"),V("Switched to Check-in")):d("check-in")),Ve(!1),ne(!1)},onTouchStart:S=>{S.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.15)"},onTouchEnd:S=>{setTimeout(()=>{S.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)"},150)},onTouchCancel:S=>{S.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)"},children:[o.jsx("i",{className:"bi bi-keyboard",style:{fontSize:"1.25rem"}}),o.jsx("span",{children:"Manual"})]})]})]})]}):null,Rd=()=>{if(!be)return null;const S=nt(),E=v?S.filter(H=>H.type==="staff"||H.type==="ai"||H.isSpecial):S,B=E.filter(H=>H.isSpecial),Y=v?[]:E.filter(H=>!H.isSpecial&&H.type==="guest"),se=h.filter(H=>S.find(ye=>ye.id===H.id)!==void 0),ie=se.filter(H=>H.type==="guest").length,de=se.filter(H=>H.type==="staff").length,ae=se.filter(H=>H.type==="ai").length,me=(()=>{const H=[];return ie>0&&H.push(`${ie} ${ie===1?"guest":"guests"}`),de>0&&H.push(`${de} staff`),ae>0&&H.push(`${ae} AI`),H.length===0?null:H.length===1?`Add ${H[0]}`:H.length===2?`Add ${H[0]} and ${H[1]}`:`Add ${H.slice(0,-1).join(", ")}, and ${H[H.length-1]}`})();return o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:99999,animation:Bn?"fadeOut 0.3s ease-out":"fadeIn 0.2s ease-out",pointerEvents:"auto"},onClick:()=>{Ft(!0),setTimeout(()=>{Ye(!1),ne(!1),Ft(!1),document.body.removeAttribute("data-bottom-sheet-open"),document.body.style.overscrollBehaviorY="",document.documentElement.style.overscrollBehaviorY="",document.body.style.overflow="",document.documentElement.style.overflow=""},300)}}),o.jsxs("div",{"data-bottom-sheet":!0,style:{position:"fixed",bottom:0,left:"50%",transform:"translateX(-50%)",width:"100%",maxWidth:"600px",backgroundColor:"#0a0a0a",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem",padding:"1rem",paddingBottom:me?"calc(5.5rem + env(safe-area-inset-bottom, 0))":"calc(1rem + env(safe-area-inset-bottom, 0))",zIndex:1e5,pointerEvents:"auto",boxShadow:"0 -4px 20px rgba(0, 0, 0, 0.3)",animation:Bn?"slideDown 0.3s ease-out":"slideUp 0.3s ease-out",maxHeight:"80vh",display:"flex",flexDirection:"column"},onClick:H=>H.stopPropagation(),children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[o.jsx("h6",{style:{margin:0,color:"#ffffff",fontWeight:"600"},children:"Select People"}),o.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:()=>{Ye(!1),ne(!0)},style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"1.25rem",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx("i",{className:"bi bi-x-lg"})})]}),o.jsx("div",{style:{marginBottom:"1rem"},children:o.jsx("input",{ref:y,type:"text",className:"form-control bg-dark text-white",placeholder:"Search people...",value:J,onChange:H=>$(H.target.value),style:{fontSize:"0.875rem",border:"none"},onClick:H=>H.stopPropagation()})}),o.jsxs("div",{style:{flex:1,overflowY:"auto",minHeight:0,marginBottom:me?"1rem":"0"},children:[B.length>0&&o.jsx("div",{style:{marginBottom:"1rem"},children:B.map(H=>{const he=H.id==="staff",ye=he?Ht():[],z=h.some(M=>M.id===H.id);return o.jsxs("div",{style:{marginBottom:"0.5rem"},children:[o.jsxs("button",{className:"btn w-100",style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",backgroundColor:z?"rgba(13, 110, 253, 0.2)":"rgba(255, 255, 255, 0.05)",border:"none",borderRadius:"0.5rem",color:"#ffffff",textAlign:"left",width:"100%"},onClick:M=>{M.stopPropagation(),he&&ye.length>0?D(!_):wo(H)},onMouseEnter:M=>{z||(M.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)")},onMouseLeave:M=>{z||(M.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)")},onTouchStart:M=>{M.currentTarget.style.backgroundColor=z?"rgba(13, 110, 253, 0.3)":"rgba(255, 255, 255, 0.15)"},onTouchEnd:M=>{setTimeout(()=>{M.currentTarget.style.backgroundColor=z?"rgba(13, 110, 253, 0.2)":"rgba(255, 255, 255, 0.05)"},150)},onTouchCancel:M=>{M.currentTarget.style.backgroundColor=z?"rgba(13, 110, 253, 0.2)":"rgba(255, 255, 255, 0.05)"},children:[o.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",backgroundColor:H.type==="ai"?"#3B31FF":$t(H.avatar||H.name),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.875rem",fontWeight:"500",color:"#ffffff",flexShrink:0},children:H.avatar}),o.jsx("span",{style:{flex:1,fontWeight:"500",fontSize:"0.875rem"},children:H.name}),he&&ye.length>0&&o.jsx("i",{className:`bi bi-chevron-${_?"up":"down"}`,style:{fontSize:"1rem",color:"rgba(255, 255, 255, 0.8)",flexShrink:0,fontWeight:"bold"}}),!he&&z&&o.jsx("i",{className:"bi bi-check-circle-fill",style:{color:"#0d6efd",fontSize:"1.25rem",flexShrink:0,fontWeight:"bold"}})]}),he&&_&&ye.length>0&&o.jsx("div",{style:{marginTop:"0.5rem",marginLeft:"0.75rem",paddingLeft:"0.75rem",borderLeft:"1px solid rgba(255, 255, 255, 0.1)"},children:ye.map(M=>{const Oe=h.some(He=>He.id===M.id);return o.jsxs("button",{className:"btn w-100",style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.625rem",backgroundColor:Oe?"rgba(13, 110, 253, 0.2)":"rgba(255, 255, 255, 0.05)",border:"none",borderRadius:"0.5rem",color:"#ffffff",textAlign:"left",width:"100%",marginBottom:"0.5rem"},onClick:He=>{He.stopPropagation(),wo(M)},onMouseEnter:He=>{Oe||(He.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)")},onMouseLeave:He=>{Oe||(He.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)")},onTouchStart:He=>{He.currentTarget.style.backgroundColor=Oe?"rgba(13, 110, 253, 0.3)":"rgba(255, 255, 255, 0.15)"},onTouchEnd:He=>{setTimeout(()=>{He.currentTarget.style.backgroundColor=Oe?"rgba(13, 110, 253, 0.2)":"rgba(255, 255, 255, 0.05)"},150)},onTouchCancel:He=>{He.currentTarget.style.backgroundColor=Oe?"rgba(13, 110, 253, 0.2)":"rgba(255, 255, 255, 0.05)"},children:[o.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",backgroundColor:$t(M.avatar||M.name),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"500",color:"#ffffff",flexShrink:0},children:M.avatar}),o.jsx("span",{style:{flex:1,fontSize:"0.875rem"},children:M.name}),Oe&&o.jsx("i",{className:"bi bi-check-circle-fill",style:{color:"#0d6efd",fontSize:"1.25rem",flexShrink:0,fontWeight:"bold"}}),!Oe&&o.jsx("div",{style:{width:"1.25rem",flexShrink:0}})]},M.id)})})]},H.id)})}),Y.length>0&&o.jsx("div",{children:Y.map(H=>{const he=h.some(ye=>ye.id===H.id);return o.jsxs("button",{className:"btn w-100",style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",backgroundColor:he?"rgba(13, 110, 253, 0.2)":"rgba(255, 255, 255, 0.05)",border:"none",borderRadius:"0.5rem",color:"#ffffff",textAlign:"left",width:"100%",marginBottom:"0.5rem"},onClick:ye=>{ye.stopPropagation(),wo(H)},onMouseEnter:ye=>{he||(ye.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)")},onMouseLeave:ye=>{he||(ye.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)")},children:[o.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",backgroundColor:$t(H.avatar||H.name),display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.875rem",fontWeight:"500",color:"#ffffff",flexShrink:0},children:H.avatar||(H.name?H.name.charAt(0):"?")}),o.jsx("span",{style:{flex:1,fontWeight:"500",fontSize:"0.875rem"},children:H.name}),he&&o.jsx("i",{className:"bi bi-check-circle-fill",style:{color:"#0d6efd",fontSize:"1.25rem",flexShrink:0}})]},H.id)})}),S.length===0&&o.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"rgba(255, 255, 255, 0.5)",fontSize:"0.875rem"},children:"No people found"})]}),me&&o.jsx("div",{style:{position:"absolute",bottom:"env(safe-area-inset-bottom, 0)",left:"1rem",right:"1rem",paddingTop:"1rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)",backgroundColor:"#0a0a0a",paddingBottom:"1rem"},children:o.jsx("button",{className:"btn btn-primary w-100",style:{padding:"0.875rem",fontSize:"0.875rem",fontWeight:"500",borderRadius:"0.5rem"},onClick:H=>{H.stopPropagation(),Ye(!1),ne(!1)},onTouchStart:H=>{H.currentTarget.style.opacity="0.8",H.currentTarget.style.transform="scale(0.98)"},onTouchEnd:H=>{setTimeout(()=>{H.currentTarget.style.opacity="1",H.currentTarget.style.transform="scale(1)"},150)},onTouchCancel:H=>{H.currentTarget.style.opacity="1",H.currentTarget.style.transform="scale(1)"},children:me})})]})]})},Pd=()=>{const S=[],E=k==null?void 0:k.enabledTools,B=ae=>E?E.includes(ae):!0;if((k==null?void 0:k.mode)==="visitor"){const ae=Array.isArray(k==null?void 0:k.suggestedPrompts)?k.suggestedPrompts:[],fe=Array.isArray(k==null?void 0:k.pillIds)?k.pillIds:[];if(ae.length===0)return null;ae.forEach((z,M)=>{const Oe=fe[M]||`prompt-${M}`;S.push({id:Oe,label:z,icon:null,action:()=>{var He;G(z),(He=x.current)==null||He.focus()}})});const me=j.useRef(null),H=j.useRef(new Set);j.useEffect(()=>{me.current&&ae.length>0&&setTimeout(()=>{me.current&&me.current.scrollTo({left:me.current.scrollWidth,behavior:"smooth"})},100)},[ae.length]);const he=new Set(S.map(z=>z.id)),ye=new Set;return S.forEach(z=>{H.current.has(z.id)||ye.add(z.id)}),H.current=he,o.jsxs("div",{ref:me,style:{display:"flex",gap:"0.5rem",padding:"0.5rem 1rem",paddingBottom:"0.75rem",overflowX:"auto",overflowY:"hidden",scrollbarWidth:"thin",scrollbarColor:"rgba(255, 255, 255, 0.2) transparent",msOverflowStyle:"auto",WebkitOverflowScrolling:"touch",scrollBehavior:"smooth"},className:"suggested-pills-rail",children:[o.jsx("style",{children:`
            .suggested-pills-rail::-webkit-scrollbar {
              height: 4px;
            }
            .suggested-pills-rail::-webkit-scrollbar-track {
              background: transparent;
            }
            .suggested-pills-rail::-webkit-scrollbar-thumb {
              background: rgba(255, 255, 255, 0.2);
              border-radius: 2px;
            }
            .suggested-pills-rail::-webkit-scrollbar-thumb:hover {
              background: rgba(255, 255, 255, 0.3);
            }
            @keyframes slideInFromRight {
              from {
                transform: translateX(100%);
                opacity: 0;
              }
              to {
                transform: translateX(0);
                opacity: 1;
              }
            }
            .pill-enter {
              animation: slideInFromRight 0.3s ease-out forwards;
            }
          `}),S.map(z=>{const M=ye.has(z.id);return o.jsx("button",{type:"button",onClick:Oe=>{Oe.stopPropagation(),z.action()},className:M?"pill-enter":"",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.875rem",backgroundColor:"rgba(255, 255, 255, 0.08)",border:"none",borderRadius:"20px",color:"rgba(255, 255, 255, 0.5)",fontSize:"0.875rem",fontWeight:"500",whiteSpace:"nowrap",flexShrink:0,cursor:"pointer",transition:"all 0.2s"},children:o.jsx("span",{children:z.label})},z.id)})]})}const Y=h.some(ae=>ae.type==="guest"),se=we().length>0,ie=!se&&!c&&!v&&h.length===0,de=h.some(ae=>ae.type==="staff"||ae.type==="ai");if(v&&!de)return S.push({id:"ai-concierge",label:"Canyon Concierge",icon:"AI",action:()=>{wn({id:"ai",name:"Canyon Concierge",avatar:"AI",type:"ai",isSpecial:!0})}}),Ht().forEach(fe=>{S.push({id:`staff-${fe.id}`,label:fe.name,icon:fe.avatar||fe.name.charAt(0),action:()=>{wn(fe)}})}),o.jsxs("div",{style:{display:"flex",gap:"0.5rem",padding:"0.5rem 1rem",paddingBottom:"0.75rem",overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},className:"suggested-pills-rail",onWheel:fe=>{fe.deltaY!==0&&(fe.currentTarget.scrollLeft+=fe.deltaY,fe.preventDefault())},children:[o.jsx("style",{children:`
            .suggested-pills-rail::-webkit-scrollbar {
              display: none;
            }
          `}),S.map(fe=>o.jsxs("button",{type:"button",onClick:me=>{me.stopPropagation(),fe.action()},style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.875rem",backgroundColor:"rgba(255, 255, 255, 0.08)",border:"none",borderRadius:"20px",color:"rgba(255, 255, 255, 0.5)",fontSize:"0.875rem",fontWeight:"500",whiteSpace:"nowrap",flexShrink:0,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:me=>{me.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.12)"},onMouseLeave:me=>{me.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},onTouchStart:me=>{me.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.15)"},onTouchEnd:me=>{setTimeout(()=>{me.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},150)},onTouchCancel:me=>{me.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},children:[fe.icon&&(typeof fe.icon=="string"&&fe.icon.startsWith("bi-")?o.jsx("i",{className:`bi ${fe.icon}`,style:{fontSize:"0.875rem",fontWeight:"bold"}}):o.jsx("span",{style:{fontSize:"0.875rem"},children:fe.icon})),o.jsx("span",{children:fe.label})]},fe.id))]});if(v&&de)return null;if(ie){const fe=new URLSearchParams(typeof window<"u"?window.location.search:"").get("scenario")||"anticipation",me=[{id:"scan-qr",label:"Scan QR",icon:"bi-qr-code-scan",action:()=>{if(m&&B("scan-qr")&&!B("check-in")){r==null||r("scan-qr",{source:"suggested-pill"});return}c!=="check-in"&&d("check-in"),Ve(!0)}},{id:"check-in",label:"Check-in",icon:"bi-person-check",action:()=>{c!=="check-in"&&(c==="pos"&&(L([]),oe(null)),d("check-in")),Ve(!0)}},{id:"pos",label:"POS",icon:"bi-cash-stack",action:()=>{c!=="pos"&&(c==="check-in"&&Se(!1),d("pos")),Ke(!0)}},{id:"assign",label:"Assign",icon:"bi-check-square",action:()=>{v||((c==="check-in"||c==="pos")&&(d(null),c==="pos"&&(L([]),oe(null))),A(!0))}},{id:"people",label:"People",icon:"bi-people",action:()=>{Ye(!0)}}];if(Array.isArray(k==null?void 0:k.suggestedPrompts)&&k.suggestedPrompts.length>0){const H=(k==null?void 0:k.pillIds)||[],he=k.suggestedPrompts.map((ye,z)=>({id:H[z]||`prompt-${z}`,label:ye,icon:null,action:()=>{var Oe;const M=H[z]||`prompt-${z}`;console.log("[Composer] Pill tapped:",M,ye),k!=null&&k.onPillTap?(console.log("[Composer] Calling onPillTap callback"),k.onPillTap(M,ye)):console.warn("[Composer] No onPillTap callback found in config"),G(ye),(Oe=x.current)==null||Oe.focus()}}));S.push(...he)}fe==="handoff"?["pos","assign","people","scan-qr","check-in"].forEach(he=>{if(!B(he))return;const ye=me.find(z=>z.id===he);ye&&S.push(ye)}):me.forEach(H=>{B(H.id)&&S.push(H)})}else se&&!c&&h.length===0?[{id:"ai-concierge",label:"Canyon Concierge",icon:"AI",action:()=>{wn({id:"ai",name:"Canyon Concierge",avatar:"AI",type:"ai",isSpecial:!0})}},{id:"choose-guest",label:"Choose guest",icon:"bi-people",action:()=>{Ye(!0)}},{id:"scan-qr",label:"Scan QR",icon:"bi-qr-code-scan",action:()=>{if(m&&B("scan-qr")&&!B("check-in")){r==null||r("scan-qr",{source:"suggested-pill"});return}c!=="check-in"&&d("check-in"),Ve(!0)}},{id:"check-in",label:"Check-in",icon:"bi-person-check",action:()=>{c!=="check-in"&&(c==="pos"&&(L([]),oe(null)),d("check-in")),Ve(!0)}},{id:"pos",label:"POS",icon:"bi-cash-stack",action:()=>{c!=="pos"&&(c==="check-in"&&Se(!1),d("pos")),Ke(!0)}}].forEach(fe=>{B(fe.id)&&S.push(fe)}):Y?S.push({id:"check-in",label:"Check-in",icon:"bi-person-check",action:()=>{c!=="check-in"&&(c==="pos"&&(L([]),oe(null)),d("check-in")),Ve(!0)}},{id:"pos",label:"POS",icon:"bi-cash-stack",action:()=>{c!=="pos"&&(c==="check-in"&&Se(!1),d("pos")),Ke(!0)}},{id:"message-guest",label:"Message guest",icon:"bi-chat",action:()=>{var ae;(ae=x.current)==null||ae.focus()}},{id:"assign",label:"Assign",icon:"bi-check-square",action:()=>{v||((c==="check-in"||c==="pos")&&(d(null),c==="pos"&&(L([]),oe(null))),A(!0))}}):c==="pos"?S.push({id:"add-item",label:"Add item",icon:"bi-plus",action:()=>{Ke(!0)}},{id:"payment",label:"Payment",icon:"bi-credit-card",action:()=>{Ke(!0)}},{id:"assign",label:"Assign",icon:"bi-check-square",action:()=>{v||A(!0)}}):c==="check-in"&&S.push({id:"scan-qr",label:"Scan QR",icon:"bi-qr-code-scan",action:()=>{Ve(!0)}},{id:"choose-guest",label:"Choose guest",icon:"bi-people",action:()=>{Ye(!0)}});return S.length===0?null:o.jsxs("div",{style:{display:"flex",gap:"0.5rem",padding:"0.5rem 1rem",paddingBottom:"0.75rem",overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},className:"suggested-pills-rail",onWheel:ae=>{ae.deltaY!==0&&(ae.currentTarget.scrollLeft+=ae.deltaY,ae.preventDefault())},children:[o.jsx("style",{children:`
          .suggested-pills-rail::-webkit-scrollbar {
            display: none;
          }
        `}),S.map(ae=>o.jsxs("button",{type:"button",onClick:fe=>{fe.stopPropagation(),ae.action()},style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.875rem",backgroundColor:"rgba(255, 255, 255, 0.08)",border:"none",borderRadius:"20px",color:"rgba(255, 255, 255, 0.9)",fontSize:"0.875rem",fontWeight:"500",whiteSpace:"nowrap",flexShrink:0,cursor:"pointer",transition:"all 0.2s"},onMouseEnter:fe=>{fe.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.12)"},onMouseLeave:fe=>{fe.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},onTouchStart:fe=>{fe.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.15)"},onTouchEnd:fe=>{setTimeout(()=>{fe.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},150)},onTouchCancel:fe=>{fe.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.08)"},children:[ae.icon&&(ae.icon.startsWith("bi-")?o.jsx("i",{className:`bi ${ae.icon}`,style:{fontSize:"0.875rem",fontWeight:"bold"}}):o.jsx("span",{style:{fontSize:"0.875rem"},children:ae.icon})),o.jsx("span",{children:ae.label})]},ae.id))]})},Ad=()=>{if(!Ce)return null;const S=[{id:"people",label:"People",icon:"bi-people",description:"Select guests, staff, or AI",onClick:()=>{ne(!1),Ye(!0)}},{id:"check-in",label:"Check-in",icon:"bi-person-check",description:"Check in guests",onClick:()=>{ne(!1),Ve(!0)}},{id:"pos",label:"POS",icon:"bi-cash-stack",description:"Add items to cart",onClick:()=>{ne(!1),Ke(!0)}},{id:"assign",label:"Assign",icon:"bi-check-square",description:"Create a task",onClick:()=>{v?A(!1):c==="check-in"||c==="pos"?(d(null),c==="pos"&&(L([]),oe(null),Q(!1)),c==="check-in"&&Se(!1),A(!0),V("Switched to Assign")):A(!0),ne(!1)}}];return o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:99999,animation:Dt?"fadeOut 0.3s ease-out":"fadeIn 0.2s ease-out",pointerEvents:"auto"},onClick:()=>{Ce&&(Ln(!0),setTimeout(()=>{ne(!1),Ln(!1),document.body.removeAttribute("data-bottom-sheet-open"),document.body.style.overscrollBehaviorY="",document.documentElement.style.overscrollBehaviorY="",document.body.style.overflow="",document.documentElement.style.overflow=""},300)),be&&(Ft(!0),setTimeout(()=>{Ye(!1),Ft(!1),document.body.removeAttribute("data-bottom-sheet-open"),document.body.style.overscrollBehaviorY="",document.documentElement.style.overscrollBehaviorY="",document.body.style.overflow="",document.documentElement.style.overflow=""},300)),Tt&&(Re(!0),setTimeout(()=>{Ve(!1),Re(!1),document.body.removeAttribute("data-bottom-sheet-open"),document.body.style.overscrollBehaviorY="",document.documentElement.style.overscrollBehaviorY="",document.body.style.overflow="",document.documentElement.style.overflow=""},300)),Mt&&(jt(!0),setTimeout(()=>{Ke(!1),jt(!1),document.body.removeAttribute("data-bottom-sheet-open"),document.body.style.overscrollBehaviorY="",document.documentElement.style.overscrollBehaviorY="",document.body.style.overflow="",document.documentElement.style.overflow=""},300))}}),o.jsxs("div",{ref:ee,"data-bottom-sheet":!0,onTouchStart:E=>{const B=E.target;B.tagName==="BUTTON"||B.closest("button")||B.tagName==="INPUT"||B.closest("input")||(E.stopPropagation(),je(!0),ce(E.touches[0].clientY))},onTouchMove:E=>{if(le&&ee.current){E.preventDefault(),E.stopPropagation();const Y=E.touches[0].clientY-ge;Y>0&&(ee.current.style.transform=`translateX(-50%) translateY(${Y}px)`)}},onTouchEnd:E=>{var B;if(le&&ee.current){E.preventDefault(),E.stopPropagation();const Y=ee.current.style.transform;parseInt(((B=Y.match(/translateY\((\d+)px\)/))==null?void 0:B[1])||"0")>100&&ne(!1),ee.current.style.transform="translateX(-50%)",ee.current.style.touchAction=""}je(!1),ce(0)},onMouseDown:E=>{const B=E.target;B.tagName==="BUTTON"||B.closest("button")||(E.stopPropagation(),je(!0),ce(E.clientY))},style:{position:"fixed",bottom:0,left:"50%",transform:"translateX(-50%)",width:"100%",maxWidth:"600px",backgroundColor:"#0a0a0a",borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem",padding:"1.5rem 1rem",paddingTop:"0.75rem",paddingBottom:"calc(1.5rem + env(safe-area-inset-bottom, 0))",zIndex:1e5,pointerEvents:"auto",boxShadow:"0 -4px 20px rgba(0, 0, 0, 0.3)",animation:le?"none":Dt?"slideDown 0.3s ease-out":"slideUp 0.3s ease-out",maxHeight:"70vh",overflowY:"auto",transition:le?"none":"transform 0.2s ease-out",cursor:le?"grabbing":"default",touchAction:le?"none":"pan-y",userSelect:"none",overscrollBehavior:"contain"},onClick:E=>{E.target.tagName!=="BUTTON"&&!E.target.closest("button")&&E.stopPropagation()},children:[o.jsx("div",{style:{width:"40px",height:"4px",backgroundColor:"rgba(255, 255, 255, 0.3)",borderRadius:"2px",margin:"0 auto 0.75rem",pointerEvents:"none"}}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:S.map(E=>{const B=E.id==="people"&&h.length>0||E.id==="check-in"&&c==="check-in"||E.id==="pos"&&c==="pos"||E.id==="assign"&&v;return o.jsxs("button",{type:"button",className:"btn",onClick:E.onClick,style:{display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start",gap:"1rem",padding:"1rem",backgroundColor:"transparent",border:"none",borderRadius:"0.5rem",color:"rgba(255, 255, 255, 0.5)",transition:"all 0.2s",textAlign:"left",width:"100%"},onMouseEnter:Y=>{Y.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)"},onMouseLeave:Y=>{Y.currentTarget.style.backgroundColor="transparent"},onTouchStart:Y=>{Y.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.15)"},onTouchEnd:Y=>{setTimeout(()=>{Y.currentTarget.style.backgroundColor="transparent"},150)},onTouchCancel:Y=>{Y.currentTarget.style.backgroundColor="transparent"},children:[o.jsx("i",{className:`bi ${E.icon}`,style:{fontSize:"1.5rem",flexShrink:0,marginTop:"0.125rem",color:B?"#0d6efd":"rgba(255, 255, 255, 0.9)"}}),o.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:"0.25rem"},children:[o.jsx("span",{style:{fontSize:"1rem",fontWeight:"500",color:B?"#0d6efd":"rgba(255, 255, 255, 0.9)"},children:E.label}),E.description&&o.jsx("span",{style:{fontSize:"0.875rem",color:B?"#0d6efd":"rgba(255, 255, 255, 0.6)",fontWeight:"400"},children:E.description})]}),B&&o.jsx("i",{className:"bi bi-check",style:{fontSize:"1.5rem",color:"#0d6efd",flexShrink:0,marginTop:"0.125rem",fontWeight:"bold"}})]},E.id)})})]})]})};return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"composer-bar",style:{position:"relative",padding:"0.25rem 1rem 0.75rem 1rem",zIndex:100},children:[o.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(to top, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 0.8) 40%, rgba(0, 0, 0, 0) 100%)",pointerEvents:"none",zIndex:-1}}),o.jsx("div",{style:{position:"absolute",top:"-2rem",left:0,right:0,height:"2rem",background:"linear-gradient(to top, rgba(0, 0, 0, 0.8) 0%, rgba(0, 0, 0, 0) 100%)",pointerEvents:"none",zIndex:-1}}),o.jsxs("div",{style:{position:"relative",zIndex:1},children:[Pd(),Nd()]})]}),Ad(),Rd(),zd(),Ed()]})}function pm({thread:e,onReply:t}){const[n,r]=j.useState(""),[s,i]=j.useState(null),a=(m,p)=>{m==="thread-reply"&&t?t(e.id,p.message):(console.log("Tool action:",m,p),alert(`Action: ${m}
Data: ${JSON.stringify(p,null,2)}`),i(null))},l=()=>o.jsx("div",{className:"tool-composer",children:o.jsxs("div",{className:"d-flex gap-2",children:[o.jsxs("button",{className:"btn btn-primary flex-grow-1",onClick:()=>a("scan-ticket",{method:"scanner"}),children:[o.jsx("i",{className:"bi bi-qr-code-scan"})," Open Scanner"]}),o.jsxs("button",{className:"btn btn-outline-primary flex-grow-1",onClick:()=>a("scan-ticket",{method:"manual"}),children:[o.jsx("i",{className:"bi bi-keyboard"})," Manual Entry"]}),o.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>i(null),children:o.jsx("i",{className:"bi bi-x"})})]})}),u=()=>{const[m,p]=j.useState(1),[w,h]=j.useState(25);return o.jsxs("div",{className:"tool-composer",children:[o.jsxs("div",{className:"d-flex gap-2 mb-2",children:[o.jsxs("div",{className:"flex-grow-1",children:[o.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.8)"},children:"Quantity"}),o.jsx("input",{type:"number",className:"form-control bg-dark text-white border-secondary",min:"1",value:m,onChange:T=>p(parseInt(T.target.value)||1)})]}),o.jsxs("div",{className:"flex-grow-1",children:[o.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.8)"},children:"Price"}),o.jsx("input",{type:"number",className:"form-control bg-dark text-white border-secondary",min:"0",step:"0.01",value:w,onChange:T=>h(parseFloat(T.target.value)||0)})]})]}),o.jsxs("div",{className:"d-flex gap-2",children:[o.jsxs("button",{className:"btn btn-success flex-grow-1",onClick:()=>a("sell-ticket",{quantity:m,price:w,method:"charge"}),children:[o.jsx("i",{className:"bi bi-credit-card"})," Charge $",(m*w).toFixed(2)]}),o.jsxs("button",{className:"btn btn-outline-warning flex-grow-1",onClick:()=>a("sell-ticket",{quantity:m,price:w,method:"comp"}),children:[o.jsx("i",{className:"bi bi-gift"})," Comp"]}),o.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>i(null),children:o.jsx("i",{className:"bi bi-x"})})]})]})},f=()=>{const m=["Wine","Beer","Cocktail","Soft Drink"],[p,w]=j.useState("");return o.jsxs("div",{className:"tool-composer",children:[o.jsxs("div",{className:"mb-2",children:[o.jsx("label",{className:"form-label",style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.8)"},children:"Select Drink"}),o.jsxs("select",{className:"form-select bg-dark text-white border-secondary",value:p,onChange:h=>w(h.target.value),children:[o.jsx("option",{value:"",children:"Choose..."}),m.map(h=>o.jsx("option",{value:h,children:h},h))]})]}),o.jsxs("div",{className:"d-flex gap-2",children:[o.jsxs("button",{className:"btn btn-primary flex-grow-1",disabled:!p,onClick:()=>a("order-drink",{drink:p}),children:[o.jsx("i",{className:"bi bi-send"})," Send Order"]}),o.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>i(null),children:o.jsx("i",{className:"bi bi-x"})})]})]})},k=()=>{if(s==="ticket-scan")return l();if(s==="sell-ticket")return u();if(s==="order-drink")return f();if(s==="checkin")return o.jsx("div",{className:"tool-composer",children:o.jsxs("div",{className:"d-flex gap-2",children:[o.jsxs("button",{className:"btn btn-primary flex-grow-1",onClick:()=>a("checkin",{threadId:e.id}),children:[o.jsx("i",{className:"bi bi-person-check"})," Check-in Guest"]}),o.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>i(null),children:o.jsx("i",{className:"bi bi-x"})})]})});const m=n.trim();return o.jsx("div",{style:{display:"flex",alignItems:"flex-end",gap:"0.5rem"},children:o.jsxs("div",{style:{flex:1,backgroundColor:"#0a0a0a",border:"none",borderRadius:"20px",padding:"0.5rem 0.75rem",paddingRight:"2.75rem",minHeight:"45px",display:"flex",flexDirection:"row",alignItems:n.trim()?"flex-end":"center",cursor:"text",position:"relative",overflow:"visible"},children:[o.jsx("textarea",{className:"form-control bg-transparent text-white border-0 p-0",placeholder:"Ask or act",value:n,onChange:p=>{if(r(p.target.value),p.target){p.target.style.height="auto";const w=Math.min(p.target.scrollHeight,200);p.target.style.height=`${w}px`}},onKeyPress:p=>{p.key==="Enter"&&!p.shiftKey&&m&&(p.preventDefault(),a("thread-reply",{message:n}),r(""))},rows:1,style:{flex:1,width:"100%",border:"none",outline:"none",boxShadow:"none",fontSize:"16px",background:"transparent",padding:"0",paddingTop:(n.trim(),"calc((45px - 1.5 * 16px) / 2)"),lineHeight:"1.5",resize:"none",overflow:"hidden",maxHeight:"200px",fontFamily:"inherit",margin:0,height:n.trim()?"auto":"calc(1.5 * 16px)",minHeight:"calc(1.5 * 16px)",display:"block",boxSizing:"border-box",verticalAlign:"top",alignSelf:n.trim()?"flex-end":"center"}}),o.jsx("button",{type:"button",className:"btn btn-link p-0",onClick:p=>{p.stopPropagation(),p.preventDefault(),m&&(a("thread-reply",{message:n}),r(""))},disabled:!m,style:{position:"absolute",right:"0.5rem",top:n.trim()?"auto":"50%",bottom:n.trim()?"0.5rem":"auto",transform:n.trim()?"none":"translateY(-50%)",width:"32px",height:"32px",borderRadius:"50%",backgroundColor:m?"#ffffff":"rgba(255, 255, 255, 0.1)",border:"none",display:"flex",alignItems:"center",justifyContent:"center",color:m?"#000000":"rgba(255, 255, 255, 0.5)",cursor:m?"pointer":"not-allowed",flexShrink:0,zIndex:10},title:"Send",children:o.jsx("i",{className:"bi bi-arrow-up-short",style:{fontSize:"1.125rem",fontWeight:"bold",transform:"scale(1.3)"}})})]})})};return o.jsxs("div",{className:"composer-bar",style:{position:"relative",padding:"0.75rem 1rem",zIndex:100},children:[o.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(to top, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 0.8) 40%, rgba(0, 0, 0, 0) 100%)",pointerEvents:"none",zIndex:-1}}),o.jsx("div",{style:{position:"absolute",top:"-2rem",left:0,right:0,height:"2rem",background:"linear-gradient(to top, rgba(0, 0, 0, 0.8) 0%, rgba(0, 0, 0, 0) 100%)",pointerEvents:"none",zIndex:-1}}),o.jsx("div",{style:{position:"relative",zIndex:1},children:k()})]})}function mm({thread:e,onBack:t,onReply:n,participantMap:r={},currentUserId:s}){var w,h;const i=T=>{const X=["#0d6efd","#6f42c1","#d63384","#dc3545","#fd7e14","#ffc107","#20c997","#198754"],g=T.charCodeAt(0)%X.length;return X[g]},a=T=>{const X=new Date(T),c=new Date-X,d=Math.floor(c/6e4);if(d<1)return"Just now";if(d<60)return`${d}m ago`;const v=Math.floor(d/60);return v<24?`${v}h ago`:X.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};console.log("ThreadView received thread:",e),console.log("Thread messages:",e.messages),console.log("Thread participants:",e.participants),console.log("Participant map:",r);const l=((w=e.participants)==null?void 0:w.find(T=>T.type!=="ai"))||((h=e.participants)==null?void 0:h[0]),u=[...e.messages||[]].sort((T,X)=>T.createdAt-X.createdAt);console.log("Sorted messages:",u);const[f,k]=j.useState(!1),[m,p]=j.useState(null);return o.jsxs("div",{className:"thread-view",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#000000",zIndex:1e3,display:"flex",flexDirection:"column",animation:"slideIn 0.3s ease-out"},children:[o.jsxs("div",{className:"thread-header",style:{backgroundColor:"#0a0a0a",padding:"1rem",display:"flex",alignItems:"center",gap:"1rem"},children:[o.jsx("button",{className:"btn btn-link p-0",onClick:t,style:{color:"#ffffff",fontSize:"1.25rem"},children:o.jsx("i",{className:"bi bi-chevron-left"})}),o.jsxs("div",{className:"flex-grow-1",children:[o.jsx("h5",{className:"mb-0",style:{color:"#ffffff"},children:"Thread"}),o.jsx("small",{style:{color:"rgba(255, 255, 255, 0.6)"},children:(l==null?void 0:l.name)||"Unknown"})]})]}),o.jsx("div",{className:"thread-content flex-grow-1 overflow-auto",style:{padding:"1rem",paddingBottom:"8rem"},children:o.jsx("div",{className:"thread-messages",children:u.length===0?o.jsx("div",{style:{color:"rgba(255, 255, 255, 0.5)",textAlign:"center",padding:"2rem"},children:"No messages in this thread"}):u.map((T,X)=>{var K,oe;console.log(`Rendering message ${X}:`,T);const g=T.senderId||((K=T.sender)==null?void 0:K.id),c=r[g]||T.sender,d=g==="ai"||((oe=T.sender)==null?void 0:oe.type)==="ai",v=d?"Canyon Concierge":(c==null?void 0:c.name)||"Unknown",A=d?"AI":(c==null?void 0:c.avatar)||"?",R=d?"#3B31FF":i(A),L=T.text||T.message||"";return o.jsx("div",{className:"thread-message mb-3",children:o.jsxs("div",{className:"d-flex align-items-start gap-2",children:[o.jsx("div",{className:"rounded-circle d-flex align-items-center justify-content-center",style:{width:"40px",height:"40px",backgroundColor:R,color:"#ffffff",fontSize:"0.875rem",fontWeight:"600",flexShrink:0},children:A}),o.jsxs("div",{className:"flex-grow-1",children:[o.jsxs("div",{className:"d-flex align-items-center gap-2 mb-1",children:[o.jsx("strong",{style:{color:d?"rgba(130, 170, 210, 1)":"#ffffff",fontSize:"0.875rem"},children:v}),o.jsx("small",{style:{color:"rgba(255, 255, 255, 0.6)"},children:a(T.createdAt||T.timestamp)})]}),o.jsx("p",{className:"mb-0",style:{color:"#ffffff"},children:L})]})]})},T.id||`msg-${X}`)})})}),o.jsx("div",{style:{position:"sticky",bottom:0,zIndex:100},children:o.jsx(pm,{thread:e,onReply:n})})]})}function gm({feedItems:e,visibleFeedItems:t,activeFilter:n,onFilterChange:r,starredIds:s,onToggleStar:i,selectedContext:a,onItemClick:l,onOpenThread:u,onClearSelectedContext:f,itemRefs:k,onUpdateTaskLocation:m,onCompleteTask:p,currentUserId:w,highlightedItemId:h,atBottom:T,isBottomSheetOpen:X,scrollToBottom:g,composerHeight:c,feedRef:d,composerRef:v,toolMode:A,onToolModeChange:R,onToolAction:L,onReassignTask:K,onSendMessage:oe}){return o.jsxs("div",{className:"app-container d-flex flex-column",style:{height:"100dvh",backgroundColor:"lch(4.8% 0.7 272)",color:"#ffffff",position:"relative",overflow:"hidden"},children:[o.jsx("div",{style:{position:"sticky",top:0,left:0,right:0,zIndex:100},children:o.jsx(lm,{feedItems:e,activeFilter:n,onFilterChange:r,starredIds:s})}),o.jsxs("div",{className:"flex-grow-1 overflow-auto",ref:d,style:{height:"100%",position:"relative",backgroundColor:"#000"},onClick:te=>{(te.target===te.currentTarget||te.target.closest(".feed-container"))&&(te.target.closest(".feed-item")||f==null||f())},children:[o.jsx(gd,{items:t,allItems:e,activeFilter:n,onItemClick:l,onOpenThread:u,selectedContext:a,starredIds:s,onToggleStar:i,itemRefs:k,onUpdateTaskLocation:m,onCompleteTask:p,currentUserId:w,highlightedItemId:h}),!T&&!X&&o.jsx("button",{onClick:g,className:"btn btn-sm btn-primary rounded-pill",style:{position:"fixed",bottom:`${c+8}px`,left:"50%",transform:"translateX(-50%)",zIndex:200,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"none",padding:"0.5rem",width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},onMouseEnter:te=>{te.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.2)",te.currentTarget.style.transform="translateX(-50%) scale(1.05)"},onMouseLeave:te=>{te.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)",te.currentTarget.style.transform="translateX(-50%) scale(1)"},children:o.jsx("i",{className:"bi bi-arrow-down",style:{fontSize:"1rem"}})})]}),o.jsx("div",{ref:v,style:{position:"sticky",bottom:0,left:0,right:0,zIndex:100,paddingBottom:"env(safe-area-inset-bottom, 0)"},children:o.jsx(hd,{selectedContext:a,toolMode:A,onToolModeChange:R,onToolAction:L,onCompleteTask:p,onReassignTask:K,feedItems:t,onSendMessage:oe})})]})}const yd="canyon_test_events",$i=1e3;let Hi=null,Xn=[];if(typeof window<"u"){Hi=sessionStorage.getItem("canyon_test_session_id")||`test_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sessionStorage.setItem("canyon_test_session_id",Hi);try{const e=localStorage.getItem(yd);e&&(Xn=JSON.parse(e),Xn.length>$i&&(Xn=Xn.slice(-$i)))}catch(e){console.warn("Failed to load test events from localStorage",e)}}function Ui(e,t={}){const n={name:e,payload:t,timestamp:Date.now(),sessionId:Hi,stage:t.stage||null};if(Xn.push(n),typeof window<"u")try{const r=Xn.slice(-$i);localStorage.setItem(yd,JSON.stringify(r))}catch(r){console.warn("Failed to save test events to localStorage",r)}return n}const eu={id:"artist_lu_yang",name:"Lu Yang",subhead:"Contemporary artist (Shanghai)  video, digital bodies, Buddhism + gaming aesthetics",imageUrl:"https://www.aros.dk/media/3885/luyang_02.png?height=1600&widthratio=1.641025641025641&mode=crop&center=0.30964467005076141,0.50666666666666671&rnd=132822238650000000&format=webp",bullets:["Works with video, animation, and digital installations exploring identity and technology","Bridges Buddhist philosophy with gaming aesthetics and neuroscience","Known for creating digital avatars that transcend physical body constraints"],whyItMatters:`Lu Yang's work challenges traditional notions of identity and embodiment, treating technology and contemporary spirituality as the same emotional space. Their exploration of "digital bodies" reflects how we construct identity in an increasingly virtual world.`,links:{website:"http://luyang.asia/"},teaser:"Digital bodies, myth, and performance avatars"},pe={ARRIVAL:"arrival",ORIENT:"orient",EXPLORE:"explore",TRANSITION:"transition",WRAP:"wrap"},tu=1500,hm=2500,ym=1e4;function vm({appendFeedItem:e,setSuggestedPills:t,setCardExpanded:n,getState:r,logEvent:s=Ui}){let i=pe.ARRIVAL,a={},l=null,u=null,f=!1,k=new Set;const m=()=>tu+Math.random()*(hm-tu),p=()=>{l&&(clearTimeout(l),l=null)},w=()=>{u&&(clearTimeout(u),u=null)},h=(W,q=null)=>{p();const J=q!==null?q:m();console.log("[ScenarioDirector] Scheduling advancement with delay:",J),l=setTimeout(()=>{console.log("[ScenarioDirector] Executing scheduled advancement");try{W()}catch($){console.error("[ScenarioDirector] Error in scheduled advancement:",$)}l=null},J)},T=()=>{w(),u=setTimeout(()=>{oe()},ym)},X=W=>{switch(W){case pe.ARRIVAL:return[{id:"washrooms",text:"Where are the washrooms?"},{id:"coat",text:"Where do I put my coat?"},{id:"who-is-lu-yang",text:"Who is Lu Yang?"}];case pe.ORIENT:const q=[{id:"what-to-see-first",text:"What should I see first?"}];return k.has("what-to-see-first")&&q.push({id:"drinks-allowed",text:"Are drinks allowed in the galleries?"}),q;case pe.EXPLORE:return[];case pe.TRANSITION:return[{id:"souvenir",text:"Can I take a souvenir home with me?"},{id:"whats-next",text:"What's next?"}];case pe.WRAP:return[{id:"this-week",text:"What's going this week?"},{id:"members",text:"What do members get?"}];default:return[]}},g=(W,q)=>({washrooms:"The washrooms are past the gift shop, to the right. There are also lockers available in the same area if you need to store your coat.",coat:"You can use the lockers past the gift shop, to the right. They're free to use during your visit.","who-is-lu-yang":"Lu Yang is a multimedia artist known for exploring themes of technology, identity, and the digital body. Their work DOKU is currently showing in the Cinemateque.","what-to-see-first":"I'd recommend using the time before DOKU at 8pm to check out Pulse in the Main Hall, then see Vito Acconci's Centers in Gallery 1 when it loops in about 10 minutes.","drinks-allowed":"Yes! Drinks from the bar are welcome in all galleries. Just be mindful of the artwork and use the provided coasters.",souvenir:"Absolutely! The gift shop has books, prints, and other items related to our current exhibitions. They're open until 9pm.","whats-next":"Thanks for visiting CANYON tonight! We hope you enjoyed your experience. Before you go, we'd love to hear your feedback.","this-week":"This week we have DOKU by Lu Yang, Pulse by Rafael Lozano-Hemmer, and Centers by Vito Acconci. Check the schedule card for times and locations.",members:"Members get priority access to exhibitions, discounts at the gift shop and bar, and invitations to special events. Would you like to learn more about membership?"})[W]||"Thanks for asking! How else can I help you?",c=(W,q={})=>{const J=Date.now();switch(W){case pe.ORIENT:const $=J+72e4,_=J+45*60*1e3,D=J+60*60*1e3;return{id:`moment-schedule-${J}`,type:"moment",momentType:"schedule",title:"Schedule",events:[{image:"https://www.researchgate.net/profile/Thamara-Venancio-De-Almeida/publication/349324699/figure/fig2/AS:991563220004864@1613418502381/FIGURA-3-Centers-Vito-Acconci-1971_Q320.jpg",title:"Centers",artist:"Vito Acconci",location:"Gallery 1",startTime:"Ongoing",startsAt:$},{image:"https://www.lozano-hemmer.com/image_sets/pulse_topology/pulse_topology.jpg",title:"Pulse",artist:"Rafael Lozano-Hemmer",location:"Main Hall",startTime:"Ongoing",startsAt:_},{image:"https://www.aros.dk/media/3885/luyang_02.png?height=1600&widthratio=1.641025641025641&mode=crop&center=0.30964467005076141,0.50666666666666671&rnd=132822238650000000&format=webp",title:"DOKU",artist:"Lu Yang",location:"Cinemateque",startTime:"8:00pm",startsAt:D}],timestamp:J};case pe.EXPLORE:return{id:`moment-bar-menu-${J}`,type:"moment",momentType:"bar-menu",title:"Bar Menu",mostPopular:[{name:"white wine",description:"pinot project, italy 2022",price:12},{name:"red wine",description:"pasqua veneto rosso, veneto",price:12},{name:"Lager",description:"Sunday beer",price:10}],deliveryLocation:"Pick up at bar",paymentMethod:"Mastercard  3245",total:0,showActions:!0,timestamp:J};case pe.TRANSITION:return{id:`moment-gift-shop-${J}`,type:"moment",momentType:"gift-shop",title:"Gift Shop",products:[{image:"https://draw-down.com/cdn/shop/products/TheArtHappensHereNetArtAnthology_19s.jpg",title:"The Art Happens Here: Net Art Anthology",author:"Josephine Bosma",contributors:3,price:50},{image:"https://boutique.centrepompidou.fr/files/products/38226/66338-86c5e96a-xl/products-66338.jpg",title:"China: A new generation of artists",author:"Lu Yang (contributor)",contributors:10,price:70}],timestamp:J};case pe.WRAP:return{id:`moment-feedback-${J}`,type:"moment",momentType:"feedback",title:"Feedback",question:"How likely are you to recommend CANYON to a friend or colleague?",showScale:!0,timestamp:J};default:return null}},d=W=>{if(W===i)return;const q=i;i=W,s("stage_start",{stage:W,previousStage:q});const J=X(W);t(J)},v=W=>{if(console.log("[ScenarioDirector] onUserAction called:",W.type,W.payload),!f){console.warn("[ScenarioDirector] Director is not active!");return}switch(p(),w(),s(W.type,{...W.payload,stage:i}),W.type){case"pill_tap":A(W.payload);break;case"message_send":R(W.payload);break;case"card_expand":W.payload.reason==="manual"&&(a[W.payload.cardId]=Date.now());break;case"card_collapse":break;case"qr_scan":L(W.payload);break}W.type!=="pill_tap"&&W.type!=="message_send"&&h(()=>{K(W)}),T()},A=W=>{const{pillId:q,pillText:J}=W||{};if(console.log("[ScenarioDirector] handlePillTap called:",q,J),!q){console.warn("[ScenarioDirector] No pillId in payload:",W);return}k.add(q);const $=g(q);console.log("[ScenarioDirector] Got reply:",$),h(()=>{console.log("[ScenarioDirector] Scheduling reply addition");const _=Date.now();if(e({id:`concierge-reply-${_}`,type:"concierge",sender:{name:"Canyon Concierge",avatar:"AI",type:"ai"},message:$,timestamp:_}),(q==="washrooms"||q==="coat")&&i===pe.ARRIVAL)r().items.some(Q=>Q.id==="moment-amenities-1")?n("moment-amenities-1",!0,{reason:"auto"}):setTimeout(()=>{const Q=Date.now();e({id:"moment-amenities-1",type:"moment",momentType:"amenities",title:"Amenities",subtitle:"Find your way around",items:[{icon:"washroom",label:"Washrooms",hint:"Past gift shop, to the right"},{icon:"locker",label:"Lockers",hint:"Past gift shop, to the right"},{icon:"cinema",label:"Cinemateque",hint:"Near Delancey entrance"}],timestamp:Q}),n("moment-amenities-1",!0,{reason:"auto"}),s("feed_item_added",{stage:i,itemId:"moment-amenities-1",itemType:"moment",momentType:"amenities"})},m());else if(q==="who-is-lu-yang")G({artistId:"lu_yang",source:"pill"});else if(q==="what-to-see-first"){const D=X(i);t(D),r().items.some(ue=>ue.momentType==="schedule")?n("moment-ticket-1",!0,{reason:"auto"}):setTimeout(()=>{const ue=Date.now(),Se=c(pe.ORIENT);Se&&(e(Se),n(Se.id,!0,{reason:"auto"}),s("feed_item_added",{stage:i,itemId:Se.id,itemType:Se.type}))},m())}else if(q==="drinks-allowed"){const D=r();if(!D.items.some(Q=>Q.momentType==="bar-menu"))setTimeout(()=>{const Q=c(pe.EXPLORE);Q&&(e(Q),n(Q.id,!0,{reason:"auto"}),s("feed_item_added",{stage:i,itemId:Q.id,itemType:Q.type}),setTimeout(()=>{i===pe.ORIENT?(console.log("[ScenarioDirector] Advancing stage after bar menu card added (from ORIENT to TRANSITION via pill)"),d(pe.TRANSITION)):i===pe.EXPLORE&&(console.log("[ScenarioDirector] Advancing stage after bar menu card added (from EXPLORE via pill)"),d(pe.TRANSITION))},m()))},m());else{const Q=D.items.find(ue=>ue.momentType==="bar-menu");Q&&n(Q.id,!0,{reason:"auto"}),i===pe.ORIENT?setTimeout(()=>{console.log("[ScenarioDirector] Advancing stage after bar menu (already exists, from ORIENT to TRANSITION via pill)"),d(pe.TRANSITION)},m()):i===pe.EXPLORE&&setTimeout(()=>{console.log("[ScenarioDirector] Advancing stage after bar menu (already exists, from EXPLORE via pill)"),d(pe.TRANSITION)},m())}}else if(q==="souvenir"){const D=r();if(!D.items.some(Q=>Q.momentType==="gift-shop"))setTimeout(()=>{const Q=Date.now(),ue=c(pe.TRANSITION);ue&&(e(ue),n(ue.id,!0,{reason:"auto"}),s("feed_item_added",{stage:i,itemId:ue.id,itemType:ue.type}))},m());else{const Q=D.items.find(ue=>ue.momentType==="gift-shop");Q&&n(Q.id,!0,{reason:"auto"})}}else if(q==="whats-next"){const D=r();if(!D.items.some(Q=>Q.momentType==="feedback"))setTimeout(()=>{const Q=c(pe.WRAP);Q&&(e(Q),n(Q.id,!0,{reason:"auto"}),s("feed_item_added",{stage:i,itemId:Q.id,itemType:Q.type}),setTimeout(()=>{console.log("[ScenarioDirector] Advancing stage after feedback card added (to WRAP)"),d(pe.WRAP)},m()))},m());else{const Q=D.items.find(ue=>ue.momentType==="feedback");Q&&n(Q.id,!0,{reason:"auto"}),setTimeout(()=>{console.log("[ScenarioDirector] Advancing stage after feedback (already exists, to WRAP)"),d(pe.WRAP)},m())}}setTimeout(()=>{K({type:"pill_tap",payload:{pillId:q,pillText:J}})},m())})},R=W=>{const{text:q}=W;console.log("[ScenarioDirector] handleMessageSend called with:",q);let J="Thanks for your message! How else can I help you?";const $=q.toLowerCase();let _=!1,D=!1,Z=!1,Q=!1,ue=!1;if($.includes("lu yang")||$.includes("doku")||$.includes("who is lu yang")){G({artistId:"lu_yang",source:"message"});return}else $.includes("washroom")||$.includes("bathroom")||$.includes("washrooms")?(J="The washrooms are past the gift shop, to the right. There are also lockers available there.",_=!0):$.includes("coat")||$.includes("locker")||$.includes("lockers")?(J="You can use the lockers past the gift shop, to the right. They're free to use during your visit.",_=!0):$.includes("what should i see")||$.includes("what to see")||$.includes("see first")||$.includes("recommend")?(J="I'd recommend using the time before DOKU at 8pm to check out Pulse in the Main Hall, then see Vito Acconci's Centers in Gallery 1 when it loops in about 10 minutes.",D=!0,k.add("what-to-see-first")):$.includes("drinks allowed")||$.includes("can i bring")?(J="Yes! Drinks from the bar are welcome in all galleries. Just be mindful of the artwork and use the provided coasters.",Z=!0):$.includes("order a drink")||$.includes("how do i order")||$.includes("what can i order")||$.includes("bar menu")?(J="You can order drinks from the bar menu - just tap the items you want and confirm your order. Pick up is at the bar, and you can pay with your card on file.",Z=!0):$.includes("souvenir")||$.includes("gift shop")||$.includes("take home")?(J="Absolutely! The gift shop has books, prints, and other items related to our current exhibitions. They're open until 9pm.",Q=!0):($.includes("what's next")||$.includes("whats next")||$.includes("closing")||$.includes("wrap up"))&&(J="Thanks for visiting CANYON tonight! We hope you enjoyed your experience. Before you go, we'd love to hear your feedback.",ue=!0);h(()=>{console.log("[ScenarioDirector] Inside scheduleAdvancement callback"),console.log("[ScenarioDirector] Adding concierge reply:",J),console.log("[ScenarioDirector] shouldAddAmenities:",_),console.log("[ScenarioDirector] currentStage:",i),console.log("[ScenarioDirector] STAGES.ARRIVAL:",pe.ARRIVAL);const Se=Date.now();console.log("[ScenarioDirector] Calling appendFeedItem for concierge reply"),e({id:`concierge-reply-${Se}`,type:"concierge",sender:{name:"Canyon Concierge",avatar:"AI",type:"ai"},message:J,timestamp:Se}),console.log("[ScenarioDirector] Concierge reply item added");const Ne=r();if(D){const Ce=X(i);if(t(Ce),!Ne.items.some(be=>be.momentType==="schedule"))setTimeout(()=>{const be=c(pe.ORIENT);be&&(e(be),n(be.id,!0,{reason:"auto"}),s("feed_item_added",{stage:i,itemId:be.id,itemType:be.type}))},m());else{const be=Ne.items.find(Ye=>Ye.momentType==="schedule");be&&n(be.id,!0,{reason:"auto"})}}if(Z)if(!Ne.items.some(ne=>ne.momentType==="bar-menu"))setTimeout(()=>{const ne=c(pe.EXPLORE);ne&&(e(ne),n(ne.id,!0,{reason:"auto"}),s("feed_item_added",{stage:i,itemId:ne.id,itemType:ne.type}))},m());else{const ne=Ne.items.find(be=>be.momentType==="bar-menu");ne&&n(ne.id,!0,{reason:"auto"})}if(Q)if(!Ne.items.some(ne=>ne.momentType==="gift-shop"))setTimeout(()=>{const ne=c(pe.TRANSITION);ne&&(e(ne),n(ne.id,!0,{reason:"auto"}),s("feed_item_added",{stage:i,itemId:ne.id,itemType:ne.type}))},m());else{const ne=Ne.items.find(be=>be.momentType==="gift-shop");ne&&n(ne.id,!0,{reason:"auto"})}if(ue)if(!Ne.items.some(ne=>ne.momentType==="feedback"))setTimeout(()=>{const ne=c(pe.WRAP);ne&&(e(ne),n(ne.id,!0,{reason:"auto"}),s("feed_item_added",{stage:i,itemId:ne.id,itemType:ne.type}))},m());else{const ne=Ne.items.find(be=>be.momentType==="feedback");ne&&n(ne.id,!0,{reason:"auto"})}if(_){console.log("[ScenarioDirector] Should add amenities card, checking if exists..."),console.log("[ScenarioDirector] Current state items:",Ne.items.map(ne=>ne.id));const Ce=Ne.items.some(ne=>ne.id==="moment-amenities-1");console.log("[ScenarioDirector] Amenities exists?",Ce),Ce?(console.log("[ScenarioDirector] Amenities card already exists, expanding..."),n("moment-amenities-1",!0,{reason:"auto"})):(console.log("[ScenarioDirector] Adding amenities card"),setTimeout(()=>{const ne=Date.now();e({id:"moment-amenities-1",type:"moment",momentType:"amenities",title:"Amenities",subtitle:"Find your way around",items:[{icon:"washroom",label:"Washrooms",hint:"Past gift shop, to the right"},{icon:"locker",label:"Lockers",hint:"Past gift shop, to the right"},{icon:"cinema",label:"Cinemateque",hint:"Near Delancey entrance"}],timestamp:ne}),console.log("[ScenarioDirector] Amenities card added, expanding..."),n("moment-amenities-1",!0,{reason:"auto"}),s("feed_item_added",{stage:i,itemId:"moment-amenities-1",itemType:"moment",momentType:"amenities"})},m()))}let _e=!1;(i===pe.ARRIVAL&&_||i===pe.ORIENT&&(D||Z)||i===pe.EXPLORE&&Z||i===pe.TRANSITION&&(Q||ue))&&(_e=!0),_e&&setTimeout(()=>{K({type:"message_send",payload:{text:q,shouldAddSchedule:D,shouldAddBarMenu:Z,shouldAddGiftShop:Q,shouldAddFeedback:ue,shouldAddAmenities:_}})},m())})},L=W=>{h(()=>{i===pe.ARRIVAL&&d(pe.ORIENT)})},K=W=>{var q,J,$,_,D,Z;switch(i){case pe.ARRIVAL:(W.type==="message_send"&&((q=W.payload)!=null&&q.shouldAddAmenities)||W.type==="pill_tap")&&d(pe.ORIENT);break;case pe.ORIENT:W.type==="message_send"?(J=W.payload)!=null&&J.shouldAddSchedule?d(pe.EXPLORE):($=W.payload)!=null&&$.shouldAddBarMenu&&d(pe.TRANSITION):W.type==="pill_tap"&&d(pe.EXPLORE);break;case pe.EXPLORE:W.type==="message_send"&&((_=W.payload)!=null&&_.shouldAddBarMenu)&&d(pe.TRANSITION);break;case pe.TRANSITION:W.type==="message_send"?((D=W.payload)!=null&&D.shouldAddGiftShop||(Z=W.payload)!=null&&Z.shouldAddFeedback)&&d(pe.WRAP):W.type==="pill_tap"&&(W.payload.pillId==="souvenir"||W.payload.pillId==="whats-next")&&d(pe.WRAP);break}},oe=()=>{f&&(s("idle_nudge",{stage:i}),T())},te=W=>{},V=(W="arrival")=>{if(f)return;f=!0,i=pe.ARRIVAL;const q=X(pe.ARRIVAL);console.log("[ScenarioDirector] Starting, setting initial pills:",q),t(q),s("scenario_start",{mode:W,stage:i}),T()},U=()=>{f&&(f=!1,p(),w(),s("scenario_stop",{stage:i}))},G=async({artistId:W="lu_yang",source:q="unknown"})=>{const J=r(),$=`moment-artist-${W}`;if(J.items.find(D=>D.id===$)){s("artist_card_focused_existing",{artistId:W,source:q,cardId:$}),n($,!0,{reason:"manual"});return}s("artist_card_requested",{artistId:W,source:q}),e({id:`concierge-${Date.now()}`,type:"concierge",sender:{name:"Canyon Concierge",avatar:"AI",type:"ai"},message:"Here's a quick intro to Lu Yang.",timestamp:Date.now()}),h(()=>{const D=eu,Z={id:$,type:"moment",momentType:"artist",title:D.name,subhead:D.subhead,imageUrl:D.imageUrl,bullets:D.bullets,whyItMatters:D.whyItMatters,links:D.links,teaser:D.teaser,timestamp:Date.now()};e(Z),n($,!0,{reason:"auto"}),s("artist_card_inserted",{artistId:W,source:q,cardId:$})},m())};return{onUserAction:v,onIdle:oe,onScroll:te,start:V,stop:U,getCurrentStage:()=>i,isActive:()=>f,revealArtistCard:G}}function xm({itemRefs:e,currentUserId:t,highlightedItemId:n,feedRef:r,composerRef:s}){const i=()=>typeof window>"u"?"arrival":new URLSearchParams(window.location.search).get("scenario")||"arrival",a=j.useMemo(()=>{const V=Date.now();return[{id:"moment-ticket-1",type:"moment",momentType:"ticket",title:"DOKU by Lu Yang",locationLabel:"Cinematheque",startsAt:V+60*60*1e3,heroImage:"https://www.aros.dk/media/3885/luyang_02.png?height=1600&widthratio=1.641025641025641&mode=crop&center=0.30964467005076141,0.50666666666666671&rnd=132822238650000000&format=webp",heroImageFallback:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ6crUzfZ7ak2LjN_qjOsgrKkkNbrJ8q2G1hA&s",qrCode:!0,description:"DOKU is a digital shell that can exist without the constraints of a physical body, time, or space, embodying the artist's exploration of a post-human or digital self.",timestamp:V}]},[]),[l,u]=j.useState(()=>a),[f,k]=j.useState([]),[m,p]=j.useState([]),[w,h]=j.useState({"moment-ticket-1":!0}),[T,X]=j.useState(!0),[g,c]=j.useState(0),d=j.useRef(null);j.useRef(null);const v=j.useRef(l),A=j.useRef(w),R=j.useRef(f);j.useEffect(()=>{v.current=l},[l]),j.useEffect(()=>{A.current=w},[w]),j.useEffect(()=>{R.current=f},[f]);const L=i();j.useEffect(()=>{const V=vm({appendFeedItem:U=>{console.log("[VisitorShell] appendFeedItem called with:",U.id,U.type),u(G=>{const W=[...G,U];return console.log("[VisitorShell] New items count:",W.length),setTimeout(()=>{if(r.current)if(U.type==="concierge"){const q=document.getElementById(`feed-item-${U.id}`);q&&q.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})}else{const q=W.filter(J=>J.type==="concierge").sort((J,$)=>$.timestamp-J.timestamp);if(q.length>0){const J=q[0].id,$=document.getElementById(`feed-item-${J}`);$&&r.current&&($.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"}),setTimeout(()=>{if(r.current){const _=r.current.scrollTop;r.current.scrollTo({top:_+120,behavior:"smooth"})}},300))}}},100),W})},setSuggestedPills:U=>{k(U),p(G=>{const W=new Set(G.map($=>$.id)),q=U.filter($=>!W.has($.id)),J=[...G,...q];return console.log("[VisitorShell] Updated allPills:",J.map($=>$.text)),J})},setCardExpanded:(U,G,W={})=>{h(q=>({...q,[U]:G})),W.reason==="auto"&&Ui("card_expand",{cardId:U,reason:"auto",stage:V.getCurrentStage()})},getState:()=>({items:v.current,expandedCards:A.current,suggestedPills:R.current}),logEvent:Ui});return d.current=V,setTimeout(()=>{V.start(L),console.log("[VisitorShell] Director started with mode:",L)},100),()=>{d.current&&d.current.stop()}},[]),j.useEffect(()=>{const V=r.current;if(!V)return;const U=()=>{const G=V.scrollTop,W=V.scrollHeight,q=V.clientHeight,$=W-q-G<150;$!==T&&X($),d.current&&Object.keys(w).forEach(_=>{if(!w[_])return;const D=document.getElementById(`feed-item-${_}`);if(!D)return;const Z=D.getBoundingClientRect(),Q=r.current.getBoundingClientRect(),ue=Z.top-Q.top,Se=Z.bottom-Q.top,Ne=Q.height,_e=Math.max(0,-ue),Ce=Math.min(Ne,Se),be=Math.max(0,Ce-_e)/Z.height;d.current.onScroll({cardId:_,visibilityRatio:be})})};return V.addEventListener("scroll",U,{passive:!0}),()=>{V.removeEventListener("scroll",U)}},[w,T]),j.useEffect(()=>{if(!s.current)return;const V=()=>{s.current&&c(s.current.offsetHeight)};V();const U=new ResizeObserver(V);return s.current&&U.observe(s.current),()=>{U.disconnect()}},[]);const K=j.useCallback(()=>{r.current&&(r.current.scrollTo({top:r.current.scrollHeight,behavior:"smooth"}),setTimeout(()=>{if(s.current){const V=s.current.querySelector("input, textarea");V&&V.focus()}},300))},[]),oe=V=>{const U=w[V];h(G=>({...G,[V]:!U})),d.current&&d.current.onUserAction({type:U?"card_collapse":"card_expand",payload:{cardId:V,reason:"manual"}})},te=V=>{console.log("[VisitorShell] handleSendVisitorMessage called with:",V);const U=Date.now(),G=`visitor-msg-${U}`;return u(W=>[...W,{id:G,type:"guest",name:"You",avatar:"Y",message:V,timestamp:U}]),setTimeout(()=>{const W=document.getElementById(`feed-item-${G}`);W&&r.current&&W.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})},100),d.current?(console.log("[VisitorShell] Notifying director of message_send"),d.current.onUserAction({type:"message_send",payload:{text:V}})):console.warn("[VisitorShell] Director ref is null when sending message!"),{success:!0}};return o.jsxs("div",{className:"app-container d-flex flex-column",style:{height:"100dvh",backgroundColor:"#000",color:"#ffffff",position:"relative",overflow:"hidden"},children:[o.jsxs("div",{className:"flex-grow-1 overflow-auto",ref:r,style:{height:"100%",position:"relative",backgroundColor:"#000"},children:[o.jsx(gd,{items:l,allItems:l,activeFilter:"all",onItemClick:()=>{},onOpenThread:void 0,onToggleMoment:oe,selectedContext:null,starredIds:new Set,onToggleStar:void 0,itemRefs:e,onUpdateTaskLocation:void 0,onCompleteTask:void 0,currentUserId:t,highlightedItemId:n,collapseVariant:"visitor",expandedCards:w,onCardExpandChange:(V,U,G)=>{h(W=>({...W,[V]:U})),d.current&&d.current.onUserAction({type:U?"card_expand":"card_collapse",payload:{cardId:V,reason:(G==null?void 0:G.reason)||"manual"}})},onRevealArtist:V=>{d.current&&d.current.revealArtistCard&&d.current.revealArtistCard(V)}}),!T&&o.jsx("button",{onClick:K,className:"btn btn-sm btn-primary rounded-pill",style:{position:"fixed",bottom:`${g+8}px`,left:"50%",transform:"translateX(-50%)",zIndex:200,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.3)",backgroundColor:"rgba(255, 255, 255, 0.1)",border:"none",padding:"0.5rem",width:"40px",height:"40px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},onMouseEnter:V=>{V.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.2)",V.currentTarget.style.transform="translateX(-50%) scale(1.05)"},onMouseLeave:V=>{V.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)",V.currentTarget.style.transform="translateX(-50%) scale(1)"},children:o.jsx("i",{className:"bi bi-arrow-down",style:{fontSize:"1rem"}})})]}),o.jsx("div",{ref:s,style:{position:"sticky",bottom:0,left:0,right:0,zIndex:100,paddingBottom:"env(safe-area-inset-bottom, 0)"},children:o.jsx(hd,{selectedContext:null,toolMode:null,onToolModeChange:()=>{},onToolAction:()=>{},onCompleteTask:()=>{},onReassignTask:()=>{},feedItems:l,onSendMessage:V=>(console.log("[VisitorShell] Message sent via Composer:",V),te(V)),config:{mode:"visitor",suggestedPrompts:m.length>0?m.map(V=>V.text):f.length>0?f.map(V=>V.text):["Where are the washrooms?","Where do I put my coat?"],pillIds:m.length>0?m.map(V=>V.id):f.length>0?f.map(V=>V.id):["washrooms","coat"]},readOnly:!1,placeholderOverride:"Ask anything"})})]})}function km({onEnterFeed:e}){j.useEffect(()=>{const v=document.createElement("link");return v.href="https://fonts.googleapis.com/css2?family=Archivo+Black&display=swap",v.rel="stylesheet",document.head.appendChild(v),()=>{document.head.removeChild(v)}},[]);const[t,n]=j.useState(!1),r=j.useRef(null),s=j.useRef(null),i=j.useRef(null),a=j.useRef(null),[l,u]=j.useState(null),[f,k]=j.useState(null),m=v=>{t||u(v.touches[0].clientY)},p=v=>{if(l===null||t)return;k(v.touches[0].clientY);const A=l-v.touches[0].clientY;if(A>0&&a.current){const R=Math.min(A*.5,50);a.current.style.transform=`translateY(-${R}px)`}},w=()=>{l!==null&&f!==null&&!t&&(l-f>50?h():a.current&&(a.current.style.transform="translateY(0)")),u(null),k(null)},h=()=>{t||(n(!0),setTimeout(()=>{e()},600))},X=Date.now()+60*60*1e3,g=v=>{const A=v-Date.now();if(A<=0)return"0:00";const R=Math.floor(A/1e3),L=Math.floor(R/60),K=R%60;return`${L}:${K.toString().padStart(2,"0")}`},[c,d]=j.useState(g(X));return j.useEffect(()=>{const v=setInterval(()=>{d(g(X))},1e3);return()=>clearInterval(v)},[X]),j.useEffect(()=>{if(!window.YT){const R=document.createElement("script");R.src="https://www.youtube.com/iframe_api";const L=document.getElementsByTagName("script")[0];L.parentNode.insertBefore(R,L)}const v=setInterval(()=>{window.YT&&window.YT.Player&&(clearInterval(v),A())},100);function A(){r.current&&(s.current=new window.YT.Player(r.current,{videoId:"jLMIh5mfaRY",playerVars:{autoplay:1,mute:1,controls:0,showinfo:0,rel:0,modestbranding:1,playsinline:1,start:0,end:30,iv_load_policy:3,fs:0,cc_load_policy:0,branding:0},events:{onReady:R=>{R.target.playVideo()},onStateChange:R=>{if(R.data===window.YT.PlayerState.ENDED&&(R.target.seekTo(0,!0),R.target.playVideo()),R.data===window.YT.PlayerState.PLAYING){const L=setInterval(()=>{s.current&&s.current.getCurrentTime()>=30&&(s.current.seekTo(0,!0),clearInterval(L))},100)}}}}))}return()=>{if(s.current)try{s.current.destroy()}catch{}clearInterval(v)}},[]),o.jsxs("div",{ref:i,style:{position:"fixed",top:0,left:0,right:0,bottom:0,overflow:"hidden",backgroundColor:"#000000",transform:t?"translateY(-100%)":"translateY(0)",transition:"transform 0.6s cubic-bezier(0.4, 0, 0.2, 1)",zIndex:1e3},children:[o.jsxs("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",zIndex:1},children:[o.jsx("div",{ref:r,style:{position:"absolute",top:"50%",left:"50%",width:"120vw",height:"67.5vw",minHeight:"120vh",minWidth:"213.34vh",transform:"translate(-50%, -50%) translateX(2%) translateY(-2%)",pointerEvents:"none"}}),o.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"linear-gradient(to bottom, rgba(0, 0, 0, 0.3) 0%, rgba(0, 0, 0, 0.6) 100%)",zIndex:2}})]}),o.jsxs("div",{style:{position:"relative",zIndex:3,height:"100%",display:"flex",flexDirection:"column",paddingBottom:"1rem"},children:[o.jsxs("div",{style:{position:"absolute",top:"2rem",left:0,right:0,display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 1rem",zIndex:10},children:[o.jsxs("div",{style:{width:"18px",height:"18px",display:"flex",flexDirection:"column",justifyContent:"space-between",cursor:"pointer"},children:[o.jsx("div",{style:{width:"100%",height:"1.5px",backgroundColor:"#ffffff",borderRadius:"1px"}}),o.jsx("div",{style:{width:"100%",height:"1.5px",backgroundColor:"#ffffff",borderRadius:"1px"}}),o.jsx("div",{style:{width:"100%",height:"1.5px",backgroundColor:"#ffffff",borderRadius:"1px"}})]}),o.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)"},children:o.jsx("img",{src:"https://www.dropbox.com/scl/fi/xqcgumrwqmjrs6zb51qfv/Canyon_FullLockup_White_RGB_S.png?rlkey=a4ivnr9r1k53wr58iy67ho0ic&dl=1&raw=1",alt:"Canyon",style:{height:"24px",width:"auto"},onError:v=>{if(v.target.style.display="none",!v.target.nextSibling){const A=document.createElement("div");A.textContent="CANYON",A.style.cssText="color: white; font-size: 1.25rem; font-weight: 600;",v.target.parentNode.appendChild(A)}}})}),o.jsx("div",{style:{width:"18px"}})]}),o.jsxs("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",width:"100%",padding:"0 1rem"},children:[o.jsx("h1",{style:{color:"#ffffff",fontSize:"clamp(3rem, 8vw, 5rem)",fontFamily:'"Archivo Black", sans-serif',fontWeight:"400",lineHeight:"1.2",marginBottom:"2rem",textShadow:"0 2px 10px rgba(0, 0, 0, 0.5)"},children:"Art that invites you to stay awhile"}),o.jsx("button",{onClick:h,style:{backgroundColor:"#3B31FF",color:"#ffffff",border:"none",borderRadius:"0.5rem",padding:"1rem 2rem",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)"},onMouseEnter:v=>{v.currentTarget.style.backgroundColor="#2d25e6",v.currentTarget.style.transform="scale(1.05)"},onMouseLeave:v=>{v.currentTarget.style.backgroundColor="#3B31FF",v.currentTarget.style.transform="scale(1)"},children:"Buy Tickets Now"})]}),o.jsxs("div",{style:{position:"relative",marginTop:"auto",padding:"2rem 1rem 1rem 1rem"},children:[o.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.25rem",marginBottom:"1rem"},children:[o.jsx("div",{style:{animation:"bounce 2s infinite"},children:o.jsx("i",{className:"bi bi-chevron-up",style:{color:"#ffffff",fontSize:"1.25rem",opacity:.4}})}),o.jsx("div",{style:{animation:"pulse 2s infinite"},children:o.jsx("p",{style:{color:"#ffffff",fontSize:"0.875rem",fontWeight:"600",letterSpacing:"0.05em",textTransform:"uppercase",textShadow:"0 2px 4px rgba(0, 0, 0, 0.5)",opacity:.4},children:"Pick up where you left off"})})]}),o.jsxs("div",{ref:a,onClick:h,onTouchStart:m,onTouchMove:p,onTouchEnd:w,style:{backgroundColor:"rgba(20, 20, 20, 0.95)",borderRadius:"0.75rem",padding:"1rem",display:"flex",gap:"1rem",cursor:"pointer",transition:"transform 0.3s ease, box-shadow 0.3s ease",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)"},onMouseEnter:v=>{t||(v.currentTarget.style.boxShadow="0 6px 16px rgba(0, 0, 0, 0.5)",v.currentTarget.style.transform="translateY(-4px)")},onMouseLeave:v=>{t||(v.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.4)",v.currentTarget.style.transform="translateY(0)")},children:[o.jsx("img",{src:"https://www.aros.dk/media/3885/luyang_02.png?height=1600&widthratio=1.641025641025641&mode=crop&center=0.30964467005076141,0.50666666666666671&rnd=132822238650000000&format=webp",alt:"DOKU by Lu Yang",style:{width:"80px",height:"80px",borderRadius:"0.5rem",objectFit:"cover",flexShrink:0}}),o.jsxs("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column",gap:"0.5rem"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:"0.5rem"},children:[o.jsxs("div",{style:{flex:1,minWidth:0},children:[o.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#ffffff",marginBottom:"0.25rem"},children:"DOKU by Lu Yang"}),o.jsx("div",{style:{fontSize:"0.875rem",color:"rgba(255, 255, 255, 0.6)"},children:"Performance"})]}),o.jsxs("span",{className:"badge bg-danger rounded-pill",style:{fontSize:"0.75rem",padding:"0.375rem 0.75rem",fontWeight:"600",whiteSpace:"nowrap",flexShrink:0},children:["STARTS ",c]})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",flexWrap:"wrap"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[o.jsx("i",{className:"bi bi-geo-alt-fill",style:{fontSize:"0.625rem",color:"rgba(255, 255, 255, 0.5)"}}),o.jsx("span",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)"},children:"Cinemateque"})]}),o.jsx("span",{style:{fontSize:"0.75rem",color:"rgba(255, 255, 255, 0.6)"},children:"Tonight at 8:00pm"})]})]})]})]})]}),o.jsx("style",{children:`
          @keyframes bounce {
            0%, 100% {
              transform: translateY(0);
            }
            50% {
              transform: translateY(-8px);
            }
          }
          @keyframes pulse {
            0%, 100% {
              opacity: 0.8;
            }
            50% {
              opacity: 1;
            }
          }
        `})]})}const N=e=>Date.now()-e*6e4,Fa=(e,t=60)=>({id:"sys-2",type:"system",title:"Performance starting soon",message:"DOKU performance begins in 60 minutes",timestamp:e,performanceStartTime:e+t*6e4});function bm(){const e=[];return e.push({id:"sys-shift-start",type:"system",title:"Shift started",message:"You're 15 minutes into your shift. Peak arrival window approaching.",timestamp:N(15)}),e.push(Fa(N(3),60)),e.push({id:"concierge-3-followup",type:"concierge",message:"Tickets are $25 each. You can pay at the Gallery 4 entrance with cash or card.",timestamp:N(.5),threadId:"thread-3",parentId:"guest-3-followup"}),e.push({id:"sys-shift-briefing",type:"system",title:"Shift briefing",message:` Next: DOKU starts soon (Cinemateque)
 Heads up: arrivals trending higher than usual
 Watch for: ticket scanning + drink delivery requests
 First move: keep Cinemateque entry moving`,timestamp:N(.1),briefingData:{schedule:[{title:"DOKU",artist:"Lu Yang",location:"Cinemateque",image:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ6crUzfZ7ak2LjN_qjOsgrKkkNbrJ8q2G1hA&s",startTime:"8:00pm",performanceStartTime:Date.now()+60*6e4}],visitors:{current:30,expected:150,trend:[{value:15,time:"7pm"},{value:20,time:"8pm"},{value:45,time:"9pm"},{value:30,time:"10pm"},{value:25,time:"11pm"}],avatars:[{name:"Sarah Chen",avatar:"SC"},{name:"Marcus Johnson",avatar:"MJ"},{name:"Emma Rodriguez",avatar:"ER"},{name:"David Kim",avatar:"DK"}]},staff:{current:4,expected:5,avatars:[{name:"Jeremy Bailey",avatar:"JB"},{name:"Alex Rivera",avatar:"AR"},{name:"Jordan Kim",avatar:"JK"},{name:"Casey Lee",avatar:"CL"}]},tasks:{incomplete:6}}}),e.push({id:"guest-3-followup",type:"guest",name:"Emma Rodriguez",avatar:"ER",message:"Great! How much are tickets?",timestamp:N(1),threadId:"thread-3"}),e.push({id:"concierge-3",type:"concierge",message:"Performance starts in 12 minutes. You can purchase tickets at the Gallery 4 entrance or use the ticket scanner.",timestamp:N(2),threadId:"thread-3",parentId:"guest-3"}),e.push({id:"task-4",type:"task",category:"service",title:"Drink order for Gallery 4",description:"Wine order for Gallery 4 - Zone 2",location:"gallery-4",status:"pending",timestamp:N(2),assignedTo:{name:"Emma Rodriguez",avatar:"ER",type:"guest"}}),e.push({id:"sys-1",type:"system",title:"Arrivals spike: +12 in 10m",message:"Unusual increase in arrivals detected",timestamp:N(5)}),e.push({id:"guest-3",type:"guest",name:"Emma Rodriguez",avatar:"ER",message:"Is the performance still happening? We want to buy tickets.",timestamp:N(3),threadId:"thread-3"}),e.push({id:"task-1",type:"task",category:"ticket",title:"Scan Ticket for Cinemateque",description:"Guest at entrance needs ticket validation",location:"cinemateque",status:"pending",timestamp:N(3),assignedTo:{name:"Sarah Chen",avatar:"SC",type:"guest"}}),e.push({id:"guest-2-followup",type:"guest",name:"Marcus Johnson",avatar:"MJ",message:"Perfect, found it. Thanks!",timestamp:N(4),threadId:"thread-2"}),e.push({id:"concierge-2",type:"concierge",message:"Restrooms are located on the second floor, near the main staircase. There are also facilities on the ground floor near Gallery 2.",timestamp:N(5),threadId:"thread-2",parentId:"guest-2"}),e.push({id:"guest-2",type:"guest",name:"Marcus Johnson",avatar:"MJ",message:"Where is the restroom?",timestamp:N(6),threadId:"thread-2"}),e.push({id:"task-7",type:"task",category:"service",title:"Assist guest with accessibility needs",description:"Guest requested wheelchair access information",status:"pending",timestamp:N(6),assignedTo:{name:"David Kim",avatar:"DK",type:"guest"}}),e.push({id:"concierge-1-followup",type:"concierge",message:"Of course! I'll add water to your order. It will be brought with your drinks.",timestamp:N(7),threadId:"thread-1",parentId:"guest-1-followup"}),e.push({id:"guest-1-followup",type:"guest",name:"Sarah Chen",avatar:"SC",message:"Thank you! Can we also get some water?",timestamp:N(8),threadId:"thread-1"}),e.push({id:"task-2",type:"task",category:"ticket",title:"Ticket scan failed - manual entry required",description:"QR code unreadable, need to enter ticket number manually",status:"pending",timestamp:N(8),assignedTo:{name:"Marcus Johnson",avatar:"MJ",type:"guest"}}),e.push({id:"sys-3",type:"system",title:"High service demand",message:"3 active drink orders pending",timestamp:N(9)}),e.push({id:"concierge-1",type:"concierge",message:"I've notified the service team about your drink order. It should arrive at table 5 within 5-7 minutes.",timestamp:N(9),threadId:"thread-1",parentId:"guest-1"}),e.push({id:"guest-1",type:"guest",name:"Sarah Chen",avatar:"SC",message:"Can we get another drink? We're at table 5 in Gallery 3.",timestamp:N(10),threadId:"thread-1"}),e.push({id:"sys-4",type:"system",title:"Ticket sales update",message:"139 tickets sold out of 150 capacity",timestamp:N(11)}),e.push({id:"task-3",type:"task",category:"ticket",title:"Walk-up ticket sale completed",description:"Sold 2 tickets at Gallery 1 entrance",status:"completed",timestamp:N(12),assignedTo:{name:"Alex Rivera",avatar:"AR",type:"staff"}}),e.push({id:"task-8",type:"task",category:"ticket",title:"Process group booking",description:"Party of 8 needs tickets for tonight's performance",status:"pending",timestamp:N(13),assignedTo:{name:"Priya Patel",avatar:"PP",type:"guest"}}),e.push({id:"guest-5",type:"guest",name:"Alex Thompson",avatar:"AT",message:"Can someone help us find the exit? We're near Gallery 2.",timestamp:N(14)}),e.push({id:"guest-4",type:"guest",name:"David Kim",avatar:"DK",message:"The audio in Gallery 1 seems too loud. Can someone check?",timestamp:N(15)}),e.push({id:"guest-6",type:"guest",name:"Priya Patel",avatar:"PP",message:"The artwork description card is missing in Gallery 1. Can it be replaced?",timestamp:N(16)}),e.push({id:"task-5",type:"task",category:"service",title:"Restock bar supplies",description:"Low on wine glasses and napkins",status:"pending",timestamp:N(18),assignedTo:{name:"Jordan Kim",avatar:"JK",type:"staff"}}),e.push({id:"task-9",type:"task",category:"service",title:"Check temperature in Gallery 3",description:"Guest reported it feels too warm",status:"completed",timestamp:N(20),assignedTo:{name:"Casey Lee",avatar:"CL",type:"staff"}}),e.push({id:"task-6",type:"task",category:"service",title:"Clean up Gallery 2",description:"Spill reported near installation",status:"completed",timestamp:N(25),assignedTo:{name:"Taylor Morgan",avatar:"TM",type:"staff"}}),e.sort((t,n)=>n.timestamp-t.timestamp)}function wm(){const e=[];return e.push({id:"concierge-3-followup",type:"concierge",message:"Tickets are $25 each. You can pay at the Gallery 4 entrance with cash or card.",timestamp:N(.5),threadId:"thread-3",parentId:"guest-3-followup"}),e.push({id:"guest-3-followup",type:"guest",name:"Emma Rodriguez",avatar:"ER",message:"Great! How much are tickets?",timestamp:N(1),threadId:"thread-3"}),e.push({id:"concierge-3",type:"concierge",message:"Performance starts in 12 minutes. You can purchase tickets at the Gallery 4 entrance or use the ticket scanner.",timestamp:N(2),threadId:"thread-3",parentId:"guest-3"}),e.push({id:"task-4",type:"task",category:"service",title:"Drink order for Gallery 4",description:"Wine order for Gallery 4 - Zone 2",location:"gallery-4",status:"pending",timestamp:N(2),assignedTo:{name:"Emma Rodriguez",avatar:"ER",type:"guest"}}),e.push(Fa(N(4),10)),e.push({id:"sys-1",type:"system",title:"Arrivals spike: +12 in 10m",message:"Unusual increase in arrivals detected",timestamp:N(5)}),e.push({id:"guest-3",type:"guest",name:"Emma Rodriguez",avatar:"ER",message:"Is the performance still happening? We want to buy tickets.",timestamp:N(3),threadId:"thread-3"}),e.push({id:"task-1",type:"task",category:"ticket",title:"Scan Ticket for Cinemateque",description:"Guest at entrance needs ticket validation",location:"cinemateque",status:"pending",timestamp:N(3),assignedTo:{name:"Sarah Chen",avatar:"SC",type:"guest"}}),e.push({id:"guest-2-followup",type:"guest",name:"Marcus Johnson",avatar:"MJ",message:"Perfect, found it. Thanks!",timestamp:N(4),threadId:"thread-2"}),e.push({id:"concierge-2",type:"concierge",message:"Restrooms are located on the second floor, near the main staircase. There are also facilities on the ground floor near Gallery 2.",timestamp:N(5),threadId:"thread-2",parentId:"guest-2"}),e.push({id:"guest-2",type:"guest",name:"Marcus Johnson",avatar:"MJ",message:"Where is the restroom?",timestamp:N(6),threadId:"thread-2"}),e.push({id:"task-7",type:"task",category:"service",title:"Assist guest with accessibility needs",description:"Guest requested wheelchair access information",status:"pending",timestamp:N(6),assignedTo:{name:"David Kim",avatar:"DK",type:"guest"}}),e.push({id:"concierge-1-followup",type:"concierge",message:"Of course! I'll add water to your order. It will be brought with your drinks.",timestamp:N(7),threadId:"thread-1",parentId:"guest-1-followup"}),e.push({id:"guest-1-followup",type:"guest",name:"Sarah Chen",avatar:"SC",message:"Thank you! Can we also get some water?",timestamp:N(8),threadId:"thread-1"}),e.push({id:"task-2",type:"task",category:"ticket",title:"Ticket scan failed - manual entry required",description:"QR code unreadable, need to enter ticket number manually",status:"pending",timestamp:N(8),assignedTo:{name:"Marcus Johnson",avatar:"MJ",type:"guest"}}),e.push({id:"sys-3",type:"system",title:"High service demand",message:"3 active drink orders pending",timestamp:N(9)}),e.push({id:"concierge-1",type:"concierge",message:"I've notified the service team about your drink order. It should arrive at table 5 within 5-7 minutes.",timestamp:N(9),threadId:"thread-1",parentId:"guest-1"}),e.push({id:"guest-1",type:"guest",name:"Sarah Chen",avatar:"SC",message:"Can we get another drink? We're at table 5 in Gallery 3.",timestamp:N(10),threadId:"thread-1"}),e.push({id:"sys-4",type:"system",title:"Ticket sales update",message:"139 tickets sold out of 150 capacity",timestamp:N(11)}),e.push({id:"task-3",type:"task",category:"ticket",title:"Walk-up ticket sale completed",description:"Sold 2 tickets at Gallery 1 entrance",status:"completed",timestamp:N(12),assignedTo:{name:"Alex Rivera",avatar:"AR",type:"staff"}}),e.push({id:"task-8",type:"task",category:"ticket",title:"Process group booking",description:"Party of 8 needs tickets for tonight's performance",status:"pending",timestamp:N(13),assignedTo:{name:"Priya Patel",avatar:"PP",type:"guest"}}),e.push({id:"guest-5",type:"guest",name:"Alex Thompson",avatar:"AT",message:"Can someone help us find the exit? We're near Gallery 2.",timestamp:N(14)}),e.push({id:"guest-4",type:"guest",name:"David Kim",avatar:"DK",message:"The audio in Gallery 1 seems too loud. Can someone check?",timestamp:N(16)}),e.push({id:"task-audio",type:"task",category:"service",title:"Check audio level in Gallery 1",description:"Guest reported audio too loud in Gallery 1.",location:"gallery-1",status:"pending",timestamp:N(14),assignedTo:{name:"Alex Rivera",avatar:"AR",type:"staff"}}),e.push({id:"guest-6",type:"guest",name:"Priya Patel",avatar:"PP",message:"The artwork description card is missing in Gallery 1. Can it be replaced?",timestamp:N(16)}),e.push({id:"task-5",type:"task",category:"service",title:"Restock bar supplies",description:"Low on wine glasses and napkins",status:"pending",timestamp:N(18),assignedTo:{name:"Jordan Kim",avatar:"JK",type:"staff"}}),e.push({id:"task-9",type:"task",category:"service",title:"Check temperature in Gallery 3",description:"Guest reported it feels too warm",status:"completed",timestamp:N(20),assignedTo:{name:"Casey Lee",avatar:"CL",type:"staff"}}),e.push({id:"task-6",type:"task",category:"service",title:"Clean up Gallery 2",description:"Spill reported near installation",status:"completed",timestamp:N(25),assignedTo:{name:"Taylor Morgan",avatar:"TM",type:"staff"}}),e.sort((t,n)=>n.timestamp-t.timestamp)}function Sm(){const e=[];return e.push({id:"concierge-3-followup",type:"concierge",message:"Tickets are $25 each. You can pay at the Gallery 4 entrance with cash or card.",timestamp:N(.5),threadId:"thread-3",parentId:"guest-3-followup"}),e.push({id:"guest-3-followup",type:"guest",name:"Emma Rodriguez",avatar:"ER",message:"Great! How much are tickets?",timestamp:N(1),threadId:"thread-3"}),e.push({id:"concierge-3",type:"concierge",message:"Performance starts in 12 minutes. You can purchase tickets at the Gallery 4 entrance or use the ticket scanner.",timestamp:N(2),threadId:"thread-3",parentId:"guest-3"}),e.push({id:"task-4",type:"task",category:"service",title:"Drink order for Gallery 4",description:"Wine order for Gallery 4 - Zone 2",location:"gallery-4",status:"pending",timestamp:N(2),assignedTo:{name:"Emma Rodriguez",avatar:"ER",type:"guest"}}),e.push({id:"sys-1",type:"system",title:"Arrivals spike: +12 in 10m",message:"Unusual increase in arrivals detected",timestamp:N(5)}),e.push({id:"guest-3",type:"guest",name:"Emma Rodriguez",avatar:"ER",message:"Is the performance still happening? We want to buy tickets.",timestamp:N(3),threadId:"thread-3"}),e.push({id:"task-1",type:"task",category:"ticket",title:"Scan ticket for Gallery 4",description:"Guest at entrance needs ticket validation",status:"pending",timestamp:N(3),assignedTo:{name:"Sarah Chen",avatar:"SC",type:"guest"}}),e.push({id:"guest-2-followup",type:"guest",name:"Marcus Johnson",avatar:"MJ",message:"Perfect, found it. Thanks!",timestamp:N(4),threadId:"thread-2"}),e.push({id:"concierge-2",type:"concierge",message:"Restrooms are located on the second floor, near the main staircase. There are also facilities on the ground floor near Gallery 2.",timestamp:N(5),threadId:"thread-2",parentId:"guest-2"}),e.push({id:"guest-2",type:"guest",name:"Marcus Johnson",avatar:"MJ",message:"Where is the restroom?",timestamp:N(6),threadId:"thread-2"}),e.push({id:"concierge-lu-yang",type:"concierge",message:`Lu Yang is a Shanghai-based artist known for blending gaming aesthetics, pop performance, Buddhism, and neuroscience.

DOKU explores the idea of a 'digital body'an identity that can be rebuilt, remixed, and transcended.

It's significant because it treats technology and contemporary spirituality as the same emotional space.`,timestamp:N(7.5),threadId:"thread-lu-yang",parentId:"guest-lu-yang"}),e.push({id:"guest-lu-yang",type:"guest",name:"Ava Park",avatar:"AP",message:"Who is Lu Yang, and why is DOKU important?",timestamp:N(8),threadId:"thread-lu-yang"}),e.push({id:"guest-shop-pending",type:"guest",name:"Lisa Park",avatar:"LP",message:"Is the gift shop still open?",timestamp:N(3),threadId:"thread-shop-pending"}),e.push({id:"guest-accessibility",type:"guest",name:"Michael Chen",avatar:"MC",message:"Where's wheelchair access?",timestamp:N(7),threadId:"thread-accessibility"}),e.push({id:"concierge-accessibility",type:"concierge",message:"Elevator access is available near Gallery 2.",timestamp:N(6),threadId:"thread-accessibility",parentId:"guest-accessibility"}),e.push({id:"sys-elevator",type:"system",title:"Notice: Elevator temporarily offline",message:"Use ramp at entrance (elevator temporarily offline).",timestamp:N(5)}),e.push({id:"task-7",type:"task",category:"service",title:"Assist guest with accessibility needs",description:"Guest requested wheelchair access information",status:"pending",timestamp:N(6),assignedTo:{name:"David Kim",avatar:"DK",type:"guest"}}),e.push({id:"concierge-1-followup",type:"concierge",message:"Of course! I'll add water to your order. It will be brought with your drinks.",timestamp:N(7),threadId:"thread-1",parentId:"guest-1-followup"}),e.push({id:"guest-1-followup",type:"guest",name:"Sarah Chen",avatar:"SC",message:"Thank you! Can we also get some water?",timestamp:N(8),threadId:"thread-1"}),e.push({id:"task-2",type:"task",category:"ticket",title:"Ticket scan failed - manual entry required",description:"QR code unreadable, need to enter ticket number manually",status:"pending",timestamp:N(8),assignedTo:{name:"Marcus Johnson",avatar:"MJ",type:"guest"}}),e.push({id:"sys-3",type:"system",title:"High service demand",message:"3 active drink orders pending",timestamp:N(9)}),e.push({id:"concierge-1",type:"concierge",message:"I've notified the service team about your drink order. It should arrive at table 5 within 5-7 minutes.",timestamp:N(9),threadId:"thread-1",parentId:"guest-1"}),e.push({id:"guest-1",type:"guest",name:"Sarah Chen",avatar:"SC",message:"Can we get another drink? We're at table 5 in Gallery 3.",timestamp:N(10),threadId:"thread-1"}),e.push({id:"sys-4",type:"system",title:"Ticket sales update",message:"139 tickets sold out of 150 capacity",timestamp:N(11)}),e.push({id:"task-3",type:"task",category:"ticket",title:"Walk-up ticket sale completed",description:"Sold 2 tickets at Gallery 1 entrance",status:"completed",timestamp:N(12),assignedTo:{name:"Alex Rivera",avatar:"AR",type:"staff"}}),e.push({id:"task-8",type:"task",category:"ticket",title:"Process group booking",description:"Party of 8 needs tickets for tonight's performance",status:"pending",timestamp:N(13),assignedTo:{name:"Priya Patel",avatar:"PP",type:"guest"}}),e.push({id:"guest-5",type:"guest",name:"Alex Thompson",avatar:"AT",message:"Can someone help us find the exit? We're near Gallery 2.",timestamp:N(14)}),e.push({id:"guest-4",type:"guest",name:"David Kim",avatar:"DK",message:"The audio in Gallery 1 seems too loud. Can someone check?",timestamp:N(15)}),e.push({id:"guest-6",type:"guest",name:"Priya Patel",avatar:"PP",message:"The artwork description card is missing in Gallery 1. Can it be replaced?",timestamp:N(16)}),e.push({id:"task-5",type:"task",category:"service",title:"Restock bar supplies",description:"Low on wine glasses and napkins",status:"pending",timestamp:N(18),assignedTo:{name:"Jordan Kim",avatar:"JK",type:"staff"}}),e.push({id:"task-9",type:"task",category:"service",title:"Check temperature in Gallery 3",description:"Guest reported it feels too warm",status:"completed",timestamp:N(20),assignedTo:{name:"Casey Lee",avatar:"CL",type:"staff"}}),e.push({id:"task-6",type:"task",category:"service",title:"Clean up Gallery 2",description:"Spill reported near installation",status:"completed",timestamp:N(25),assignedTo:{name:"Taylor Morgan",avatar:"TM",type:"staff"}}),e.sort((t,n)=>n.timestamp-t.timestamp)}function Cm(){const e=[];return e.push({id:"guest-shop-inquiry",type:"guest",name:"Lisa Park",avatar:"LP",message:"Is the gift shop still open? Anything related to Lu Yang?",timestamp:N(.5),threadId:"thread-shop"}),e.push({id:"concierge-shop-response",type:"concierge",message:"Yes, the gift shop is open for another 10 minutes. We have Lu Yang's exhibition catalogue available, plus limited edition prints. Would you like me to help you with a purchase?",timestamp:N(.3),threadId:"thread-shop",parentId:"guest-shop-inquiry"}),e.push({id:"sys-closing-soon",type:"system",title:"Closing soon",message:`Gift shop closes in 10m
Galleries close in 20m
Last call at bar in 15m`,timestamp:N(1)}),e.push({id:"sys-transition-1",type:"system",title:"Transition moment",message:"Post-performance drift: visitors moving toward exit + gift shop.",timestamp:N(1.5)}),e.push({id:"guest-urgent-exit",type:"guest",name:"Michael Chen",avatar:"MC",message:"We're trying to leave quicklywhere's the exit?",timestamp:N(2),threadId:"thread-exit"}),e.push({id:"sys-nudge-suggestion",type:"system",title:"Suggested nudge",message:"If guests are lingering near the shop: mention the Lu Yang catalog + limited prints.",timestamp:N(3)}),e.push({id:"sys-transition-2",type:"system",title:"Transition moment",message:"Dwell slowing in Gallery 3; many guests heading to bar.",timestamp:N(4)}),e.push({id:"sys-pos-confirmation",type:"system",title:"POS completed",message:"Gift shop purchase: Lu Yang catalog + print ($45)",timestamp:N(12)}),e.push({id:"task-4",type:"task",category:"service",title:"Drink order for Gallery 4",description:"Wine order for Gallery 4 - Zone 2",location:"gallery-4",status:"pending",timestamp:N(5),assignedTo:{name:"Emma Rodriguez",avatar:"ER",type:"guest"}}),e.push({id:"sys-1",type:"system",title:"Arrivals spike: +12 in 10m",message:"Unusual increase in arrivals detected",timestamp:N(6)}),e.push({id:"task-1",type:"task",category:"ticket",title:"Scan ticket for Gallery 4",description:"Guest at entrance needs ticket validation",status:"pending",timestamp:N(3),assignedTo:{name:"Sarah Chen",avatar:"SC",type:"guest"}}),e.push({id:"guest-2-followup",type:"guest",name:"Marcus Johnson",avatar:"MJ",message:"Perfect, found it. Thanks!",timestamp:N(4),threadId:"thread-2"}),e.push({id:"concierge-2",type:"concierge",message:"Restrooms are located on the second floor, near the main staircase. There are also facilities on the ground floor near Gallery 2.",timestamp:N(5),threadId:"thread-2",parentId:"guest-2"}),e.push({id:"guest-2",type:"guest",name:"Marcus Johnson",avatar:"MJ",message:"Where is the restroom?",timestamp:N(6),threadId:"thread-2"}),e.push({id:"task-7",type:"task",category:"service",title:"Assist guest with accessibility needs",description:"Guest requested wheelchair access information",status:"pending",timestamp:N(6),assignedTo:{name:"David Kim",avatar:"DK",type:"guest"}}),e.push({id:"concierge-1-followup",type:"concierge",message:"Of course! I'll add water to your order. It will be brought with your drinks.",timestamp:N(7),threadId:"thread-1",parentId:"guest-1-followup"}),e.push({id:"guest-1-followup",type:"guest",name:"Sarah Chen",avatar:"SC",message:"Thank you! Can we also get some water?",timestamp:N(8),threadId:"thread-1"}),e.push({id:"task-2",type:"task",category:"ticket",title:"Ticket scan failed - manual entry required",description:"QR code unreadable, need to enter ticket number manually",status:"pending",timestamp:N(8),assignedTo:{name:"Marcus Johnson",avatar:"MJ",type:"guest"}}),e.push({id:"sys-3",type:"system",title:"High service demand",message:"3 active drink orders pending",timestamp:N(9)}),e.push({id:"concierge-1",type:"concierge",message:"I've notified the service team about your drink order. It should arrive at table 5 within 5-7 minutes.",timestamp:N(9),threadId:"thread-1",parentId:"guest-1"}),e.push({id:"guest-1",type:"guest",name:"Sarah Chen",avatar:"SC",message:"Can we get another drink? We're at table 5 in Gallery 3.",timestamp:N(10),threadId:"thread-1"}),e.push({id:"sys-4",type:"system",title:"Ticket sales update",message:"139 tickets sold out of 150 capacity",timestamp:N(11)}),e.push({id:"task-3",type:"task",category:"ticket",title:"Walk-up ticket sale completed",description:"Sold 2 tickets at Gallery 1 entrance",status:"completed",timestamp:N(12),assignedTo:{name:"Alex Rivera",avatar:"AR",type:"staff"}}),e.push({id:"task-8",type:"task",category:"ticket",title:"Process group booking",description:"Party of 8 needs tickets for tonight's performance",status:"pending",timestamp:N(13),assignedTo:{name:"Priya Patel",avatar:"PP",type:"guest"}}),e.push({id:"guest-5",type:"guest",name:"Alex Thompson",avatar:"AT",message:"Can someone help us find the exit? We're near Gallery 2.",timestamp:N(14)}),e.push({id:"guest-4",type:"guest",name:"David Kim",avatar:"DK",message:"The audio in Gallery 1 seems too loud. Can someone check?",timestamp:N(15)}),e.push({id:"guest-6",type:"guest",name:"Priya Patel",avatar:"PP",message:"The artwork description card is missing in Gallery 1. Can it be replaced?",timestamp:N(16)}),e.push({id:"task-5",type:"task",category:"service",title:"Restock bar supplies",description:"Low on wine glasses and napkins",status:"pending",timestamp:N(18),assignedTo:{name:"Jordan Kim",avatar:"JK",type:"staff"}}),e.push({id:"task-9",type:"task",category:"service",title:"Check temperature in Gallery 3",description:"Guest reported it feels too warm",status:"completed",timestamp:N(20),assignedTo:{name:"Casey Lee",avatar:"CL",type:"staff"}}),e.push({id:"task-6",type:"task",category:"service",title:"Clean up Gallery 2",description:"Spill reported near installation",status:"completed",timestamp:N(25),assignedTo:{name:"Taylor Morgan",avatar:"TM",type:"staff"}}),e.push({id:"task-handoff",type:"task",category:"ticket",title:"Follow up: group booking question",description:"Needs a response before 7pm; unclear who owns.",status:"pending",timestamp:N(45),assignedTo:null}),e.push(Fa(N(60),0)),e.sort((t,n)=>n.timestamp-t.timestamp)}function Tm(){const e=[];return e.push({id:"sys-post-shift-summary",type:"system",title:"Post-shift summary",message:`Ask: "What confused first-time visitors tonight?"
Ask: "Were drink delays worse than usual?"`,summaryData:{attendance:{actual:139,expected:150,percentage:93},peakPressure:{start:"6:45pm",end:"7:30pm"},requestThemes:[{label:"Ticket scan",count:24,color:"rgba(59, 49, 255, 0.8)"},{label:"Washrooms",count:18,color:"rgba(80, 100, 240, 0.8)"},{label:"Drink order",count:15,color:"rgba(100, 120, 230, 0.8)"},{label:"Artist info",count:9,color:"rgba(120, 140, 220, 0.8)"}],frictionSignals:[{label:"Drink delays",count:12,color:"rgba(255, 80, 80, 0.8)"},{label:"Ticket lookup failures",count:6,color:"rgba(240, 100, 100, 0.8)"}],win:"Visitors found DOKU timing easy to follow",opportunity:"Drink delivery ETAs caused repeat questions",nextTime:"Proactively announce gift shop closing at 9:50pm",nextTimeLabel:"Next Time"},timestamp:N(.5)}),e.push({id:"guest-washroom",type:"guest",name:"Sarah Chen",avatar:"SC",message:"Where is the restroom?",timestamp:N(45),threadId:"thread-washroom"}),e.push({id:"concierge-washroom",type:"concierge",message:"Restrooms are located on the second floor, near the main staircase. There are also facilities on the ground floor near Gallery 2.",timestamp:N(44),threadId:"thread-washroom",parentId:"guest-washroom"}),e.push({id:"guest-artist",type:"guest",name:"Marcus Johnson",avatar:"MJ",message:"Can you tell me more about Lu Yang?",timestamp:N(50),threadId:"thread-artist"}),e.push({id:"concierge-artist",type:"concierge",message:"Lu Yang is a multimedia artist known for exploring themes of technology, identity, and the digital body. Their work DOKU is currently showing in the Cinemateque.",timestamp:N(49),threadId:"thread-artist",parentId:"guest-artist"}),e.push({id:"task-drink-delay",type:"task",category:"service",title:"Drink order for Gallery 4",description:"Wine order delayed - bar backed up",location:"gallery-4",status:"completed",timestamp:N(55),assignedTo:{name:"Emma Rodriguez",avatar:"ER",type:"guest"}}),e.push({id:"task-ticket-scan",type:"task",category:"ticket",title:"Ticket scan failed - manual entry required",description:"QR code unreadable, need to enter ticket number manually",status:"completed",timestamp:N(60),assignedTo:{name:"Alex Rivera",avatar:"AR",type:"staff"}}),e.push({id:"sys-arrivals-spike",type:"system",title:"Arrivals spike: +12 in 10m",message:"Unusual increase in arrivals detected",timestamp:N(70)}),e.push({id:"sys-performance-start",type:"system",title:"Performance starting soon",message:"DOKU performance begins in 60 minutes",timestamp:N(120),performanceStartTime:N(60)}),e.push({id:"task-completed-1",type:"task",category:"service",title:"Check temperature in Gallery 3",description:"Guest reported it feels too warm",status:"completed",timestamp:N(75),assignedTo:{name:"Casey Lee",avatar:"CL",type:"staff"}}),e.push({id:"task-completed-2",type:"task",category:"ticket",title:"Walk-up ticket sale completed",description:"Sold 2 tickets at Gallery 1 entrance",status:"completed",timestamp:N(80),assignedTo:{name:"Alex Rivera",avatar:"AR",type:"staff"}}),e.sort((t,n)=>n.timestamp-t.timestamp)}function jm(){switch(new URLSearchParams(typeof window<"u"?window.location.search:"").get("scenario")||"anticipation"){case"arrival":return wm();case"during_visit":return Sm();case"handoff":return Cm();case"reflection":return Tm();case"anticipation":default:return bm()}}function Gi(e){return`thread-${e.sort().join("-")}`}function Yi(e){return`thread-staff-ai-${e}`}function Im(e,t,n="direct"){let r;if(n==="ai"){const a=t.find(l=>l!=="ai");r=Yi(a)}else r=Gi(t);if(e[r])return e[r];const s=Date.now(),i={id:r,kind:n,participantIds:[...t].sort(),messages:[],lastMessageAt:s,createdAt:s,unreadCount:0,unread:!1};return e[r]=i,i}function Nm(e,t,n,r=Date.now()){const s={id:`msg-${r}-${Math.random().toString(36).substr(2,9)}`,senderId:t,text:n,createdAt:r};return e.messages.push(s),e.lastMessageAt=r,s}function Em(e,t){const r=[...new Set(e.participantIds)].map(l=>{const u=t[l];if(!u){if(console.warn("Participant not found in map:",l,"Available keys:",Object.keys(t),"Map:",t),l==="ai")return{id:"ai",type:"ai",name:"Canyon Concierge",avatar:"AI"};if(l.includes("jeremy")||l.includes("staff"))return{id:l,type:"staff",name:"Jeremy Bailey",avatar:"JB"};const f=Object.values(t).find(k=>k.type==="guest"&&(k.id===l||k.id.startsWith(l)||l.startsWith(k.id)));return f?(console.log("Found guest by partial match:",l,"->",f),f):(console.error("Could not find participant, using fallback:",l),{id:l,type:"guest",name:"Guest",avatar:"?"})}return u}).filter(Boolean),s=new Set,i=r.filter(l=>s.has(l.id)?!1:(s.add(l.id),!0));if(i.length===0)return console.error("Thread has no participants:",e),null;i.find(l=>l.type!=="ai")||i[0],e.messages[e.messages.length-1];const a=e.lastMessageAt||e.createdAt||Date.now();return{type:"thread",id:e.id,thread:{id:e.id,participants:i,messages:e.messages.map(l=>{var u;return{id:l.id,type:l.senderId==="ai"?"concierge":((u=t[l.senderId])==null?void 0:u.type)||"guest",sender:l.senderId==="ai"?{type:"ai",name:"Canyon Concierge",avatar:"AI"}:t[l.senderId]||{id:l.senderId,type:"guest",name:"Guest",avatar:"?"},message:l.text,timestamp:l.createdAt}}),lastActivity:a,unreadCount:e.unreadCount,unread:e.unread},timestamp:a}}function zm(){const e=(y,b)=>{try{const I=typeof window<"u"?window.location.search:"",x=new URLSearchParams(I),P=x.get(y);if(P)return P;for(const[ge]of x.entries())if(typeof ge=="string"&&ge.startsWith(`${y}=`))return ge.slice(`${y}=`.length)||b;const ee=decodeURIComponent(I||"").match(new RegExp(`[?&]${y}=([^&]+)`));if(ee&&ee[1])return ee[1]}catch{}return b},[t,n]=j.useState([]),[r,s]=j.useState("all"),[i,a]=j.useState(null),[l,u]=j.useState(null),[f,k]=j.useState(null),[m,p]=j.useState(null),w=j.useRef(null),h=j.useRef(null),[T,X]=j.useState(0),[g,c]=j.useState({}),d="jeremy-bailey",[v,A]=j.useState(!1);j.useEffect(()=>{const y=()=>{A(document.body.hasAttribute("data-bottom-sheet-open"))};y();const b=new MutationObserver(y);return b.observe(document.body,{attributes:!0,attributeFilter:["data-bottom-sheet-open"]}),()=>b.disconnect()},[]),j.useEffect(()=>{const y=()=>{if(h.current){const I=h.current.offsetHeight;X(I)}};y();const b=new ResizeObserver(y);return h.current&&b.observe(h.current),()=>{b.disconnect()}},[]);const R=j.useRef(new Map),[L,K]=j.useState(null),oe=j.useRef(0),te=j.useRef(!1),[V,U]=j.useState(!0),[G,W]=j.useState(0);j.useRef(0);const[q,J]=j.useState(()=>{try{const y=localStorage.getItem("canyon-starred-ids");if(y)return new Set(JSON.parse(y))}catch(y){console.error("Failed to load starred ids from localStorage:",y)}return new Set});j.useEffect(()=>{try{localStorage.setItem("canyon-starred-ids",JSON.stringify(Array.from(q)))}catch(y){console.error("Failed to save starred ids to localStorage:",y)}},[q]);const $=j.useRef(!1),[_,D]=j.useState(()=>e("scenario","anticipation")),[Z,Q]=j.useState(()=>e("mode","staff")),[ue,Se]=j.useState(()=>{if(!(e("mode","staff")==="visitor"))return!1;const b=e("skipHomepage","false")==="true",I=e("direct","false")==="true";return!(b||I)});j.useEffect(()=>{const y=()=>{const I=e("scenario","anticipation"),x=e("mode","staff");I!==_&&D(I),x!==Z&&Q(x)};y(),window.addEventListener("popstate",y);const b=setInterval(y,100);return()=>{window.removeEventListener("popstate",y),clearInterval(b)}},[_,Z]),j.useEffect(()=>{const y=jm();n(y);const b={},I={};I[d]={id:d,type:"staff",name:"Jeremy Bailey",avatar:"JB"},I.ai={id:"ai",type:"ai",name:"Canyon Concierge",avatar:"AI"};const x=new Map;y.forEach(C=>{C.type==="guest"&&C.id&&(x.has(C.name)||x.set(C.name,C.id),I[C.id]={id:C.id,type:"guest",name:C.name,avatar:C.avatar})}),x.forEach((C,ee)=>{if(!I[C]){const ge=y.find(ce=>ce.type==="guest"&&ce.name===ee);ge&&(I[C]={id:C,type:"guest",name:ee,avatar:ge.avatar})}}),console.log("Participant map built:",I);const P=cm(y);console.log("Grouped threads:",P.length,P),P.forEach(C=>{var $t;let ee=C.participants.map(xe=>xe.type==="guest"?xe.id:xe.type==="staff"?d:xe.type==="ai"?"ai":null).filter(Boolean);const ge=C.participants.some(xe=>xe.type==="guest");ge&&!ee.includes(d)&&ee.push(d);const ce=[...ee].sort();let le;const je=C.participants.some(xe=>xe.type==="ai"),we=ee.includes(d);C.id&&typeof C.id=="string"&&(C.id.startsWith("thread-")||C.id.startsWith("thread-staff-ai-"))?le=C.id:je&&we&&!ge?le=Yi(d):le=Gi(ce),b[le]={id:le,kind:je?"ai":"direct",participantIds:ce,messages:C.messages.map((xe,Ht)=>{let nt;return Ht<3&&console.log(`Mapping message ${Ht}:`,{msgId:xe.id,senderType:xe.sender.type,senderId:xe.sender.id,senderName:xe.sender.name,message:xe.message.substring(0,30)}),xe.sender.type==="ai"?nt="ai":xe.sender.type==="guest"?xe.sender.id?nt=xe.sender.id:(nt=ce.find(bo=>{const wn=I[bo];return wn&&wn.type==="guest"&&wn.name===xe.sender.name}),console.warn("Guest message missing sender.id, using fallback:",xe,"found:",nt)):(xe.sender.type,nt=xe.sender.id||d),nt||(console.error("Could not determine senderId for message:",xe,"thread:",C.id),nt=d),Ht<3&&console.log(`Mapped to senderId: ${nt}`),{id:xe.id,senderId:nt,text:xe.text||xe.message,createdAt:xe.timestamp}}),lastMessageAt:C.lastActivity,createdAt:(($t=C.messages[0])==null?void 0:$t.timestamp)||C.lastActivity,unreadCount:C.unreadCount||0,unread:C.unread||!1}}),console.log("Initialized threads:",Object.keys(b).length),console.log("Thread IDs:",Object.keys(b)),console.log("Thread details:",Object.values(b).map(C=>({id:C.id,participantIds:C.participantIds,messageCount:C.messages.length,lastMessageAt:C.lastMessageAt}))),c(b),$.current=!1},[_]),j.useEffect(()=>{t.length>0&&w.current&&!$.current&&setTimeout(()=>{w.current&&(w.current.scrollTop=w.current.scrollHeight,$.current=!0)},100)},[t]),j.useEffect(()=>{r!=="all"&&i===null&&a(60)},[r]),j.useEffect(()=>{if(i===null||i<=0){i===0&&s("all");return}const y=setInterval(()=>{a(b=>b<=1?(s("all"),null):b-1)},1e3);return()=>clearInterval(y)},[i]),j.useEffect(()=>{r==="all"&&a(null)},[r]),j.useEffect(()=>{const y=w.current;if(!y)return;const b=()=>{const I=y.scrollTop,x=y.scrollHeight,P=y.clientHeight,ee=x-P-I<120;ee!==V&&(U(ee),ee&&W(0))};return y.addEventListener("scroll",b,{passive:!0}),()=>{y.removeEventListener("scroll",b)}},[V]);const Ne=y=>{r===y?(s("all"),a(null)):(s(y),a(y==="all"||y==="starred"?null:60))},_e=y=>{J(b=>{const I=new Set(b);return I.has(y)?I.delete(y):I.add(y),I})},Ce=y=>{u(y)},ne=y=>{n(b=>b.map(I=>I.id===y?{...I,status:"completed"}:I)),u(null)},be=y=>{alert(`Task ${y} reassigned`),u(null)},Ye=(y,b)=>{n(I=>I.map(P=>P.id===y?{...P,location:b||null}:P))},Tt=y=>{k(y)},Ve=(y,b)=>{if(!(y!=null&&y.trim()))return{success:!1,error:"Message cannot be empty"};if(!b)return{success:!1,error:"Select someone to message"};const{type:I,participantIds:x,kind:P}=b;console.log("sendChatMessage:",{text:y,chatTarget:b,participantIds:x,kind:P});let C;if(P==="ai"){const ce=x.find(le=>le!=="ai");C=Yi(ce)}else{const ce=[...x].sort();C=Gi(ce)}const ee=g[C]!==void 0;let ge=null;return c(ce=>{const le={...ce},je=Im(le,x,P);ee||(ge=je.id),console.log("Thread found/created:",je.id,je,"isNewThread:",!ee);const we=Date.now();return Nm(je,d,y,we),console.log("Message added, thread now has",je.messages.length,"messages"),le[je.id]={...je,messages:[...je.messages],lastMessageAt:we},{...le}}),ge&&setTimeout(()=>{Dt(ge)},150),{success:!0}},Mt=(y,b,I=null)=>{if(console.log("handleSendMessage called with:",{message:y,recipients:b,primaryAction:I}),!I){if(!b||b.length===0)return{success:!1,error:"Select someone to message"};if(b.length>1)return{success:!1,error:"Only one recipient allowed"};const ce=b[0];let le=[d],je="direct";return ce.type==="ai"?(je="ai",le=[d,"ai"]):ce.type==="guest"?le=[d,ce.id]:ce.type==="staff"&&(le=[d,ce.id]),Ve(y,{type:"direct",participantIds:le,kind:je})}if(!(y!=null&&y.trim())&&(!b||b.length===0))return console.log("No message or recipients, skipping"),{success:!1};const x=b==null?void 0:b.find(ce=>ce.type==="guest"),P=b==null?void 0:b.find(ce=>ce.type==="staff");let C=null,ee=null;if(x){const ce=t.find(le=>le.type==="guest"&&le.id===x.id);C=(ce==null?void 0:ce.threadId)||`thread-${x.id}`,ee=x.id}else P&&(C=`thread-staff-${P.id}`);const ge={id:`message-${Date.now()}`,type:"concierge",message:(y==null?void 0:y.trim())||"No message",timestamp:Date.now(),sender:{name:"Jeremy Bailey",avatar:"JB",type:"staff"},recipients:(b||[]).map(ce=>({id:ce.id,name:ce.name,type:ce.type})),threadId:C,parentId:ee};console.log("Creating new item:",ge),n(ce=>{const le=[...ce,ge];return console.log("Updated feed items count:",le.length),console.log("New item in array:",le.find(je=>je.id===ge.id)),le}),Dt(ge.id),W(0),U(!0)},Ke=()=>{w.current&&(w.current.scrollTo({top:w.current.scrollHeight,behavior:"smooth"}),W(0),U(!0))},Dt=y=>{if(!(!w.current||!y))try{setTimeout(()=>{var b;try{const I=(b=R.current)==null?void 0:b.get(y);if(I&&w.current){const x=w.current,P=I.getBoundingClientRect(),C=x.getBoundingClientRect(),ee=x.scrollTop,le=P.top-C.top+ee-20;x.scrollTo({top:Math.max(0,le),behavior:"smooth"}),K(y),setTimeout(()=>{K(null)},2e3)}else Ke()}catch(I){console.error("Error in scrollToItemAndHighlight:",I),Ke()}},100)}catch(b){console.error("Error setting up scrollToItemAndHighlight:",b)}},Ln=(y,b)=>{if(console.log("Tool action:",y,b),y==="create-task"){const I=b.assignee||{name:"Jeremy Bailey",avatar:"JB",type:"staff"},x=b.posPayload?"Complete purchase":b.description||"New Task",P=b.posPayload?b.description&&b.description!=="Complete purchase"?b.description:null:b.description,C={id:`task-${Date.now()}`,type:"task",category:"service",title:x,description:P,status:"assigned",timestamp:Date.now(),assignedTo:I,forGuest:b.forGuest||null,location:b.location||null,posPayload:b.posPayload||null};n(ee=>[...ee,C]),Dt(C.id),k(null),u(null);return}if(y==="execute-pos"){const I=b.cart.reduce((ee,ge)=>ee+ge.quantity*ge.price,0),x=b.cart.map(ee=>`${ee.quantity} ${ee.name}`).join(", "),P=b.paymentMethod==="cash"?"Cash":b.paymentMethod==="card"?"Card":"Card on File",C={id:`pos-${Date.now()}`,type:"system",title:`POS completed: ${x}  $${I.toFixed(2)}  ${P}`,note:b.note||null,timestamp:Date.now(),posReceipt:{cart:b.cart,paymentMethod:b.paymentMethod,total:I,forGuest:b.forGuest}};n(ee=>[...ee,C]),Dt(C.id),W(0),U(!0);return}if(y==="check-in"){const I={id:`checkin-${Date.now()}`,type:"system",title:`Checked in: ${b.guest.name}`,note:b.note||null,timestamp:Date.now()};n(x=>[...x,I]),Dt(I.id),W(0),U(!0);return}alert(`Action: ${y}
Data: ${JSON.stringify(b,null,2)}`),k(null),u(null)},Bn=y=>{p(y)},Ft=()=>{p(null)},en=j.useMemo(()=>{const y={};return y[d]={id:d,type:"staff",name:"Jeremy Bailey",avatar:"JB"},y.ai={id:"ai",type:"ai",name:"Canyon Concierge",avatar:"AI"},t.forEach(b=>{if(b.type==="guest"&&b.id&&(y[b.id]={id:b.id,type:"guest",name:b.name,avatar:b.avatar}),b.type==="task"&&b.assignedTo&&b.assignedTo.type==="staff"){const I=`staff-${b.assignedTo.name}`;y[I]||(y[I]={id:I,type:"staff",name:b.assignedTo.name,avatar:b.assignedTo.avatar||b.assignedTo.name.charAt(0)})}}),Object.values(g).forEach(b=>{b.participantIds.forEach(I=>{if(!y[I])if(b.messages.find(x=>x.senderId===I),I==="ai")y[I]={id:"ai",type:"ai",name:"Canyon Concierge",avatar:"AI"};else if(I===d)y[I]={id:d,type:"staff",name:"Jeremy Bailey",avatar:"JB"};else{const x=t.find(P=>P.id===I);if(x&&x.type==="guest")y[I]={id:I,type:"guest",name:x.name,avatar:x.avatar};else if(I.startsWith("staff-")){const P=t.find(C=>C.type==="task"&&C.assignedTo&&C.assignedTo.type==="staff"&&`staff-${C.assignedTo.name}`===I);P&&P.assignedTo&&(y[I]={id:I,type:"staff",name:P.assignedTo.name,avatar:P.assignedTo.avatar||P.assignedTo.name.charAt(0)})}}})}),y},[t,d,g]),Re=j.useMemo(()=>{const y=Object.values(g).map(P=>{try{return Em(P,en)}catch(C){return console.error("Error converting thread to feed item:",P,C),null}}).filter(Boolean),b=t.filter(P=>P.type==="task"||P.type==="system"),x=[...y,...b].sort((P,C)=>P.timestamp-C.timestamp);return console.log("visibleFeedItems:",{threadCount:y.length,nonThreadCount:b.length,total:x.length,threadsByIdKeys:Object.keys(g).length}),x},[g,t,en]),ft=(y,b)=>b==="all"?!0:b==="starred"?q&&q instanceof Set&&q.has(y.id):b==="service"?y.type==="task":b==="guests"?y.type==="guest"||y.type==="concierge":b==="system"?y.type==="system":b==="pending"?y.type==="pending_draft"||y.status==="pending_review":!1,jt=j.useRef(r);j.useEffect(()=>{var y,b;if(jt.current==="all"&&r!=="all"){if(oe.current=0,f||((y=document.activeElement)==null?void 0:y.tagName)==="INPUT"||((b=document.activeElement)==null?void 0:b.tagName)==="TEXTAREA"){jt.current=r;return}const I=Re.filter(C=>ft(C,r));if(console.log("Auto-scroll: Filter activated",{filter:r,matchingItemsCount:I.length,allItemsCount:Re.length,starredIdsSize:(q==null?void 0:q.size)||0}),I.length===0){console.log("Auto-scroll: No matching items found"),jt.current=r;return}const x=I[I.length-1];console.log("Auto-scroll: Target item",{itemId:x.id,itemType:x.type,timestamp:x.timestamp});const P=R.current.get(x.id);console.log("Auto-scroll: Element lookup",{hasElement:!!P,refsMapSize:R.current.size,allRefIds:Array.from(R.current.keys())}),P&&w.current?requestAnimationFrame(()=>{requestAnimationFrame(()=>{const C=R.current.get(x.id);if(!C||!w.current){console.log("Auto-scroll: Element not found or container missing",{itemId:x.id});return}const ee=Date.now()-oe.current;if(ee<200&&ee>0){console.log("Auto-scroll: User scrolled after filter activation, aborting");return}const ge=w.current,ce=ge.getBoundingClientRect(),le=C.getBoundingClientRect(),je=ge.scrollTop,we=le.top-ce.top+je,Ht=60+12+12,nt=we-Ht;console.log("Auto-scroll: Scrolling to item",{itemId:x.id,currentScrollTop:je,elementTopRelativeToContainer:we,targetScrollTop:nt,offset:Ht}),ge.scrollTo({top:Math.max(0,nt),behavior:"smooth"})})}):console.log("Auto-scroll: Target element or container not found",{hasTargetElement:!!P,hasFeedRef:!!w.current,targetItemId:x==null?void 0:x.id})}jt.current=r},[r,Re,q,f]),j.useEffect(()=>{const y=w.current;if(!y)return;const b=()=>{oe.current=Date.now(),te.current=!0,clearTimeout(te.timeout),te.timeout=setTimeout(()=>{te.current=!1},300)};return y.addEventListener("scroll",b,{passive:!0}),()=>{y.removeEventListener("scroll",b),te.timeout&&clearTimeout(te.timeout)}},[]);const O=(y,b)=>{var x;if(!y||!b||!b.trim()){console.warn("Invalid thread reply:",{threadId:y,message:b});return}const I=Ve(b.trim(),{type:"direct",participantIds:((x=g[y])==null?void 0:x.participantIds)||[]});I.success?console.log("Thread reply sent successfully"):console.error("Failed to send thread reply:",I.error)};if(Z!=="visitor"&&m){let y,b;if(m.threadId){if(y=m.threadId,b=g[y],!b){const I=Object.values(g).find(x=>{var P;return x.id===y||((P=x.id)==null?void 0:P.toLowerCase())===(y==null?void 0:y.toLowerCase())});I&&(b=I,y=I.id)}if(!b&&m.thread){const I=m.thread;b={id:I.id,participantIds:I.participants.map(x=>x.id),participants:I.participants,messages:I.messages.map(x=>{var P,C,ee;return{id:x.id,senderId:((P=x.sender)==null?void 0:P.id)||(((C=x.sender)==null?void 0:C.type)==="ai"?"ai":(ee=x.sender)==null?void 0:ee.id),text:x.message||x.text,createdAt:x.timestamp||x.createdAt}}),lastMessageAt:I.lastActivity,createdAt:I.lastActivity,unreadCount:I.unreadCount||0,unread:I.unread||!1}}}else if(m.thread){if(y=m.thread.id||m.id,b=g[y],!b){const I=Object.values(g).find(x=>{var P;return x.id===y||((P=x.id)==null?void 0:P.toLowerCase())===(y==null?void 0:y.toLowerCase())});I&&(b=I,y=I.id)}if(!b&&m.thread){const I=m.thread;b={id:I.id,participantIds:I.participants.map(x=>x.id),participants:I.participants,messages:I.messages.map(x=>{var P,C,ee;return{id:x.id,senderId:((P=x.sender)==null?void 0:P.id)||(((C=x.sender)==null?void 0:C.type)==="ai"?"ai":(ee=x.sender)==null?void 0:ee.id),text:x.message||x.text,createdAt:x.timestamp||x.createdAt}}),lastMessageAt:I.lastActivity,createdAt:I.lastActivity,unreadCount:I.unreadCount||0,unread:I.unread||!1}}}else m.id&&(y=m.id,b=Object.values(g).find(I=>I.participantIds&&I.participantIds.includes(y)));return b?o.jsx(mm,{thread:b,onBack:Ft,onReply:O,participantMap:en,currentUserId:d}):(console.error("Thread not found:",{openThread:m,threadId:y,availableThreads:Object.keys(g)}),null)}return Z==="visitor"?o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:ue?1:2},children:o.jsx(xm,{itemRefs:R,currentUserId:d,highlightedItemId:L,feedRef:w,composerRef:h})}),ue&&o.jsx(km,{onEnterFeed:()=>Se(!1)})]}):o.jsx(gm,{feedItems:t,visibleFeedItems:Re,activeFilter:r,onFilterChange:Ne,starredIds:q,onToggleStar:_e,selectedContext:l,onItemClick:Ce,onOpenThread:Bn,onClearSelectedContext:()=>u(null),itemRefs:R,onUpdateTaskLocation:Ye,onCompleteTask:ne,currentUserId:d,highlightedItemId:L,atBottom:V,isBottomSheetOpen:v,scrollToBottom:Ke,composerHeight:T,feedRef:w,composerRef:h,toolMode:f,onToolModeChange:Tt,onToolAction:Ln,onReassignTask:be,onSendMessage:(y,b,I)=>Mt(y,b,I)})}const Rm=Qo.createRoot(document.getElementById("root"));Rm.render(o.jsx(fu.StrictMode,{children:o.jsx(zm,{})}));
